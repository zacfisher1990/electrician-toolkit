var jS=Object.defineProperty;var ES=(r,e,t)=>e in r?jS(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ur=(r,e,t)=>ES(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();var aI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rx(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Cm={exports:{}},zd={},km={exports:{}},ur={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e5;function IS(){if(e5)return ur;e5=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),w=Symbol.iterator;function C(ee){return ee===null||typeof ee!="object"?null:(ee=w&&ee[w]||ee["@@iterator"],typeof ee=="function"?ee:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,R={};function z(ee,D,q){this.props=ee,this.context=D,this.refs=R,this.updater=q||b}z.prototype.isReactComponent={},z.prototype.setState=function(ee,D){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,D,"setState")},z.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function j(){}j.prototype=z.prototype;function U(ee,D,q){this.props=ee,this.context=D,this.refs=R,this.updater=q||b}var H=U.prototype=new j;H.constructor=U,V(H,z.prototype),H.isPureReactComponent=!0;var B=Array.isArray,re=Object.prototype.hasOwnProperty,ce={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function A(ee,D,q){var X,de={},me=null,we=null;if(D!=null)for(X in D.ref!==void 0&&(we=D.ref),D.key!==void 0&&(me=""+D.key),D)re.call(D,X)&&!N.hasOwnProperty(X)&&(de[X]=D[X]);var Ae=arguments.length-2;if(Ae===1)de.children=q;else if(1<Ae){for(var Ce=Array(Ae),Be=0;Be<Ae;Be++)Ce[Be]=arguments[Be+2];de.children=Ce}if(ee&&ee.defaultProps)for(X in Ae=ee.defaultProps,Ae)de[X]===void 0&&(de[X]=Ae[X]);return{$$typeof:r,type:ee,key:me,ref:we,props:de,_owner:ce.current}}function T(ee,D){return{$$typeof:r,type:ee.type,key:D,ref:ee.ref,props:ee.props,_owner:ee._owner}}function F(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===r}function k(ee){var D={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(q){return D[q]})}var v=/\/+/g;function L(ee,D){return typeof ee=="object"&&ee!==null&&ee.key!=null?k(""+ee.key):D.toString(36)}function M(ee,D,q,X,de){var me=typeof ee;(me==="undefined"||me==="boolean")&&(ee=null);var we=!1;if(ee===null)we=!0;else switch(me){case"string":case"number":we=!0;break;case"object":switch(ee.$$typeof){case r:case e:we=!0}}if(we)return we=ee,de=de(we),ee=X===""?"."+L(we,0):X,B(de)?(q="",ee!=null&&(q=ee.replace(v,"$&/")+"/"),M(de,D,q,"",function(Be){return Be})):de!=null&&(F(de)&&(de=T(de,q+(!de.key||we&&we.key===de.key?"":(""+de.key).replace(v,"$&/")+"/")+ee)),D.push(de)),1;if(we=0,X=X===""?".":X+":",B(ee))for(var Ae=0;Ae<ee.length;Ae++){me=ee[Ae];var Ce=X+L(me,Ae);we+=M(me,D,q,Ce,de)}else if(Ce=C(ee),typeof Ce=="function")for(ee=Ce.call(ee),Ae=0;!(me=ee.next()).done;)me=me.value,Ce=X+L(me,Ae++),we+=M(me,D,q,Ce,de);else if(me==="object")throw D=String(ee),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return we}function $(ee,D,q){if(ee==null)return ee;var X=[],de=0;return M(ee,X,"","",function(me){return D.call(q,me,de++)}),X}function oe(ee){if(ee._status===-1){var D=ee._result;D=D(),D.then(function(q){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=q)},function(q){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=q)}),ee._status===-1&&(ee._status=0,ee._result=D)}if(ee._status===1)return ee._result.default;throw ee._result}var se={current:null},ie={transition:null},ye={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:ie,ReactCurrentOwner:ce};function xe(){throw Error("act(...) is not supported in production builds of React.")}return ur.Children={map:$,forEach:function(ee,D,q){$(ee,function(){D.apply(this,arguments)},q)},count:function(ee){var D=0;return $(ee,function(){D++}),D},toArray:function(ee){return $(ee,function(D){return D})||[]},only:function(ee){if(!F(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},ur.Component=z,ur.Fragment=t,ur.Profiler=o,ur.PureComponent=U,ur.StrictMode=n,ur.Suspense=f,ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,ur.act=xe,ur.cloneElement=function(ee,D,q){if(ee==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ee+".");var X=V({},ee.props),de=ee.key,me=ee.ref,we=ee._owner;if(D!=null){if(D.ref!==void 0&&(me=D.ref,we=ce.current),D.key!==void 0&&(de=""+D.key),ee.type&&ee.type.defaultProps)var Ae=ee.type.defaultProps;for(Ce in D)re.call(D,Ce)&&!N.hasOwnProperty(Ce)&&(X[Ce]=D[Ce]===void 0&&Ae!==void 0?Ae[Ce]:D[Ce])}var Ce=arguments.length-2;if(Ce===1)X.children=q;else if(1<Ce){Ae=Array(Ce);for(var Be=0;Be<Ce;Be++)Ae[Be]=arguments[Be+2];X.children=Ae}return{$$typeof:r,type:ee.type,key:de,ref:me,props:X,_owner:we}},ur.createContext=function(ee){return ee={$$typeof:c,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ee.Provider={$$typeof:a,_context:ee},ee.Consumer=ee},ur.createElement=A,ur.createFactory=function(ee){var D=A.bind(null,ee);return D.type=ee,D},ur.createRef=function(){return{current:null}},ur.forwardRef=function(ee){return{$$typeof:u,render:ee}},ur.isValidElement=F,ur.lazy=function(ee){return{$$typeof:g,_payload:{_status:-1,_result:ee},_init:oe}},ur.memo=function(ee,D){return{$$typeof:d,type:ee,compare:D===void 0?null:D}},ur.startTransition=function(ee){var D=ie.transition;ie.transition={};try{ee()}finally{ie.transition=D}},ur.unstable_act=xe,ur.useCallback=function(ee,D){return se.current.useCallback(ee,D)},ur.useContext=function(ee){return se.current.useContext(ee)},ur.useDebugValue=function(){},ur.useDeferredValue=function(ee){return se.current.useDeferredValue(ee)},ur.useEffect=function(ee,D){return se.current.useEffect(ee,D)},ur.useId=function(){return se.current.useId()},ur.useImperativeHandle=function(ee,D,q){return se.current.useImperativeHandle(ee,D,q)},ur.useInsertionEffect=function(ee,D){return se.current.useInsertionEffect(ee,D)},ur.useLayoutEffect=function(ee,D){return se.current.useLayoutEffect(ee,D)},ur.useMemo=function(ee,D){return se.current.useMemo(ee,D)},ur.useReducer=function(ee,D,q){return se.current.useReducer(ee,D,q)},ur.useRef=function(ee){return se.current.useRef(ee)},ur.useState=function(ee){return se.current.useState(ee)},ur.useSyncExternalStore=function(ee,D,q){return se.current.useSyncExternalStore(ee,D,q)},ur.useTransition=function(){return se.current.useTransition()},ur.version="18.3.1",ur}var t5;function Q0(){return t5||(t5=1,km.exports=IS()),km.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r5;function RS(){if(r5)return zd;r5=1;var r=Q0(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,f,d){var g,w={},C=null,b=null;d!==void 0&&(C=""+d),f.key!==void 0&&(C=""+f.key),f.ref!==void 0&&(b=f.ref);for(g in f)n.call(f,g)&&!a.hasOwnProperty(g)&&(w[g]=f[g]);if(u&&u.defaultProps)for(g in f=u.defaultProps,f)w[g]===void 0&&(w[g]=f[g]);return{$$typeof:e,type:u,key:C,ref:b,props:w,_owner:o.current}}return zd.Fragment=t,zd.jsx=c,zd.jsxs=c,zd}var n5;function PS(){return n5||(n5=1,Cm.exports=RS()),Cm.exports}var i=PS(),pe=Q0();const NS=rx(pe);var df={},jm={exports:{}},Vo={},Em={exports:{}},Im={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i5;function LS(){return i5||(i5=1,(function(r){function e(ie,ye){var xe=ie.length;ie.push(ye);e:for(;0<xe;){var ee=xe-1>>>1,D=ie[ee];if(0<o(D,ye))ie[ee]=ye,ie[xe]=D,xe=ee;else break e}}function t(ie){return ie.length===0?null:ie[0]}function n(ie){if(ie.length===0)return null;var ye=ie[0],xe=ie.pop();if(xe!==ye){ie[0]=xe;e:for(var ee=0,D=ie.length,q=D>>>1;ee<q;){var X=2*(ee+1)-1,de=ie[X],me=X+1,we=ie[me];if(0>o(de,xe))me<D&&0>o(we,de)?(ie[ee]=we,ie[me]=xe,ee=me):(ie[ee]=de,ie[X]=xe,ee=X);else if(me<D&&0>o(we,xe))ie[ee]=we,ie[me]=xe,ee=me;else break e}}return ye}function o(ie,ye){var xe=ie.sortIndex-ye.sortIndex;return xe!==0?xe:ie.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var f=[],d=[],g=1,w=null,C=3,b=!1,V=!1,R=!1,z=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(ie){for(var ye=t(d);ye!==null;){if(ye.callback===null)n(d);else if(ye.startTime<=ie)n(d),ye.sortIndex=ye.expirationTime,e(f,ye);else break;ye=t(d)}}function B(ie){if(R=!1,H(ie),!V)if(t(f)!==null)V=!0,oe(re);else{var ye=t(d);ye!==null&&se(B,ye.startTime-ie)}}function re(ie,ye){V=!1,R&&(R=!1,j(A),A=-1),b=!0;var xe=C;try{for(H(ye),w=t(f);w!==null&&(!(w.expirationTime>ye)||ie&&!k());){var ee=w.callback;if(typeof ee=="function"){w.callback=null,C=w.priorityLevel;var D=ee(w.expirationTime<=ye);ye=r.unstable_now(),typeof D=="function"?w.callback=D:w===t(f)&&n(f),H(ye)}else n(f);w=t(f)}if(w!==null)var q=!0;else{var X=t(d);X!==null&&se(B,X.startTime-ye),q=!1}return q}finally{w=null,C=xe,b=!1}}var ce=!1,N=null,A=-1,T=5,F=-1;function k(){return!(r.unstable_now()-F<T)}function v(){if(N!==null){var ie=r.unstable_now();F=ie;var ye=!0;try{ye=N(!0,ie)}finally{ye?L():(ce=!1,N=null)}}else ce=!1}var L;if(typeof U=="function")L=function(){U(v)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,$=M.port2;M.port1.onmessage=v,L=function(){$.postMessage(null)}}else L=function(){z(v,0)};function oe(ie){N=ie,ce||(ce=!0,L())}function se(ie,ye){A=z(function(){ie(r.unstable_now())},ye)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ie){ie.callback=null},r.unstable_continueExecution=function(){V||b||(V=!0,oe(re))},r.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<ie?Math.floor(1e3/ie):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_getFirstCallbackNode=function(){return t(f)},r.unstable_next=function(ie){switch(C){case 1:case 2:case 3:var ye=3;break;default:ye=C}var xe=C;C=ye;try{return ie()}finally{C=xe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ie,ye){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var xe=C;C=ie;try{return ye()}finally{C=xe}},r.unstable_scheduleCallback=function(ie,ye,xe){var ee=r.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?ee+xe:ee):xe=ee,ie){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=xe+D,ie={id:g++,callback:ye,priorityLevel:ie,startTime:xe,expirationTime:D,sortIndex:-1},xe>ee?(ie.sortIndex=xe,e(d,ie),t(f)===null&&ie===t(d)&&(R?(j(A),A=-1):R=!0,se(B,xe-ee))):(ie.sortIndex=D,e(f,ie),V||b||(V=!0,oe(re))),ie},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(ie){var ye=C;return function(){var xe=C;C=ye;try{return ie.apply(this,arguments)}finally{C=xe}}}})(Im)),Im}var o5;function BS(){return o5||(o5=1,Em.exports=LS()),Em.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s5;function FS(){if(s5)return Vo;s5=1;var r=Q0(),e=BS();function t(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,o={};function a(s,l){c(s,l),c(s+"Capture",l)}function c(s,l){for(o[s]=l,s=0;s<l.length;s++)n.add(l[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},w={};function C(s){return f.call(w,s)?!0:f.call(g,s)?!1:d.test(s)?w[s]=!0:(g[s]=!0,!1)}function b(s,l,h,y){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:h!==null?!h.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function V(s,l,h,y){if(l===null||typeof l>"u"||b(s,l,h,y))return!0;if(y)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function R(s,l,h,y,_,P,J){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=_,this.mustUseProperty=h,this.propertyName=s,this.type=l,this.sanitizeURL=P,this.removeEmptyString=J}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){z[s]=new R(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];z[l]=new R(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){z[s]=new R(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){z[s]=new R(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){z[s]=new R(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){z[s]=new R(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){z[s]=new R(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){z[s]=new R(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){z[s]=new R(s,5,!1,s.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function U(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(j,U);z[l]=new R(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(j,U);z[l]=new R(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(j,U);z[l]=new R(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){z[s]=new R(s,1,!1,s.toLowerCase(),null,!1,!1)}),z.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){z[s]=new R(s,1,!1,s.toLowerCase(),null,!0,!0)});function H(s,l,h,y){var _=z.hasOwnProperty(l)?z[l]:null;(_!==null?_.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(V(l,h,_,y)&&(h=null),y||_===null?C(l)&&(h===null?s.removeAttribute(l):s.setAttribute(l,""+h)):_.mustUseProperty?s[_.propertyName]=h===null?_.type===3?!1:"":h:(l=_.attributeName,y=_.attributeNamespace,h===null?s.removeAttribute(l):(_=_.type,h=_===3||_===4&&h===!0?"":""+h,y?s.setAttributeNS(y,l,h):s.setAttribute(l,h))))}var B=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,re=Symbol.for("react.element"),ce=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),k=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ye(s){return s===null||typeof s!="object"?null:(s=ie&&s[ie]||s["@@iterator"],typeof s=="function"?s:null)}var xe=Object.assign,ee;function D(s){if(ee===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);ee=l&&l[1]||""}return`
`+ee+s}var q=!1;function X(s,l){if(!s||q)return"";q=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Le){var y=Le}Reflect.construct(s,[],l)}else{try{l.call()}catch(Le){y=Le}s.call(l.prototype)}else{try{throw Error()}catch(Le){y=Le}s()}}catch(Le){if(Le&&y&&typeof Le.stack=="string"){for(var _=Le.stack.split(`
`),P=y.stack.split(`
`),J=_.length-1,fe=P.length-1;1<=J&&0<=fe&&_[J]!==P[fe];)fe--;for(;1<=J&&0<=fe;J--,fe--)if(_[J]!==P[fe]){if(J!==1||fe!==1)do if(J--,fe--,0>fe||_[J]!==P[fe]){var be=`
`+_[J].replace(" at new "," at ");return s.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",s.displayName)),be}while(1<=J&&0<=fe);break}}}finally{q=!1,Error.prepareStackTrace=h}return(s=s?s.displayName||s.name:"")?D(s):""}function de(s){switch(s.tag){case 5:return D(s.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return s=X(s.type,!1),s;case 11:return s=X(s.type.render,!1),s;case 1:return s=X(s.type,!0),s;default:return""}}function me(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case ce:return"Portal";case T:return"Profiler";case A:return"StrictMode";case L:return"Suspense";case M:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case k:return(s.displayName||"Context")+".Consumer";case F:return(s._context.displayName||"Context")+".Provider";case v:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case $:return l=s.displayName||null,l!==null?l:me(s.type)||"Memo";case oe:l=s._payload,s=s._init;try{return me(s(l))}catch{}}return null}function we(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(l);case 8:return l===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ae(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ce(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Be(s){var l=Ce(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),y=""+s[l];if(!s.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,P=h.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return _.call(this)},set:function(J){y=""+J,P.call(this,J)}}),Object.defineProperty(s,l,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(J){y=""+J},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function qe(s){s._valueTracker||(s._valueTracker=Be(s))}function et(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var h=l.getValue(),y="";return s&&(y=Ce(s)?s.checked?"true":"false":s.value),s=y,s!==h?(l.setValue(s),!0):!1}function Qe(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Fe(s,l){var h=l.checked;return xe({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??s._wrapperState.initialChecked})}function he(s,l){var h=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;h=Ae(l.value!=null?l.value:h),s._wrapperState={initialChecked:y,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Pt(s,l){l=l.checked,l!=null&&H(s,"checked",l,!1)}function Ct(s,l){Pt(s,l);var h=Ae(l.value),y=l.type;if(h!=null)y==="number"?(h===0&&s.value===""||s.value!=h)&&(s.value=""+h):s.value!==""+h&&(s.value=""+h);else if(y==="submit"||y==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?Ue(s,l.type,h):l.hasOwnProperty("defaultValue")&&Ue(s,l.type,Ae(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function vt(s,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,h||l===s.value||(s.value=l),s.defaultValue=l}h=s.name,h!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,h!==""&&(s.name=h)}function Ue(s,l,h){(l!=="number"||Qe(s.ownerDocument)!==s)&&(h==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+h&&(s.defaultValue=""+h))}var nt=Array.isArray;function tt(s,l,h,y){if(s=s.options,l){l={};for(var _=0;_<h.length;_++)l["$"+h[_]]=!0;for(h=0;h<s.length;h++)_=l.hasOwnProperty("$"+s[h].value),s[h].selected!==_&&(s[h].selected=_),_&&y&&(s[h].defaultSelected=!0)}else{for(h=""+Ae(h),l=null,_=0;_<s.length;_++){if(s[_].value===h){s[_].selected=!0,y&&(s[_].defaultSelected=!0);return}l!==null||s[_].disabled||(l=s[_])}l!==null&&(l.selected=!0)}}function Gt(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return xe({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function wt(s,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(t(92));if(nt(h)){if(1<h.length)throw Error(t(93));h=h[0]}l=h}l==null&&(l=""),h=l}s._wrapperState={initialValue:Ae(h)}}function hr(s,l){var h=Ae(l.value),y=Ae(l.defaultValue);h!=null&&(h=""+h,h!==s.value&&(s.value=h),l.defaultValue==null&&s.defaultValue!==h&&(s.defaultValue=h)),y!=null&&(s.defaultValue=""+y)}function Nt(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function Dt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yr(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?Dt(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Ft,St=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,y,_){MSApp.execUnsafeLocalFunction(function(){return s(l,h,y,_)})}:s})(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(Ft=Ft||document.createElement("div"),Ft.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Ft.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function kt(s,l){if(l){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=l;return}}s.textContent=l}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cr=["Webkit","ms","Moz","O"];Object.keys(ft).forEach(function(s){Cr.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),ft[l]=ft[s]})});function rr(s,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||ft.hasOwnProperty(s)&&ft[s]?(""+l).trim():l+"px"}function dt(s,l){s=s.style;for(var h in l)if(l.hasOwnProperty(h)){var y=h.indexOf("--")===0,_=rr(h,l[h],y);h==="float"&&(h="cssFloat"),y?s.setProperty(h,_):s[h]=_}}var Wt=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ir(s,l){if(l){if(Wt[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function At(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xt=null;function Vt(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var kr=null,Br=null,Mt=null;function zt(s){if(s=Il(s)){if(typeof kr!="function")throw Error(t(280));var l=s.stateNode;l&&(l=Ac(l),kr(s.stateNode,s.type,l))}}function or(s){Br?Mt?Mt.push(s):Mt=[s]:Br=s}function Di(){if(Br){var s=Br,l=Mt;if(Mt=Br=null,zt(s),l)for(s=0;s<l.length;s++)zt(l[s])}}function Rn(s,l){return s(l)}function _o(){}var Pn=!1;function jt(s,l,h){if(Pn)return s(l,h);Pn=!0;try{return Rn(s,l,h)}finally{Pn=!1,(Br!==null||Mt!==null)&&(_o(),Di())}}function ki(s,l){var h=s.stateNode;if(h===null)return null;var y=Ac(h);if(y===null)return null;h=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(s=s.type,y=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!y;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(t(231,l,typeof h));return h}var ci=!1;if(u)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){ci=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{ci=!1}function ji(s,l,h,y,_,P,J,fe,be){var Le=Array.prototype.slice.call(arguments,3);try{l.apply(h,Le)}catch(Je){this.onError(Je)}}var Tr=!1,Fr=null,sn=!1,qn=null,$o={onError:function(s){Tr=!0,Fr=s}};function Wi(s,l,h,y,_,P,J,fe,be){Tr=!1,Fr=null,ji.apply($o,arguments)}function $i(s,l,h,y,_,P,J,fe,be){if(Wi.apply(this,arguments),Tr){if(Tr){var Le=Fr;Tr=!1,Fr=null}else throw Error(t(198));sn||(sn=!0,qn=Le)}}function mn(s){var l=s,h=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(h=l.return),s=l.return;while(s)}return l.tag===3?h:null}function Ei(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function Ii(s){if(mn(s)!==s)throw Error(t(188))}function cs(s){var l=s.alternate;if(!l){if(l=mn(s),l===null)throw Error(t(188));return l!==s?null:s}for(var h=s,y=l;;){var _=h.return;if(_===null)break;var P=_.alternate;if(P===null){if(y=_.return,y!==null){h=y;continue}break}if(_.child===P.child){for(P=_.child;P;){if(P===h)return Ii(_),s;if(P===y)return Ii(_),l;P=P.sibling}throw Error(t(188))}if(h.return!==y.return)h=_,y=P;else{for(var J=!1,fe=_.child;fe;){if(fe===h){J=!0,h=_,y=P;break}if(fe===y){J=!0,y=_,h=P;break}fe=fe.sibling}if(!J){for(fe=P.child;fe;){if(fe===h){J=!0,h=P,y=_;break}if(fe===y){J=!0,y=P,h=_;break}fe=fe.sibling}if(!J)throw Error(t(189))}}if(h.alternate!==y)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?s:l}function co(s){return s=cs(s),s!==null?uo(s):null}function uo(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=uo(s);if(l!==null)return l;s=s.sibling}return null}var us=e.unstable_scheduleCallback,Uo=e.unstable_cancelCallback,To=e.unstable_shouldYield,qo=e.unstable_requestPaint,jr=e.unstable_now,xl=e.unstable_getCurrentPriorityLevel,Ps=e.unstable_ImmediatePriority,ui=e.unstable_UserBlockingPriority,Ho=e.unstable_NormalPriority,aa=e.unstable_LowPriority,ds=e.unstable_IdlePriority,hs=null,di=null;function za(s){if(di&&typeof di.onCommitFiberRoot=="function")try{di.onCommitFiberRoot(hs,s,void 0,(s.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:fs,Ao=Math.log,vr=Math.LN2;function fs(s){return s>>>=0,s===0?32:31-(Ao(s)/vr|0)|0}var ho=64,hi=4194304;function sr(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ln(s,l){var h=s.pendingLanes;if(h===0)return 0;var y=0,_=s.suspendedLanes,P=s.pingedLanes,J=h&268435455;if(J!==0){var fe=J&~_;fe!==0?y=sr(fe):(P&=J,P!==0&&(y=sr(P)))}else J=h&~_,J!==0?y=sr(J):P!==0&&(y=sr(P));if(y===0)return 0;if(l!==0&&l!==y&&(l&_)===0&&(_=y&-y,P=l&-l,_>=P||_===16&&(P&4194240)!==0))return l;if((y&4)!==0&&(y|=h&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=y;0<l;)h=31-Hn(l),_=1<<h,y|=s[h],l&=~_;return y}function fo(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zr(s,l){for(var h=s.suspendedLanes,y=s.pingedLanes,_=s.expirationTimes,P=s.pendingLanes;0<P;){var J=31-Hn(P),fe=1<<J,be=_[J];be===-1?((fe&h)===0||(fe&y)!==0)&&(_[J]=fo(fe,l)):be<=l&&(s.expiredLanes|=fe),P&=~fe}}function Ns(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Oa(){var s=ho;return ho<<=1,(ho&4194240)===0&&(ho=64),s}function Va(s){for(var l=[],h=0;31>h;h++)l.push(s);return l}function Ls(s,l,h){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-Hn(l),s[l]=h}function Co(s,l){var h=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var y=s.eventTimes;for(s=s.expirationTimes;0<h;){var _=31-Hn(h),P=1<<_;l[_]=0,y[_]=-1,s[_]=-1,h&=~P}}function la(s,l){var h=s.entangledLanes|=l;for(s=s.entanglements;h;){var y=31-Hn(h),_=1<<y;_&l|s[y]&l&&(s[y]|=l),h&=~_}}var nr=0;function ri(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Bs,ca,Ma,Da,Fs,fi=!1,po=[],ko=null,pi=null,gn=null,It=new Map,Go=new Map,Ri=[],vl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ps(s,l){switch(s){case"focusin":case"focusout":ko=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":gn=null;break;case"pointerover":case"pointerout":It.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(l.pointerId)}}function Bn(s,l,h,y,_,P){return s===null||s.nativeEvent!==P?(s={blockedOn:l,domEventName:h,eventSystemFlags:y,nativeEvent:P,targetContainers:[_]},l!==null&&(l=Il(l),l!==null&&ca(l)),s):(s.eventSystemFlags|=y,l=s.targetContainers,_!==null&&l.indexOf(_)===-1&&l.push(_),s)}function jo(s,l,h,y,_){switch(l){case"focusin":return ko=Bn(ko,s,l,h,y,_),!0;case"dragenter":return pi=Bn(pi,s,l,h,y,_),!0;case"mouseover":return gn=Bn(gn,s,l,h,y,_),!0;case"pointerover":var P=_.pointerId;return It.set(P,Bn(It.get(P)||null,s,l,h,y,_)),!0;case"gotpointercapture":return P=_.pointerId,Go.set(P,Bn(Go.get(P)||null,s,l,h,y,_)),!0}return!1}function ua(s){var l=va(s.target);if(l!==null){var h=mn(l);if(h!==null){if(l=h.tag,l===13){if(l=Ei(h),l!==null){s.blockedOn=l,Fs(s.priority,function(){Ma(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Er(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var h=ms(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(h===null){h=s.nativeEvent;var y=new h.constructor(h.type,h);Xt=y,h.target.dispatchEvent(y),Xt=null}else return l=Il(h),l!==null&&ca(l),s.blockedOn=h,!1;l.shift()}return!0}function zs(s,l,h){Er(s)&&h.delete(l)}function Wa(){fi=!1,ko!==null&&Er(ko)&&(ko=null),pi!==null&&Er(pi)&&(pi=null),gn!==null&&Er(gn)&&(gn=null),It.forEach(zs),Go.forEach(zs)}function Ui(s,l){s.blockedOn===l&&(s.blockedOn=null,fi||(fi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Wa)))}function mo(s){function l(_){return Ui(_,s)}if(0<po.length){Ui(po[0],s);for(var h=1;h<po.length;h++){var y=po[h];y.blockedOn===s&&(y.blockedOn=null)}}for(ko!==null&&Ui(ko,s),pi!==null&&Ui(pi,s),gn!==null&&Ui(gn,s),It.forEach(l),Go.forEach(l),h=0;h<Ri.length;h++)y=Ri[h],y.blockedOn===s&&(y.blockedOn=null);for(;0<Ri.length&&(h=Ri[0],h.blockedOn===null);)ua(h),h.blockedOn===null&&Ri.shift()}var qi=B.ReactCurrentBatchConfig,Ko=!0;function Hi(s,l,h,y){var _=nr,P=qi.transition;qi.transition=null;try{nr=1,Jo(s,l,h,y)}finally{nr=_,qi.transition=P}}function da(s,l,h,y){var _=nr,P=qi.transition;qi.transition=null;try{nr=4,Jo(s,l,h,y)}finally{nr=_,qi.transition=P}}function Jo(s,l,h,y){if(Ko){var _=ms(s,l,h,y);if(_===null)Sc(s,l,y,mi,h),ps(s,y);else if(jo(_,s,l,h,y))y.stopPropagation();else if(ps(s,y),l&4&&-1<vl.indexOf(s)){for(;_!==null;){var P=Il(_);if(P!==null&&Bs(P),P=ms(s,l,h,y),P===null&&Sc(s,l,y,mi,h),P===_)break;_=P}_!==null&&y.stopPropagation()}else Sc(s,l,y,null,h)}}var mi=null;function ms(s,l,h,y){if(mi=null,s=Vt(y),s=va(s),s!==null)if(l=mn(s),l===null)s=null;else if(h=l.tag,h===13){if(s=Ei(l),s!==null)return s;s=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return mi=s,null}function Yo(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xl()){case Ps:return 1;case ui:return 4;case Ho:case aa:return 16;case ds:return 536870912;default:return 16}default:return 16}}var ni=null,Eo=null,Io=null;function $a(){if(Io)return Io;var s,l=Eo,h=l.length,y,_="value"in ni?ni.value:ni.textContent,P=_.length;for(s=0;s<h&&l[s]===_[s];s++);var J=h-s;for(y=1;y<=J&&l[h-y]===_[P-y];y++);return Io=_.slice(s,1<y?1-y:void 0)}function Pi(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Gn(){return!0}function ha(){return!1}function Fn(s){function l(h,y,_,P,J){this._reactName=h,this._targetInst=_,this.type=y,this.nativeEvent=P,this.target=J,this.currentTarget=null;for(var fe in s)s.hasOwnProperty(fe)&&(h=s[fe],this[fe]=h?h(P):P[fe]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Gn:ha,this.isPropagationStopped=ha,this}return xe(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){},isPersistent:Gn}),l}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gs=Fn(gi),S=xe({},gi,{view:0,detail:0}),G=Fn(S),ue,ge,Te,Me=xe({},S,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ot,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Te&&(Te&&s.type==="mousemove"?(ue=s.screenX-Te.screenX,ge=s.screenY-Te.screenY):ge=ue=0,Te=s),ue)},movementY:function(s){return"movementY"in s?s.movementY:ge}}),He=Fn(Me),st=xe({},Me,{dataTransfer:0}),pt=Fn(st),Rt=xe({},S,{relatedTarget:0}),yt=Fn(Rt),fr=xe({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Hr=Fn(fr),Or=xe({},gi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),m=Fn(Or),I=xe({},gi,{data:0}),W=Fn(I),te={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ke={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ze(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Pe[s])?!!l[s]:!1}function Ot(){return Ze}var Vr=xe({},S,{key:function(s){if(s.key){var l=te[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Pi(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ke[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ot,charCode:function(s){return s.type==="keypress"?Pi(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Pi(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),lr=Fn(Vr),Gr=xe({},Me,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zn=Fn(Gr),Ni=xe({},S,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ot}),Jr=Fn(Ni),yi=xe({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ro=Fn(yi),Os=xe({},Me,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),mc=Fn(Os),an=[9,13,27,32],Qo=u&&"CompositionEvent"in window,ys=null;u&&"documentMode"in document&&(ys=document.documentMode);var ou=u&&"TextEvent"in window&&!ys,go=u&&(!Qo||ys&&8<ys&&11>=ys),fa=" ",bl=!1;function wl(s,l){switch(s){case"keyup":return an.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vs(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Po=!1;function yo(s,l){switch(s){case"compositionend":return Vs(l);case"keypress":return l.which!==32?null:(bl=!0,fa);case"textInput":return s=l.data,s===fa&&bl?null:s;default:return null}}function xo(s,l){if(Po)return s==="compositionend"||!Qo&&wl(s,l)?(s=$a(),Io=Eo=ni=null,Po=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return go&&l.locale!=="ko"?null:l.data;default:return null}}var pa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xs(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!pa[s.type]:l==="textarea"}function Ms(s,l,h,y){or(y),l=uu(l,"onChange"),0<l.length&&(h=new gs("onChange","change",null,h,y),s.push({event:h,listeners:l}))}var Ds=null,vs=null;function yn(s){bc(s,0)}function Ua(s){var l=el(s);if(et(l))return s}function bs(s,l){if(s==="change")return l}var Xo=!1;if(u){var qa;if(u){var Ha="oninput"in document;if(!Ha){var Sl=document.createElement("div");Sl.setAttribute("oninput","return;"),Ha=typeof Sl.oninput=="function"}qa=Ha}else qa=!1;Xo=qa&&(!document.documentMode||9<document.documentMode)}function _l(){Ds&&(Ds.detachEvent("onpropertychange",Ws),vs=Ds=null)}function Ws(s){if(s.propertyName==="value"&&Ua(vs)){var l=[];Ms(l,vs,s,Vt(s)),jt(yn,l)}}function ma(s,l,h){s==="focusin"?(_l(),Ds=l,vs=h,Ds.attachEvent("onpropertychange",Ws)):s==="focusout"&&_l()}function ga(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ua(vs)}function Ga(s,l){if(s==="click")return Ua(l)}function ya(s,l){if(s==="input"||s==="change")return Ua(l)}function Ka(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var ln=typeof Object.is=="function"?Object.is:Ka;function Gi(s,l){if(ln(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var h=Object.keys(s),y=Object.keys(l);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var _=h[y];if(!f.call(l,_)||!ln(s[_],l[_]))return!1}return!0}function br(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Rr(s,l){var h=br(s);s=0;for(var y;h;){if(h.nodeType===3){if(y=s+h.textContent.length,s<=l&&y>=l)return{node:h,offset:l-s};s=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=br(h)}}function cn(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?cn(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Tn(){for(var s=window,l=Qe();l instanceof s.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)s=l.contentWindow;else break;l=Qe(s.document)}return l}function Zo(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function gc(s){var l=Tn(),h=s.focusedElem,y=s.selectionRange;if(l!==h&&h&&h.ownerDocument&&cn(h.ownerDocument.documentElement,h)){if(y!==null&&Zo(h)){if(l=y.start,s=y.end,s===void 0&&(s=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(s,h.value.length);else if(s=(l=h.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var _=h.textContent.length,P=Math.min(y.start,_);y=y.end===void 0?P:Math.min(y.end,_),!s.extend&&P>y&&(_=y,y=P,P=_),_=Rr(h,P);var J=Rr(h,y);_&&J&&(s.rangeCount!==1||s.anchorNode!==_.node||s.anchorOffset!==_.offset||s.focusNode!==J.node||s.focusOffset!==J.offset)&&(l=l.createRange(),l.setStart(_.node,_.offset),s.removeAllRanges(),P>y?(s.addRange(l),s.extend(J.node,J.offset)):(l.setEnd(J.node,J.offset),s.addRange(l)))}}for(l=[],s=h;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)s=l[h],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Tl=u&&"documentMode"in document&&11>=document.documentMode,$s=null,su=null,Al=null,au=!1;function fd(s,l,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;au||$s==null||$s!==Qe(y)||(y=$s,"selectionStart"in y&&Zo(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Al&&Gi(Al,y)||(Al=y,y=uu(su,"onSelect"),0<y.length&&(l=new gs("onSelect","select",null,l,h),s.push({event:l,listeners:y}),l.target=$s)))}function yc(s,l){var h={};return h[s.toLowerCase()]=l.toLowerCase(),h["Webkit"+s]="webkit"+l,h["Moz"+s]="moz"+l,h}var Ja={animationend:yc("Animation","AnimationEnd"),animationiteration:yc("Animation","AnimationIteration"),animationstart:yc("Animation","AnimationStart"),transitionend:yc("Transition","TransitionEnd")},Ya={},pd={};u&&(pd=document.createElement("div").style,"AnimationEvent"in window||(delete Ja.animationend.animation,delete Ja.animationiteration.animation,delete Ja.animationstart.animation),"TransitionEvent"in window||delete Ja.transitionend.transition);function xc(s){if(Ya[s])return Ya[s];if(!Ja[s])return s;var l=Ja[s],h;for(h in l)if(l.hasOwnProperty(h)&&h in pd)return Ya[s]=l[h];return s}var md=xc("animationend"),gd=xc("animationiteration"),yd=xc("animationstart"),xd=xc("transitionend"),vd=new Map,bd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ws(s,l){vd.set(s,l),a(l,[s])}for(var Cl=0;Cl<bd.length;Cl++){var Li=bd[Cl],No=Li.toLowerCase(),lu=Li[0].toUpperCase()+Li.slice(1);ws(No,"on"+lu)}ws(md,"onAnimationEnd"),ws(gd,"onAnimationIteration"),ws(yd,"onAnimationStart"),ws("dblclick","onDoubleClick"),ws("focusin","onFocus"),ws("focusout","onBlur"),ws(xd,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ih=new Set("cancel close invalid load scroll toggle".split(" ").concat(xa));function vc(s,l,h){var y=s.type||"unknown-event";s.currentTarget=h,$i(y,l,void 0,s),s.currentTarget=null}function bc(s,l){l=(l&4)!==0;for(var h=0;h<s.length;h++){var y=s[h],_=y.event;y=y.listeners;e:{var P=void 0;if(l)for(var J=y.length-1;0<=J;J--){var fe=y[J],be=fe.instance,Le=fe.currentTarget;if(fe=fe.listener,be!==P&&_.isPropagationStopped())break e;vc(_,fe,Le),P=be}else for(J=0;J<y.length;J++){if(fe=y[J],be=fe.instance,Le=fe.currentTarget,fe=fe.listener,be!==P&&_.isPropagationStopped())break e;vc(_,fe,Le),P=be}}}if(sn)throw s=qn,sn=!1,qn=null,s}function Mr(s,l){var h=l[Ji];h===void 0&&(h=l[Ji]=new Set);var y=s+"__bubble";h.has(y)||(wc(l,s,2,!1),h.add(y))}function cu(s,l,h){var y=0;l&&(y|=4),wc(h,s,y,l)}var kl="_reactListening"+Math.random().toString(36).slice(2);function Qa(s){if(!s[kl]){s[kl]=!0,n.forEach(function(h){h!=="selectionchange"&&(Ih.has(h)||cu(h,!1,s),cu(h,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[kl]||(l[kl]=!0,cu("selectionchange",!1,l))}}function wc(s,l,h,y){switch(Yo(l)){case 1:var _=Hi;break;case 4:_=da;break;default:_=Jo}h=_.bind(null,l,h,s),_=void 0,!ci||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(_=!0),y?_!==void 0?s.addEventListener(l,h,{capture:!0,passive:_}):s.addEventListener(l,h,!0):_!==void 0?s.addEventListener(l,h,{passive:_}):s.addEventListener(l,h,!1)}function Sc(s,l,h,y,_){var P=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var J=y.tag;if(J===3||J===4){var fe=y.stateNode.containerInfo;if(fe===_||fe.nodeType===8&&fe.parentNode===_)break;if(J===4)for(J=y.return;J!==null;){var be=J.tag;if((be===3||be===4)&&(be=J.stateNode.containerInfo,be===_||be.nodeType===8&&be.parentNode===_))return;J=J.return}for(;fe!==null;){if(J=va(fe),J===null)return;if(be=J.tag,be===5||be===6){y=P=J;continue e}fe=fe.parentNode}}y=y.return}jt(function(){var Le=P,Je=Vt(h),Ye=[];e:{var Ke=vd.get(s);if(Ke!==void 0){var ot=gs,mt=s;switch(s){case"keypress":if(Pi(h)===0)break e;case"keydown":case"keyup":ot=lr;break;case"focusin":mt="focus",ot=yt;break;case"focusout":mt="blur",ot=yt;break;case"beforeblur":case"afterblur":ot=yt;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=He;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=pt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=Jr;break;case md:case gd:case yd:ot=Hr;break;case xd:ot=Ro;break;case"scroll":ot=G;break;case"wheel":ot=mc;break;case"copy":case"cut":case"paste":ot=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=zn}var xt=(l&4)!==0,Mn=!xt&&s==="scroll",Ie=xt?Ke!==null?Ke+"Capture":null:Ke;xt=[];for(var _e=Le,Ne;_e!==null;){Ne=_e;var Xe=Ne.stateNode;if(Ne.tag===5&&Xe!==null&&(Ne=Xe,Ie!==null&&(Xe=ki(_e,Ie),Xe!=null&&xt.push(_c(_e,Xe,Ne)))),Mn)break;_e=_e.return}0<xt.length&&(Ke=new ot(Ke,mt,null,h,Je),Ye.push({event:Ke,listeners:xt}))}}if((l&7)===0){e:{if(Ke=s==="mouseover"||s==="pointerover",ot=s==="mouseout"||s==="pointerout",Ke&&h!==Xt&&(mt=h.relatedTarget||h.fromElement)&&(va(mt)||mt[xi]))break e;if((ot||Ke)&&(Ke=Je.window===Je?Je:(Ke=Je.ownerDocument)?Ke.defaultView||Ke.parentWindow:window,ot?(mt=h.relatedTarget||h.toElement,ot=Le,mt=mt?va(mt):null,mt!==null&&(Mn=mn(mt),mt!==Mn||mt.tag!==5&&mt.tag!==6)&&(mt=null)):(ot=null,mt=Le),ot!==mt)){if(xt=He,Xe="onMouseLeave",Ie="onMouseEnter",_e="mouse",(s==="pointerout"||s==="pointerover")&&(xt=zn,Xe="onPointerLeave",Ie="onPointerEnter",_e="pointer"),Mn=ot==null?Ke:el(ot),Ne=mt==null?Ke:el(mt),Ke=new xt(Xe,_e+"leave",ot,h,Je),Ke.target=Mn,Ke.relatedTarget=Ne,Xe=null,va(Je)===Le&&(xt=new xt(Ie,_e+"enter",mt,h,Je),xt.target=Ne,xt.relatedTarget=Mn,Xe=xt),Mn=Xe,ot&&mt)t:{for(xt=ot,Ie=mt,_e=0,Ne=xt;Ne;Ne=Xa(Ne))_e++;for(Ne=0,Xe=Ie;Xe;Xe=Xa(Xe))Ne++;for(;0<_e-Ne;)xt=Xa(xt),_e--;for(;0<Ne-_e;)Ie=Xa(Ie),Ne--;for(;_e--;){if(xt===Ie||Ie!==null&&xt===Ie.alternate)break t;xt=Xa(xt),Ie=Xa(Ie)}xt=null}else xt=null;ot!==null&&Rh(Ye,Ke,ot,xt,!1),mt!==null&&Mn!==null&&Rh(Ye,Mn,mt,xt,!0)}}e:{if(Ke=Le?el(Le):window,ot=Ke.nodeName&&Ke.nodeName.toLowerCase(),ot==="select"||ot==="input"&&Ke.type==="file")var _t=bs;else if(xs(Ke))if(Xo)_t=ya;else{_t=ga;var Lt=ma}else(ot=Ke.nodeName)&&ot.toLowerCase()==="input"&&(Ke.type==="checkbox"||Ke.type==="radio")&&(_t=Ga);if(_t&&(_t=_t(s,Le))){Ms(Ye,_t,h,Je);break e}Lt&&Lt(s,Ke,Le),s==="focusout"&&(Lt=Ke._wrapperState)&&Lt.controlled&&Ke.type==="number"&&Ue(Ke,"number",Ke.value)}switch(Lt=Le?el(Le):window,s){case"focusin":(xs(Lt)||Lt.contentEditable==="true")&&($s=Lt,su=Le,Al=null);break;case"focusout":Al=su=$s=null;break;case"mousedown":au=!0;break;case"contextmenu":case"mouseup":case"dragend":au=!1,fd(Ye,h,Je);break;case"selectionchange":if(Tl)break;case"keydown":case"keyup":fd(Ye,h,Je)}var Bt;if(Qo)e:{switch(s){case"compositionstart":var Kt="onCompositionStart";break e;case"compositionend":Kt="onCompositionEnd";break e;case"compositionupdate":Kt="onCompositionUpdate";break e}Kt=void 0}else Po?wl(s,h)&&(Kt="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(Kt="onCompositionStart");Kt&&(go&&h.locale!=="ko"&&(Po||Kt!=="onCompositionStart"?Kt==="onCompositionEnd"&&Po&&(Bt=$a()):(ni=Je,Eo="value"in ni?ni.value:ni.textContent,Po=!0)),Lt=uu(Le,Kt),0<Lt.length&&(Kt=new W(Kt,s,null,h,Je),Ye.push({event:Kt,listeners:Lt}),Bt?Kt.data=Bt:(Bt=Vs(h),Bt!==null&&(Kt.data=Bt)))),(Bt=ou?yo(s,h):xo(s,h))&&(Le=uu(Le,"onBeforeInput"),0<Le.length&&(Je=new W("onBeforeInput","beforeinput",null,h,Je),Ye.push({event:Je,listeners:Le}),Je.data=Bt))}bc(Ye,l)})}function _c(s,l,h){return{instance:s,listener:l,currentTarget:h}}function uu(s,l){for(var h=l+"Capture",y=[];s!==null;){var _=s,P=_.stateNode;_.tag===5&&P!==null&&(_=P,P=ki(s,h),P!=null&&y.unshift(_c(s,P,_)),P=ki(s,l),P!=null&&y.push(_c(s,P,_))),s=s.return}return y}function Xa(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Rh(s,l,h,y,_){for(var P=l._reactName,J=[];h!==null&&h!==y;){var fe=h,be=fe.alternate,Le=fe.stateNode;if(be!==null&&be===y)break;fe.tag===5&&Le!==null&&(fe=Le,_?(be=ki(h,P),be!=null&&J.unshift(_c(h,be,fe))):_||(be=ki(h,P),be!=null&&J.push(_c(h,be,fe)))),h=h.return}J.length!==0&&s.push({event:l,listeners:J})}var Mp=/\r\n?/g,Dp=/\u0000|\uFFFD/g;function Ph(s){return(typeof s=="string"?s:""+s).replace(Mp,`
`).replace(Dp,"")}function du(s,l,h){if(l=Ph(l),Ph(s)!==l&&h)throw Error(t(425))}function jl(){}var Tc=null,Za=null;function wd(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Sd=typeof setTimeout=="function"?setTimeout:void 0,Nh=typeof clearTimeout=="function"?clearTimeout:void 0,Lh=typeof Promise=="function"?Promise:void 0,Wp=typeof queueMicrotask=="function"?queueMicrotask:typeof Lh<"u"?function(s){return Lh.resolve(null).then(s).catch($p)}:Sd;function $p(s){setTimeout(function(){throw s})}function _d(s,l){var h=l,y=0;do{var _=h.nextSibling;if(s.removeChild(h),_&&_.nodeType===8)if(h=_.data,h==="/$"){if(y===0){s.removeChild(_),mo(l);return}y--}else h!=="$"&&h!=="$?"&&h!=="$!"||y++;h=_}while(h);mo(l)}function Bi(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function Lo(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return s;l--}else h==="/$"&&l++}s=s.previousSibling}return null}var Ki=Math.random().toString(36).slice(2),Ss="__reactFiber$"+Ki,El="__reactProps$"+Ki,xi="__reactContainer$"+Ki,Ji="__reactEvents$"+Ki,Up="__reactListeners$"+Ki,qp="__reactHandles$"+Ki;function va(s){var l=s[Ss];if(l)return l;for(var h=s.parentNode;h;){if(l=h[xi]||h[Ss]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(s=Lo(s);s!==null;){if(h=s[Ss])return h;s=Lo(s)}return l}s=h,h=s.parentNode}return null}function Il(s){return s=s[Ss]||s[xi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function el(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Ac(s){return s[El]||null}var Td=[],Us=-1;function es(s){return{current:s}}function Ir(s){0>Us||(s.current=Td[Us],Td[Us]=null,Us--)}function Pr(s,l){Us++,Td[Us]=s.current,s.current=l}var ba={},ii=es(ba),Yi=es(!1),tl=ba;function Rl(s,l){var h=s.type.contextTypes;if(!h)return ba;var y=s.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var _={},P;for(P in h)_[P]=l[P];return y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=_),_}function Qi(s){return s=s.childContextTypes,s!=null}function hu(){Ir(Yi),Ir(ii)}function Bh(s,l,h){if(ii.current!==ba)throw Error(t(168));Pr(ii,l),Pr(Yi,h)}function Ad(s,l,h){var y=s.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return h;y=y.getChildContext();for(var _ in y)if(!(_ in l))throw Error(t(108,we(s)||"Unknown",_));return xe({},h,y)}function rl(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||ba,tl=ii.current,Pr(ii,s),Pr(Yi,Yi.current),!0}function Fh(s,l,h){var y=s.stateNode;if(!y)throw Error(t(169));h?(s=Ad(s,l,tl),y.__reactInternalMemoizedMergedChildContext=s,Ir(Yi),Ir(ii),Pr(ii,s)):Ir(Yi),Pr(Yi,h)}var qs=null,Cc=!1,p=!1;function x(s){qs===null?qs=[s]:qs.push(s)}function E(s){Cc=!0,x(s)}function O(){if(!p&&qs!==null){p=!0;var s=0,l=nr;try{var h=qs;for(nr=1;s<h.length;s++){var y=h[s];do y=y(!0);while(y!==null)}qs=null,Cc=!1}catch(_){throw qs!==null&&(qs=qs.slice(s+1)),us(Ps,O),_}finally{nr=l,p=!1}}return null}var K=[],Y=0,Q=null,Z=0,ne=[],ae=0,ve=null,Ee=1,le="";function Se(s,l){K[Y++]=Z,K[Y++]=Q,Q=s,Z=l}function je(s,l,h){ne[ae++]=Ee,ne[ae++]=le,ne[ae++]=ve,ve=s;var y=Ee;s=le;var _=32-Hn(y)-1;y&=~(1<<_),h+=1;var P=32-Hn(l)+_;if(30<P){var J=_-_%5;P=(y&(1<<J)-1).toString(32),y>>=J,_-=J,Ee=1<<32-Hn(l)+_|h<<_|y,le=P+s}else Ee=1<<P|h<<_|y,le=s}function Ve(s){s.return!==null&&(Se(s,1),je(s,1,0))}function Re(s){for(;s===Q;)Q=K[--Y],K[Y]=null,Z=K[--Y],K[Y]=null;for(;s===ve;)ve=ne[--ae],ne[ae]=null,le=ne[--ae],ne[ae]=null,Ee=ne[--ae],ne[ae]=null}var ze=null,Oe=null,De=!1,We=null;function bt(s,l){var h=ks(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=s,l=s.deletions,l===null?(s.deletions=[h],s.flags|=16):l.push(h)}function at(s,l){switch(s.tag){case 5:var h=s.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,ze=s,Oe=Bi(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,ze=s,Oe=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=ve!==null?{id:Ee,overflow:le}:null,s.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=ks(18,null,null,0),h.stateNode=l,h.return=s,s.child=h,ze=s,Oe=null,!0):!1;default:return!1}}function Yt(s){return(s.mode&1)!==0&&(s.flags&128)===0}function ht(s){if(De){var l=Oe;if(l){var h=l;if(!at(s,l)){if(Yt(s))throw Error(t(418));l=Bi(h.nextSibling);var y=ze;l&&at(s,l)?bt(y,h):(s.flags=s.flags&-4097|2,De=!1,ze=s)}}else{if(Yt(s))throw Error(t(418));s.flags=s.flags&-4097|2,De=!1,ze=s}}}function cr(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;ze=s}function un(s){if(s!==ze)return!1;if(!De)return cr(s),De=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!wd(s.type,s.memoizedProps)),l&&(l=Oe)){if(Yt(s))throw Zt(),Error(t(418));for(;l;)bt(s,l),l=Bi(l.nextSibling)}if(cr(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"){if(l===0){Oe=Bi(s.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}s=s.nextSibling}Oe=null}}else Oe=ze?Bi(s.stateNode.nextSibling):null;return!0}function Zt(){for(var s=Oe;s;)s=Bi(s.nextSibling)}function lt(){Oe=ze=null,De=!1}function rt(s){We===null?We=[s]:We.push(s)}var xn=B.ReactCurrentBatchConfig;function $t(s,l,h){if(s=h.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var y=h.stateNode}if(!y)throw Error(t(147,s));var _=y,P=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===P?l.ref:(l=function(J){var fe=_.refs;J===null?delete fe[P]:fe[P]=J},l._stringRef=P,l)}if(typeof s!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,s))}return s}function ar(s,l){throw s=Object.prototype.toString.call(l),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function Kr(s){var l=s._init;return l(s._payload)}function Kn(s){function l(Ie,_e){if(s){var Ne=Ie.deletions;Ne===null?(Ie.deletions=[_e],Ie.flags|=16):Ne.push(_e)}}function h(Ie,_e){if(!s)return null;for(;_e!==null;)l(Ie,_e),_e=_e.sibling;return null}function y(Ie,_e){for(Ie=new Map;_e!==null;)_e.key!==null?Ie.set(_e.key,_e):Ie.set(_e.index,_e),_e=_e.sibling;return Ie}function _(Ie,_e){return Ie=Dl(Ie,_e),Ie.index=0,Ie.sibling=null,Ie}function P(Ie,_e,Ne){return Ie.index=Ne,s?(Ne=Ie.alternate,Ne!==null?(Ne=Ne.index,Ne<_e?(Ie.flags|=2,_e):Ne):(Ie.flags|=2,_e)):(Ie.flags|=1048576,_e)}function J(Ie){return s&&Ie.alternate===null&&(Ie.flags|=2),Ie}function fe(Ie,_e,Ne,Xe){return _e===null||_e.tag!==6?(_e=bm(Ne,Ie.mode,Xe),_e.return=Ie,_e):(_e=_(_e,Ne),_e.return=Ie,_e)}function be(Ie,_e,Ne,Xe){var _t=Ne.type;return _t===N?Je(Ie,_e,Ne.props.children,Xe,Ne.key):_e!==null&&(_e.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===oe&&Kr(_t)===_e.type)?(Xe=_(_e,Ne.props),Xe.ref=$t(Ie,_e,Ne),Xe.return=Ie,Xe):(Xe=rf(Ne.type,Ne.key,Ne.props,null,Ie.mode,Xe),Xe.ref=$t(Ie,_e,Ne),Xe.return=Ie,Xe)}function Le(Ie,_e,Ne,Xe){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Ne.containerInfo||_e.stateNode.implementation!==Ne.implementation?(_e=wm(Ne,Ie.mode,Xe),_e.return=Ie,_e):(_e=_(_e,Ne.children||[]),_e.return=Ie,_e)}function Je(Ie,_e,Ne,Xe,_t){return _e===null||_e.tag!==7?(_e=Lc(Ne,Ie.mode,Xe,_t),_e.return=Ie,_e):(_e=_(_e,Ne),_e.return=Ie,_e)}function Ye(Ie,_e,Ne){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return _e=bm(""+_e,Ie.mode,Ne),_e.return=Ie,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case re:return Ne=rf(_e.type,_e.key,_e.props,null,Ie.mode,Ne),Ne.ref=$t(Ie,null,_e),Ne.return=Ie,Ne;case ce:return _e=wm(_e,Ie.mode,Ne),_e.return=Ie,_e;case oe:var Xe=_e._init;return Ye(Ie,Xe(_e._payload),Ne)}if(nt(_e)||ye(_e))return _e=Lc(_e,Ie.mode,Ne,null),_e.return=Ie,_e;ar(Ie,_e)}return null}function Ke(Ie,_e,Ne,Xe){var _t=_e!==null?_e.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return _t!==null?null:fe(Ie,_e,""+Ne,Xe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case re:return Ne.key===_t?be(Ie,_e,Ne,Xe):null;case ce:return Ne.key===_t?Le(Ie,_e,Ne,Xe):null;case oe:return _t=Ne._init,Ke(Ie,_e,_t(Ne._payload),Xe)}if(nt(Ne)||ye(Ne))return _t!==null?null:Je(Ie,_e,Ne,Xe,null);ar(Ie,Ne)}return null}function ot(Ie,_e,Ne,Xe,_t){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return Ie=Ie.get(Ne)||null,fe(_e,Ie,""+Xe,_t);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case re:return Ie=Ie.get(Xe.key===null?Ne:Xe.key)||null,be(_e,Ie,Xe,_t);case ce:return Ie=Ie.get(Xe.key===null?Ne:Xe.key)||null,Le(_e,Ie,Xe,_t);case oe:var Lt=Xe._init;return ot(Ie,_e,Ne,Lt(Xe._payload),_t)}if(nt(Xe)||ye(Xe))return Ie=Ie.get(Ne)||null,Je(_e,Ie,Xe,_t,null);ar(_e,Xe)}return null}function mt(Ie,_e,Ne,Xe){for(var _t=null,Lt=null,Bt=_e,Kt=_e=0,_i=null;Bt!==null&&Kt<Ne.length;Kt++){Bt.index>Kt?(_i=Bt,Bt=null):_i=Bt.sibling;var Ar=Ke(Ie,Bt,Ne[Kt],Xe);if(Ar===null){Bt===null&&(Bt=_i);break}s&&Bt&&Ar.alternate===null&&l(Ie,Bt),_e=P(Ar,_e,Kt),Lt===null?_t=Ar:Lt.sibling=Ar,Lt=Ar,Bt=_i}if(Kt===Ne.length)return h(Ie,Bt),De&&Se(Ie,Kt),_t;if(Bt===null){for(;Kt<Ne.length;Kt++)Bt=Ye(Ie,Ne[Kt],Xe),Bt!==null&&(_e=P(Bt,_e,Kt),Lt===null?_t=Bt:Lt.sibling=Bt,Lt=Bt);return De&&Se(Ie,Kt),_t}for(Bt=y(Ie,Bt);Kt<Ne.length;Kt++)_i=ot(Bt,Ie,Kt,Ne[Kt],Xe),_i!==null&&(s&&_i.alternate!==null&&Bt.delete(_i.key===null?Kt:_i.key),_e=P(_i,_e,Kt),Lt===null?_t=_i:Lt.sibling=_i,Lt=_i);return s&&Bt.forEach(function(Wl){return l(Ie,Wl)}),De&&Se(Ie,Kt),_t}function xt(Ie,_e,Ne,Xe){var _t=ye(Ne);if(typeof _t!="function")throw Error(t(150));if(Ne=_t.call(Ne),Ne==null)throw Error(t(151));for(var Lt=_t=null,Bt=_e,Kt=_e=0,_i=null,Ar=Ne.next();Bt!==null&&!Ar.done;Kt++,Ar=Ne.next()){Bt.index>Kt?(_i=Bt,Bt=null):_i=Bt.sibling;var Wl=Ke(Ie,Bt,Ar.value,Xe);if(Wl===null){Bt===null&&(Bt=_i);break}s&&Bt&&Wl.alternate===null&&l(Ie,Bt),_e=P(Wl,_e,Kt),Lt===null?_t=Wl:Lt.sibling=Wl,Lt=Wl,Bt=_i}if(Ar.done)return h(Ie,Bt),De&&Se(Ie,Kt),_t;if(Bt===null){for(;!Ar.done;Kt++,Ar=Ne.next())Ar=Ye(Ie,Ar.value,Xe),Ar!==null&&(_e=P(Ar,_e,Kt),Lt===null?_t=Ar:Lt.sibling=Ar,Lt=Ar);return De&&Se(Ie,Kt),_t}for(Bt=y(Ie,Bt);!Ar.done;Kt++,Ar=Ne.next())Ar=ot(Bt,Ie,Kt,Ar.value,Xe),Ar!==null&&(s&&Ar.alternate!==null&&Bt.delete(Ar.key===null?Kt:Ar.key),_e=P(Ar,_e,Kt),Lt===null?_t=Ar:Lt.sibling=Ar,Lt=Ar);return s&&Bt.forEach(function(kS){return l(Ie,kS)}),De&&Se(Ie,Kt),_t}function Mn(Ie,_e,Ne,Xe){if(typeof Ne=="object"&&Ne!==null&&Ne.type===N&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case re:e:{for(var _t=Ne.key,Lt=_e;Lt!==null;){if(Lt.key===_t){if(_t=Ne.type,_t===N){if(Lt.tag===7){h(Ie,Lt.sibling),_e=_(Lt,Ne.props.children),_e.return=Ie,Ie=_e;break e}}else if(Lt.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===oe&&Kr(_t)===Lt.type){h(Ie,Lt.sibling),_e=_(Lt,Ne.props),_e.ref=$t(Ie,Lt,Ne),_e.return=Ie,Ie=_e;break e}h(Ie,Lt);break}else l(Ie,Lt);Lt=Lt.sibling}Ne.type===N?(_e=Lc(Ne.props.children,Ie.mode,Xe,Ne.key),_e.return=Ie,Ie=_e):(Xe=rf(Ne.type,Ne.key,Ne.props,null,Ie.mode,Xe),Xe.ref=$t(Ie,_e,Ne),Xe.return=Ie,Ie=Xe)}return J(Ie);case ce:e:{for(Lt=Ne.key;_e!==null;){if(_e.key===Lt)if(_e.tag===4&&_e.stateNode.containerInfo===Ne.containerInfo&&_e.stateNode.implementation===Ne.implementation){h(Ie,_e.sibling),_e=_(_e,Ne.children||[]),_e.return=Ie,Ie=_e;break e}else{h(Ie,_e);break}else l(Ie,_e);_e=_e.sibling}_e=wm(Ne,Ie.mode,Xe),_e.return=Ie,Ie=_e}return J(Ie);case oe:return Lt=Ne._init,Mn(Ie,_e,Lt(Ne._payload),Xe)}if(nt(Ne))return mt(Ie,_e,Ne,Xe);if(ye(Ne))return xt(Ie,_e,Ne,Xe);ar(Ie,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"?(Ne=""+Ne,_e!==null&&_e.tag===6?(h(Ie,_e.sibling),_e=_(_e,Ne),_e.return=Ie,Ie=_e):(h(Ie,_e),_e=bm(Ne,Ie.mode,Xe),_e.return=Ie,Ie=_e),J(Ie)):h(Ie,_e)}return Mn}var An=Kn(!0),rn=Kn(!1),On=es(null),Jn=null,Xr=null,dr=null;function wr(){dr=Xr=Jn=null}function Zr(s){var l=On.current;Ir(On),s._currentValue=l}function Sr(s,l,h){for(;s!==null;){var y=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),s===h)break;s=s.return}}function dn(s,l){Jn=s,dr=Xr=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(Fo=!0),s.firstContext=null)}function hn(s){var l=s._currentValue;if(dr!==s)if(s={context:s,memoizedValue:l,next:null},Xr===null){if(Jn===null)throw Error(t(308));Xr=s,Jn.dependencies={lanes:0,firstContext:s}}else Xr=Xr.next=s;return l}var Dr=null;function vi(s){Dr===null?Dr=[s]:Dr.push(s)}function Nr(s,l,h,y){var _=l.interleaved;return _===null?(h.next=h,vi(l)):(h.next=_.next,_.next=h),l.interleaved=h,Wr(s,y)}function Wr(s,l){s.lanes|=l;var h=s.alternate;for(h!==null&&(h.lanes|=l),h=s,s=s.return;s!==null;)s.childLanes|=l,h=s.alternate,h!==null&&(h.childLanes|=l),h=s,s=s.return;return h.tag===3?h.stateNode:null}var Cn=!1;function oi(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xi(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function vn(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function bn(s,l,h){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,(_r&2)!==0){var _=y.pending;return _===null?l.next=l:(l.next=_.next,_.next=l),y.pending=l,Wr(s,h)}return _=y.interleaved,_===null?(l.next=l,vi(y)):(l.next=_.next,_.next=l),y.interleaved=l,Wr(s,h)}function bi(s,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var y=l.lanes;y&=s.pendingLanes,h|=y,l.lanes=h,la(s,h)}}function $r(s,l){var h=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var _=null,P=null;if(h=h.firstBaseUpdate,h!==null){do{var J={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};P===null?_=P=J:P=P.next=J,h=h.next}while(h!==null);P===null?_=P=l:P=P.next=l}else _=P=l;h={baseState:y.baseState,firstBaseUpdate:_,lastBaseUpdate:P,shared:y.shared,effects:y.effects},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=l:s.next=l,h.lastBaseUpdate=l}function wi(s,l,h,y){var _=s.updateQueue;Cn=!1;var P=_.firstBaseUpdate,J=_.lastBaseUpdate,fe=_.shared.pending;if(fe!==null){_.shared.pending=null;var be=fe,Le=be.next;be.next=null,J===null?P=Le:J.next=Le,J=be;var Je=s.alternate;Je!==null&&(Je=Je.updateQueue,fe=Je.lastBaseUpdate,fe!==J&&(fe===null?Je.firstBaseUpdate=Le:fe.next=Le,Je.lastBaseUpdate=be))}if(P!==null){var Ye=_.baseState;J=0,Je=Le=be=null,fe=P;do{var Ke=fe.lane,ot=fe.eventTime;if((y&Ke)===Ke){Je!==null&&(Je=Je.next={eventTime:ot,lane:0,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null});e:{var mt=s,xt=fe;switch(Ke=l,ot=h,xt.tag){case 1:if(mt=xt.payload,typeof mt=="function"){Ye=mt.call(ot,Ye,Ke);break e}Ye=mt;break e;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=xt.payload,Ke=typeof mt=="function"?mt.call(ot,Ye,Ke):mt,Ke==null)break e;Ye=xe({},Ye,Ke);break e;case 2:Cn=!0}}fe.callback!==null&&fe.lane!==0&&(s.flags|=64,Ke=_.effects,Ke===null?_.effects=[fe]:Ke.push(fe))}else ot={eventTime:ot,lane:Ke,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},Je===null?(Le=Je=ot,be=Ye):Je=Je.next=ot,J|=Ke;if(fe=fe.next,fe===null){if(fe=_.shared.pending,fe===null)break;Ke=fe,fe=Ke.next,Ke.next=null,_.lastBaseUpdate=Ke,_.shared.pending=null}}while(!0);if(Je===null&&(be=Ye),_.baseState=be,_.firstBaseUpdate=Le,_.lastBaseUpdate=Je,l=_.shared.interleaved,l!==null){_=l;do J|=_.lane,_=_.next;while(_!==l)}else P===null&&(_.shared.lanes=0);Ic|=J,s.lanes=J,s.memoizedState=Ye}}function Bo(s,l,h){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var y=s[l],_=y.callback;if(_!==null){if(y.callback=null,y=h,typeof _!="function")throw Error(t(191,_));_.call(y)}}}var ts={},Yn=es(ts),wn=es(ts),wa=es(ts);function Hs(s){if(s===ts)throw Error(t(174));return s}function Pl(s,l){switch(Pr(wa,l),Pr(wn,s),Pr(Yn,ts),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:yr(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=yr(l,s)}Ir(Yn),Pr(Yn,l)}function _s(){Ir(Yn),Ir(wn),Ir(wa)}function zh(s){Hs(wa.current);var l=Hs(Yn.current),h=yr(l,s.type);l!==h&&(Pr(wn,s),Pr(Yn,h))}function Cd(s){wn.current===s&&(Ir(Yn),Ir(wn))}var Yr=es(0);function rs(s){for(var l=s;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var kd=[];function jd(){for(var s=0;s<kd.length;s++)kd[s]._workInProgressVersionPrimary=null;kd.length=0}var fu=B.ReactCurrentDispatcher,pu=B.ReactCurrentBatchConfig,Ts=0,en=null,kn=null,Sn=null,Nl=!1,Gs=!1,Ll=0,Hp=0;function Vn(){throw Error(t(321))}function mu(s,l){if(l===null)return!1;for(var h=0;h<l.length&&h<s.length;h++)if(!ln(s[h],l[h]))return!1;return!0}function kc(s,l,h,y,_,P){if(Ts=P,en=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,fu.current=s===null||s.memoizedState===null?Zw:eS,s=h(y,_),Gs){P=0;do{if(Gs=!1,Ll=0,25<=P)throw Error(t(301));P+=1,Sn=kn=null,l.updateQueue=null,fu.current=tS,s=h(y,_)}while(Gs)}if(fu.current=Wh,l=kn!==null&&kn.next!==null,Ts=0,Sn=kn=en=null,Nl=!1,l)throw Error(t(300));return s}function As(){var s=Ll!==0;return Ll=0,s}function ns(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?en.memoizedState=Sn=s:Sn=Sn.next=s,Sn}function vo(){if(kn===null){var s=en.alternate;s=s!==null?s.memoizedState:null}else s=kn.next;var l=Sn===null?en.memoizedState:Sn.next;if(l!==null)Sn=l,kn=s;else{if(s===null)throw Error(t(310));kn=s,s={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},Sn===null?en.memoizedState=Sn=s:Sn=Sn.next=s}return Sn}function jc(s,l){return typeof l=="function"?l(s):l}function gu(s){var l=vo(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=s;var y=kn,_=y.baseQueue,P=h.pending;if(P!==null){if(_!==null){var J=_.next;_.next=P.next,P.next=J}y.baseQueue=_=P,h.pending=null}if(_!==null){P=_.next,y=y.baseState;var fe=J=null,be=null,Le=P;do{var Je=Le.lane;if((Ts&Je)===Je)be!==null&&(be=be.next={lane:0,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),y=Le.hasEagerState?Le.eagerState:s(y,Le.action);else{var Ye={lane:Je,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null};be===null?(fe=be=Ye,J=y):be=be.next=Ye,en.lanes|=Je,Ic|=Je}Le=Le.next}while(Le!==null&&Le!==P);be===null?J=y:be.next=fe,ln(y,l.memoizedState)||(Fo=!0),l.memoizedState=y,l.baseState=J,l.baseQueue=be,h.lastRenderedState=y}if(s=h.interleaved,s!==null){_=s;do P=_.lane,en.lanes|=P,Ic|=P,_=_.next;while(_!==s)}else _===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function Sa(s){var l=vo(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=s;var y=h.dispatch,_=h.pending,P=l.memoizedState;if(_!==null){h.pending=null;var J=_=_.next;do P=s(P,J.action),J=J.next;while(J!==_);ln(P,l.memoizedState)||(Fo=!0),l.memoizedState=P,l.baseQueue===null&&(l.baseState=P),h.lastRenderedState=P}return[P,y]}function Oh(){}function Ed(s,l){var h=en,y=vo(),_=l(),P=!ln(y.memoizedState,_);if(P&&(y.memoizedState=_,Fo=!0),y=y.queue,vu(Mh.bind(null,h,y,s),[s]),y.getSnapshot!==l||P||Sn!==null&&Sn.memoizedState.tag&1){if(h.flags|=2048,bo(9,Id.bind(null,h,y,_,l),void 0,null),Si===null)throw Error(t(349));(Ts&30)!==0||Vh(h,l,_)}return _}function Vh(s,l,h){s.flags|=16384,s={getSnapshot:l,value:h},l=en.updateQueue,l===null?(l={lastEffect:null,stores:null},en.updateQueue=l,l.stores=[s]):(h=l.stores,h===null?l.stores=[s]:h.push(s))}function Id(s,l,h,y){l.value=h,l.getSnapshot=y,Bl(l)&&yu(s)}function Mh(s,l,h){return h(function(){Bl(l)&&yu(s)})}function Bl(s){var l=s.getSnapshot;s=s.value;try{var h=l();return!ln(s,h)}catch{return!0}}function yu(s){var l=Wr(s,1);l!==null&&Xs(l,s,1,-1)}function Ec(s){var l=ns();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jc,lastRenderedState:s},l.queue=s,s=s.dispatch=Xw.bind(null,en,s),[l.memoizedState,s]}function bo(s,l,h,y){return s={tag:s,create:l,destroy:h,deps:y,next:null},l=en.updateQueue,l===null?(l={lastEffect:null,stores:null},en.updateQueue=l,l.lastEffect=s.next=s):(h=l.lastEffect,h===null?l.lastEffect=s.next=s:(y=h.next,h.next=s,s.next=y,l.lastEffect=s)),s}function Ks(){return vo().memoizedState}function is(s,l,h,y){var _=ns();en.flags|=s,_.memoizedState=bo(1|l,h,void 0,y===void 0?null:y)}function nl(s,l,h,y){var _=vo();y=y===void 0?null:y;var P=void 0;if(kn!==null){var J=kn.memoizedState;if(P=J.destroy,y!==null&&mu(y,J.deps)){_.memoizedState=bo(l,h,P,y);return}}en.flags|=s,_.memoizedState=bo(1|l,h,P,y)}function xu(s,l){return is(8390656,8,s,l)}function vu(s,l){return nl(2048,8,s,l)}function Dh(s,l){return nl(4,2,s,l)}function bu(s,l){return nl(4,4,s,l)}function wu(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Xg(s,l,h){return h=h!=null?h.concat([s]):null,nl(4,4,wu.bind(null,l,s),h)}function Gp(){}function Zg(s,l){var h=vo();l=l===void 0?null:l;var y=h.memoizedState;return y!==null&&l!==null&&mu(l,y[1])?y[0]:(h.memoizedState=[s,l],s)}function e1(s,l){var h=vo();l=l===void 0?null:l;var y=h.memoizedState;return y!==null&&l!==null&&mu(l,y[1])?y[0]:(s=s(),h.memoizedState=[s,l],s)}function t1(s,l,h){return(Ts&21)===0?(s.baseState&&(s.baseState=!1,Fo=!0),s.memoizedState=h):(ln(h,l)||(h=Oa(),en.lanes|=h,Ic|=h,s.baseState=!0),l)}function Yw(s,l){var h=nr;nr=h!==0&&4>h?h:4,s(!0);var y=pu.transition;pu.transition={};try{s(!1),l()}finally{nr=h,pu.transition=y}}function r1(){return vo().memoizedState}function Qw(s,l,h){var y=Vl(s);if(h={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null},n1(s))i1(l,h);else if(h=Nr(s,l,h,y),h!==null){var _=So();Xs(h,s,y,_),o1(h,l,y)}}function Xw(s,l,h){var y=Vl(s),_={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null};if(n1(s))i1(l,_);else{var P=s.alternate;if(s.lanes===0&&(P===null||P.lanes===0)&&(P=l.lastRenderedReducer,P!==null))try{var J=l.lastRenderedState,fe=P(J,h);if(_.hasEagerState=!0,_.eagerState=fe,ln(fe,J)){var be=l.interleaved;be===null?(_.next=_,vi(l)):(_.next=be.next,be.next=_),l.interleaved=_;return}}catch{}finally{}h=Nr(s,l,_,y),h!==null&&(_=So(),Xs(h,s,y,_),o1(h,l,y))}}function n1(s){var l=s.alternate;return s===en||l!==null&&l===en}function i1(s,l){Gs=Nl=!0;var h=s.pending;h===null?l.next=l:(l.next=h.next,h.next=l),s.pending=l}function o1(s,l,h){if((h&4194240)!==0){var y=l.lanes;y&=s.pendingLanes,h|=y,l.lanes=h,la(s,h)}}var Wh={readContext:hn,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useInsertionEffect:Vn,useLayoutEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useMutableSource:Vn,useSyncExternalStore:Vn,useId:Vn,unstable_isNewReconciler:!1},Zw={readContext:hn,useCallback:function(s,l){return ns().memoizedState=[s,l===void 0?null:l],s},useContext:hn,useEffect:xu,useImperativeHandle:function(s,l,h){return h=h!=null?h.concat([s]):null,is(4194308,4,wu.bind(null,l,s),h)},useLayoutEffect:function(s,l){return is(4194308,4,s,l)},useInsertionEffect:function(s,l){return is(4,2,s,l)},useMemo:function(s,l){var h=ns();return l=l===void 0?null:l,s=s(),h.memoizedState=[s,l],s},useReducer:function(s,l,h){var y=ns();return l=h!==void 0?h(l):l,y.memoizedState=y.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},y.queue=s,s=s.dispatch=Qw.bind(null,en,s),[y.memoizedState,s]},useRef:function(s){var l=ns();return s={current:s},l.memoizedState=s},useState:Ec,useDebugValue:Gp,useDeferredValue:function(s){return ns().memoizedState=s},useTransition:function(){var s=Ec(!1),l=s[0];return s=Yw.bind(null,s[1]),ns().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,h){var y=en,_=ns();if(De){if(h===void 0)throw Error(t(407));h=h()}else{if(h=l(),Si===null)throw Error(t(349));(Ts&30)!==0||Vh(y,l,h)}_.memoizedState=h;var P={value:h,getSnapshot:l};return _.queue=P,xu(Mh.bind(null,y,P,s),[s]),y.flags|=2048,bo(9,Id.bind(null,y,P,h,l),void 0,null),h},useId:function(){var s=ns(),l=Si.identifierPrefix;if(De){var h=le,y=Ee;h=(y&~(1<<32-Hn(y)-1)).toString(32)+h,l=":"+l+"R"+h,h=Ll++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=Hp++,l=":"+l+"r"+h.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},eS={readContext:hn,useCallback:Zg,useContext:hn,useEffect:vu,useImperativeHandle:Xg,useInsertionEffect:Dh,useLayoutEffect:bu,useMemo:e1,useReducer:gu,useRef:Ks,useState:function(){return gu(jc)},useDebugValue:Gp,useDeferredValue:function(s){var l=vo();return t1(l,kn.memoizedState,s)},useTransition:function(){var s=gu(jc)[0],l=vo().memoizedState;return[s,l]},useMutableSource:Oh,useSyncExternalStore:Ed,useId:r1,unstable_isNewReconciler:!1},tS={readContext:hn,useCallback:Zg,useContext:hn,useEffect:vu,useImperativeHandle:Xg,useInsertionEffect:Dh,useLayoutEffect:bu,useMemo:e1,useReducer:Sa,useRef:Ks,useState:function(){return Sa(jc)},useDebugValue:Gp,useDeferredValue:function(s){var l=vo();return kn===null?l.memoizedState=s:t1(l,kn.memoizedState,s)},useTransition:function(){var s=Sa(jc)[0],l=vo().memoizedState;return[s,l]},useMutableSource:Oh,useSyncExternalStore:Ed,useId:r1,unstable_isNewReconciler:!1};function Js(s,l){if(s&&s.defaultProps){l=xe({},l),s=s.defaultProps;for(var h in s)l[h]===void 0&&(l[h]=s[h]);return l}return l}function Kp(s,l,h,y){l=s.memoizedState,h=h(y,l),h=h==null?l:xe({},l,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var $h={isMounted:function(s){return(s=s._reactInternals)?mn(s)===s:!1},enqueueSetState:function(s,l,h){s=s._reactInternals;var y=So(),_=Vl(s),P=vn(y,_);P.payload=l,h!=null&&(P.callback=h),l=bn(s,P,_),l!==null&&(Xs(l,s,_,y),bi(l,s,_))},enqueueReplaceState:function(s,l,h){s=s._reactInternals;var y=So(),_=Vl(s),P=vn(y,_);P.tag=1,P.payload=l,h!=null&&(P.callback=h),l=bn(s,P,_),l!==null&&(Xs(l,s,_,y),bi(l,s,_))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var h=So(),y=Vl(s),_=vn(h,y);_.tag=2,l!=null&&(_.callback=l),l=bn(s,_,y),l!==null&&(Xs(l,s,y,h),bi(l,s,y))}};function s1(s,l,h,y,_,P,J){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,P,J):l.prototype&&l.prototype.isPureReactComponent?!Gi(h,y)||!Gi(_,P):!0}function a1(s,l,h){var y=!1,_=ba,P=l.contextType;return typeof P=="object"&&P!==null?P=hn(P):(_=Qi(l)?tl:ii.current,y=l.contextTypes,P=(y=y!=null)?Rl(s,_):ba),l=new l(h,P),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=$h,s.stateNode=l,l._reactInternals=s,y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=_,s.__reactInternalMemoizedMaskedChildContext=P),l}function l1(s,l,h,y){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,y),l.state!==s&&$h.enqueueReplaceState(l,l.state,null)}function Jp(s,l,h,y){var _=s.stateNode;_.props=h,_.state=s.memoizedState,_.refs={},oi(s);var P=l.contextType;typeof P=="object"&&P!==null?_.context=hn(P):(P=Qi(l)?tl:ii.current,_.context=Rl(s,P)),_.state=s.memoizedState,P=l.getDerivedStateFromProps,typeof P=="function"&&(Kp(s,l,P,h),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(l=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),l!==_.state&&$h.enqueueReplaceState(_,_.state,null),wi(s,h,_,y),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308)}function Su(s,l){try{var h="",y=l;do h+=de(y),y=y.return;while(y);var _=h}catch(P){_=`
Error generating stack: `+P.message+`
`+P.stack}return{value:s,source:l,stack:_,digest:null}}function Yp(s,l,h){return{value:s,source:null,stack:h??null,digest:l??null}}function Qp(s,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var rS=typeof WeakMap=="function"?WeakMap:Map;function c1(s,l,h){h=vn(-1,h),h.tag=3,h.payload={element:null};var y=l.value;return h.callback=function(){Yh||(Yh=!0,hm=y),Qp(s,l)},h}function u1(s,l,h){h=vn(-1,h),h.tag=3;var y=s.type.getDerivedStateFromError;if(typeof y=="function"){var _=l.value;h.payload=function(){return y(_)},h.callback=function(){Qp(s,l)}}var P=s.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(h.callback=function(){Qp(s,l),typeof y!="function"&&(zl===null?zl=new Set([this]):zl.add(this));var J=l.stack;this.componentDidCatch(l.value,{componentStack:J!==null?J:""})}),h}function d1(s,l,h){var y=s.pingCache;if(y===null){y=s.pingCache=new rS;var _=new Set;y.set(l,_)}else _=y.get(l),_===void 0&&(_=new Set,y.set(l,_));_.has(h)||(_.add(h),s=gS.bind(null,s,l,h),l.then(s,s))}function h1(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function f1(s,l,h,y,_){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=vn(-1,1),l.tag=2,bn(h,l,1))),h.lanes|=1),s):(s.flags|=65536,s.lanes=_,s)}var nS=B.ReactCurrentOwner,Fo=!1;function wo(s,l,h,y){l.child=s===null?rn(l,null,h,y):An(l,s.child,h,y)}function p1(s,l,h,y,_){h=h.render;var P=l.ref;return dn(l,_),y=kc(s,l,h,y,P,_),h=As(),s!==null&&!Fo?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~_,il(s,l,_)):(De&&h&&Ve(l),l.flags|=1,wo(s,l,y,_),l.child)}function m1(s,l,h,y,_){if(s===null){var P=h.type;return typeof P=="function"&&!vm(P)&&P.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=P,g1(s,l,P,y,_)):(s=rf(h.type,null,y,l,l.mode,_),s.ref=l.ref,s.return=l,l.child=s)}if(P=s.child,(s.lanes&_)===0){var J=P.memoizedProps;if(h=h.compare,h=h!==null?h:Gi,h(J,y)&&s.ref===l.ref)return il(s,l,_)}return l.flags|=1,s=Dl(P,y),s.ref=l.ref,s.return=l,l.child=s}function g1(s,l,h,y,_){if(s!==null){var P=s.memoizedProps;if(Gi(P,y)&&s.ref===l.ref)if(Fo=!1,l.pendingProps=y=P,(s.lanes&_)!==0)(s.flags&131072)!==0&&(Fo=!0);else return l.lanes=s.lanes,il(s,l,_)}return Xp(s,l,h,y,_)}function y1(s,l,h){var y=l.pendingProps,_=y.children,P=s!==null?s.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pr(Tu,os),os|=h;else{if((h&1073741824)===0)return s=P!==null?P.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,Pr(Tu,os),os|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=P!==null?P.baseLanes:h,Pr(Tu,os),os|=y}else P!==null?(y=P.baseLanes|h,l.memoizedState=null):y=h,Pr(Tu,os),os|=y;return wo(s,l,_,h),l.child}function x1(s,l){var h=l.ref;(s===null&&h!==null||s!==null&&s.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function Xp(s,l,h,y,_){var P=Qi(h)?tl:ii.current;return P=Rl(l,P),dn(l,_),h=kc(s,l,h,y,P,_),y=As(),s!==null&&!Fo?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~_,il(s,l,_)):(De&&y&&Ve(l),l.flags|=1,wo(s,l,h,_),l.child)}function v1(s,l,h,y,_){if(Qi(h)){var P=!0;rl(l)}else P=!1;if(dn(l,_),l.stateNode===null)qh(s,l),a1(l,h,y),Jp(l,h,y,_),y=!0;else if(s===null){var J=l.stateNode,fe=l.memoizedProps;J.props=fe;var be=J.context,Le=h.contextType;typeof Le=="object"&&Le!==null?Le=hn(Le):(Le=Qi(h)?tl:ii.current,Le=Rl(l,Le));var Je=h.getDerivedStateFromProps,Ye=typeof Je=="function"||typeof J.getSnapshotBeforeUpdate=="function";Ye||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(fe!==y||be!==Le)&&l1(l,J,y,Le),Cn=!1;var Ke=l.memoizedState;J.state=Ke,wi(l,y,J,_),be=l.memoizedState,fe!==y||Ke!==be||Yi.current||Cn?(typeof Je=="function"&&(Kp(l,h,Je,y),be=l.memoizedState),(fe=Cn||s1(l,h,fe,y,Ke,be,Le))?(Ye||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount()),typeof J.componentDidMount=="function"&&(l.flags|=4194308)):(typeof J.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=be),J.props=y,J.state=be,J.context=Le,y=fe):(typeof J.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{J=l.stateNode,Xi(s,l),fe=l.memoizedProps,Le=l.type===l.elementType?fe:Js(l.type,fe),J.props=Le,Ye=l.pendingProps,Ke=J.context,be=h.contextType,typeof be=="object"&&be!==null?be=hn(be):(be=Qi(h)?tl:ii.current,be=Rl(l,be));var ot=h.getDerivedStateFromProps;(Je=typeof ot=="function"||typeof J.getSnapshotBeforeUpdate=="function")||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(fe!==Ye||Ke!==be)&&l1(l,J,y,be),Cn=!1,Ke=l.memoizedState,J.state=Ke,wi(l,y,J,_);var mt=l.memoizedState;fe!==Ye||Ke!==mt||Yi.current||Cn?(typeof ot=="function"&&(Kp(l,h,ot,y),mt=l.memoizedState),(Le=Cn||s1(l,h,Le,y,Ke,mt,be)||!1)?(Je||typeof J.UNSAFE_componentWillUpdate!="function"&&typeof J.componentWillUpdate!="function"||(typeof J.componentWillUpdate=="function"&&J.componentWillUpdate(y,mt,be),typeof J.UNSAFE_componentWillUpdate=="function"&&J.UNSAFE_componentWillUpdate(y,mt,be)),typeof J.componentDidUpdate=="function"&&(l.flags|=4),typeof J.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof J.componentDidUpdate!="function"||fe===s.memoizedProps&&Ke===s.memoizedState||(l.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||fe===s.memoizedProps&&Ke===s.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=mt),J.props=y,J.state=mt,J.context=be,y=Le):(typeof J.componentDidUpdate!="function"||fe===s.memoizedProps&&Ke===s.memoizedState||(l.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||fe===s.memoizedProps&&Ke===s.memoizedState||(l.flags|=1024),y=!1)}return Zp(s,l,h,y,P,_)}function Zp(s,l,h,y,_,P){x1(s,l);var J=(l.flags&128)!==0;if(!y&&!J)return _&&Fh(l,h,!1),il(s,l,P);y=l.stateNode,nS.current=l;var fe=J&&typeof h.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,s!==null&&J?(l.child=An(l,s.child,null,P),l.child=An(l,null,fe,P)):wo(s,l,fe,P),l.memoizedState=y.state,_&&Fh(l,h,!0),l.child}function b1(s){var l=s.stateNode;l.pendingContext?Bh(s,l.pendingContext,l.pendingContext!==l.context):l.context&&Bh(s,l.context,!1),Pl(s,l.containerInfo)}function w1(s,l,h,y,_){return lt(),rt(_),l.flags|=256,wo(s,l,h,y),l.child}var em={dehydrated:null,treeContext:null,retryLane:0};function tm(s){return{baseLanes:s,cachePool:null,transitions:null}}function S1(s,l,h){var y=l.pendingProps,_=Yr.current,P=!1,J=(l.flags&128)!==0,fe;if((fe=J)||(fe=s!==null&&s.memoizedState===null?!1:(_&2)!==0),fe?(P=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(_|=1),Pr(Yr,_&1),s===null)return ht(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(J=y.children,s=y.fallback,P?(y=l.mode,P=l.child,J={mode:"hidden",children:J},(y&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=J):P=nf(J,y,0,null),s=Lc(s,y,h,null),P.return=l,s.return=l,P.sibling=s,l.child=P,l.child.memoizedState=tm(h),l.memoizedState=em,s):rm(l,J));if(_=s.memoizedState,_!==null&&(fe=_.dehydrated,fe!==null))return iS(s,l,J,y,fe,_,h);if(P){P=y.fallback,J=l.mode,_=s.child,fe=_.sibling;var be={mode:"hidden",children:y.children};return(J&1)===0&&l.child!==_?(y=l.child,y.childLanes=0,y.pendingProps=be,l.deletions=null):(y=Dl(_,be),y.subtreeFlags=_.subtreeFlags&14680064),fe!==null?P=Dl(fe,P):(P=Lc(P,J,h,null),P.flags|=2),P.return=l,y.return=l,y.sibling=P,l.child=y,y=P,P=l.child,J=s.child.memoizedState,J=J===null?tm(h):{baseLanes:J.baseLanes|h,cachePool:null,transitions:J.transitions},P.memoizedState=J,P.childLanes=s.childLanes&~h,l.memoizedState=em,y}return P=s.child,s=P.sibling,y=Dl(P,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=h),y.return=l,y.sibling=null,s!==null&&(h=l.deletions,h===null?(l.deletions=[s],l.flags|=16):h.push(s)),l.child=y,l.memoizedState=null,y}function rm(s,l){return l=nf({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function Uh(s,l,h,y){return y!==null&&rt(y),An(l,s.child,null,h),s=rm(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function iS(s,l,h,y,_,P,J){if(h)return l.flags&256?(l.flags&=-257,y=Yp(Error(t(422))),Uh(s,l,J,y)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(P=y.fallback,_=l.mode,y=nf({mode:"visible",children:y.children},_,0,null),P=Lc(P,_,J,null),P.flags|=2,y.return=l,P.return=l,y.sibling=P,l.child=y,(l.mode&1)!==0&&An(l,s.child,null,J),l.child.memoizedState=tm(J),l.memoizedState=em,P);if((l.mode&1)===0)return Uh(s,l,J,null);if(_.data==="$!"){if(y=_.nextSibling&&_.nextSibling.dataset,y)var fe=y.dgst;return y=fe,P=Error(t(419)),y=Yp(P,y,void 0),Uh(s,l,J,y)}if(fe=(J&s.childLanes)!==0,Fo||fe){if(y=Si,y!==null){switch(J&-J){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(y.suspendedLanes|J))!==0?0:_,_!==0&&_!==P.retryLane&&(P.retryLane=_,Wr(s,_),Xs(y,s,_,-1))}return xm(),y=Yp(Error(t(421))),Uh(s,l,J,y)}return _.data==="$?"?(l.flags|=128,l.child=s.child,l=yS.bind(null,s),_._reactRetry=l,null):(s=P.treeContext,Oe=Bi(_.nextSibling),ze=l,De=!0,We=null,s!==null&&(ne[ae++]=Ee,ne[ae++]=le,ne[ae++]=ve,Ee=s.id,le=s.overflow,ve=l),l=rm(l,y.children),l.flags|=4096,l)}function _1(s,l,h){s.lanes|=l;var y=s.alternate;y!==null&&(y.lanes|=l),Sr(s.return,l,h)}function nm(s,l,h,y,_){var P=s.memoizedState;P===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:_}:(P.isBackwards=l,P.rendering=null,P.renderingStartTime=0,P.last=y,P.tail=h,P.tailMode=_)}function T1(s,l,h){var y=l.pendingProps,_=y.revealOrder,P=y.tail;if(wo(s,l,y.children,h),y=Yr.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&_1(s,h,l);else if(s.tag===19)_1(s,h,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}if(Pr(Yr,y),(l.mode&1)===0)l.memoizedState=null;else switch(_){case"forwards":for(h=l.child,_=null;h!==null;)s=h.alternate,s!==null&&rs(s)===null&&(_=h),h=h.sibling;h=_,h===null?(_=l.child,l.child=null):(_=h.sibling,h.sibling=null),nm(l,!1,_,h,P);break;case"backwards":for(h=null,_=l.child,l.child=null;_!==null;){if(s=_.alternate,s!==null&&rs(s)===null){l.child=_;break}s=_.sibling,_.sibling=h,h=_,_=s}nm(l,!0,h,null,P);break;case"together":nm(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function qh(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function il(s,l,h){if(s!==null&&(l.dependencies=s.dependencies),Ic|=l.lanes,(h&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(t(153));if(l.child!==null){for(s=l.child,h=Dl(s,s.pendingProps),l.child=h,h.return=l;s.sibling!==null;)s=s.sibling,h=h.sibling=Dl(s,s.pendingProps),h.return=l;h.sibling=null}return l.child}function oS(s,l,h){switch(l.tag){case 3:b1(l),lt();break;case 5:zh(l);break;case 1:Qi(l.type)&&rl(l);break;case 4:Pl(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,_=l.memoizedProps.value;Pr(On,y._currentValue),y._currentValue=_;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(Pr(Yr,Yr.current&1),l.flags|=128,null):(h&l.child.childLanes)!==0?S1(s,l,h):(Pr(Yr,Yr.current&1),s=il(s,l,h),s!==null?s.sibling:null);Pr(Yr,Yr.current&1);break;case 19:if(y=(h&l.childLanes)!==0,(s.flags&128)!==0){if(y)return T1(s,l,h);l.flags|=128}if(_=l.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Pr(Yr,Yr.current),y)break;return null;case 22:case 23:return l.lanes=0,y1(s,l,h)}return il(s,l,h)}var A1,im,C1,k1;A1=function(s,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},im=function(){},C1=function(s,l,h,y){var _=s.memoizedProps;if(_!==y){s=l.stateNode,Hs(Yn.current);var P=null;switch(h){case"input":_=Fe(s,_),y=Fe(s,y),P=[];break;case"select":_=xe({},_,{value:void 0}),y=xe({},y,{value:void 0}),P=[];break;case"textarea":_=Gt(s,_),y=Gt(s,y),P=[];break;default:typeof _.onClick!="function"&&typeof y.onClick=="function"&&(s.onclick=jl)}ir(h,y);var J;h=null;for(Le in _)if(!y.hasOwnProperty(Le)&&_.hasOwnProperty(Le)&&_[Le]!=null)if(Le==="style"){var fe=_[Le];for(J in fe)fe.hasOwnProperty(J)&&(h||(h={}),h[J]="")}else Le!=="dangerouslySetInnerHTML"&&Le!=="children"&&Le!=="suppressContentEditableWarning"&&Le!=="suppressHydrationWarning"&&Le!=="autoFocus"&&(o.hasOwnProperty(Le)?P||(P=[]):(P=P||[]).push(Le,null));for(Le in y){var be=y[Le];if(fe=_!=null?_[Le]:void 0,y.hasOwnProperty(Le)&&be!==fe&&(be!=null||fe!=null))if(Le==="style")if(fe){for(J in fe)!fe.hasOwnProperty(J)||be&&be.hasOwnProperty(J)||(h||(h={}),h[J]="");for(J in be)be.hasOwnProperty(J)&&fe[J]!==be[J]&&(h||(h={}),h[J]=be[J])}else h||(P||(P=[]),P.push(Le,h)),h=be;else Le==="dangerouslySetInnerHTML"?(be=be?be.__html:void 0,fe=fe?fe.__html:void 0,be!=null&&fe!==be&&(P=P||[]).push(Le,be)):Le==="children"?typeof be!="string"&&typeof be!="number"||(P=P||[]).push(Le,""+be):Le!=="suppressContentEditableWarning"&&Le!=="suppressHydrationWarning"&&(o.hasOwnProperty(Le)?(be!=null&&Le==="onScroll"&&Mr("scroll",s),P||fe===be||(P=[])):(P=P||[]).push(Le,be))}h&&(P=P||[]).push("style",h);var Le=P;(l.updateQueue=Le)&&(l.flags|=4)}},k1=function(s,l,h,y){h!==y&&(l.flags|=4)};function Rd(s,l){if(!De)switch(s.tailMode){case"hidden":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function Zi(s){var l=s.alternate!==null&&s.alternate.child===s.child,h=0,y=0;if(l)for(var _=s.child;_!==null;)h|=_.lanes|_.childLanes,y|=_.subtreeFlags&14680064,y|=_.flags&14680064,_.return=s,_=_.sibling;else for(_=s.child;_!==null;)h|=_.lanes|_.childLanes,y|=_.subtreeFlags,y|=_.flags,_.return=s,_=_.sibling;return s.subtreeFlags|=y,s.childLanes=h,l}function sS(s,l,h){var y=l.pendingProps;switch(Re(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zi(l),null;case 1:return Qi(l.type)&&hu(),Zi(l),null;case 3:return y=l.stateNode,_s(),Ir(Yi),Ir(ii),jd(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(s===null||s.child===null)&&(un(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,We!==null&&(mm(We),We=null))),im(s,l),Zi(l),null;case 5:Cd(l);var _=Hs(wa.current);if(h=l.type,s!==null&&l.stateNode!=null)C1(s,l,h,y,_),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(t(166));return Zi(l),null}if(s=Hs(Yn.current),un(l)){y=l.stateNode,h=l.type;var P=l.memoizedProps;switch(y[Ss]=l,y[El]=P,s=(l.mode&1)!==0,h){case"dialog":Mr("cancel",y),Mr("close",y);break;case"iframe":case"object":case"embed":Mr("load",y);break;case"video":case"audio":for(_=0;_<xa.length;_++)Mr(xa[_],y);break;case"source":Mr("error",y);break;case"img":case"image":case"link":Mr("error",y),Mr("load",y);break;case"details":Mr("toggle",y);break;case"input":he(y,P),Mr("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!P.multiple},Mr("invalid",y);break;case"textarea":wt(y,P),Mr("invalid",y)}ir(h,P),_=null;for(var J in P)if(P.hasOwnProperty(J)){var fe=P[J];J==="children"?typeof fe=="string"?y.textContent!==fe&&(P.suppressHydrationWarning!==!0&&du(y.textContent,fe,s),_=["children",fe]):typeof fe=="number"&&y.textContent!==""+fe&&(P.suppressHydrationWarning!==!0&&du(y.textContent,fe,s),_=["children",""+fe]):o.hasOwnProperty(J)&&fe!=null&&J==="onScroll"&&Mr("scroll",y)}switch(h){case"input":qe(y),vt(y,P,!0);break;case"textarea":qe(y),Nt(y);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(y.onclick=jl)}y=_,l.updateQueue=y,y!==null&&(l.flags|=4)}else{J=_.nodeType===9?_:_.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Dt(h)),s==="http://www.w3.org/1999/xhtml"?h==="script"?(s=J.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof y.is=="string"?s=J.createElement(h,{is:y.is}):(s=J.createElement(h),h==="select"&&(J=s,y.multiple?J.multiple=!0:y.size&&(J.size=y.size))):s=J.createElementNS(s,h),s[Ss]=l,s[El]=y,A1(s,l,!1,!1),l.stateNode=s;e:{switch(J=At(h,y),h){case"dialog":Mr("cancel",s),Mr("close",s),_=y;break;case"iframe":case"object":case"embed":Mr("load",s),_=y;break;case"video":case"audio":for(_=0;_<xa.length;_++)Mr(xa[_],s);_=y;break;case"source":Mr("error",s),_=y;break;case"img":case"image":case"link":Mr("error",s),Mr("load",s),_=y;break;case"details":Mr("toggle",s),_=y;break;case"input":he(s,y),_=Fe(s,y),Mr("invalid",s);break;case"option":_=y;break;case"select":s._wrapperState={wasMultiple:!!y.multiple},_=xe({},y,{value:void 0}),Mr("invalid",s);break;case"textarea":wt(s,y),_=Gt(s,y),Mr("invalid",s);break;default:_=y}ir(h,_),fe=_;for(P in fe)if(fe.hasOwnProperty(P)){var be=fe[P];P==="style"?dt(s,be):P==="dangerouslySetInnerHTML"?(be=be?be.__html:void 0,be!=null&&St(s,be)):P==="children"?typeof be=="string"?(h!=="textarea"||be!=="")&&kt(s,be):typeof be=="number"&&kt(s,""+be):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(o.hasOwnProperty(P)?be!=null&&P==="onScroll"&&Mr("scroll",s):be!=null&&H(s,P,be,J))}switch(h){case"input":qe(s),vt(s,y,!1);break;case"textarea":qe(s),Nt(s);break;case"option":y.value!=null&&s.setAttribute("value",""+Ae(y.value));break;case"select":s.multiple=!!y.multiple,P=y.value,P!=null?tt(s,!!y.multiple,P,!1):y.defaultValue!=null&&tt(s,!!y.multiple,y.defaultValue,!0);break;default:typeof _.onClick=="function"&&(s.onclick=jl)}switch(h){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Zi(l),null;case 6:if(s&&l.stateNode!=null)k1(s,l,s.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(t(166));if(h=Hs(wa.current),Hs(Yn.current),un(l)){if(y=l.stateNode,h=l.memoizedProps,y[Ss]=l,(P=y.nodeValue!==h)&&(s=ze,s!==null))switch(s.tag){case 3:du(y.nodeValue,h,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&du(y.nodeValue,h,(s.mode&1)!==0)}P&&(l.flags|=4)}else y=(h.nodeType===9?h:h.ownerDocument).createTextNode(y),y[Ss]=l,l.stateNode=y}return Zi(l),null;case 13:if(Ir(Yr),y=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(De&&Oe!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Zt(),lt(),l.flags|=98560,P=!1;else if(P=un(l),y!==null&&y.dehydrated!==null){if(s===null){if(!P)throw Error(t(318));if(P=l.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(t(317));P[Ss]=l}else lt(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Zi(l),P=!1}else We!==null&&(mm(We),We=null),P=!0;if(!P)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=h,l):(y=y!==null,y!==(s!==null&&s.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(Yr.current&1)!==0?si===0&&(si=3):xm())),l.updateQueue!==null&&(l.flags|=4),Zi(l),null);case 4:return _s(),im(s,l),s===null&&Qa(l.stateNode.containerInfo),Zi(l),null;case 10:return Zr(l.type._context),Zi(l),null;case 17:return Qi(l.type)&&hu(),Zi(l),null;case 19:if(Ir(Yr),P=l.memoizedState,P===null)return Zi(l),null;if(y=(l.flags&128)!==0,J=P.rendering,J===null)if(y)Rd(P,!1);else{if(si!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(J=rs(s),J!==null){for(l.flags|=128,Rd(P,!1),y=J.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=h,h=l.child;h!==null;)P=h,s=y,P.flags&=14680066,J=P.alternate,J===null?(P.childLanes=0,P.lanes=s,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=J.childLanes,P.lanes=J.lanes,P.child=J.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=J.memoizedProps,P.memoizedState=J.memoizedState,P.updateQueue=J.updateQueue,P.type=J.type,s=J.dependencies,P.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),h=h.sibling;return Pr(Yr,Yr.current&1|2),l.child}s=s.sibling}P.tail!==null&&jr()>Au&&(l.flags|=128,y=!0,Rd(P,!1),l.lanes=4194304)}else{if(!y)if(s=rs(J),s!==null){if(l.flags|=128,y=!0,h=s.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),Rd(P,!0),P.tail===null&&P.tailMode==="hidden"&&!J.alternate&&!De)return Zi(l),null}else 2*jr()-P.renderingStartTime>Au&&h!==1073741824&&(l.flags|=128,y=!0,Rd(P,!1),l.lanes=4194304);P.isBackwards?(J.sibling=l.child,l.child=J):(h=P.last,h!==null?h.sibling=J:l.child=J,P.last=J)}return P.tail!==null?(l=P.tail,P.rendering=l,P.tail=l.sibling,P.renderingStartTime=jr(),l.sibling=null,h=Yr.current,Pr(Yr,y?h&1|2:h&1),l):(Zi(l),null);case 22:case 23:return ym(),y=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(os&1073741824)!==0&&(Zi(l),l.subtreeFlags&6&&(l.flags|=8192)):Zi(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function aS(s,l){switch(Re(l),l.tag){case 1:return Qi(l.type)&&hu(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return _s(),Ir(Yi),Ir(ii),jd(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return Cd(l),null;case 13:if(Ir(Yr),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(t(340));lt()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Ir(Yr),null;case 4:return _s(),null;case 10:return Zr(l.type._context),null;case 22:case 23:return ym(),null;case 24:return null;default:return null}}var Hh=!1,eo=!1,lS=typeof WeakSet=="function"?WeakSet:Set,ut=null;function _u(s,l){var h=s.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(y){jn(s,l,y)}else h.current=null}function om(s,l,h){try{h()}catch(y){jn(s,l,y)}}var j1=!1;function cS(s,l){if(Tc=Ko,s=Tn(),Zo(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var _=y.anchorOffset,P=y.focusNode;y=y.focusOffset;try{h.nodeType,P.nodeType}catch{h=null;break e}var J=0,fe=-1,be=-1,Le=0,Je=0,Ye=s,Ke=null;t:for(;;){for(var ot;Ye!==h||_!==0&&Ye.nodeType!==3||(fe=J+_),Ye!==P||y!==0&&Ye.nodeType!==3||(be=J+y),Ye.nodeType===3&&(J+=Ye.nodeValue.length),(ot=Ye.firstChild)!==null;)Ke=Ye,Ye=ot;for(;;){if(Ye===s)break t;if(Ke===h&&++Le===_&&(fe=J),Ke===P&&++Je===y&&(be=J),(ot=Ye.nextSibling)!==null)break;Ye=Ke,Ke=Ye.parentNode}Ye=ot}h=fe===-1||be===-1?null:{start:fe,end:be}}else h=null}h=h||{start:0,end:0}}else h=null;for(Za={focusedElem:s,selectionRange:h},Ko=!1,ut=l;ut!==null;)if(l=ut,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,ut=s;else for(;ut!==null;){l=ut;try{var mt=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(mt!==null){var xt=mt.memoizedProps,Mn=mt.memoizedState,Ie=l.stateNode,_e=Ie.getSnapshotBeforeUpdate(l.elementType===l.type?xt:Js(l.type,xt),Mn);Ie.__reactInternalSnapshotBeforeUpdate=_e}break;case 3:var Ne=l.stateNode.containerInfo;Ne.nodeType===1?Ne.textContent="":Ne.nodeType===9&&Ne.documentElement&&Ne.removeChild(Ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Xe){jn(l,l.return,Xe)}if(s=l.sibling,s!==null){s.return=l.return,ut=s;break}ut=l.return}return mt=j1,j1=!1,mt}function Pd(s,l,h){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var _=y=y.next;do{if((_.tag&s)===s){var P=_.destroy;_.destroy=void 0,P!==void 0&&om(l,h,P)}_=_.next}while(_!==y)}}function Gh(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&s)===s){var y=h.create;h.destroy=y()}h=h.next}while(h!==l)}}function sm(s){var l=s.ref;if(l!==null){var h=s.stateNode;switch(s.tag){case 5:s=h;break;default:s=h}typeof l=="function"?l(s):l.current=s}}function E1(s){var l=s.alternate;l!==null&&(s.alternate=null,E1(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[Ss],delete l[El],delete l[Ji],delete l[Up],delete l[qp])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function I1(s){return s.tag===5||s.tag===3||s.tag===4}function R1(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||I1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function am(s,l,h){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(s,l):h.insertBefore(s,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(s,h)):(l=h,l.appendChild(s)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=jl));else if(y!==4&&(s=s.child,s!==null))for(am(s,l,h),s=s.sibling;s!==null;)am(s,l,h),s=s.sibling}function lm(s,l,h){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?h.insertBefore(s,l):h.appendChild(s);else if(y!==4&&(s=s.child,s!==null))for(lm(s,l,h),s=s.sibling;s!==null;)lm(s,l,h),s=s.sibling}var Fi=null,Ys=!1;function Fl(s,l,h){for(h=h.child;h!==null;)P1(s,l,h),h=h.sibling}function P1(s,l,h){if(di&&typeof di.onCommitFiberUnmount=="function")try{di.onCommitFiberUnmount(hs,h)}catch{}switch(h.tag){case 5:eo||_u(h,l);case 6:var y=Fi,_=Ys;Fi=null,Fl(s,l,h),Fi=y,Ys=_,Fi!==null&&(Ys?(s=Fi,h=h.stateNode,s.nodeType===8?s.parentNode.removeChild(h):s.removeChild(h)):Fi.removeChild(h.stateNode));break;case 18:Fi!==null&&(Ys?(s=Fi,h=h.stateNode,s.nodeType===8?_d(s.parentNode,h):s.nodeType===1&&_d(s,h),mo(s)):_d(Fi,h.stateNode));break;case 4:y=Fi,_=Ys,Fi=h.stateNode.containerInfo,Ys=!0,Fl(s,l,h),Fi=y,Ys=_;break;case 0:case 11:case 14:case 15:if(!eo&&(y=h.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){_=y=y.next;do{var P=_,J=P.destroy;P=P.tag,J!==void 0&&((P&2)!==0||(P&4)!==0)&&om(h,l,J),_=_.next}while(_!==y)}Fl(s,l,h);break;case 1:if(!eo&&(_u(h,l),y=h.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=h.memoizedProps,y.state=h.memoizedState,y.componentWillUnmount()}catch(fe){jn(h,l,fe)}Fl(s,l,h);break;case 21:Fl(s,l,h);break;case 22:h.mode&1?(eo=(y=eo)||h.memoizedState!==null,Fl(s,l,h),eo=y):Fl(s,l,h);break;default:Fl(s,l,h)}}function N1(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var h=s.stateNode;h===null&&(h=s.stateNode=new lS),l.forEach(function(y){var _=xS.bind(null,s,y);h.has(y)||(h.add(y),y.then(_,_))})}}function Qs(s,l){var h=l.deletions;if(h!==null)for(var y=0;y<h.length;y++){var _=h[y];try{var P=s,J=l,fe=J;e:for(;fe!==null;){switch(fe.tag){case 5:Fi=fe.stateNode,Ys=!1;break e;case 3:Fi=fe.stateNode.containerInfo,Ys=!0;break e;case 4:Fi=fe.stateNode.containerInfo,Ys=!0;break e}fe=fe.return}if(Fi===null)throw Error(t(160));P1(P,J,_),Fi=null,Ys=!1;var be=_.alternate;be!==null&&(be.return=null),_.return=null}catch(Le){jn(_,l,Le)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)L1(l,s),l=l.sibling}function L1(s,l){var h=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Qs(l,s),_a(s),y&4){try{Pd(3,s,s.return),Gh(3,s)}catch(xt){jn(s,s.return,xt)}try{Pd(5,s,s.return)}catch(xt){jn(s,s.return,xt)}}break;case 1:Qs(l,s),_a(s),y&512&&h!==null&&_u(h,h.return);break;case 5:if(Qs(l,s),_a(s),y&512&&h!==null&&_u(h,h.return),s.flags&32){var _=s.stateNode;try{kt(_,"")}catch(xt){jn(s,s.return,xt)}}if(y&4&&(_=s.stateNode,_!=null)){var P=s.memoizedProps,J=h!==null?h.memoizedProps:P,fe=s.type,be=s.updateQueue;if(s.updateQueue=null,be!==null)try{fe==="input"&&P.type==="radio"&&P.name!=null&&Pt(_,P),At(fe,J);var Le=At(fe,P);for(J=0;J<be.length;J+=2){var Je=be[J],Ye=be[J+1];Je==="style"?dt(_,Ye):Je==="dangerouslySetInnerHTML"?St(_,Ye):Je==="children"?kt(_,Ye):H(_,Je,Ye,Le)}switch(fe){case"input":Ct(_,P);break;case"textarea":hr(_,P);break;case"select":var Ke=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!P.multiple;var ot=P.value;ot!=null?tt(_,!!P.multiple,ot,!1):Ke!==!!P.multiple&&(P.defaultValue!=null?tt(_,!!P.multiple,P.defaultValue,!0):tt(_,!!P.multiple,P.multiple?[]:"",!1))}_[El]=P}catch(xt){jn(s,s.return,xt)}}break;case 6:if(Qs(l,s),_a(s),y&4){if(s.stateNode===null)throw Error(t(162));_=s.stateNode,P=s.memoizedProps;try{_.nodeValue=P}catch(xt){jn(s,s.return,xt)}}break;case 3:if(Qs(l,s),_a(s),y&4&&h!==null&&h.memoizedState.isDehydrated)try{mo(l.containerInfo)}catch(xt){jn(s,s.return,xt)}break;case 4:Qs(l,s),_a(s);break;case 13:Qs(l,s),_a(s),_=s.child,_.flags&8192&&(P=_.memoizedState!==null,_.stateNode.isHidden=P,!P||_.alternate!==null&&_.alternate.memoizedState!==null||(dm=jr())),y&4&&N1(s);break;case 22:if(Je=h!==null&&h.memoizedState!==null,s.mode&1?(eo=(Le=eo)||Je,Qs(l,s),eo=Le):Qs(l,s),_a(s),y&8192){if(Le=s.memoizedState!==null,(s.stateNode.isHidden=Le)&&!Je&&(s.mode&1)!==0)for(ut=s,Je=s.child;Je!==null;){for(Ye=ut=Je;ut!==null;){switch(Ke=ut,ot=Ke.child,Ke.tag){case 0:case 11:case 14:case 15:Pd(4,Ke,Ke.return);break;case 1:_u(Ke,Ke.return);var mt=Ke.stateNode;if(typeof mt.componentWillUnmount=="function"){y=Ke,h=Ke.return;try{l=y,mt.props=l.memoizedProps,mt.state=l.memoizedState,mt.componentWillUnmount()}catch(xt){jn(y,h,xt)}}break;case 5:_u(Ke,Ke.return);break;case 22:if(Ke.memoizedState!==null){z1(Ye);continue}}ot!==null?(ot.return=Ke,ut=ot):z1(Ye)}Je=Je.sibling}e:for(Je=null,Ye=s;;){if(Ye.tag===5){if(Je===null){Je=Ye;try{_=Ye.stateNode,Le?(P=_.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(fe=Ye.stateNode,be=Ye.memoizedProps.style,J=be!=null&&be.hasOwnProperty("display")?be.display:null,fe.style.display=rr("display",J))}catch(xt){jn(s,s.return,xt)}}}else if(Ye.tag===6){if(Je===null)try{Ye.stateNode.nodeValue=Le?"":Ye.memoizedProps}catch(xt){jn(s,s.return,xt)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===s)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===s)break e;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===s)break e;Je===Ye&&(Je=null),Ye=Ye.return}Je===Ye&&(Je=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}break;case 19:Qs(l,s),_a(s),y&4&&N1(s);break;case 21:break;default:Qs(l,s),_a(s)}}function _a(s){var l=s.flags;if(l&2){try{e:{for(var h=s.return;h!==null;){if(I1(h)){var y=h;break e}h=h.return}throw Error(t(160))}switch(y.tag){case 5:var _=y.stateNode;y.flags&32&&(kt(_,""),y.flags&=-33);var P=R1(s);lm(s,P,_);break;case 3:case 4:var J=y.stateNode.containerInfo,fe=R1(s);am(s,fe,J);break;default:throw Error(t(161))}}catch(be){jn(s,s.return,be)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function uS(s,l,h){ut=s,B1(s)}function B1(s,l,h){for(var y=(s.mode&1)!==0;ut!==null;){var _=ut,P=_.child;if(_.tag===22&&y){var J=_.memoizedState!==null||Hh;if(!J){var fe=_.alternate,be=fe!==null&&fe.memoizedState!==null||eo;fe=Hh;var Le=eo;if(Hh=J,(eo=be)&&!Le)for(ut=_;ut!==null;)J=ut,be=J.child,J.tag===22&&J.memoizedState!==null?O1(_):be!==null?(be.return=J,ut=be):O1(_);for(;P!==null;)ut=P,B1(P),P=P.sibling;ut=_,Hh=fe,eo=Le}F1(s)}else(_.subtreeFlags&8772)!==0&&P!==null?(P.return=_,ut=P):F1(s)}}function F1(s){for(;ut!==null;){var l=ut;if((l.flags&8772)!==0){var h=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:eo||Gh(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!eo)if(h===null)y.componentDidMount();else{var _=l.elementType===l.type?h.memoizedProps:Js(l.type,h.memoizedProps);y.componentDidUpdate(_,h.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var P=l.updateQueue;P!==null&&Bo(l,P,y);break;case 3:var J=l.updateQueue;if(J!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}Bo(l,J,h)}break;case 5:var fe=l.stateNode;if(h===null&&l.flags&4){h=fe;var be=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":be.autoFocus&&h.focus();break;case"img":be.src&&(h.src=be.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Le=l.alternate;if(Le!==null){var Je=Le.memoizedState;if(Je!==null){var Ye=Je.dehydrated;Ye!==null&&mo(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}eo||l.flags&512&&sm(l)}catch(Ke){jn(l,l.return,Ke)}}if(l===s){ut=null;break}if(h=l.sibling,h!==null){h.return=l.return,ut=h;break}ut=l.return}}function z1(s){for(;ut!==null;){var l=ut;if(l===s){ut=null;break}var h=l.sibling;if(h!==null){h.return=l.return,ut=h;break}ut=l.return}}function O1(s){for(;ut!==null;){var l=ut;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{Gh(4,l)}catch(be){jn(l,h,be)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var _=l.return;try{y.componentDidMount()}catch(be){jn(l,_,be)}}var P=l.return;try{sm(l)}catch(be){jn(l,P,be)}break;case 5:var J=l.return;try{sm(l)}catch(be){jn(l,J,be)}}}catch(be){jn(l,l.return,be)}if(l===s){ut=null;break}var fe=l.sibling;if(fe!==null){fe.return=l.return,ut=fe;break}ut=l.return}}var dS=Math.ceil,Kh=B.ReactCurrentDispatcher,cm=B.ReactCurrentOwner,Cs=B.ReactCurrentBatchConfig,_r=0,Si=null,Qn=null,zi=0,os=0,Tu=es(0),si=0,Nd=null,Ic=0,Jh=0,um=0,Ld=null,zo=null,dm=0,Au=1/0,ol=null,Yh=!1,hm=null,zl=null,Qh=!1,Ol=null,Xh=0,Bd=0,fm=null,Zh=-1,ef=0;function So(){return(_r&6)!==0?jr():Zh!==-1?Zh:Zh=jr()}function Vl(s){return(s.mode&1)===0?1:(_r&2)!==0&&zi!==0?zi&-zi:xn.transition!==null?(ef===0&&(ef=Oa()),ef):(s=nr,s!==0||(s=window.event,s=s===void 0?16:Yo(s.type)),s)}function Xs(s,l,h,y){if(50<Bd)throw Bd=0,fm=null,Error(t(185));Ls(s,h,y),((_r&2)===0||s!==Si)&&(s===Si&&((_r&2)===0&&(Jh|=h),si===4&&Ml(s,zi)),Oo(s,y),h===1&&_r===0&&(l.mode&1)===0&&(Au=jr()+500,Cc&&O()))}function Oo(s,l){var h=s.callbackNode;zr(s,l);var y=Ln(s,s===Si?zi:0);if(y===0)h!==null&&Uo(h),s.callbackNode=null,s.callbackPriority=0;else if(l=y&-y,s.callbackPriority!==l){if(h!=null&&Uo(h),l===1)s.tag===0?E(M1.bind(null,s)):x(M1.bind(null,s)),Wp(function(){(_r&6)===0&&O()}),h=null;else{switch(ri(y)){case 1:h=Ps;break;case 4:h=ui;break;case 16:h=Ho;break;case 536870912:h=ds;break;default:h=Ho}h=K1(h,V1.bind(null,s))}s.callbackPriority=l,s.callbackNode=h}}function V1(s,l){if(Zh=-1,ef=0,(_r&6)!==0)throw Error(t(327));var h=s.callbackNode;if(Cu()&&s.callbackNode!==h)return null;var y=Ln(s,s===Si?zi:0);if(y===0)return null;if((y&30)!==0||(y&s.expiredLanes)!==0||l)l=tf(s,y);else{l=y;var _=_r;_r|=2;var P=W1();(Si!==s||zi!==l)&&(ol=null,Au=jr()+500,Pc(s,l));do try{pS();break}catch(fe){D1(s,fe)}while(!0);wr(),Kh.current=P,_r=_,Qn!==null?l=0:(Si=null,zi=0,l=si)}if(l!==0){if(l===2&&(_=Ns(s),_!==0&&(y=_,l=pm(s,_))),l===1)throw h=Nd,Pc(s,0),Ml(s,y),Oo(s,jr()),h;if(l===6)Ml(s,y);else{if(_=s.current.alternate,(y&30)===0&&!hS(_)&&(l=tf(s,y),l===2&&(P=Ns(s),P!==0&&(y=P,l=pm(s,P))),l===1))throw h=Nd,Pc(s,0),Ml(s,y),Oo(s,jr()),h;switch(s.finishedWork=_,s.finishedLanes=y,l){case 0:case 1:throw Error(t(345));case 2:Nc(s,zo,ol);break;case 3:if(Ml(s,y),(y&130023424)===y&&(l=dm+500-jr(),10<l)){if(Ln(s,0)!==0)break;if(_=s.suspendedLanes,(_&y)!==y){So(),s.pingedLanes|=s.suspendedLanes&_;break}s.timeoutHandle=Sd(Nc.bind(null,s,zo,ol),l);break}Nc(s,zo,ol);break;case 4:if(Ml(s,y),(y&4194240)===y)break;for(l=s.eventTimes,_=-1;0<y;){var J=31-Hn(y);P=1<<J,J=l[J],J>_&&(_=J),y&=~P}if(y=_,y=jr()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*dS(y/1960))-y,10<y){s.timeoutHandle=Sd(Nc.bind(null,s,zo,ol),y);break}Nc(s,zo,ol);break;case 5:Nc(s,zo,ol);break;default:throw Error(t(329))}}}return Oo(s,jr()),s.callbackNode===h?V1.bind(null,s):null}function pm(s,l){var h=Ld;return s.current.memoizedState.isDehydrated&&(Pc(s,l).flags|=256),s=tf(s,l),s!==2&&(l=zo,zo=h,l!==null&&mm(l)),s}function mm(s){zo===null?zo=s:zo.push.apply(zo,s)}function hS(s){for(var l=s;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var y=0;y<h.length;y++){var _=h[y],P=_.getSnapshot;_=_.value;try{if(!ln(P(),_))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ml(s,l){for(l&=~um,l&=~Jh,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var h=31-Hn(l),y=1<<h;s[h]=-1,l&=~y}}function M1(s){if((_r&6)!==0)throw Error(t(327));Cu();var l=Ln(s,0);if((l&1)===0)return Oo(s,jr()),null;var h=tf(s,l);if(s.tag!==0&&h===2){var y=Ns(s);y!==0&&(l=y,h=pm(s,y))}if(h===1)throw h=Nd,Pc(s,0),Ml(s,l),Oo(s,jr()),h;if(h===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,Nc(s,zo,ol),Oo(s,jr()),null}function gm(s,l){var h=_r;_r|=1;try{return s(l)}finally{_r=h,_r===0&&(Au=jr()+500,Cc&&O())}}function Rc(s){Ol!==null&&Ol.tag===0&&(_r&6)===0&&Cu();var l=_r;_r|=1;var h=Cs.transition,y=nr;try{if(Cs.transition=null,nr=1,s)return s()}finally{nr=y,Cs.transition=h,_r=l,(_r&6)===0&&O()}}function ym(){os=Tu.current,Ir(Tu)}function Pc(s,l){s.finishedWork=null,s.finishedLanes=0;var h=s.timeoutHandle;if(h!==-1&&(s.timeoutHandle=-1,Nh(h)),Qn!==null)for(h=Qn.return;h!==null;){var y=h;switch(Re(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&hu();break;case 3:_s(),Ir(Yi),Ir(ii),jd();break;case 5:Cd(y);break;case 4:_s();break;case 13:Ir(Yr);break;case 19:Ir(Yr);break;case 10:Zr(y.type._context);break;case 22:case 23:ym()}h=h.return}if(Si=s,Qn=s=Dl(s.current,null),zi=os=l,si=0,Nd=null,um=Jh=Ic=0,zo=Ld=null,Dr!==null){for(l=0;l<Dr.length;l++)if(h=Dr[l],y=h.interleaved,y!==null){h.interleaved=null;var _=y.next,P=h.pending;if(P!==null){var J=P.next;P.next=_,y.next=J}h.pending=y}Dr=null}return s}function D1(s,l){do{var h=Qn;try{if(wr(),fu.current=Wh,Nl){for(var y=en.memoizedState;y!==null;){var _=y.queue;_!==null&&(_.pending=null),y=y.next}Nl=!1}if(Ts=0,Sn=kn=en=null,Gs=!1,Ll=0,cm.current=null,h===null||h.return===null){si=1,Nd=l,Qn=null;break}e:{var P=s,J=h.return,fe=h,be=l;if(l=zi,fe.flags|=32768,be!==null&&typeof be=="object"&&typeof be.then=="function"){var Le=be,Je=fe,Ye=Je.tag;if((Je.mode&1)===0&&(Ye===0||Ye===11||Ye===15)){var Ke=Je.alternate;Ke?(Je.updateQueue=Ke.updateQueue,Je.memoizedState=Ke.memoizedState,Je.lanes=Ke.lanes):(Je.updateQueue=null,Je.memoizedState=null)}var ot=h1(J);if(ot!==null){ot.flags&=-257,f1(ot,J,fe,P,l),ot.mode&1&&d1(P,Le,l),l=ot,be=Le;var mt=l.updateQueue;if(mt===null){var xt=new Set;xt.add(be),l.updateQueue=xt}else mt.add(be);break e}else{if((l&1)===0){d1(P,Le,l),xm();break e}be=Error(t(426))}}else if(De&&fe.mode&1){var Mn=h1(J);if(Mn!==null){(Mn.flags&65536)===0&&(Mn.flags|=256),f1(Mn,J,fe,P,l),rt(Su(be,fe));break e}}P=be=Su(be,fe),si!==4&&(si=2),Ld===null?Ld=[P]:Ld.push(P),P=J;do{switch(P.tag){case 3:P.flags|=65536,l&=-l,P.lanes|=l;var Ie=c1(P,be,l);$r(P,Ie);break e;case 1:fe=be;var _e=P.type,Ne=P.stateNode;if((P.flags&128)===0&&(typeof _e.getDerivedStateFromError=="function"||Ne!==null&&typeof Ne.componentDidCatch=="function"&&(zl===null||!zl.has(Ne)))){P.flags|=65536,l&=-l,P.lanes|=l;var Xe=u1(P,fe,l);$r(P,Xe);break e}}P=P.return}while(P!==null)}U1(h)}catch(_t){l=_t,Qn===h&&h!==null&&(Qn=h=h.return);continue}break}while(!0)}function W1(){var s=Kh.current;return Kh.current=Wh,s===null?Wh:s}function xm(){(si===0||si===3||si===2)&&(si=4),Si===null||(Ic&268435455)===0&&(Jh&268435455)===0||Ml(Si,zi)}function tf(s,l){var h=_r;_r|=2;var y=W1();(Si!==s||zi!==l)&&(ol=null,Pc(s,l));do try{fS();break}catch(_){D1(s,_)}while(!0);if(wr(),_r=h,Kh.current=y,Qn!==null)throw Error(t(261));return Si=null,zi=0,si}function fS(){for(;Qn!==null;)$1(Qn)}function pS(){for(;Qn!==null&&!To();)$1(Qn)}function $1(s){var l=G1(s.alternate,s,os);s.memoizedProps=s.pendingProps,l===null?U1(s):Qn=l,cm.current=null}function U1(s){var l=s;do{var h=l.alternate;if(s=l.return,(l.flags&32768)===0){if(h=sS(h,l,os),h!==null){Qn=h;return}}else{if(h=aS(h,l),h!==null){h.flags&=32767,Qn=h;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{si=6,Qn=null;return}}if(l=l.sibling,l!==null){Qn=l;return}Qn=l=s}while(l!==null);si===0&&(si=5)}function Nc(s,l,h){var y=nr,_=Cs.transition;try{Cs.transition=null,nr=1,mS(s,l,h,y)}finally{Cs.transition=_,nr=y}return null}function mS(s,l,h,y){do Cu();while(Ol!==null);if((_r&6)!==0)throw Error(t(327));h=s.finishedWork;var _=s.finishedLanes;if(h===null)return null;if(s.finishedWork=null,s.finishedLanes=0,h===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var P=h.lanes|h.childLanes;if(Co(s,P),s===Si&&(Qn=Si=null,zi=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Qh||(Qh=!0,K1(Ho,function(){return Cu(),null})),P=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||P){P=Cs.transition,Cs.transition=null;var J=nr;nr=1;var fe=_r;_r|=4,cm.current=null,cS(s,h),L1(h,s),gc(Za),Ko=!!Tc,Za=Tc=null,s.current=h,uS(h),qo(),_r=fe,nr=J,Cs.transition=P}else s.current=h;if(Qh&&(Qh=!1,Ol=s,Xh=_),P=s.pendingLanes,P===0&&(zl=null),za(h.stateNode),Oo(s,jr()),l!==null)for(y=s.onRecoverableError,h=0;h<l.length;h++)_=l[h],y(_.value,{componentStack:_.stack,digest:_.digest});if(Yh)throw Yh=!1,s=hm,hm=null,s;return(Xh&1)!==0&&s.tag!==0&&Cu(),P=s.pendingLanes,(P&1)!==0?s===fm?Bd++:(Bd=0,fm=s):Bd=0,O(),null}function Cu(){if(Ol!==null){var s=ri(Xh),l=Cs.transition,h=nr;try{if(Cs.transition=null,nr=16>s?16:s,Ol===null)var y=!1;else{if(s=Ol,Ol=null,Xh=0,(_r&6)!==0)throw Error(t(331));var _=_r;for(_r|=4,ut=s.current;ut!==null;){var P=ut,J=P.child;if((ut.flags&16)!==0){var fe=P.deletions;if(fe!==null){for(var be=0;be<fe.length;be++){var Le=fe[be];for(ut=Le;ut!==null;){var Je=ut;switch(Je.tag){case 0:case 11:case 15:Pd(8,Je,P)}var Ye=Je.child;if(Ye!==null)Ye.return=Je,ut=Ye;else for(;ut!==null;){Je=ut;var Ke=Je.sibling,ot=Je.return;if(E1(Je),Je===Le){ut=null;break}if(Ke!==null){Ke.return=ot,ut=Ke;break}ut=ot}}}var mt=P.alternate;if(mt!==null){var xt=mt.child;if(xt!==null){mt.child=null;do{var Mn=xt.sibling;xt.sibling=null,xt=Mn}while(xt!==null)}}ut=P}}if((P.subtreeFlags&2064)!==0&&J!==null)J.return=P,ut=J;else e:for(;ut!==null;){if(P=ut,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:Pd(9,P,P.return)}var Ie=P.sibling;if(Ie!==null){Ie.return=P.return,ut=Ie;break e}ut=P.return}}var _e=s.current;for(ut=_e;ut!==null;){J=ut;var Ne=J.child;if((J.subtreeFlags&2064)!==0&&Ne!==null)Ne.return=J,ut=Ne;else e:for(J=_e;ut!==null;){if(fe=ut,(fe.flags&2048)!==0)try{switch(fe.tag){case 0:case 11:case 15:Gh(9,fe)}}catch(_t){jn(fe,fe.return,_t)}if(fe===J){ut=null;break e}var Xe=fe.sibling;if(Xe!==null){Xe.return=fe.return,ut=Xe;break e}ut=fe.return}}if(_r=_,O(),di&&typeof di.onPostCommitFiberRoot=="function")try{di.onPostCommitFiberRoot(hs,s)}catch{}y=!0}return y}finally{nr=h,Cs.transition=l}}return!1}function q1(s,l,h){l=Su(h,l),l=c1(s,l,1),s=bn(s,l,1),l=So(),s!==null&&(Ls(s,1,l),Oo(s,l))}function jn(s,l,h){if(s.tag===3)q1(s,s,h);else for(;l!==null;){if(l.tag===3){q1(l,s,h);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(zl===null||!zl.has(y))){s=Su(h,s),s=u1(l,s,1),l=bn(l,s,1),s=So(),l!==null&&(Ls(l,1,s),Oo(l,s));break}}l=l.return}}function gS(s,l,h){var y=s.pingCache;y!==null&&y.delete(l),l=So(),s.pingedLanes|=s.suspendedLanes&h,Si===s&&(zi&h)===h&&(si===4||si===3&&(zi&130023424)===zi&&500>jr()-dm?Pc(s,0):um|=h),Oo(s,l)}function H1(s,l){l===0&&((s.mode&1)===0?l=1:(l=hi,hi<<=1,(hi&130023424)===0&&(hi=4194304)));var h=So();s=Wr(s,l),s!==null&&(Ls(s,l,h),Oo(s,h))}function yS(s){var l=s.memoizedState,h=0;l!==null&&(h=l.retryLane),H1(s,h)}function xS(s,l){var h=0;switch(s.tag){case 13:var y=s.stateNode,_=s.memoizedState;_!==null&&(h=_.retryLane);break;case 19:y=s.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(l),H1(s,h)}var G1;G1=function(s,l,h){if(s!==null)if(s.memoizedProps!==l.pendingProps||Yi.current)Fo=!0;else{if((s.lanes&h)===0&&(l.flags&128)===0)return Fo=!1,oS(s,l,h);Fo=(s.flags&131072)!==0}else Fo=!1,De&&(l.flags&1048576)!==0&&je(l,Z,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;qh(s,l),s=l.pendingProps;var _=Rl(l,ii.current);dn(l,h),_=kc(null,l,y,s,_,h);var P=As();return l.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Qi(y)?(P=!0,rl(l)):P=!1,l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,oi(l),_.updater=$h,l.stateNode=_,_._reactInternals=l,Jp(l,y,s,h),l=Zp(null,l,y,!0,P,h)):(l.tag=0,De&&P&&Ve(l),wo(null,l,_,h),l=l.child),l;case 16:y=l.elementType;e:{switch(qh(s,l),s=l.pendingProps,_=y._init,y=_(y._payload),l.type=y,_=l.tag=bS(y),s=Js(y,s),_){case 0:l=Xp(null,l,y,s,h);break e;case 1:l=v1(null,l,y,s,h);break e;case 11:l=p1(null,l,y,s,h);break e;case 14:l=m1(null,l,y,Js(y.type,s),h);break e}throw Error(t(306,y,""))}return l;case 0:return y=l.type,_=l.pendingProps,_=l.elementType===y?_:Js(y,_),Xp(s,l,y,_,h);case 1:return y=l.type,_=l.pendingProps,_=l.elementType===y?_:Js(y,_),v1(s,l,y,_,h);case 3:e:{if(b1(l),s===null)throw Error(t(387));y=l.pendingProps,P=l.memoizedState,_=P.element,Xi(s,l),wi(l,y,null,h);var J=l.memoizedState;if(y=J.element,P.isDehydrated)if(P={element:y,isDehydrated:!1,cache:J.cache,pendingSuspenseBoundaries:J.pendingSuspenseBoundaries,transitions:J.transitions},l.updateQueue.baseState=P,l.memoizedState=P,l.flags&256){_=Su(Error(t(423)),l),l=w1(s,l,y,h,_);break e}else if(y!==_){_=Su(Error(t(424)),l),l=w1(s,l,y,h,_);break e}else for(Oe=Bi(l.stateNode.containerInfo.firstChild),ze=l,De=!0,We=null,h=rn(l,null,y,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(lt(),y===_){l=il(s,l,h);break e}wo(s,l,y,h)}l=l.child}return l;case 5:return zh(l),s===null&&ht(l),y=l.type,_=l.pendingProps,P=s!==null?s.memoizedProps:null,J=_.children,wd(y,_)?J=null:P!==null&&wd(y,P)&&(l.flags|=32),x1(s,l),wo(s,l,J,h),l.child;case 6:return s===null&&ht(l),null;case 13:return S1(s,l,h);case 4:return Pl(l,l.stateNode.containerInfo),y=l.pendingProps,s===null?l.child=An(l,null,y,h):wo(s,l,y,h),l.child;case 11:return y=l.type,_=l.pendingProps,_=l.elementType===y?_:Js(y,_),p1(s,l,y,_,h);case 7:return wo(s,l,l.pendingProps,h),l.child;case 8:return wo(s,l,l.pendingProps.children,h),l.child;case 12:return wo(s,l,l.pendingProps.children,h),l.child;case 10:e:{if(y=l.type._context,_=l.pendingProps,P=l.memoizedProps,J=_.value,Pr(On,y._currentValue),y._currentValue=J,P!==null)if(ln(P.value,J)){if(P.children===_.children&&!Yi.current){l=il(s,l,h);break e}}else for(P=l.child,P!==null&&(P.return=l);P!==null;){var fe=P.dependencies;if(fe!==null){J=P.child;for(var be=fe.firstContext;be!==null;){if(be.context===y){if(P.tag===1){be=vn(-1,h&-h),be.tag=2;var Le=P.updateQueue;if(Le!==null){Le=Le.shared;var Je=Le.pending;Je===null?be.next=be:(be.next=Je.next,Je.next=be),Le.pending=be}}P.lanes|=h,be=P.alternate,be!==null&&(be.lanes|=h),Sr(P.return,h,l),fe.lanes|=h;break}be=be.next}}else if(P.tag===10)J=P.type===l.type?null:P.child;else if(P.tag===18){if(J=P.return,J===null)throw Error(t(341));J.lanes|=h,fe=J.alternate,fe!==null&&(fe.lanes|=h),Sr(J,h,l),J=P.sibling}else J=P.child;if(J!==null)J.return=P;else for(J=P;J!==null;){if(J===l){J=null;break}if(P=J.sibling,P!==null){P.return=J.return,J=P;break}J=J.return}P=J}wo(s,l,_.children,h),l=l.child}return l;case 9:return _=l.type,y=l.pendingProps.children,dn(l,h),_=hn(_),y=y(_),l.flags|=1,wo(s,l,y,h),l.child;case 14:return y=l.type,_=Js(y,l.pendingProps),_=Js(y.type,_),m1(s,l,y,_,h);case 15:return g1(s,l,l.type,l.pendingProps,h);case 17:return y=l.type,_=l.pendingProps,_=l.elementType===y?_:Js(y,_),qh(s,l),l.tag=1,Qi(y)?(s=!0,rl(l)):s=!1,dn(l,h),a1(l,y,_),Jp(l,y,_,h),Zp(null,l,y,!0,s,h);case 19:return T1(s,l,h);case 22:return y1(s,l,h)}throw Error(t(156,l.tag))};function K1(s,l){return us(s,l)}function vS(s,l,h,y){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ks(s,l,h,y){return new vS(s,l,h,y)}function vm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function bS(s){if(typeof s=="function")return vm(s)?1:0;if(s!=null){if(s=s.$$typeof,s===v)return 11;if(s===$)return 14}return 2}function Dl(s,l){var h=s.alternate;return h===null?(h=ks(s.tag,l,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=l,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&14680064,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,l=s.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h}function rf(s,l,h,y,_,P){var J=2;if(y=s,typeof s=="function")vm(s)&&(J=1);else if(typeof s=="string")J=5;else e:switch(s){case N:return Lc(h.children,_,P,l);case A:J=8,_|=8;break;case T:return s=ks(12,h,l,_|2),s.elementType=T,s.lanes=P,s;case L:return s=ks(13,h,l,_),s.elementType=L,s.lanes=P,s;case M:return s=ks(19,h,l,_),s.elementType=M,s.lanes=P,s;case se:return nf(h,_,P,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case F:J=10;break e;case k:J=9;break e;case v:J=11;break e;case $:J=14;break e;case oe:J=16,y=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return l=ks(J,h,l,_),l.elementType=s,l.type=y,l.lanes=P,l}function Lc(s,l,h,y){return s=ks(7,s,y,l),s.lanes=h,s}function nf(s,l,h,y){return s=ks(22,s,y,l),s.elementType=se,s.lanes=h,s.stateNode={isHidden:!1},s}function bm(s,l,h){return s=ks(6,s,null,l),s.lanes=h,s}function wm(s,l,h){return l=ks(4,s.children!==null?s.children:[],s.key,l),l.lanes=h,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function wS(s,l,h,y,_){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Va(0),this.expirationTimes=Va(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Va(0),this.identifierPrefix=y,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function Sm(s,l,h,y,_,P,J,fe,be){return s=new wS(s,l,h,fe,be),l===1?(l=1,P===!0&&(l|=8)):l=0,P=ks(3,null,null,l),s.current=P,P.stateNode=s,P.memoizedState={element:y,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},oi(P),s}function SS(s,l,h){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ce,key:y==null?null:""+y,children:s,containerInfo:l,implementation:h}}function J1(s){if(!s)return ba;s=s._reactInternals;e:{if(mn(s)!==s||s.tag!==1)throw Error(t(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Qi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(s.tag===1){var h=s.type;if(Qi(h))return Ad(s,h,l)}return l}function Y1(s,l,h,y,_,P,J,fe,be){return s=Sm(h,y,!0,s,_,P,J,fe,be),s.context=J1(null),h=s.current,y=So(),_=Vl(h),P=vn(y,_),P.callback=l??null,bn(h,P,_),s.current.lanes=_,Ls(s,_,y),Oo(s,y),s}function of(s,l,h,y){var _=l.current,P=So(),J=Vl(_);return h=J1(h),l.context===null?l.context=h:l.pendingContext=h,l=vn(P,J),l.payload={element:s},y=y===void 0?null:y,y!==null&&(l.callback=y),s=bn(_,l,J),s!==null&&(Xs(s,_,J,P),bi(s,_,J)),J}function sf(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Q1(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<l?h:l}}function _m(s,l){Q1(s,l),(s=s.alternate)&&Q1(s,l)}function _S(){return null}var X1=typeof reportError=="function"?reportError:function(s){console.error(s)};function Tm(s){this._internalRoot=s}af.prototype.render=Tm.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(t(409));of(s,l,null,null)},af.prototype.unmount=Tm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Rc(function(){of(null,s,null,null)}),l[xi]=null}};function af(s){this._internalRoot=s}af.prototype.unstable_scheduleHydration=function(s){if(s){var l=Da();s={blockedOn:null,target:s,priority:l};for(var h=0;h<Ri.length&&l!==0&&l<Ri[h].priority;h++);Ri.splice(h,0,s),h===0&&ua(s)}};function Am(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function lf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Z1(){}function TS(s,l,h,y,_){if(_){if(typeof y=="function"){var P=y;y=function(){var Le=sf(J);P.call(Le)}}var J=Y1(l,y,s,0,null,!1,!1,"",Z1);return s._reactRootContainer=J,s[xi]=J.current,Qa(s.nodeType===8?s.parentNode:s),Rc(),J}for(;_=s.lastChild;)s.removeChild(_);if(typeof y=="function"){var fe=y;y=function(){var Le=sf(be);fe.call(Le)}}var be=Sm(s,0,!1,null,null,!1,!1,"",Z1);return s._reactRootContainer=be,s[xi]=be.current,Qa(s.nodeType===8?s.parentNode:s),Rc(function(){of(l,be,h,y)}),be}function cf(s,l,h,y,_){var P=h._reactRootContainer;if(P){var J=P;if(typeof _=="function"){var fe=_;_=function(){var be=sf(J);fe.call(be)}}of(l,J,s,_)}else J=TS(h,l,s,_,y);return sf(J)}Bs=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var h=sr(l.pendingLanes);h!==0&&(la(l,h|1),Oo(l,jr()),(_r&6)===0&&(Au=jr()+500,O()))}break;case 13:Rc(function(){var y=Wr(s,1);if(y!==null){var _=So();Xs(y,s,1,_)}}),_m(s,1)}},ca=function(s){if(s.tag===13){var l=Wr(s,134217728);if(l!==null){var h=So();Xs(l,s,134217728,h)}_m(s,134217728)}},Ma=function(s){if(s.tag===13){var l=Vl(s),h=Wr(s,l);if(h!==null){var y=So();Xs(h,s,l,y)}_m(s,l)}},Da=function(){return nr},Fs=function(s,l){var h=nr;try{return nr=s,l()}finally{nr=h}},kr=function(s,l,h){switch(l){case"input":if(Ct(s,h),l=h.name,h.type==="radio"&&l!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var y=h[l];if(y!==s&&y.form===s.form){var _=Ac(y);if(!_)throw Error(t(90));et(y),Ct(y,_)}}}break;case"textarea":hr(s,h);break;case"select":l=h.value,l!=null&&tt(s,!!h.multiple,l,!1)}},Rn=gm,_o=Rc;var AS={usingClientEntryPoint:!1,Events:[Il,el,Ac,or,Di,gm]},Fd={findFiberByHostInstance:va,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CS={bundleType:Fd.bundleType,version:Fd.version,rendererPackageName:Fd.rendererPackageName,rendererConfig:Fd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=co(s),s===null?null:s.stateNode},findFiberByHostInstance:Fd.findFiberByHostInstance||_S,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uf.isDisabled&&uf.supportsFiber)try{hs=uf.inject(CS),di=uf}catch{}}return Vo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AS,Vo.createPortal=function(s,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Am(l))throw Error(t(200));return SS(s,l,null,h)},Vo.createRoot=function(s,l){if(!Am(s))throw Error(t(299));var h=!1,y="",_=X1;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(_=l.onRecoverableError)),l=Sm(s,1,!1,null,null,h,!1,y,_),s[xi]=l.current,Qa(s.nodeType===8?s.parentNode:s),new Tm(l)},Vo.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=co(l),s=s===null?null:s.stateNode,s},Vo.flushSync=function(s){return Rc(s)},Vo.hydrate=function(s,l,h){if(!lf(l))throw Error(t(200));return cf(null,s,l,!0,h)},Vo.hydrateRoot=function(s,l,h){if(!Am(s))throw Error(t(405));var y=h!=null&&h.hydratedSources||null,_=!1,P="",J=X1;if(h!=null&&(h.unstable_strictMode===!0&&(_=!0),h.identifierPrefix!==void 0&&(P=h.identifierPrefix),h.onRecoverableError!==void 0&&(J=h.onRecoverableError)),l=Y1(l,null,s,1,h??null,_,!1,P,J),s[xi]=l.current,Qa(s),y)for(s=0;s<y.length;s++)h=y[s],_=h._getVersion,_=_(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,_]:l.mutableSourceEagerHydrationData.push(h,_);return new af(l)},Vo.render=function(s,l,h){if(!lf(l))throw Error(t(200));return cf(null,s,l,!1,h)},Vo.unmountComponentAtNode=function(s){if(!lf(s))throw Error(t(40));return s._reactRootContainer?(Rc(function(){cf(null,null,s,!1,function(){s._reactRootContainer=null,s[xi]=null})}),!0):!1},Vo.unstable_batchedUpdates=gm,Vo.unstable_renderSubtreeIntoContainer=function(s,l,h,y){if(!lf(h))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return cf(s,l,h,!1,y)},Vo.version="18.3.1-next-f1338f8080-20240426",Vo}var a5;function zS(){if(a5)return jm.exports;a5=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),jm.exports=FS(),jm.exports}var l5;function OS(){if(l5)return df;l5=1;var r=zS();return df.createRoot=r.createRoot,df.hydrateRoot=r.hydrateRoot,df}var VS=OS();const MS=rx(VS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),WS=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),c5=r=>{const e=WS(r);return e.charAt(0).toUpperCase()+e.slice(1)},nx=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),$S=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var US={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=pe.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:o="",children:a,iconNode:c,...u},f)=>pe.createElement("svg",{ref:f,...US,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:nx("lucide",o),...!a&&!$S(u)&&{"aria-hidden":"true"},...u},[...c.map(([d,g])=>pe.createElement(d,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=(r,e)=>{const t=pe.forwardRef(({className:n,...o},a)=>pe.createElement(qS,{ref:a,iconNode:e,className:nx(`lucide-${DS(c5(r))}`,`lucide-${r}`,n),...o}));return t.displayName=c5(r),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],GS=Ht("bell",HS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Yc=Ht("briefcase",KS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],ix=Ht("building",JS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z",key:"trhst0"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10",key:"1mo9zo"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z",key:"1dd30t"}],["path",{d:"M7 5V3",key:"1t1388"}]],ox=Ht("cable",YS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Zd=Ht("calculator",QS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],u0=Ht("calendar",XS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],sx=Ht("chart-column",ZS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],d0=Ht("chevron-down",e3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],r3=Ht("chevron-left",t3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],i3=Ht("chevron-right",n3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],fp=Ht("circle-alert",o3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],In=Ht("circle-check-big",s3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ax=Ht("circle",a3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],X0=Ht("clock",l3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],lx=Ht("corner-down-right",c3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Z0=Ht("dollar-sign",u3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],h3=Ht("eye",d3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],pp=Ht("file-down",f3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],fh=Ht("file-text",p3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],cx=Ht("gauge",m3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ux=Ht("globe",g3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],dx=Ht("house",y3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Is=Ht("info",x3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],hx=Ht("lightbulb",v3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],w3=Ht("lock",b3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],_3=Ht("log-out",S3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],u5=Ht("mail",T3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],fx=Ht("map-pin",A3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],k3=Ht("menu",C3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["path",{d:"M3 20h4.5a.5.5 0 0 0 .5-.5v-.282a.52.52 0 0 0-.247-.437 8 8 0 1 1 8.494-.001.52.52 0 0 0-.247.438v.282a.5.5 0 0 0 .5.5H21",key:"1x94xo"}]],px=Ht("omega",j3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],mx=Ht("package",E3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],gx=Ht("plug",I3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],La=Ht("plus",R3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],yx=Ht("radio",P3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],eg=Ht("receipt",N3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],xx=Ht("search",L3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vx=Ht("settings",B3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],z3=Ht("shield",F3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}],["line",{x1:"12",x2:"12",y1:"16",y2:"16",key:"aqc6ln"}],["line",{x1:"12",x2:"12",y1:"8",y2:"8",key:"1mkcni"}]],bx=Ht("square-divide",O3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],M3=Ht("square-pen",V3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M4 4v16",key:"6qkkli"}],["path",{d:"M9 4v16",key:"81ygyz"}],["path",{d:"M14 4v16",key:"12vmem"}]],wx=Ht("tally-3",D3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Sx=Ht("target",W3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Mc=Ht("trash-2",$3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],_x=Ht("trending-down",U3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],H3=Ht("trending-up",q3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Qc=Ht("triangle-alert",G3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]],Tx=Ht("triangle",K3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Uf=Ht("user",J3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ax=Ht("x",Y3);function Q3({onSelectCalculator:r,isDarkMode:e}){const[t,n]=pe.useState(""),o=[{name:"Power Calculations",calculators:[{id:"voltage-drop",name:"Voltage Drop",icon:_x,keywords:"voltage drop vd wire circuit"},{id:"ohms-law",name:"Ohm's Law",icon:bx,keywords:"ohms law voltage current resistance power series parallel circuit"},{id:"reactance-impedance",name:"Reactance",icon:px,keywords:"reactance impedance xl xc capacitive inductive resonance frequency ac circuit"},{id:"power-factor",name:"Power Factor",icon:Sx,keywords:"power factor correction pf capacitor kvar cos phi efficiency demand charge penalty savings"},{id:"power-triangle",name:"Power Triangle",icon:Tx,keywords:"power triangle kva kw kvar apparent real reactive power factor angle phase"},{id:"three-phase-power",name:"Three-Phase",icon:wx,keywords:"three phase power 3 phase current voltage kw kva motor industrial commercial wye delta line"}]},{name:"Sizing & Rating",calculators:[{id:"ampacity",name:"Ampacity",icon:ox,keywords:"ampacity current rating 310 temperature"},{id:"load-calculations",name:"Load Calculations",icon:sx,keywords:"load calculation service size residential commercial demand"},{id:"service-entrance",name:"Service Entrance",icon:ix,keywords:"service entrance sizing panel main 230"},{id:"grounding-bonding",name:"Grounding & Bonding",icon:ux,keywords:"grounding bonding ground electrode equipment gec egc jumper 250"}]},{name:"Equipment",calculators:[{id:"motor-calculations",name:"Motors",icon:vx,keywords:"motor flc protection starter 430"},{id:"transformer-sizing",name:"Transformers",icon:yx,keywords:"transformer kva sizing current primary secondary 450"},{id:"vfd-sizing",name:"VFD Sizing",icon:cx,keywords:"vfd variable frequency drive motor speed control inverter ac drive"}]},{name:"Installation",calculators:[{id:"box-fill",name:"Box Fill",icon:mx,keywords:"box fill junction cubic inch volume 314"},{id:"conduit-fill",name:"Conduit Fill",icon:ax,keywords:"conduit fill emt pvc rigid raceway chapter 9"},{id:"conduit-bending",name:"Conduit Bending",icon:lx,keywords:"conduit bending offset saddle stub bend emt"},{id:"receptacles",name:"Receptacles",icon:gx,keywords:"receptacle outlet gfci plug socket 210.52 counter kitchen bathroom wall spacing"},{id:"lighting",name:"Lighting",icon:hx,keywords:"lighting lumens foot candles fixtures spacing watts illumination"}]}],a={"Power Calculations":"#3b82f6","Sizing & Rating":"#10b981",Equipment:"#f59e0b",Installation:"#8b5cf6",Safety:"#ef4444"},c={mainBg:e?"#000000":"#f3f4f6",cardText:e?"#ffffff":"#111827",inputBg:e?"#0a0a0a":"#ffffff",inputBorder:e?"#1a1a1a":"#d1d5db",inputText:e?"#ffffff":"#111827",placeholderText:e?"#666666":"#6b7280",categoryHeaderText:e?"#cccccc":"#4b5563"},u=o.flatMap(d=>d.calculators.map(g=>({...g,category:d.name}))),f=t?u.filter(d=>{const g=t.toLowerCase();return d.name.toLowerCase().includes(g)||d.keywords.toLowerCase().includes(g)}):null;return i.jsx("div",{style:{minHeight:"100vh",background:c.mainBg,padding:"0"},children:i.jsx("div",{style:{maxWidth:"64rem",margin:"0 auto"},children:i.jsxs("div",{style:{padding:"1.25rem",boxSizing:"border-box"},children:[i.jsxs("div",{style:{marginBottom:"1.5rem",position:"relative"},children:[i.jsx(xx,{size:20,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:c.placeholderText}}),i.jsx("input",{type:"text",placeholder:"Search calculators...",value:t,onChange:d=>n(d.target.value),style:{width:"100%",padding:"0.875rem 1rem 0.875rem 3rem",fontSize:"0.9375rem",border:`1px solid ${c.inputBorder}`,borderRadius:"12px",backgroundColor:c.inputBg,color:c.inputText,boxSizing:"border-box",outline:"none",transition:"all 0.2s ease"},onFocus:d=>{d.target.style.borderColor="#3b82f6",d.target.style.backgroundColor=e?"#000000":"#ffffff",d.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:d=>{d.target.style.borderColor=c.inputBorder,d.target.style.backgroundColor=c.inputBg,d.target.style.boxShadow="none"}})]}),f?i.jsxs("div",{children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:c.placeholderText,marginBottom:"1rem",paddingLeft:"0"},children:[f.length," ",f.length===1?"result":"results"," found"]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.25rem",marginBottom:"1rem",boxSizing:"border-box",width:"100%"},children:f.length>0?f.map(d=>{const g=d.icon,w=a[d.category]||"#3b82f6";return i.jsxs("div",{onClick:()=>{console.log("Clicked calculator:",d.id),r(d.id)},style:{cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[i.jsx("button",{style:{backgroundColor:e?"#1a1a1a":"#ffffff",border:`2px solid ${e?"#2a2a2a":"#d1d5db"}`,borderRadius:"12px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",minWidth:"70px",minHeight:"70px",maxWidth:"70px",maxHeight:"70px",flexShrink:0,boxShadow:e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseOver:C=>{C.currentTarget.style.transform="translateY(-4px) scale(1.05)",C.currentTarget.style.backgroundColor=e?"#252525":"#ffffff",C.currentTarget.style.borderColor=w,C.currentTarget.style.boxShadow=`0 8px 16px ${w}30, 0 4px 6px ${w}20`},onMouseOut:C=>{C.currentTarget.style.transform="translateY(0) scale(1)",C.currentTarget.style.backgroundColor=e?"#1a1a1a":"#ffffff",C.currentTarget.style.borderColor=e?"#2a2a2a":"#d1d5db",C.currentTarget.style.boxShadow=e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)"},onMouseDown:C=>{C.currentTarget.style.transform="translateY(-2px) scale(0.95)"},onMouseUp:C=>{C.currentTarget.style.transform="translateY(-4px) scale(1.05)"},children:i.jsx(g,{size:28,strokeWidth:2,color:w})}),i.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",textAlign:"center",lineHeight:"1.2",color:c.cardText,maxWidth:"90px"},children:d.name})]},d.id)}):i.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem 1rem",color:c.placeholderText,fontSize:"0.9375rem"},children:"No calculators found"})})]}):o.map((d,g)=>i.jsxs("div",{style:{marginBottom:"2rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem",paddingLeft:"0"},children:[i.jsx("div",{style:{width:"4px",height:"20px",backgroundColor:a[d.name],borderRadius:"2px"}}),i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:c.categoryHeaderText,margin:0,letterSpacing:"-0.01em"},children:d.name})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.25rem",marginBottom:g<o.length-1?"1.5rem":"1rem",boxSizing:"border-box",width:"100%"},children:d.calculators.map(w=>{const C=w.icon,b=a[d.name];return i.jsxs("div",{onClick:()=>{console.log("Clicked calculator:",w.id),r(w.id)},style:{cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[i.jsx("button",{style:{backgroundColor:e?"#1a1a1a":"#ffffff",border:`2px solid ${e?"#2a2a2a":"#d1d5db"}`,borderRadius:"12px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",minWidth:"70px",minHeight:"70px",maxWidth:"70px",maxHeight:"70px",flexShrink:0,boxShadow:e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseOver:V=>{V.currentTarget.style.transform="translateY(-4px) scale(1.05)",V.currentTarget.style.backgroundColor=e?"#252525":"#ffffff",V.currentTarget.style.borderColor=b,V.currentTarget.style.boxShadow=`0 8px 16px ${b}30, 0 4px 6px ${b}20`},onMouseOut:V=>{V.currentTarget.style.transform="translateY(0) scale(1)",V.currentTarget.style.backgroundColor=e?"#1a1a1a":"#ffffff",V.currentTarget.style.borderColor=e?"#2a2a2a":"#d1d5db",V.currentTarget.style.boxShadow=e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)"},onMouseDown:V=>{V.currentTarget.style.transform="translateY(-2px) scale(0.95)"},onMouseUp:V=>{V.currentTarget.style.transform="translateY(-4px) scale(1.05)"},children:i.jsx(C,{size:28,strokeWidth:2,color:b})}),i.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",textAlign:"center",lineHeight:"1.2",color:c.cardText,maxWidth:"90px"},children:w.name})]},w.id)})})]},d.name))]})})})}const X3="modulepreload",Z3=function(r){return"/electrician-toolkit/"+r},d5={},Ou=function(e,t,n){let o=Promise.resolve();if(t&&t.length>0){let c=function(d){return Promise.all(d.map(g=>Promise.resolve(g).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=c(t.map(d=>{if(d=Z3(d),d in d5)return;d5[d]=!0;const g=d.endsWith(".css"),w=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${w}`))return;const C=document.createElement("link");if(C.rel=g?"stylesheet":X3,g||(C.as="script"),C.crossOrigin="",C.href=d,f&&C.setAttribute("nonce",f),document.head.appendChild(C),g)return new Promise((b,V)=>{C.addEventListener("load",b),C.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return o.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};function qr(r){"@babel/helpers - typeof";return qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(r)}var ra=Uint8Array,as=Uint16Array,tg=Int32Array,rg=new ra([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ng=new ra([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),h5=new ra([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Cx=function(r,e){for(var t=new as(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var o=new tg(t[30]),n=1;n<30;++n)for(var a=t[n];a<t[n+1];++a)o[a]=a-t[n]<<5|n;return{b:t,r:o}},kx=Cx(rg,2),e_=kx.b,h0=kx.r;e_[28]=258,h0[258]=28;var t_=Cx(ng,0),f5=t_.r,f0=new as(32768);for(var on=0;on<32768;++on){var $l=(on&43690)>>1|(on&21845)<<1;$l=($l&52428)>>2|($l&13107)<<2,$l=($l&61680)>>4|($l&3855)<<4,f0[on]=(($l&65280)>>8|($l&255)<<8)>>1}var qd=(function(r,e,t){for(var n=r.length,o=0,a=new as(e);o<n;++o)r[o]&&++a[r[o]-1];var c=new as(e);for(o=1;o<e;++o)c[o]=c[o-1]+a[o-1]<<1;var u;if(t){u=new as(1<<e);var f=15-e;for(o=0;o<n;++o)if(r[o])for(var d=o<<4|r[o],g=e-r[o],w=c[r[o]-1]++<<g,C=w|(1<<g)-1;w<=C;++w)u[f0[w]>>f]=d}else for(u=new as(n),o=0;o<n;++o)r[o]&&(u[o]=f0[c[r[o]-1]++]>>15-r[o]);return u}),Dc=new ra(288);for(var on=0;on<144;++on)Dc[on]=8;for(var on=144;on<256;++on)Dc[on]=9;for(var on=256;on<280;++on)Dc[on]=7;for(var on=280;on<288;++on)Dc[on]=8;var qf=new ra(32);for(var on=0;on<32;++on)qf[on]=5;var r_=qd(Dc,9,0),n_=qd(qf,5,0),jx=function(r){return(r+7)/8|0},i_=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new ra(r.subarray(e,t))},sl=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},Od=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},Rm=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var o=t.length,a=t.slice();if(!o)return{t:Ix,l:0};if(o==1){var c=new ra(t[0].s+1);return c[t[0].s]=1,{t:c,l:1}}t.sort(function(re,ce){return re.f-ce.f}),t.push({s:-1,f:25001});var u=t[0],f=t[1],d=0,g=1,w=2;for(t[0]={s:-1,f:u.f+f.f,l:u,r:f};g!=o-1;)u=t[t[d].f<t[w].f?d++:w++],f=t[d!=g&&t[d].f<t[w].f?d++:w++],t[g++]={s:-1,f:u.f+f.f,l:u,r:f};for(var C=a[0].s,n=1;n<o;++n)a[n].s>C&&(C=a[n].s);var b=new as(C+1),V=p0(t[g-1],b,0);if(V>e){var n=0,R=0,z=V-e,j=1<<z;for(a.sort(function(ce,N){return b[N.s]-b[ce.s]||ce.f-N.f});n<o;++n){var U=a[n].s;if(b[U]>e)R+=j-(1<<V-b[U]),b[U]=e;else break}for(R>>=z;R>0;){var H=a[n].s;b[H]<e?R-=1<<e-b[H]++-1:++n}for(;n>=0&&R;--n){var B=a[n].s;b[B]==e&&(--b[B],++R)}V=e}return{t:new ra(b),l:V}},p0=function(r,e,t){return r.s==-1?Math.max(p0(r.l,e,t+1),p0(r.r,e,t+1)):e[r.s]=t},p5=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new as(++e),n=0,o=r[0],a=1,c=function(f){t[n++]=f},u=1;u<=e;++u)if(r[u]==o&&u!=e)++a;else{if(!o&&a>2){for(;a>138;a-=138)c(32754);a>2&&(c(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(c(o),--a;a>6;a-=6)c(8304);a>2&&(c(a-3<<5|8208),a=0)}for(;a--;)c(o);a=1,o=r[u]}return{c:t.subarray(0,n),n:e}},Vd=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},Ex=function(r,e,t){var n=t.length,o=jx(e+2);r[o]=n&255,r[o+1]=n>>8,r[o+2]=r[o]^255,r[o+3]=r[o+1]^255;for(var a=0;a<n;++a)r[o+a+4]=t[a];return(o+4+n)*8},m5=function(r,e,t,n,o,a,c,u,f,d,g){sl(e,g++,t),++o[256];for(var w=Rm(o,15),C=w.t,b=w.l,V=Rm(a,15),R=V.t,z=V.l,j=p5(C),U=j.c,H=j.n,B=p5(R),re=B.c,ce=B.n,N=new as(19),A=0;A<U.length;++A)++N[U[A]&31];for(var A=0;A<re.length;++A)++N[re[A]&31];for(var T=Rm(N,7),F=T.t,k=T.l,v=19;v>4&&!F[h5[v-1]];--v);var L=d+5<<3,M=Vd(o,Dc)+Vd(a,qf)+c,$=Vd(o,C)+Vd(a,R)+c+14+3*v+Vd(N,F)+2*N[16]+3*N[17]+7*N[18];if(f>=0&&L<=M&&L<=$)return Ex(e,g,r.subarray(f,f+d));var oe,se,ie,ye;if(sl(e,g,1+($<M)),g+=2,$<M){oe=qd(C,b,0),se=C,ie=qd(R,z,0),ye=R;var xe=qd(F,k,0);sl(e,g,H-257),sl(e,g+5,ce-1),sl(e,g+10,v-4),g+=14;for(var A=0;A<v;++A)sl(e,g+3*A,F[h5[A]]);g+=3*v;for(var ee=[U,re],D=0;D<2;++D)for(var q=ee[D],A=0;A<q.length;++A){var X=q[A]&31;sl(e,g,xe[X]),g+=F[X],X>15&&(sl(e,g,q[A]>>5&127),g+=q[A]>>12)}}else oe=r_,se=Dc,ie=n_,ye=qf;for(var A=0;A<u;++A){var de=n[A];if(de>255){var X=de>>18&31;Od(e,g,oe[X+257]),g+=se[X+257],X>7&&(sl(e,g,de>>23&31),g+=rg[X]);var me=de&31;Od(e,g,ie[me]),g+=ye[me],me>3&&(Od(e,g,de>>5&8191),g+=ng[me])}else Od(e,g,oe[de]),g+=se[de]}return Od(e,g,oe[256]),g+se[256]},o_=new tg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ix=new ra(0),s_=function(r,e,t,n,o,a){var c=a.z||r.length,u=new ra(n+c+5*(1+Math.ceil(c/7e3))+o),f=u.subarray(n,u.length-o),d=a.l,g=(a.r||0)&7;if(e){g&&(f[0]=a.r>>3);for(var w=o_[e-1],C=w>>13,b=w&8191,V=(1<<t)-1,R=a.p||new as(32768),z=a.h||new as(V+1),j=Math.ceil(t/3),U=2*j,H=function(Fe){return(r[Fe]^r[Fe+1]<<j^r[Fe+2]<<U)&V},B=new tg(25e3),re=new as(288),ce=new as(32),N=0,A=0,T=a.i||0,F=0,k=a.w||0,v=0;T+2<c;++T){var L=H(T),M=T&32767,$=z[L];if(R[M]=$,z[L]=M,k<=T){var oe=c-T;if((N>7e3||F>24576)&&(oe>423||!d)){g=m5(r,f,0,B,re,ce,A,F,v,T-v,g),F=N=A=0,v=T;for(var se=0;se<286;++se)re[se]=0;for(var se=0;se<30;++se)ce[se]=0}var ie=2,ye=0,xe=b,ee=M-$&32767;if(oe>2&&L==H(T-ee))for(var D=Math.min(C,oe)-1,q=Math.min(32767,T),X=Math.min(258,oe);ee<=q&&--xe&&M!=$;){if(r[T+ie]==r[T+ie-ee]){for(var de=0;de<X&&r[T+de]==r[T+de-ee];++de);if(de>ie){if(ie=de,ye=ee,de>D)break;for(var me=Math.min(ee,de-2),we=0,se=0;se<me;++se){var Ae=T-ee+se&32767,Ce=R[Ae],Be=Ae-Ce&32767;Be>we&&(we=Be,$=Ae)}}}M=$,$=R[M],ee+=M-$&32767}if(ye){B[F++]=268435456|h0[ie]<<18|f5[ye];var qe=h0[ie]&31,et=f5[ye]&31;A+=rg[qe]+ng[et],++re[257+qe],++ce[et],k=T+ie,++N}else B[F++]=r[T],++re[r[T]]}}for(T=Math.max(T,k);T<c;++T)B[F++]=r[T],++re[r[T]];g=m5(r,f,d,B,re,ce,A,F,v,T-v,g),d||(a.r=g&7|f[g/8|0]<<3,g-=7,a.h=z,a.p=R,a.i=T,a.w=k)}else{for(var T=a.w||0;T<c+d;T+=65535){var Qe=T+65535;Qe>=c&&(f[g/8|0]=d,Qe=c),g=Ex(f,g+1,r.subarray(T,Qe))}a.i=c}return i_(u,0,n+jx(g)+o)},Rx=function(){var r=1,e=0;return{p:function(t){for(var n=r,o=e,a=t.length|0,c=0;c!=a;){for(var u=Math.min(c+2655,a);c<u;++c)o+=n+=t[c];n=(n&65535)+15*(n>>16),o=(o&65535)+15*(o>>16)}r=n,e=o},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},a_=function(r,e,t,n,o){if(!o&&(o={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),c=new ra(a.length+r.length);c.set(a),c.set(r,a.length),r=c,o.w=a.length}return s_(r,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,o)},Px=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},l_=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var o=Rx();o.p(e.dictionary),Px(r,2,o.d())}};function m0(r,e){e||(e={});var t=Rx();t.p(r);var n=a_(r,e,e.dictionary?6:2,4);return l_(n,e),Px(n,n.length-4,t.d()),n}var c_=typeof TextDecoder<"u"&&new TextDecoder,u_=0;try{c_.decode(Ix,{stream:!0}),u_=1}catch{}function d_(r){if(Array.isArray(r))return r}function h_(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,o,a,c,u=[],f=!0,d=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(f=(n=a.call(t)).done)&&(u.push(n.value),u.length!==e);f=!0);}catch(g){d=!0,o=g}finally{try{if(!f&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(d)throw o}}return u}}function g5(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function f_(r,e){if(r){if(typeof r=="string")return g5(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?g5(r,e):void 0}}function p_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y5(r,e){return d_(r)||h_(r,e)||f_(r,e)||p_()}function x5(r,e="utf8"){return new TextDecoder(e).decode(r)}const m_=new TextEncoder;function g_(r){return m_.encode(r)}const y_=1024*8,x_=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),Pm={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class ig{constructor(e=y_,t={}){Ur(this,"buffer");Ur(this,"byteLength");Ur(this,"byteOffset");Ur(this,"length");Ur(this,"offset");Ur(this,"lastWrittenByte");Ur(this,"littleEndian");Ur(this,"_data");Ur(this,"_mark");Ur(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const o=t.offset?t.offset>>>0:0,a=e.byteLength-o;let c=o;(ArrayBuffer.isView(e)||e instanceof ig)&&(e.byteLength!==e.buffer.byteLength&&(c=e.byteOffset+o),e=e.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=c,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,c,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,o=new Uint8Array(n);o.set(new Uint8Array(this.buffer)),this.buffer=o.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const n=Pm[t].BYTES_PER_ELEMENT*e,o=this.byteOffset+this.offset,a=this.buffer.slice(o,o+n);if(this.littleEndian===x_&&t!=="uint8"&&t!=="int8"){const u=new Uint8Array(this.buffer.slice(o,o+n));u.reverse();const f=new Pm[t](u.buffer);return this.offset+=n,f.reverse(),f}const c=new Pm[t](a);return this.offset+=n,c}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){return x5(this.readBytes(e))}decodeText(e=1,t="utf8"){return x5(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(g_(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function nd(r){let e=r.length;for(;--e>=0;)r[e]=0}const v_=3,b_=258,Nx=29,w_=256,S_=w_+1+Nx,Lx=30,__=512,T_=new Array((S_+2)*2);nd(T_);const A_=new Array(Lx*2);nd(A_);const C_=new Array(__);nd(C_);const k_=new Array(b_-v_+1);nd(k_);const j_=new Array(Nx);nd(j_);const E_=new Array(Lx);nd(E_);const I_=(r,e,t,n)=>{let o=r&65535|0,a=r>>>16&65535|0,c=0;for(;t!==0;){c=t>2e3?2e3:t,t-=c;do o=o+e[n++]|0,a=a+o|0;while(--c);o%=65521,a%=65521}return o|a<<16|0};var g0=I_;const R_=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},P_=new Uint32Array(R_()),N_=(r,e,t,n)=>{const o=P_,a=n+t;r^=-1;for(let c=n;c<a;c++)r=r>>>8^o[(r^e[c])&255];return r^-1};var Ta=N_,y0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Bx={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const L_=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var B_=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)L_(t,n)&&(r[n]=t[n])}}return r},F_=r=>{let e=0;for(let n=0,o=r.length;n<o;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,o=0,a=r.length;n<a;n++){let c=r[n];t.set(c,o),o+=c.length}return t},Fx={assign:B_,flattenChunks:F_};let zx=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{zx=!1}const eh=new Uint8Array(256);for(let r=0;r<256;r++)eh[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;eh[254]=eh[254]=1;var z_=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,o,a,c=r.length,u=0;for(o=0;o<c;o++)t=r.charCodeAt(o),(t&64512)===55296&&o+1<c&&(n=r.charCodeAt(o+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),o++)),u+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(u),a=0,o=0;a<u;o++)t=r.charCodeAt(o),(t&64512)===55296&&o+1<c&&(n=r.charCodeAt(o+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),o++)),t<128?e[a++]=t:t<2048?(e[a++]=192|t>>>6,e[a++]=128|t&63):t<65536?(e[a++]=224|t>>>12,e[a++]=128|t>>>6&63,e[a++]=128|t&63):(e[a++]=240|t>>>18,e[a++]=128|t>>>12&63,e[a++]=128|t>>>6&63,e[a++]=128|t&63);return e};const O_=(r,e)=>{if(e<65534&&r.subarray&&zx)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var V_=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,o;const a=new Array(t*2);for(o=0,n=0;n<t;){let c=r[n++];if(c<128){a[o++]=c;continue}let u=eh[c];if(u>4){a[o++]=65533,n+=u-1;continue}for(c&=u===2?31:u===3?15:7;u>1&&n<t;)c=c<<6|r[n++]&63,u--;if(u>1){a[o++]=65533;continue}c<65536?a[o++]=c:(c-=65536,a[o++]=55296|c>>10&1023,a[o++]=56320|c&1023)}return O_(a,o)},M_=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+eh[r[t]]>e?t:e},x0={string2buf:z_,buf2string:V_,utf8border:M_};function D_(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var W_=D_;const hf=16209,$_=16191;var U_=function(e,t){let n,o,a,c,u,f,d,g,w,C,b,V,R,z,j,U,H,B,re,ce,N,A,T,F;const k=e.state;n=e.next_in,T=e.input,o=n+(e.avail_in-5),a=e.next_out,F=e.output,c=a-(t-e.avail_out),u=a+(e.avail_out-257),f=k.dmax,d=k.wsize,g=k.whave,w=k.wnext,C=k.window,b=k.hold,V=k.bits,R=k.lencode,z=k.distcode,j=(1<<k.lenbits)-1,U=(1<<k.distbits)-1;e:do{V<15&&(b+=T[n++]<<V,V+=8,b+=T[n++]<<V,V+=8),H=R[b&j];t:for(;;){if(B=H>>>24,b>>>=B,V-=B,B=H>>>16&255,B===0)F[a++]=H&65535;else if(B&16){re=H&65535,B&=15,B&&(V<B&&(b+=T[n++]<<V,V+=8),re+=b&(1<<B)-1,b>>>=B,V-=B),V<15&&(b+=T[n++]<<V,V+=8,b+=T[n++]<<V,V+=8),H=z[b&U];r:for(;;){if(B=H>>>24,b>>>=B,V-=B,B=H>>>16&255,B&16){if(ce=H&65535,B&=15,V<B&&(b+=T[n++]<<V,V+=8,V<B&&(b+=T[n++]<<V,V+=8)),ce+=b&(1<<B)-1,ce>f){e.msg="invalid distance too far back",k.mode=hf;break e}if(b>>>=B,V-=B,B=a-c,ce>B){if(B=ce-B,B>g&&k.sane){e.msg="invalid distance too far back",k.mode=hf;break e}if(N=0,A=C,w===0){if(N+=d-B,B<re){re-=B;do F[a++]=C[N++];while(--B);N=a-ce,A=F}}else if(w<B){if(N+=d+w-B,B-=w,B<re){re-=B;do F[a++]=C[N++];while(--B);if(N=0,w<re){B=w,re-=B;do F[a++]=C[N++];while(--B);N=a-ce,A=F}}}else if(N+=w-B,B<re){re-=B;do F[a++]=C[N++];while(--B);N=a-ce,A=F}for(;re>2;)F[a++]=A[N++],F[a++]=A[N++],F[a++]=A[N++],re-=3;re&&(F[a++]=A[N++],re>1&&(F[a++]=A[N++]))}else{N=a-ce;do F[a++]=F[N++],F[a++]=F[N++],F[a++]=F[N++],re-=3;while(re>2);re&&(F[a++]=F[N++],re>1&&(F[a++]=F[N++]))}}else if((B&64)===0){H=z[(H&65535)+(b&(1<<B)-1)];continue r}else{e.msg="invalid distance code",k.mode=hf;break e}break}}else if((B&64)===0){H=R[(H&65535)+(b&(1<<B)-1)];continue t}else if(B&32){k.mode=$_;break e}else{e.msg="invalid literal/length code",k.mode=hf;break e}break}}while(n<o&&a<u);re=V>>3,n-=re,V-=re<<3,b&=(1<<V)-1,e.next_in=n,e.next_out=a,e.avail_in=n<o?5+(o-n):5-(n-o),e.avail_out=a<u?257+(u-a):257-(a-u),k.hold=b,k.bits=V};const ku=15,v5=852,b5=592,w5=0,Nm=1,S5=2,q_=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),H_=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),G_=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),K_=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),J_=(r,e,t,n,o,a,c,u)=>{const f=u.bits;let d=0,g=0,w=0,C=0,b=0,V=0,R=0,z=0,j=0,U=0,H,B,re,ce,N,A=null,T;const F=new Uint16Array(ku+1),k=new Uint16Array(ku+1);let v=null,L,M,$;for(d=0;d<=ku;d++)F[d]=0;for(g=0;g<n;g++)F[e[t+g]]++;for(b=f,C=ku;C>=1&&F[C]===0;C--);if(b>C&&(b=C),C===0)return o[a++]=1<<24|64<<16|0,o[a++]=1<<24|64<<16|0,u.bits=1,0;for(w=1;w<C&&F[w]===0;w++);for(b<w&&(b=w),z=1,d=1;d<=ku;d++)if(z<<=1,z-=F[d],z<0)return-1;if(z>0&&(r===w5||C!==1))return-1;for(k[1]=0,d=1;d<ku;d++)k[d+1]=k[d]+F[d];for(g=0;g<n;g++)e[t+g]!==0&&(c[k[e[t+g]]++]=g);if(r===w5?(A=v=c,T=20):r===Nm?(A=q_,v=H_,T=257):(A=G_,v=K_,T=0),U=0,g=0,d=w,N=a,V=b,R=0,re=-1,j=1<<b,ce=j-1,r===Nm&&j>v5||r===S5&&j>b5)return 1;for(;;){L=d-R,c[g]+1<T?(M=0,$=c[g]):c[g]>=T?(M=v[c[g]-T],$=A[c[g]-T]):(M=96,$=0),H=1<<d-R,B=1<<V,w=B;do B-=H,o[N+(U>>R)+B]=L<<24|M<<16|$|0;while(B!==0);for(H=1<<d-1;U&H;)H>>=1;if(H!==0?(U&=H-1,U+=H):U=0,g++,--F[d]===0){if(d===C)break;d=e[t+c[g]]}if(d>b&&(U&ce)!==re){for(R===0&&(R=b),N+=w,V=d-R,z=1<<V;V+R<C&&(z-=F[V+R],!(z<=0));)V++,z<<=1;if(j+=1<<V,r===Nm&&j>v5||r===S5&&j>b5)return 1;re=U&ce,o[re]=b<<24|V<<16|N-a|0}}return U!==0&&(o[N+U]=d-R<<24|64<<16|0),u.bits=b,0};var Hd=J_;const Y_=0,Ox=1,Vx=2,{Z_FINISH:_5,Z_BLOCK:Q_,Z_TREES:ff,Z_OK:Wc,Z_STREAM_END:X_,Z_NEED_DICT:Z_,Z_STREAM_ERROR:Rs,Z_DATA_ERROR:Mx,Z_MEM_ERROR:Dx,Z_BUF_ERROR:e4,Z_DEFLATED:T5}=Bx,mp=16180,A5=16181,C5=16182,k5=16183,j5=16184,E5=16185,I5=16186,R5=16187,P5=16188,N5=16189,Hf=16190,al=16191,Lm=16192,L5=16193,Bm=16194,B5=16195,F5=16196,z5=16197,O5=16198,pf=16199,mf=16200,V5=16201,M5=16202,D5=16203,W5=16204,$5=16205,Fm=16206,U5=16207,q5=16208,fn=16209,Wx=16210,$x=16211,t4=852,r4=592,n4=15,i4=n4,H5=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function o4(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Xc=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<mp||e.mode>$x?1:0},Ux=r=>{if(Xc(r))return Rs;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=mp,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(t4),e.distcode=e.distdyn=new Int32Array(r4),e.sane=1,e.back=-1,Wc},qx=r=>{if(Xc(r))return Rs;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,Ux(r)},Hx=(r,e)=>{let t;if(Xc(r))return Rs;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Rs:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,qx(r))},Gx=(r,e)=>{if(!r)return Rs;const t=new o4;r.state=t,t.strm=r,t.window=null,t.mode=mp;const n=Hx(r,e);return n!==Wc&&(r.state=null),n},s4=r=>Gx(r,i4);let G5=!0,zm,Om;const a4=r=>{if(G5){zm=new Int32Array(512),Om=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(Hd(Ox,r.lens,0,288,zm,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;Hd(Vx,r.lens,0,32,Om,0,r.work,{bits:5}),G5=!1}r.lencode=zm,r.lenbits=9,r.distcode=Om,r.distbits=5},Kx=(r,e,t,n)=>{let o;const a=r.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(e.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(o=a.wsize-a.wnext,o>n&&(o=n),a.window.set(e.subarray(t-n,t-n+o),a.wnext),n-=o,n?(a.window.set(e.subarray(t-n,t),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0},l4=(r,e)=>{let t,n,o,a,c,u,f,d,g,w,C,b,V,R,z=0,j,U,H,B,re,ce,N,A;const T=new Uint8Array(4);let F,k;const v=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Xc(r)||!r.output||!r.input&&r.avail_in!==0)return Rs;t=r.state,t.mode===al&&(t.mode=Lm),c=r.next_out,o=r.output,f=r.avail_out,a=r.next_in,n=r.input,u=r.avail_in,d=t.hold,g=t.bits,w=u,C=f,A=Wc;e:for(;;)switch(t.mode){case mp:if(t.wrap===0){t.mode=Lm;break}for(;g<16;){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}if(t.wrap&2&&d===35615){t.wbits===0&&(t.wbits=15),t.check=0,T[0]=d&255,T[1]=d>>>8&255,t.check=Ta(t.check,T,2,0),d=0,g=0,t.mode=A5;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((d&255)<<8)+(d>>8))%31){r.msg="incorrect header check",t.mode=fn;break}if((d&15)!==T5){r.msg="unknown compression method",t.mode=fn;break}if(d>>>=4,g-=4,N=(d&15)+8,t.wbits===0&&(t.wbits=N),N>15||N>t.wbits){r.msg="invalid window size",t.mode=fn;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=d&512?N5:al,d=0,g=0;break;case A5:for(;g<16;){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}if(t.flags=d,(t.flags&255)!==T5){r.msg="unknown compression method",t.mode=fn;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=fn;break}t.head&&(t.head.text=d>>8&1),t.flags&512&&t.wrap&4&&(T[0]=d&255,T[1]=d>>>8&255,t.check=Ta(t.check,T,2,0)),d=0,g=0,t.mode=C5;case C5:for(;g<32;){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}t.head&&(t.head.time=d),t.flags&512&&t.wrap&4&&(T[0]=d&255,T[1]=d>>>8&255,T[2]=d>>>16&255,T[3]=d>>>24&255,t.check=Ta(t.check,T,4,0)),d=0,g=0,t.mode=k5;case k5:for(;g<16;){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}t.head&&(t.head.xflags=d&255,t.head.os=d>>8),t.flags&512&&t.wrap&4&&(T[0]=d&255,T[1]=d>>>8&255,t.check=Ta(t.check,T,2,0)),d=0,g=0,t.mode=j5;case j5:if(t.flags&1024){for(;g<16;){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}t.length=d,t.head&&(t.head.extra_len=d),t.flags&512&&t.wrap&4&&(T[0]=d&255,T[1]=d>>>8&255,t.check=Ta(t.check,T,2,0)),d=0,g=0}else t.head&&(t.head.extra=null);t.mode=E5;case E5:if(t.flags&1024&&(b=t.length,b>u&&(b=u),b&&(t.head&&(N=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(a,a+b),N)),t.flags&512&&t.wrap&4&&(t.check=Ta(t.check,n,b,a)),u-=b,a+=b,t.length-=b),t.length))break e;t.length=0,t.mode=I5;case I5:if(t.flags&2048){if(u===0)break e;b=0;do N=n[a+b++],t.head&&N&&t.length<65536&&(t.head.name+=String.fromCharCode(N));while(N&&b<u);if(t.flags&512&&t.wrap&4&&(t.check=Ta(t.check,n,b,a)),u-=b,a+=b,N)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=R5;case R5:if(t.flags&4096){if(u===0)break e;b=0;do N=n[a+b++],t.head&&N&&t.length<65536&&(t.head.comment+=String.fromCharCode(N));while(N&&b<u);if(t.flags&512&&t.wrap&4&&(t.check=Ta(t.check,n,b,a)),u-=b,a+=b,N)break e}else t.head&&(t.head.comment=null);t.mode=P5;case P5:if(t.flags&512){for(;g<16;){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}if(t.wrap&4&&d!==(t.check&65535)){r.msg="header crc mismatch",t.mode=fn;break}d=0,g=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=al;break;case N5:for(;g<32;){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}r.adler=t.check=H5(d),d=0,g=0,t.mode=Hf;case Hf:if(t.havedict===0)return r.next_out=c,r.avail_out=f,r.next_in=a,r.avail_in=u,t.hold=d,t.bits=g,Z_;r.adler=t.check=1,t.mode=al;case al:if(e===Q_||e===ff)break e;case Lm:if(t.last){d>>>=g&7,g-=g&7,t.mode=Fm;break}for(;g<3;){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}switch(t.last=d&1,d>>>=1,g-=1,d&3){case 0:t.mode=L5;break;case 1:if(a4(t),t.mode=pf,e===ff){d>>>=2,g-=2;break e}break;case 2:t.mode=F5;break;case 3:r.msg="invalid block type",t.mode=fn}d>>>=2,g-=2;break;case L5:for(d>>>=g&7,g-=g&7;g<32;){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}if((d&65535)!==(d>>>16^65535)){r.msg="invalid stored block lengths",t.mode=fn;break}if(t.length=d&65535,d=0,g=0,t.mode=Bm,e===ff)break e;case Bm:t.mode=B5;case B5:if(b=t.length,b){if(b>u&&(b=u),b>f&&(b=f),b===0)break e;o.set(n.subarray(a,a+b),c),u-=b,a+=b,f-=b,c+=b,t.length-=b;break}t.mode=al;break;case F5:for(;g<14;){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}if(t.nlen=(d&31)+257,d>>>=5,g-=5,t.ndist=(d&31)+1,d>>>=5,g-=5,t.ncode=(d&15)+4,d>>>=4,g-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=fn;break}t.have=0,t.mode=z5;case z5:for(;t.have<t.ncode;){for(;g<3;){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}t.lens[v[t.have++]]=d&7,d>>>=3,g-=3}for(;t.have<19;)t.lens[v[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,F={bits:t.lenbits},A=Hd(Y_,t.lens,0,19,t.lencode,0,t.work,F),t.lenbits=F.bits,A){r.msg="invalid code lengths set",t.mode=fn;break}t.have=0,t.mode=O5;case O5:for(;t.have<t.nlen+t.ndist;){for(;z=t.lencode[d&(1<<t.lenbits)-1],j=z>>>24,U=z>>>16&255,H=z&65535,!(j<=g);){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}if(H<16)d>>>=j,g-=j,t.lens[t.have++]=H;else{if(H===16){for(k=j+2;g<k;){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}if(d>>>=j,g-=j,t.have===0){r.msg="invalid bit length repeat",t.mode=fn;break}N=t.lens[t.have-1],b=3+(d&3),d>>>=2,g-=2}else if(H===17){for(k=j+3;g<k;){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}d>>>=j,g-=j,N=0,b=3+(d&7),d>>>=3,g-=3}else{for(k=j+7;g<k;){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}d>>>=j,g-=j,N=0,b=11+(d&127),d>>>=7,g-=7}if(t.have+b>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=fn;break}for(;b--;)t.lens[t.have++]=N}}if(t.mode===fn)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=fn;break}if(t.lenbits=9,F={bits:t.lenbits},A=Hd(Ox,t.lens,0,t.nlen,t.lencode,0,t.work,F),t.lenbits=F.bits,A){r.msg="invalid literal/lengths set",t.mode=fn;break}if(t.distbits=6,t.distcode=t.distdyn,F={bits:t.distbits},A=Hd(Vx,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,F),t.distbits=F.bits,A){r.msg="invalid distances set",t.mode=fn;break}if(t.mode=pf,e===ff)break e;case pf:t.mode=mf;case mf:if(u>=6&&f>=258){r.next_out=c,r.avail_out=f,r.next_in=a,r.avail_in=u,t.hold=d,t.bits=g,U_(r,C),c=r.next_out,o=r.output,f=r.avail_out,a=r.next_in,n=r.input,u=r.avail_in,d=t.hold,g=t.bits,t.mode===al&&(t.back=-1);break}for(t.back=0;z=t.lencode[d&(1<<t.lenbits)-1],j=z>>>24,U=z>>>16&255,H=z&65535,!(j<=g);){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}if(U&&(U&240)===0){for(B=j,re=U,ce=H;z=t.lencode[ce+((d&(1<<B+re)-1)>>B)],j=z>>>24,U=z>>>16&255,H=z&65535,!(B+j<=g);){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}d>>>=B,g-=B,t.back+=B}if(d>>>=j,g-=j,t.back+=j,t.length=H,U===0){t.mode=$5;break}if(U&32){t.back=-1,t.mode=al;break}if(U&64){r.msg="invalid literal/length code",t.mode=fn;break}t.extra=U&15,t.mode=V5;case V5:if(t.extra){for(k=t.extra;g<k;){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}t.length+=d&(1<<t.extra)-1,d>>>=t.extra,g-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=M5;case M5:for(;z=t.distcode[d&(1<<t.distbits)-1],j=z>>>24,U=z>>>16&255,H=z&65535,!(j<=g);){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}if((U&240)===0){for(B=j,re=U,ce=H;z=t.distcode[ce+((d&(1<<B+re)-1)>>B)],j=z>>>24,U=z>>>16&255,H=z&65535,!(B+j<=g);){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}d>>>=B,g-=B,t.back+=B}if(d>>>=j,g-=j,t.back+=j,U&64){r.msg="invalid distance code",t.mode=fn;break}t.offset=H,t.extra=U&15,t.mode=D5;case D5:if(t.extra){for(k=t.extra;g<k;){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}t.offset+=d&(1<<t.extra)-1,d>>>=t.extra,g-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=fn;break}t.mode=W5;case W5:if(f===0)break e;if(b=C-f,t.offset>b){if(b=t.offset-b,b>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=fn;break}b>t.wnext?(b-=t.wnext,V=t.wsize-b):V=t.wnext-b,b>t.length&&(b=t.length),R=t.window}else R=o,V=c-t.offset,b=t.length;b>f&&(b=f),f-=b,t.length-=b;do o[c++]=R[V++];while(--b);t.length===0&&(t.mode=mf);break;case $5:if(f===0)break e;o[c++]=t.length,f--,t.mode=mf;break;case Fm:if(t.wrap){for(;g<32;){if(u===0)break e;u--,d|=n[a++]<<g,g+=8}if(C-=f,r.total_out+=C,t.total+=C,t.wrap&4&&C&&(r.adler=t.check=t.flags?Ta(t.check,o,C,c-C):g0(t.check,o,C,c-C)),C=f,t.wrap&4&&(t.flags?d:H5(d))!==t.check){r.msg="incorrect data check",t.mode=fn;break}d=0,g=0}t.mode=U5;case U5:if(t.wrap&&t.flags){for(;g<32;){if(u===0)break e;u--,d+=n[a++]<<g,g+=8}if(t.wrap&4&&d!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=fn;break}d=0,g=0}t.mode=q5;case q5:A=X_;break e;case fn:A=Mx;break e;case Wx:return Dx;case $x:default:return Rs}return r.next_out=c,r.avail_out=f,r.next_in=a,r.avail_in=u,t.hold=d,t.bits=g,(t.wsize||C!==r.avail_out&&t.mode<fn&&(t.mode<Fm||e!==_5))&&Kx(r,r.output,r.next_out,C-r.avail_out),w-=r.avail_in,C-=r.avail_out,r.total_in+=w,r.total_out+=C,t.total+=C,t.wrap&4&&C&&(r.adler=t.check=t.flags?Ta(t.check,o,C,r.next_out-C):g0(t.check,o,C,r.next_out-C)),r.data_type=t.bits+(t.last?64:0)+(t.mode===al?128:0)+(t.mode===pf||t.mode===Bm?256:0),(w===0&&C===0||e===_5)&&A===Wc&&(A=e4),A},c4=r=>{if(Xc(r))return Rs;let e=r.state;return e.window&&(e.window=null),r.state=null,Wc},u4=(r,e)=>{if(Xc(r))return Rs;const t=r.state;return(t.wrap&2)===0?Rs:(t.head=e,e.done=!1,Wc)},d4=(r,e)=>{const t=e.length;let n,o,a;return Xc(r)||(n=r.state,n.wrap!==0&&n.mode!==Hf)?Rs:n.mode===Hf&&(o=1,o=g0(o,e,t,0),o!==n.check)?Mx:(a=Kx(r,e,t,t),a?(n.mode=Wx,Dx):(n.havedict=1,Wc))};var h4=qx,f4=Hx,p4=Ux,m4=s4,g4=Gx,y4=l4,x4=c4,v4=u4,b4=d4,w4="pako inflate (from Nodeca project)",ll={inflateReset:h4,inflateReset2:f4,inflateResetKeep:p4,inflateInit:m4,inflateInit2:g4,inflate:y4,inflateEnd:x4,inflateGetHeader:v4,inflateSetDictionary:b4,inflateInfo:w4};function S4(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var _4=S4;const Jx=Object.prototype.toString,{Z_NO_FLUSH:T4,Z_FINISH:A4,Z_OK:th,Z_STREAM_END:Vm,Z_NEED_DICT:Mm,Z_STREAM_ERROR:C4,Z_DATA_ERROR:K5,Z_MEM_ERROR:k4}=Bx;function ph(r){this.options=Fx.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new W_,this.strm.avail_out=0;let t=ll.inflateInit2(this.strm,e.windowBits);if(t!==th)throw new Error(y0[t]);if(this.header=new _4,ll.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=x0.string2buf(e.dictionary):Jx.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=ll.inflateSetDictionary(this.strm,e.dictionary),t!==th)))throw new Error(y0[t])}ph.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,o=this.options.dictionary;let a,c,u;if(this.ended)return!1;for(e===~~e?c=e:c=e===!0?A4:T4,Jx.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),a=ll.inflate(t,c),a===Mm&&o&&(a=ll.inflateSetDictionary(t,o),a===th?a=ll.inflate(t,c):a===K5&&(a=Mm));t.avail_in>0&&a===Vm&&t.state.wrap>0&&r[t.next_in]!==0;)ll.inflateReset(t),a=ll.inflate(t,c);switch(a){case C4:case K5:case Mm:case k4:return this.onEnd(a),this.ended=!0,!1}if(u=t.avail_out,t.next_out&&(t.avail_out===0||a===Vm))if(this.options.to==="string"){let f=x0.utf8border(t.output,t.next_out),d=t.next_out-f,g=x0.buf2string(t.output,f);t.next_out=d,t.avail_out=n-d,d&&t.output.set(t.output.subarray(f,f+d),0),this.onData(g)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===th&&u===0)){if(a===Vm)return a=ll.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};ph.prototype.onData=function(r){this.chunks.push(r)};ph.prototype.onEnd=function(r){r===th&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Fx.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function j4(r,e){const t=new ph(e);if(t.push(r),t.err)throw t.msg||y0[t.err];return t.result}var E4=ph,I4=j4,R4={Inflate:E4,inflate:I4};const{Inflate:P4,inflate:N4}=R4;var J5=P4,L4=N4;const Yx=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;Yx[r]=e}const Y5=4294967295;function B4(r,e,t){let n=r;for(let o=0;o<t;o++)n=Yx[(n^e[o])&255]^n>>>8;return n}function F4(r,e){return(B4(Y5,r,e)^Y5)>>>0}function Q5(r,e,t){const n=r.readUint32(),o=F4(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(o!==n)throw new Error(`CRC mismatch for chunk ${t}. Expected ${n}, found ${o}`)}function Qx(r,e,t){for(let n=0;n<t;n++)e[n]=r[n]}function Xx(r,e,t,n){let o=0;for(;o<n;o++)e[o]=r[o];for(;o<t;o++)e[o]=r[o]+e[o-n]&255}function Zx(r,e,t,n){let o=0;if(t.length===0)for(;o<n;o++)e[o]=r[o];else for(;o<n;o++)e[o]=r[o]+t[o]&255}function ev(r,e,t,n,o){let a=0;if(t.length===0){for(;a<o;a++)e[a]=r[a];for(;a<n;a++)e[a]=r[a]+(e[a-o]>>1)&255}else{for(;a<o;a++)e[a]=r[a]+(t[a]>>1)&255;for(;a<n;a++)e[a]=r[a]+(e[a-o]+t[a]>>1)&255}}function tv(r,e,t,n,o){let a=0;if(t.length===0){for(;a<o;a++)e[a]=r[a];for(;a<n;a++)e[a]=r[a]+e[a-o]&255}else{for(;a<o;a++)e[a]=r[a]+t[a]&255;for(;a<n;a++)e[a]=r[a]+z4(e[a-o],t[a],t[a-o])&255}}function z4(r,e,t){const n=r+e-t,o=Math.abs(n-r),a=Math.abs(n-e),c=Math.abs(n-t);return o<=a&&o<=c?r:a<=c?e:t}function O4(r,e,t,n,o,a){switch(r){case 0:Qx(e,t,o);break;case 1:Xx(e,t,o,a);break;case 2:Zx(e,t,n,o);break;case 3:ev(e,t,n,o,a);break;case 4:tv(e,t,n,o,a);break;default:throw new Error(`Unsupported filter: ${r}`)}}const V4=new Uint16Array([255]),M4=new Uint8Array(V4.buffer),D4=M4[0]===255;function W4(r){const{data:e,width:t,height:n,channels:o,depth:a}=r,c=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(a/8)*o,f=new Uint8Array(n*t*u);let d=0;for(let g=0;g<7;g++){const w=c[g],C=Math.ceil((t-w.x)/w.xStep),b=Math.ceil((n-w.y)/w.yStep);if(C<=0||b<=0)continue;const V=C*u,R=new Uint8Array(V);for(let z=0;z<b;z++){const j=e[d++],U=e.subarray(d,d+V);d+=V;const H=new Uint8Array(V);O4(j,U,H,R,V,u),R.set(H);for(let B=0;B<C;B++){const re=w.x+B*w.xStep,ce=w.y+z*w.yStep;if(!(re>=t||ce>=n))for(let N=0;N<u;N++)f[(ce*t+re)*u+N]=H[B*u+N]}}}if(a===16){const g=new Uint16Array(f.buffer);if(D4)for(let w=0;w<g.length;w++)g[w]=$4(g[w]);return g}else return f}function $4(r){return(r&255)<<8|r>>8&255}const U4=new Uint16Array([255]),q4=new Uint8Array(U4.buffer),H4=q4[0]===255,G4=new Uint8Array(0);function X5(r){const{data:e,width:t,height:n,channels:o,depth:a}=r,c=Math.ceil(a/8)*o,u=Math.ceil(a/8*o*t),f=new Uint8Array(n*u);let d=G4,g=0,w,C;for(let b=0;b<n;b++){switch(w=e.subarray(g+1,g+1+u),C=f.subarray(b*u,(b+1)*u),e[g]){case 0:Qx(w,C,u);break;case 1:Xx(w,C,u,c);break;case 2:Zx(w,C,d,u);break;case 3:ev(w,C,d,u,c);break;case 4:tv(w,C,d,u,c);break;default:throw new Error(`Unsupported filter: ${e[g]}`)}d=C,g+=u+1}if(a===16){const b=new Uint16Array(f.buffer);if(H4)for(let V=0;V<b.length;V++)b[V]=K4(b[V]);return b}else return f}function K4(r){return(r&255)<<8|r>>8&255}const jf=Uint8Array.of(137,80,78,71,13,10,26,10);function Z5(r){if(!J4(r.readBytes(jf.length)))throw new Error("wrong PNG signature")}function J4(r){if(r.length<jf.length)return!1;for(let e=0;e<jf.length;e++)if(r[e]!==jf[e])return!1;return!0}const Y4="tEXt",Q4=0,rv=new TextDecoder("latin1");function X4(r){if(eT(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const Z4=/^[\u0000-\u00FF]*$/;function eT(r){if(!Z4.test(r))throw new Error("invalid latin1 text")}function tT(r,e,t){const n=nv(e);r[n]=rT(e,t-n.length-1)}function nv(r){for(r.mark();r.readByte()!==Q4;);const e=r.offset;r.reset();const t=rv.decode(r.readBytes(e-r.offset-1));return r.skip(1),X4(t),t}function rT(r,e){return rv.decode(r.readBytes(e))}const ss={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Dm={UNKNOWN:-1,DEFLATE:0},e2={UNKNOWN:-1,ADAPTIVE:0},Wm={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},gf={NONE:0,BACKGROUND:1,PREVIOUS:2},$m={SOURCE:0,OVER:1};class nT extends ig{constructor(t,n={}){super(t);Ur(this,"_checkCrc");Ur(this,"_inflator");Ur(this,"_png");Ur(this,"_apng");Ur(this,"_end");Ur(this,"_hasPalette");Ur(this,"_palette");Ur(this,"_hasTransparency");Ur(this,"_transparency");Ur(this,"_compressionMethod");Ur(this,"_filterMethod");Ur(this,"_interlaceMethod");Ur(this,"_colorType");Ur(this,"_isAnimated");Ur(this,"_numberOfFrames");Ur(this,"_numberOfPlays");Ur(this,"_frames");Ur(this,"_writingDataChunks");const{checkCrc:o=!1}=n;this._checkCrc=o,this._inflator=new J5,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Dm.UNKNOWN,this._filterMethod=e2.UNKNOWN,this._interlaceMethod=Wm.UNKNOWN,this._colorType=ss.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Z5(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeChunk(t,n)}return this.decodeImage(),this._png}decodeApng(){for(Z5(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(t,n)}return this.decodeApngImage(),this._apng}decodeChunk(t,n){const o=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case Y4:tT(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-o!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Q5(this,t+4,n):this.skip(4)}decodeApngChunk(t,n){const o=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,n),this.offset=o+t;break}if(this.offset-o!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Q5(this,t+4,n):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=iT(this.readUint8());const n=this.readUint8();this._colorType=n;let o;switch(n){case ss.GREYSCALE:o=1;break;case ss.TRUECOLOUR:o=3;break;case ss.INDEXED_COLOUR:o=1;break;case ss.GREYSCALE_ALPHA:o=2;break;case ss.TRUECOLOUR_ALPHA:o=4;break;case ss.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=o,this._compressionMethod=this.readUint8(),this._compressionMethod!==Dm.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const n=t/3;this._hasPalette=!0;const o=[];this._palette=o;for(let a=0;a<n;a++)o.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const n=t,o=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,o,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let n=t,o=this.offset+this.byteOffset;if(o+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,o,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case ss.GREYSCALE:case ss.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let n=0;n<t/2;n++)this._transparency[n]=this.readUint16();break}case ss.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let n=0;for(;n<t;n++){const o=this.readByte();this._palette[n].push(o)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case ss.UNKNOWN:case ss.GREYSCALE_ALPHA:case ss.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const n=nv(this),o=this.readUint8();if(o!==Dm.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${o}`);const a=this.readBytes(t-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:L4(a)}}decodepHYs(){const t=this.readUint32(),n=this.readUint32(),o=this.readByte();this._png.resolution={x:t,y:n,unit:o}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const n={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},o=this._frames.at(t);if(o){if(o.data=X5({data:o.data,width:o.width,height:o.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||o.xOffset===0&&o.yOffset===0&&o.width===this._png.width&&o.height===this._png.height)n.data=o.data;else{const a=this._apng.frames.at(t-1);this.disposeFrame(o,a,n),this.addFrameDataToCanvas(n,o)}this._apng.frames.push(n)}}return this._apng}disposeFrame(t,n,o){switch(t.disposeOp){case gf.NONE:break;case gf.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let c=0;c<this._png.width;c++){const u=(a*t.width+c)*this._png.channels;for(let f=0;f<this._png.channels;f++)o.data[u+f]=0}break;case gf.PREVIOUS:o.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,n){const o=1<<this._png.depth,a=(c,u)=>{const f=((c+n.yOffset)*this._png.width+n.xOffset+u)*this._png.channels,d=(c*n.width+u)*this._png.channels;return{index:f,frameIndex:d}};switch(n.blendOp){case $m.SOURCE:for(let c=0;c<n.height;c++)for(let u=0;u<n.width;u++){const{index:f,frameIndex:d}=a(c,u);for(let g=0;g<this._png.channels;g++)t.data[f+g]=n.data[d+g]}break;case $m.OVER:for(let c=0;c<n.height;c++)for(let u=0;u<n.width;u++){const{index:f,frameIndex:d}=a(c,u);for(let g=0;g<this._png.channels;g++){const w=n.data[d+this._png.channels-1]/o,C=g%(this._png.channels-1)===0?1:n.data[d+g],b=Math.floor(w*C+(1-w)*t.data[f+g]);t.data[f+g]+=b}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==e2.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Wm.NO_INTERLACE)this._png.data=X5({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Wm.ADAM7)this._png.data=W4({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,n=this._frames.at(-1);n?n.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:gf.NONE,blendOp:$m.SOURCE,data:t}),this._inflator=new J5,this._writingDataChunks=!1}}function iT(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var t2;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(t2||(t2={}));function oT(r,e){return new nT(r,e).decode()}var Jt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Um(){Jt.console&&typeof Jt.console.log=="function"&&Jt.console.log.apply(Jt.console,arguments)}var Qr={log:Um,warn:function(r){Jt.console&&(typeof Jt.console.warn=="function"?Jt.console.warn.apply(Jt.console,arguments):Um.call(null,arguments))},error:function(r){Jt.console&&(typeof Jt.console.error=="function"?Jt.console.error.apply(Jt.console,arguments):Um(r))}};function qm(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){Bc(n.response,e,t)},n.onerror=function(){Qr.error("could not download file")},n.send()}function r2(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function yf(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var Bc=Jt.saveAs||((typeof window>"u"?"undefined":qr(window))!=="object"||window!==Jt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=Jt.URL||Jt.webkitURL,o=document.createElement("a");e=e||r.name||"download",o.download=e,o.rel="noopener",typeof r=="string"?(o.href=r,o.origin!==location.origin?r2(o.href)?qm(r,e,t):yf(o,o.target="_blank"):yf(o)):(o.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(o.href)},4e4),setTimeout(function(){yf(o)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(r2(r))qm(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){yf(n)})}else navigator.msSaveOrOpenBlob((function(o,a){return a===void 0?a={autoBom:!1}:qr(a)!=="object"&&(Qr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o})(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return qm(r,e,t);var o=r.type==="application/octet-stream",a=/constructor/i.test(Jt.HTMLElement)||Jt.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&a)&&(typeof FileReader>"u"?"undefined":qr(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var g=u.result;g=c?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=g:location=g,n=null},u.readAsDataURL(r)}else{var f=Jt.URL||Jt.webkitURL,d=f.createObjectURL(r);n?n.location=d:location.href=d,n=null,setTimeout(function(){f.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function iv(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],n=0;n<t.length;n++){var o=t[n].re,a=t[n].process,c=o.exec(r);c&&(e=a(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),f=this.g.toString(16),d=this.b.toString(16);return u.length==1&&(u="0"+u),f.length==1&&(f="0"+f),d.length==1&&(d="0"+d),"#"+u+f+d}}var Ef=Jt.atob.bind(Jt),n2=Jt.btoa.bind(Jt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Hm(r,e){var t=r[0],n=r[1],o=r[2],a=r[3];t=to(t,n,o,a,e[0],7,-680876936),a=to(a,t,n,o,e[1],12,-389564586),o=to(o,a,t,n,e[2],17,606105819),n=to(n,o,a,t,e[3],22,-1044525330),t=to(t,n,o,a,e[4],7,-176418897),a=to(a,t,n,o,e[5],12,1200080426),o=to(o,a,t,n,e[6],17,-1473231341),n=to(n,o,a,t,e[7],22,-45705983),t=to(t,n,o,a,e[8],7,1770035416),a=to(a,t,n,o,e[9],12,-1958414417),o=to(o,a,t,n,e[10],17,-42063),n=to(n,o,a,t,e[11],22,-1990404162),t=to(t,n,o,a,e[12],7,1804603682),a=to(a,t,n,o,e[13],12,-40341101),o=to(o,a,t,n,e[14],17,-1502002290),t=ro(t,n=to(n,o,a,t,e[15],22,1236535329),o,a,e[1],5,-165796510),a=ro(a,t,n,o,e[6],9,-1069501632),o=ro(o,a,t,n,e[11],14,643717713),n=ro(n,o,a,t,e[0],20,-373897302),t=ro(t,n,o,a,e[5],5,-701558691),a=ro(a,t,n,o,e[10],9,38016083),o=ro(o,a,t,n,e[15],14,-660478335),n=ro(n,o,a,t,e[4],20,-405537848),t=ro(t,n,o,a,e[9],5,568446438),a=ro(a,t,n,o,e[14],9,-1019803690),o=ro(o,a,t,n,e[3],14,-187363961),n=ro(n,o,a,t,e[8],20,1163531501),t=ro(t,n,o,a,e[13],5,-1444681467),a=ro(a,t,n,o,e[2],9,-51403784),o=ro(o,a,t,n,e[7],14,1735328473),t=no(t,n=ro(n,o,a,t,e[12],20,-1926607734),o,a,e[5],4,-378558),a=no(a,t,n,o,e[8],11,-2022574463),o=no(o,a,t,n,e[11],16,1839030562),n=no(n,o,a,t,e[14],23,-35309556),t=no(t,n,o,a,e[1],4,-1530992060),a=no(a,t,n,o,e[4],11,1272893353),o=no(o,a,t,n,e[7],16,-155497632),n=no(n,o,a,t,e[10],23,-1094730640),t=no(t,n,o,a,e[13],4,681279174),a=no(a,t,n,o,e[0],11,-358537222),o=no(o,a,t,n,e[3],16,-722521979),n=no(n,o,a,t,e[6],23,76029189),t=no(t,n,o,a,e[9],4,-640364487),a=no(a,t,n,o,e[12],11,-421815835),o=no(o,a,t,n,e[15],16,530742520),t=io(t,n=no(n,o,a,t,e[2],23,-995338651),o,a,e[0],6,-198630844),a=io(a,t,n,o,e[7],10,1126891415),o=io(o,a,t,n,e[14],15,-1416354905),n=io(n,o,a,t,e[5],21,-57434055),t=io(t,n,o,a,e[12],6,1700485571),a=io(a,t,n,o,e[3],10,-1894986606),o=io(o,a,t,n,e[10],15,-1051523),n=io(n,o,a,t,e[1],21,-2054922799),t=io(t,n,o,a,e[8],6,1873313359),a=io(a,t,n,o,e[15],10,-30611744),o=io(o,a,t,n,e[6],15,-1560198380),n=io(n,o,a,t,e[13],21,1309151649),t=io(t,n,o,a,e[4],6,-145523070),a=io(a,t,n,o,e[11],10,-1120210379),o=io(o,a,t,n,e[2],15,718787259),n=io(n,o,a,t,e[9],21,-343485551),r[0]=Yl(t,r[0]),r[1]=Yl(n,r[1]),r[2]=Yl(o,r[2]),r[3]=Yl(a,r[3])}function gp(r,e,t,n,o,a){return e=Yl(Yl(e,r),Yl(n,a)),Yl(e<<o|e>>>32-o,t)}function to(r,e,t,n,o,a,c){return gp(e&t|~e&n,r,e,o,a,c)}function ro(r,e,t,n,o,a,c){return gp(e&n|t&~n,r,e,o,a,c)}function no(r,e,t,n,o,a,c){return gp(e^t^n,r,e,o,a,c)}function io(r,e,t,n,o,a,c){return gp(t^(e|~n),r,e,o,a,c)}function ov(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)Hm(n,sT(r.substring(e-64,e)));r=r.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)o[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(Hm(n,o),e=0;e<16;e++)o[e]=0;return o[14]=8*t,Hm(n,o),n}function sT(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var i2="0123456789abcdef".split("");function aT(r){for(var e="",t=0;t<4;t++)e+=i2[r>>8*t+4&15]+i2[r>>8*t&15];return e}function lT(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function v0(r){return ov(r).map(lT).join("")}var cT=(function(r){for(var e=0;e<r.length;e++)r[e]=aT(r[e]);return r.join("")})(ov("hello"))!="5d41402abc4b2a76b9719d911017c592";function Yl(r,e){if(cT){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function b0(r,e){var t,n,o,a;if(r!==t){for(var c=(o=r,a=1+(256/r.length|0),new Array(a+1).join(o)),u=[],f=0;f<256;f++)u[f]=f;var d=0;for(f=0;f<256;f++){var g=u[f];d=(d+g+c.charCodeAt(f))%256,u[f]=u[d],u[d]=g}t=r,n=u}else u=n;var w=e.length,C=0,b=0,V="";for(f=0;f<w;f++)b=(b+(g=u[C=(C+1)%256]))%256,u[C]=u[b],u[b]=g,c=u[(u[C]+u[b])%256],V+=String.fromCharCode(e.charCodeAt(f)^c);return V}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var o2={print:4,modify:8,copy:16,"annot-forms":32};function Iu(r,e,t,n){this.v=1,this.r=2;var o=192;r.forEach(function(u){if(o2.perm!==void 0)throw new Error("Invalid permission: "+u);o+=o2[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),c=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,c),this.P=-(1+(255^o)),this.encryptionKey=v0(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=b0(this.encryptionKey,this.padding)}function Ru(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var o=r.charCodeAt(n);e+=o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?"#"+("0"+o.toString(16)).slice(-2):r[n]}return e}function s2(r){if(qr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,o){if(o=o||!1,typeof t!="string"||typeof n!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[n,!!o],a},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),o=[];for(var a in e[t]){var c=e[t][a];try{c[0].apply(r,n)}catch(u){Jt.console&&Qr.error("jsPDF PubSub Error",u.message,u)}c[1]&&o.push(a)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Gf(r){if(!(this instanceof Gf))return new Gf(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function sv(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function zc(r,e,t,n,o){if(!(this instanceof zc))return new zc(r,e,t,n,o);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,sv.call(this,n,o)}function Fu(r,e,t,n,o){if(!(this instanceof Fu))return new Fu(r,e,t,n,o);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,sv.call(this,n,o)}function Tt(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],o=arguments[2],a=arguments[3],c=[],u=1,f=16,d="S",g=null;qr(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,o=r.format||o,a=r.compress||r.compressPdf||a,(g=r.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),u=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(f=r.floatPrecision),d=r.defaultPathOperation||"S"),c=r.filters||(a===!0?["FlateEncode"]:c),n=n||"mm",t=(""+(t||"P")).toLowerCase();var w=r.putOnlyUsedFonts||!1,C={},b={internal:{},__private__:{}};b.__private__.PubSub=s2;var V="1.3",R=b.__private__.getPdfVersion=function(){return V};b.__private__.setPdfVersion=function(S){V=S};var z={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return z};var j=b.__private__.getPageFormat=function(S){return z[S]};o=o||"a4";var U="compat",H="advanced",B=U;function re(){this.saveGraphicsState(),he(new jt(kt,0,0,-kt,0,gi()*kt).toString()+" cm"),this.setFontSize(this.getFontSize()/kt),d="n",B=H}function ce(){this.restoreGraphicsState(),d="S",B=U}var N=b.__private__.combineFontStyleAndFontWeight=function(S,G){if(S=="bold"&&G=="normal"||S=="bold"&&G==400||S=="normal"&&G=="italic"||S=="bold"&&G=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return G&&(S=G==400||G==="normal"?S==="italic"?"italic":"normal":G!=700&&G!=="bold"||S!=="normal"?(G==700?"bold":G)+""+S:"bold"),S};b.advancedAPI=function(S){var G=B===U;return G&&re.call(this),typeof S!="function"||(S(this),G&&ce.call(this)),this},b.compatAPI=function(S){var G=B===H;return G&&ce.call(this),typeof S!="function"||(S(this),G&&re.call(this)),this},b.isAdvancedAPI=function(){return B===H};var A,T=function(S){if(B!==H)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=b.roundToPrecision=b.__private__.roundToPrecision=function(S,G){var ue=e||G;if(isNaN(S)||isNaN(ue))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(ue).replace(/0+$/,"")};A=b.hpf=b.__private__.hpf=typeof f=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return F(S,f)}:f==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return F(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return F(S,16)};var k=b.f2=b.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return F(S,2)},v=b.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return F(S,3)},L=b.scale=b.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return B===U?S*kt:B===H?S:void 0},M=function(S){return L((function(G){return B===U?gi()-G:B===H?G:void 0})(S))};b.__private__.setPrecision=b.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(e=parseInt(S,10))};var $,oe="00000000000000000000000000000000",se=b.__private__.getFileId=function(){return oe},ie=b.__private__.setFileId=function(S){return oe=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():oe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(zr=new Iu(g.userPermissions,g.userPassword,g.ownerPassword,oe)),oe};b.setFileId=function(S){return ie(S),this},b.getFileId=function(){return se()};var ye=b.__private__.convertDateToPDFDate=function(S){var G=S.getTimezoneOffset(),ue=G<0?"+":"-",ge=Math.floor(Math.abs(G/60)),Te=Math.abs(G%60),Me=[ue,X(ge),"'",X(Te),"'"].join("");return["D:",S.getFullYear(),X(S.getMonth()+1),X(S.getDate()),X(S.getHours()),X(S.getMinutes()),X(S.getSeconds()),Me].join("")},xe=b.__private__.convertPDFDateToDate=function(S){var G=parseInt(S.substr(2,4),10),ue=parseInt(S.substr(6,2),10)-1,ge=parseInt(S.substr(8,2),10),Te=parseInt(S.substr(10,2),10),Me=parseInt(S.substr(12,2),10),He=parseInt(S.substr(14,2),10);return new Date(G,ue,ge,Te,Me,He,0)},ee=b.__private__.setCreationDate=function(S){var G;if(S===void 0&&(S=new Date),S instanceof Date)G=ye(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");G=S}return $=G},D=b.__private__.getCreationDate=function(S){var G=$;return S==="jsDate"&&(G=xe($)),G};b.setCreationDate=function(S){return ee(S),this},b.getCreationDate=function(S){return D(S)};var q,X=b.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},de=b.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},me=0,we=[],Ae=[],Ce=0,Be=[],qe=[],et=!1,Qe=Ae;b.__private__.setCustomOutputDestination=function(S){et=!0,Qe=S};var Fe=function(S){et||(Qe=S)};b.__private__.resetCustomOutputDestination=function(){et=!1,Qe=Ae};var he=b.__private__.out=function(S){return S=S.toString(),Ce+=S.length+1,Qe.push(S),Qe},Pt=b.__private__.write=function(S){return he(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},Ct=b.__private__.getArrayBuffer=function(S){for(var G=S.length,ue=new ArrayBuffer(G),ge=new Uint8Array(ue);G--;)ge[G]=S.charCodeAt(G);return ue},vt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return vt};var Ue=r.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(S){return Ue=B===H?S/kt:S,this};var nt,tt=b.__private__.getFontSize=b.getFontSize=function(){return B===U?Ue:Ue*kt},Gt=r.R2L||!1;b.__private__.setR2L=b.setR2L=function(S){return Gt=S,this},b.__private__.getR2L=b.getR2L=function(){return Gt};var wt,hr=b.__private__.setZoomMode=function(S){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))nt=S;else if(isNaN(S)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');nt=S}else nt=parseInt(S,10)};b.__private__.getZoomMode=function(){return nt};var Nt,Dt=b.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');wt=S};b.__private__.getPageMode=function(){return wt};var yr=b.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');Nt=S};b.__private__.getLayoutMode=function(){return Nt},b.__private__.setDisplayMode=b.setDisplayMode=function(S,G,ue){return hr(S),yr(G),Dt(ue),this};var Ft={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(S){if(Object.keys(Ft).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ft[S]},b.__private__.getDocumentProperties=function(){return Ft},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(S){for(var G in Ft)Ft.hasOwnProperty(G)&&S[G]&&(Ft[G]=S[G]);return this},b.__private__.setDocumentProperty=function(S,G){if(Object.keys(Ft).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ft[S]=G};var St,kt,ft,Cr,rr,dt={},Wt={},ir=[],At={},Xt={},Vt={},kr={},Br=null,Mt=0,zt=[],or=new s2(b),Di=r.hotfixes||[],Rn={},_o={},Pn=[],jt=function S(G,ue,ge,Te,Me,He){if(!(this instanceof S))return new S(G,ue,ge,Te,Me,He);isNaN(G)&&(G=1),isNaN(ue)&&(ue=0),isNaN(ge)&&(ge=0),isNaN(Te)&&(Te=1),isNaN(Me)&&(Me=0),isNaN(He)&&(He=0),this._matrix=[G,ue,ge,Te,Me,He]};Object.defineProperty(jt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(jt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(jt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(jt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(jt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(jt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(jt.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(jt.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(jt.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(jt.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(jt.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(jt.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(jt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(jt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(jt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(jt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),jt.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(S)},jt.prototype.multiply=function(S){var G=S.sx*this.sx+S.shy*this.shx,ue=S.sx*this.shy+S.shy*this.sy,ge=S.shx*this.sx+S.sy*this.shx,Te=S.shx*this.shy+S.sy*this.sy,Me=S.tx*this.sx+S.ty*this.shx+this.tx,He=S.tx*this.shy+S.ty*this.sy+this.ty;return new jt(G,ue,ge,Te,Me,He)},jt.prototype.decompose=function(){var S=this.sx,G=this.shy,ue=this.shx,ge=this.sy,Te=this.tx,Me=this.ty,He=Math.sqrt(S*S+G*G),st=(S/=He)*ue+(G/=He)*ge;ue-=S*st,ge-=G*st;var pt=Math.sqrt(ue*ue+ge*ge);return st/=pt,S*(ge/=pt)<G*(ue/=pt)&&(S=-S,G=-G,st=-st,He=-He),{scale:new jt(He,0,0,pt,0,0),translate:new jt(1,0,0,1,Te,Me),rotate:new jt(S,G,-G,S,0,0),skew:new jt(1,0,st,1,0,0)}},jt.prototype.toString=function(S){return this.join(" ")},jt.prototype.inversed=function(){var S=this.sx,G=this.shy,ue=this.shx,ge=this.sy,Te=this.tx,Me=this.ty,He=1/(S*ge-G*ue),st=ge*He,pt=-G*He,Rt=-ue*He,yt=S*He;return new jt(st,pt,Rt,yt,-st*Te-Rt*Me,-pt*Te-yt*Me)},jt.prototype.applyToPoint=function(S){var G=S.x*this.sx+S.y*this.shx+this.tx,ue=S.x*this.shy+S.y*this.sy+this.ty;return new mi(G,ue)},jt.prototype.applyToRectangle=function(S){var G=this.applyToPoint(S),ue=this.applyToPoint(new mi(S.x+S.w,S.y+S.h));return new ms(G.x,G.y,ue.x-G.x,ue.y-G.y)},jt.prototype.clone=function(){var S=this.sx,G=this.shy,ue=this.shx,ge=this.sy,Te=this.tx,Me=this.ty;return new jt(S,G,ue,ge,Te,Me)},b.Matrix=jt;var ki=b.matrixMult=function(S,G){return G.multiply(S)},ci=new jt(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=ci;var Nn=function(S,G){if(!Xt[S]){var ue=(G instanceof zc?"Sh":"P")+(Object.keys(At).length+1).toString(10);G.id=ue,Xt[S]=ue,At[ue]=G,or.publish("addPattern",G)}};b.ShadingPattern=zc,b.TilingPattern=Fu,b.addShadingPattern=function(S,G){return T("addShadingPattern()"),Nn(S,G),this},b.beginTilingPattern=function(S){T("beginTilingPattern()"),ni(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},b.endTilingPattern=function(S,G){T("endTilingPattern()"),G.stream=qe[q].join(`
`),Nn(S,G),or.publish("endTilingPattern",G),Pn.pop().restore()};var ji,Tr=b.__private__.newObject=function(){var S=Fr();return sn(S,!0),S},Fr=b.__private__.newObjectDeferred=function(){return me++,we[me]=function(){return Ce},me},sn=function(S,G){return G=typeof G=="boolean"&&G,we[S]=Ce,G&&he(S+" 0 obj"),S},qn=b.__private__.newAdditionalObject=function(){var S={objId:Fr(),content:""};return Be.push(S),S},$o=Fr(),Wi=Fr(),$i=b.__private__.decodeColorString=function(S){var G=S.split(" ");if(G.length!==2||G[1]!=="g"&&G[1]!=="G")G.length!==5||G[4]!=="k"&&G[4]!=="K"||(G=[(1-G[0])*(1-G[3]),(1-G[1])*(1-G[3]),(1-G[2])*(1-G[3]),"r"]);else{var ue=parseFloat(G[0]);G=[ue,ue,ue,"r"]}for(var ge="#",Te=0;Te<3;Te++)ge+=("0"+Math.floor(255*parseFloat(G[Te])).toString(16)).slice(-2);return ge},mn=b.__private__.encodeColorString=function(S){var G;typeof S=="string"&&(S={ch1:S});var ue=S.ch1,ge=S.ch2,Te=S.ch3,Me=S.ch4,He=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ue=="string"&&ue.charAt(0)!=="#"){var st=new iv(ue);if(st.ok)ue=st.toHex();else if(!/^\d*\.?\d*$/.test(ue))throw new Error('Invalid color "'+ue+'" passed to jsPDF.encodeColorString.')}if(typeof ue=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ue)&&(ue="#"+ue[1]+ue[1]+ue[2]+ue[2]+ue[3]+ue[3]),typeof ue=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ue)){var pt=parseInt(ue.substr(1),16);ue=pt>>16&255,ge=pt>>8&255,Te=255&pt}if(ge===void 0||Me===void 0&&ue===ge&&ge===Te)G=typeof ue=="string"?ue+" "+He[0]:S.precision===2?k(ue/255)+" "+He[0]:v(ue/255)+" "+He[0];else if(Me===void 0||qr(Me)==="object"){if(Me&&!isNaN(Me.a)&&Me.a===0)return["1.","1.","1.",He[1]].join(" ");G=typeof ue=="string"?[ue,ge,Te,He[1]].join(" "):S.precision===2?[k(ue/255),k(ge/255),k(Te/255),He[1]].join(" "):[v(ue/255),v(ge/255),v(Te/255),He[1]].join(" ")}else G=typeof ue=="string"?[ue,ge,Te,Me,He[2]].join(" "):S.precision===2?[k(ue),k(ge),k(Te),k(Me),He[2]].join(" "):[v(ue),v(ge),v(Te),v(Me),He[2]].join(" ");return G},Ei=b.__private__.getFilters=function(){return c},Ii=b.__private__.putStream=function(S){var G=(S=S||{}).data||"",ue=S.filters||Ei(),ge=S.alreadyAppliedFilters||[],Te=S.addLength1||!1,Me=G.length,He=S.objectId,st=function(I){return I};if(g!==null&&He===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(st=zr.encryptor(He,0));var pt={};ue===!0&&(ue=["FlateEncode"]);var Rt=S.additionalKeyValues||[],yt=(pt=Tt.API.processDataByFilters!==void 0?Tt.API.processDataByFilters(G,ue):{data:G,reverseChain:[]}).reverseChain+(Array.isArray(ge)?ge.join(" "):ge.toString());if(pt.data.length!==0&&(Rt.push({key:"Length",value:pt.data.length}),Te===!0&&Rt.push({key:"Length1",value:Me})),yt.length!=0)if(yt.split("/").length-1==1)Rt.push({key:"Filter",value:yt});else{Rt.push({key:"Filter",value:"["+yt+"]"});for(var fr=0;fr<Rt.length;fr+=1)if(Rt[fr].key==="DecodeParms"){for(var Hr=[],Or=0;Or<pt.reverseChain.split("/").length-1;Or+=1)Hr.push("null");Hr.push(Rt[fr].value),Rt[fr].value="["+Hr.join(" ")+"]"}}he("<<");for(var m=0;m<Rt.length;m++)he("/"+Rt[m].key+" "+Rt[m].value);he(">>"),pt.data.length!==0&&(he("stream"),he(st(pt.data)),he("endstream"))},cs=b.__private__.putPage=function(S){var G=S.number,ue=S.data,ge=S.objId,Te=S.contentsObjId;sn(ge,!0),he("<</Type /Page"),he("/Parent "+S.rootDictionaryObjId+" 0 R"),he("/Resources "+S.resourceDictionaryObjId+" 0 R"),he("/MediaBox ["+parseFloat(A(S.mediaBox.bottomLeftX))+" "+parseFloat(A(S.mediaBox.bottomLeftY))+" "+A(S.mediaBox.topRightX)+" "+A(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&he("/CropBox ["+A(S.cropBox.bottomLeftX)+" "+A(S.cropBox.bottomLeftY)+" "+A(S.cropBox.topRightX)+" "+A(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&he("/BleedBox ["+A(S.bleedBox.bottomLeftX)+" "+A(S.bleedBox.bottomLeftY)+" "+A(S.bleedBox.topRightX)+" "+A(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&he("/TrimBox ["+A(S.trimBox.bottomLeftX)+" "+A(S.trimBox.bottomLeftY)+" "+A(S.trimBox.topRightX)+" "+A(S.trimBox.topRightY)+"]"),S.artBox!==null&&he("/ArtBox ["+A(S.artBox.bottomLeftX)+" "+A(S.artBox.bottomLeftY)+" "+A(S.artBox.topRightX)+" "+A(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&he("/UserUnit "+S.userUnit),or.publish("putPage",{objId:ge,pageContext:zt[G],pageNumber:G,page:ue}),he("/Contents "+Te+" 0 R"),he(">>"),he("endobj");var Me=ue.join(`
`);return B===H&&(Me+=`
Q`),sn(Te,!0),Ii({data:Me,filters:Ei(),objectId:Te}),he("endobj"),ge},co=b.__private__.putPages=function(){var S,G,ue=[];for(S=1;S<=Mt;S++)zt[S].objId=Fr(),zt[S].contentsObjId=Fr();for(S=1;S<=Mt;S++)ue.push(cs({number:S,data:qe[S],objId:zt[S].objId,contentsObjId:zt[S].contentsObjId,mediaBox:zt[S].mediaBox,cropBox:zt[S].cropBox,bleedBox:zt[S].bleedBox,trimBox:zt[S].trimBox,artBox:zt[S].artBox,userUnit:zt[S].userUnit,rootDictionaryObjId:$o,resourceDictionaryObjId:Wi}));sn($o,!0),he("<</Type /Pages");var ge="/Kids [";for(G=0;G<Mt;G++)ge+=ue[G]+" 0 R ";he(ge+"]"),he("/Count "+Mt),he(">>"),he("endobj"),or.publish("postPutPages")},uo=function(S){or.publish("putFont",{font:S,out:he,newObject:Tr,putStream:Ii}),S.isAlreadyPutted!==!0&&(S.objectNumber=Tr(),he("<<"),he("/Type /Font"),he("/BaseFont /"+Ru(S.postScriptName)),he("/Subtype /Type1"),typeof S.encoding=="string"&&he("/Encoding /"+S.encoding),he("/FirstChar 32"),he("/LastChar 255"),he(">>"),he("endobj"))},us=function(S){S.objectNumber=Tr();var G=[];G.push({key:"Type",value:"/XObject"}),G.push({key:"Subtype",value:"/Form"}),G.push({key:"BBox",value:"["+[A(S.x),A(S.y),A(S.x+S.width),A(S.y+S.height)].join(" ")+"]"}),G.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var ue=S.pages[1].join(`
`);Ii({data:ue,additionalKeyValues:G,objectId:S.objectNumber}),he("endobj")},Uo=function(S,G){G||(G=21);var ue=Tr(),ge=(function(He,st){var pt,Rt=[],yt=1/(st-1);for(pt=0;pt<1;pt+=yt)Rt.push(pt);if(Rt.push(1),He[0].offset!=0){var fr={offset:0,color:He[0].color};He.unshift(fr)}if(He[He.length-1].offset!=1){var Hr={offset:1,color:He[He.length-1].color};He.push(Hr)}for(var Or="",m=0,I=0;I<Rt.length;I++){for(pt=Rt[I];pt>He[m+1].offset;)m++;var W=He[m].offset,te=(pt-W)/(He[m+1].offset-W),ke=He[m].color,Pe=He[m+1].color;Or+=de(Math.round((1-te)*ke[0]+te*Pe[0]).toString(16))+de(Math.round((1-te)*ke[1]+te*Pe[1]).toString(16))+de(Math.round((1-te)*ke[2]+te*Pe[2]).toString(16))}return Or.trim()})(S.colors,G),Te=[];Te.push({key:"FunctionType",value:"0"}),Te.push({key:"Domain",value:"[0.0 1.0]"}),Te.push({key:"Size",value:"["+G+"]"}),Te.push({key:"BitsPerSample",value:"8"}),Te.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Te.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ii({data:ge,additionalKeyValues:Te,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ue}),he("endobj"),S.objectNumber=Tr(),he("<< /ShadingType "+S.type),he("/ColorSpace /DeviceRGB");var Me="/Coords ["+A(parseFloat(S.coords[0]))+" "+A(parseFloat(S.coords[1]))+" ";S.type===2?Me+=A(parseFloat(S.coords[2]))+" "+A(parseFloat(S.coords[3])):Me+=A(parseFloat(S.coords[2]))+" "+A(parseFloat(S.coords[3]))+" "+A(parseFloat(S.coords[4]))+" "+A(parseFloat(S.coords[5])),he(Me+="]"),S.matrix&&he("/Matrix ["+S.matrix.toString()+"]"),he("/Function "+ue+" 0 R"),he("/Extend [true true]"),he(">>"),he("endobj")},To=function(S,G){var ue=Fr(),ge=Tr();G.push({resourcesOid:ue,objectOid:ge}),S.objectNumber=ge;var Te=[];Te.push({key:"Type",value:"/Pattern"}),Te.push({key:"PatternType",value:"1"}),Te.push({key:"PaintType",value:"1"}),Te.push({key:"TilingType",value:"1"}),Te.push({key:"BBox",value:"["+S.boundingBox.map(A).join(" ")+"]"}),Te.push({key:"XStep",value:A(S.xStep)}),Te.push({key:"YStep",value:A(S.yStep)}),Te.push({key:"Resources",value:ue+" 0 R"}),S.matrix&&Te.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),Ii({data:S.stream,additionalKeyValues:Te,objectId:S.objectNumber}),he("endobj")},qo=function(S){for(var G in S.objectNumber=Tr(),he("<<"),S)switch(G){case"opacity":he("/ca "+k(S[G]));break;case"stroke-opacity":he("/CA "+k(S[G]))}he(">>"),he("endobj")},jr=function(S){sn(S.resourcesOid,!0),he("<<"),he("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var G in he("/Font <<"),dt)dt.hasOwnProperty(G)&&(w===!1||w===!0&&C.hasOwnProperty(G))&&he("/"+G+" "+dt[G].objectNumber+" 0 R");he(">>")})(),(function(){if(Object.keys(At).length>0){for(var G in he("/Shading <<"),At)At.hasOwnProperty(G)&&At[G]instanceof zc&&At[G].objectNumber>=0&&he("/"+G+" "+At[G].objectNumber+" 0 R");or.publish("putShadingPatternDict"),he(">>")}})(),(function(G){if(Object.keys(At).length>0){for(var ue in he("/Pattern <<"),At)At.hasOwnProperty(ue)&&At[ue]instanceof b.TilingPattern&&At[ue].objectNumber>=0&&At[ue].objectNumber<G&&he("/"+ue+" "+At[ue].objectNumber+" 0 R");or.publish("putTilingPatternDict"),he(">>")}})(S.objectOid),(function(){if(Object.keys(Vt).length>0){var G;for(G in he("/ExtGState <<"),Vt)Vt.hasOwnProperty(G)&&Vt[G].objectNumber>=0&&he("/"+G+" "+Vt[G].objectNumber+" 0 R");or.publish("putGStateDict"),he(">>")}})(),(function(){for(var G in he("/XObject <<"),Rn)Rn.hasOwnProperty(G)&&Rn[G].objectNumber>=0&&he("/"+G+" "+Rn[G].objectNumber+" 0 R");or.publish("putXobjectDict"),he(">>")})(),he(">>"),he("endobj")},xl=function(S){Wt[S.fontName]=Wt[S.fontName]||{},Wt[S.fontName][S.fontStyle]=S.id},Ps=function(S,G,ue,ge,Te){var Me={id:"F"+(Object.keys(dt).length+1).toString(10),postScriptName:S,fontName:G,fontStyle:ue,encoding:ge,isStandardFont:Te||!1,metadata:{}};return or.publish("addFont",{font:Me,instance:this}),dt[Me.id]=Me,xl(Me),Me.id},ui=b.__private__.pdfEscape=b.pdfEscape=function(S,G){return(function(ue,ge){var Te,Me,He,st,pt,Rt,yt,fr,Hr;if(He=(ge=ge||{}).sourceEncoding||"Unicode",pt=ge.outputEncoding,(ge.autoencode||pt)&&dt[St].metadata&&dt[St].metadata[He]&&dt[St].metadata[He].encoding&&(st=dt[St].metadata[He].encoding,!pt&&dt[St].encoding&&(pt=dt[St].encoding),!pt&&st.codePages&&(pt=st.codePages[0]),typeof pt=="string"&&(pt=st[pt]),pt)){for(yt=!1,Rt=[],Te=0,Me=ue.length;Te<Me;Te++)(fr=pt[ue.charCodeAt(Te)])?Rt.push(String.fromCharCode(fr)):Rt.push(ue[Te]),Rt[Te].charCodeAt(0)>>8&&(yt=!0);ue=Rt.join("")}for(Te=ue.length;yt===void 0&&Te!==0;)ue.charCodeAt(Te-1)>>8&&(yt=!0),Te--;if(!yt)return ue;for(Rt=ge.noBOM?[]:[254,255],Te=0,Me=ue.length;Te<Me;Te++){if((Hr=(fr=ue.charCodeAt(Te))>>8)>>8)throw new Error("Character at position "+Te+" of string '"+ue+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Rt.push(Hr),Rt.push(fr-(Hr<<8))}return String.fromCharCode.apply(void 0,Rt)})(S,G).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ho=b.__private__.beginPage=function(S){qe[++Mt]=[],zt[Mt]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},hs(Mt),Fe(qe[q])},aa=function(S,G){var ue,ge,Te;switch(t=G||t,typeof S=="string"&&(ue=j(S.toLowerCase()),Array.isArray(ue)&&(ge=ue[0],Te=ue[1])),Array.isArray(S)&&(ge=S[0]*kt,Te=S[1]*kt),isNaN(ge)&&(ge=o[0],Te=o[1]),(ge>14400||Te>14400)&&(Qr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ge=Math.min(14400,ge),Te=Math.min(14400,Te)),o=[ge,Te],t.substr(0,1)){case"l":Te>ge&&(o=[Te,ge]);break;case"p":ge>Te&&(o=[Te,ge])}Ho(o),Go(gn),he(zs),Hi!==0&&he(Hi+" J"),da!==0&&he(da+" j"),or.publish("addPage",{pageNumber:Mt})},ds=function(S){S>0&&S<=Mt&&(qe.splice(S,1),zt.splice(S,1),Mt--,q>Mt&&(q=Mt),this.setPage(q))},hs=function(S){S>0&&S<=Mt&&(q=S)},di=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return qe.length-1},za=function(S,G,ue){var ge,Te=void 0;return ue=ue||{},S=S!==void 0?S:dt[St].fontName,G=G!==void 0?G:dt[St].fontStyle,ge=S.toLowerCase(),Wt[ge]!==void 0&&Wt[ge][G]!==void 0?Te=Wt[ge][G]:Wt[S]!==void 0&&Wt[S][G]!==void 0?Te=Wt[S][G]:ue.disableWarning===!1&&Qr.warn("Unable to look up font label for font '"+S+"', '"+G+"'. Refer to getFontList() for available fonts."),Te||ue.noFallback||(Te=Wt.times[G])==null&&(Te=Wt.times.normal),Te},Hn=b.__private__.putInfo=function(){var S=Tr(),G=function(ge){return ge};for(var ue in g!==null&&(G=zr.encryptor(S,0)),he("<<"),he("/Producer ("+ui(G("jsPDF "+Tt.version))+")"),Ft)Ft.hasOwnProperty(ue)&&Ft[ue]&&he("/"+ue.substr(0,1).toUpperCase()+ue.substr(1)+" ("+ui(G(Ft[ue]))+")");he("/CreationDate ("+ui(G($))+")"),he(">>"),he("endobj")},Ao=b.__private__.putCatalog=function(S){var G=(S=S||{}).rootDictionaryObjId||$o;switch(Tr(),he("<<"),he("/Type /Catalog"),he("/Pages "+G+" 0 R"),nt||(nt="fullwidth"),nt){case"fullwidth":he("/OpenAction [3 0 R /FitH null]");break;case"fullheight":he("/OpenAction [3 0 R /FitV null]");break;case"fullpage":he("/OpenAction [3 0 R /Fit]");break;case"original":he("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ue=""+nt;ue.substr(ue.length-1)==="%"&&(nt=parseInt(nt)/100),typeof nt=="number"&&he("/OpenAction [3 0 R /XYZ null null "+k(nt)+"]")}switch(Nt||(Nt="continuous"),Nt){case"continuous":he("/PageLayout /OneColumn");break;case"single":he("/PageLayout /SinglePage");break;case"two":case"twoleft":he("/PageLayout /TwoColumnLeft");break;case"tworight":he("/PageLayout /TwoColumnRight")}wt&&he("/PageMode /"+wt),or.publish("putCatalog"),he(">>"),he("endobj")},vr=b.__private__.putTrailer=function(){he("trailer"),he("<<"),he("/Size "+(me+1)),he("/Root "+me+" 0 R"),he("/Info "+(me-1)+" 0 R"),g!==null&&he("/Encrypt "+zr.oid+" 0 R"),he("/ID [ <"+oe+"> <"+oe+"> ]"),he(">>")},fs=b.__private__.putHeader=function(){he("%PDF-"+V),he("%")},ho=b.__private__.putXRef=function(){var S="0000000000";he("xref"),he("0 "+(me+1)),he("0000000000 65535 f ");for(var G=1;G<=me;G++)typeof we[G]=="function"?he((S+we[G]()).slice(-10)+" 00000 n "):we[G]!==void 0?he((S+we[G]).slice(-10)+" 00000 n "):he("0000000000 00000 n ")},hi=b.__private__.buildDocument=function(){var S;me=0,Ce=0,Ae=[],we=[],Be=[],$o=Fr(),Wi=Fr(),Fe(Ae),or.publish("buildDocument"),fs(),co(),(function(){or.publish("putAdditionalObjects");for(var ue=0;ue<Be.length;ue++){var ge=Be[ue];sn(ge.objId,!0),he(ge.content),he("endobj")}or.publish("postPutAdditionalObjects")})(),S=[],(function(){for(var ue in dt)dt.hasOwnProperty(ue)&&(w===!1||w===!0&&C.hasOwnProperty(ue))&&uo(dt[ue])})(),(function(){var ue;for(ue in Vt)Vt.hasOwnProperty(ue)&&qo(Vt[ue])})(),(function(){for(var ue in Rn)Rn.hasOwnProperty(ue)&&us(Rn[ue])})(),(function(ue){var ge;for(ge in At)At.hasOwnProperty(ge)&&(At[ge]instanceof zc?Uo(At[ge]):At[ge]instanceof Fu&&To(At[ge],ue))})(S),or.publish("putResources"),S.forEach(jr),jr({resourcesOid:Wi,objectOid:Number.MAX_SAFE_INTEGER}),or.publish("postPutResources"),g!==null&&(zr.oid=Tr(),he("<<"),he("/Filter /Standard"),he("/V "+zr.v),he("/R "+zr.r),he("/U <"+zr.toHexString(zr.U)+">"),he("/O <"+zr.toHexString(zr.O)+">"),he("/P "+zr.P),he(">>"),he("endobj")),Hn(),Ao();var G=Ce;return ho(),vr(),he("startxref"),he(""+G),he("%%EOF"),Fe(qe[q]),Ae.join(`
`)},sr=b.__private__.getBlob=function(S){return new Blob([Ct(S)],{type:"application/pdf"})},Ln=b.output=b.__private__.output=(ji=function(S,G){switch(typeof(G=G||{})=="string"?G={filename:G}:G.filename=G.filename||"generated.pdf",S){case void 0:return hi();case"save":b.save(G.filename);break;case"arraybuffer":return Ct(hi());case"blob":return sr(hi());case"bloburi":case"bloburl":if(Jt.URL!==void 0&&typeof Jt.URL.createObjectURL=="function")return Jt.URL&&Jt.URL.createObjectURL(sr(hi()))||void 0;Qr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ue="",ge=hi();try{ue=n2(ge)}catch{ue=n2(unescape(encodeURIComponent(ge)))}return"data:application/pdf;filename="+G.filename+";base64,"+ue;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var Te="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Me=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';G.pdfObjectUrl&&(Te=G.pdfObjectUrl,Me="");var He='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Te+'"'+Me+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(G)+");<\/script></body></html>",st=Jt.open();return st!==null&&st.document.write(He),st}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(G.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+G.filename+'" width="500px" height="400px" /></body></html>',Rt=Jt.open();if(Rt!==null){Rt.document.write(pt);var yt=this;Rt.document.documentElement.querySelector("#pdfViewer").onload=function(){Rt.document.title=G.filename,Rt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(yt.output("bloburl"))}}return Rt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Jt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var fr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",G)+'"></iframe></body></html>',Hr=Jt.open();if(Hr!==null&&(Hr.document.write(fr),Hr.document.title=G.filename),Hr||typeof safari>"u")return Hr;break;case"datauri":case"dataurl":return Jt.document.location.href=this.output("datauristring",G);default:return null}},ji.foo=function(){try{return ji.apply(this,arguments)}catch(ue){var S=ue.stack||"";~S.indexOf(" at ")&&(S=S.split(" at ")[1]);var G="Error in function "+S.split(`
`)[0].split("<")[0]+": "+ue.message;if(!Jt.console)throw new Error(G);Jt.console.error(G,ue),Jt.alert&&alert(G)}},ji.foo.bar=ji,ji.foo),fo=function(S){return Array.isArray(Di)===!0&&Di.indexOf(S)>-1};switch(n){case"pt":kt=1;break;case"mm":kt=72/25.4;break;case"cm":kt=72/2.54;break;case"in":kt=72;break;case"px":kt=fo("px_scaling")==1?.75:96/72;break;case"pc":case"em":kt=12;break;case"ex":kt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);kt=n}var zr=null;ee(),ie();var Ns=b.__private__.getPageInfo=b.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:zt[S].objId,pageNumber:S,pageContext:zt[S]}},Oa=b.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var G in zt)if(zt[G].objId===S)break;return Ns(G)},Va=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:zt[q].objId,pageNumber:q,pageContext:zt[q]}};b.addPage=function(){return aa.apply(this,arguments),this},b.setPage=function(){return hs.apply(this,arguments),Fe.call(this,qe[q]),this},b.insertPage=function(S){return this.addPage(),this.movePage(q,S),this},b.movePage=function(S,G){var ue,ge;if(S>G){ue=qe[S],ge=zt[S];for(var Te=S;Te>G;Te--)qe[Te]=qe[Te-1],zt[Te]=zt[Te-1];qe[G]=ue,zt[G]=ge,this.setPage(G)}else if(S<G){ue=qe[S],ge=zt[S];for(var Me=S;Me<G;Me++)qe[Me]=qe[Me+1],zt[Me]=zt[Me+1];qe[G]=ue,zt[G]=ge,this.setPage(G)}return this},b.deletePage=function(){return ds.apply(this,arguments),this},b.__private__.text=b.text=function(S,G,ue,ge,Te){var Me,He,st,pt,Rt,yt,fr,Hr,Or,m=(ge=ge||{}).scope||this;if(typeof S=="number"&&typeof G=="number"&&(typeof ue=="string"||Array.isArray(ue))){var I=ue;ue=G,G=S,S=I}if(arguments[3]instanceof jt==0?(st=arguments[4],pt=arguments[5],qr(fr=arguments[3])==="object"&&fr!==null||(typeof st=="string"&&(pt=st,st=null),typeof fr=="string"&&(pt=fr,fr=null),typeof fr=="number"&&(st=fr,fr=null),ge={flags:fr,angle:st,align:pt})):(T("The transform parameter of text() with a Matrix value"),Or=Te),isNaN(G)||isNaN(ue)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return m;var W,te="",ke=typeof ge.lineHeightFactor=="number"?ge.lineHeightFactor:pi,Pe=m.internal.scaleFactor;function Ze(br){return br=br.split("	").join(Array(ge.TabLen||9).join(" ")),ui(br,fr)}function Ot(br){for(var Rr,cn=br.concat(),Tn=[],Zo=cn.length;Zo--;)typeof(Rr=cn.shift())=="string"?Tn.push(Rr):Array.isArray(br)&&(Rr.length===1||Rr[1]===void 0&&Rr[2]===void 0)?Tn.push(Rr[0]):Tn.push([Rr[0],Rr[1],Rr[2]]);return Tn}function Vr(br,Rr){var cn;if(typeof br=="string")cn=Rr(br)[0];else if(Array.isArray(br)){for(var Tn,Zo,gc=br.concat(),Tl=[],$s=gc.length;$s--;)typeof(Tn=gc.shift())=="string"?Tl.push(Rr(Tn)[0]):Array.isArray(Tn)&&typeof Tn[0]=="string"&&(Zo=Rr(Tn[0],Tn[1],Tn[2]),Tl.push([Zo[0],Zo[1],Zo[2]]));cn=Tl}return cn}var lr=!1,Gr=!0;if(typeof S=="string")lr=!0;else if(Array.isArray(S)){var zn=S.concat();He=[];for(var Ni,Jr=zn.length;Jr--;)(typeof(Ni=zn.shift())!="string"||Array.isArray(Ni)&&typeof Ni[0]!="string")&&(Gr=!1);lr=Gr}if(lr===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var yi=Ue/m.internal.scaleFactor,Ro=yi*(ke-1);switch(ge.baseline){case"bottom":ue-=Ro;break;case"top":ue+=yi-Ro;break;case"hanging":ue+=yi-2*Ro;break;case"middle":ue+=yi/2-Ro}if((yt=ge.maxWidth||0)>0&&(typeof S=="string"?S=m.splitTextToSize(S,yt):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(br,Rr){return br.concat(m.splitTextToSize(Rr,yt))},[]))),Me={text:S,x:G,y:ue,options:ge,mutex:{pdfEscape:ui,activeFontKey:St,fonts:dt,activeFontSize:Ue}},or.publish("preProcessText",Me),S=Me.text,st=(ge=Me.options).angle,Or instanceof jt==0&&st&&typeof st=="number"){st*=Math.PI/180,ge.rotationDirection===0&&(st=-st),B===H&&(st=-st);var Os=Math.cos(st),mc=Math.sin(st);Or=new jt(Os,mc,-mc,Os,0,0)}else st&&st instanceof jt&&(Or=st);B!==H||Or||(Or=ci),(Rt=ge.charSpace||qi)!==void 0&&(te+=A(L(Rt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Hr=ge.horizontalScale)!==void 0&&(te+=A(100*Hr)+` Tz
`),ge.lang;var an=-1,Qo=ge.renderingMode!==void 0?ge.renderingMode:ge.stroke,ys=m.internal.getCurrentPageInfo().pageContext;switch(Qo){case 0:case!1:case"fill":an=0;break;case 1:case!0:case"stroke":an=1;break;case 2:case"fillThenStroke":an=2;break;case 3:case"invisible":an=3;break;case 4:case"fillAndAddForClipping":an=4;break;case 5:case"strokeAndAddPathForClipping":an=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":an=6;break;case 7:case"addToPathForClipping":an=7}var ou=ys.usedRenderingMode!==void 0?ys.usedRenderingMode:-1;an!==-1?te+=an+` Tr
`:ou!==-1&&(te+=`0 Tr
`),an!==-1&&(ys.usedRenderingMode=an),pt=ge.align||"left";var go,fa=Ue*ke,bl=m.internal.pageSize.getWidth(),wl=dt[St];Rt=ge.charSpace||qi,yt=ge.maxWidth||0,fr=Object.assign({autoencode:!0,noBOM:!0},ge.flags);var Vs=[],Po=function(br){return m.getStringUnitWidth(br,{font:wl,charSpace:Rt,fontSize:Ue,doKerning:!1})*Ue/Pe};if(Object.prototype.toString.call(S)==="[object Array]"){var yo;He=Ot(S),pt!=="left"&&(go=He.map(Po));var xo,pa=0;if(pt==="right"){G-=go[0],S=[],Jr=He.length;for(var xs=0;xs<Jr;xs++)xs===0?(xo=Bn(G),yo=jo(ue)):(xo=L(pa-go[xs]),yo=-fa),S.push([He[xs],xo,yo]),pa=go[xs]}else if(pt==="center"){G-=go[0]/2,S=[],Jr=He.length;for(var Ms=0;Ms<Jr;Ms++)Ms===0?(xo=Bn(G),yo=jo(ue)):(xo=L((pa-go[Ms])/2),yo=-fa),S.push([He[Ms],xo,yo]),pa=go[Ms]}else if(pt==="left"){S=[],Jr=He.length;for(var Ds=0;Ds<Jr;Ds++)S.push(He[Ds])}else if(pt==="justify"&&wl.encoding==="Identity-H"){S=[],Jr=He.length,yt=yt!==0?yt:bl;for(var vs=0,yn=0;yn<Jr;yn++)if(yo=yn===0?jo(ue):-fa,xo=yn===0?Bn(G):vs,yn<Jr-1){var Ua=L((yt-go[yn])/(He[yn].split(" ").length-1)),bs=He[yn].split(" ");S.push([bs[0]+" ",xo,yo]),vs=0;for(var Xo=1;Xo<bs.length;Xo++){var qa=(Po(bs[Xo-1]+" "+bs[Xo])-Po(bs[Xo]))*Pe+Ua;Xo==bs.length-1?S.push([bs[Xo],qa,0]):S.push([bs[Xo]+" ",qa,0]),vs-=qa}}else S.push([He[yn],xo,yo]);S.push(["",vs,0])}else{if(pt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],Jr=He.length,yt=yt!==0?yt:bl,yn=0;yn<Jr;yn++){yo=yn===0?jo(ue):-fa,xo=yn===0?Bn(G):0;var Ha=He[yn].split(" ").length-1,Sl=Ha>0?(yt-go[yn])/Ha:0;yn<Jr-1?Vs.push(A(L(Sl))):Vs.push(0),S.push([He[yn],xo,yo])}}}(typeof ge.R2L=="boolean"?ge.R2L:Gt)===!0&&(S=Vr(S,function(br,Rr,cn){return[br.split("").reverse().join(""),Rr,cn]})),Me={text:S,x:G,y:ue,options:ge,mutex:{pdfEscape:ui,activeFontKey:St,fonts:dt,activeFontSize:Ue}},or.publish("postProcessText",Me),S=Me.text,W=Me.mutex.isHex||!1;var _l=dt[St].encoding;_l!=="WinAnsiEncoding"&&_l!=="StandardEncoding"||(S=Vr(S,function(br,Rr,cn){return[Ze(br),Rr,cn]})),He=Ot(S),S=[];for(var Ws,ma,ga,Ga=Array.isArray(He[0])?1:0,ya="",Ka=function(br,Rr,cn){var Tn="";return cn instanceof jt?(cn=typeof ge.angle=="number"?ki(cn,new jt(1,0,0,1,br,Rr)):ki(new jt(1,0,0,1,br,Rr),cn),B===H&&(cn=ki(new jt(1,0,0,-1,0,0),cn)),Tn=cn.join(" ")+` Tm
`):Tn=A(br)+" "+A(Rr)+` Td
`,Tn},ln=0;ln<He.length;ln++){switch(ya="",Ga){case 1:ga=(W?"<":"(")+He[ln][0]+(W?">":")"),Ws=parseFloat(He[ln][1]),ma=parseFloat(He[ln][2]);break;case 0:ga=(W?"<":"(")+He[ln]+(W?">":")"),Ws=Bn(G),ma=jo(ue)}Vs!==void 0&&Vs[ln]!==void 0&&(ya=Vs[ln]+` Tw
`),ln===0?S.push(ya+Ka(Ws,ma,Or)+ga):Ga===0?S.push(ya+ga):Ga===1&&S.push(ya+Ka(Ws,ma,Or)+ga)}S=Ga===0?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var Gi=`BT
/`;return Gi+=St+" "+Ue+` Tf
`,Gi+=A(Ue*ke)+` TL
`,Gi+=Ui+`
`,Gi+=te,Gi+=S,he(Gi+="ET"),C[St]=!0,m};var Ls=b.__private__.clip=b.clip=function(S){return he(S==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return Ls("evenodd")},b.__private__.discardPath=b.discardPath=function(){return he("n"),this};var Co=b.__private__.isValidStyle=function(S){var G=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(G=!0),G};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(S){return Co(S)&&(d=S),this};var la=b.__private__.getStyle=b.getStyle=function(S){var G=d;switch(S){case"D":case"S":G="S";break;case"F":G="f";break;case"FD":case"DF":G="B";break;case"f":case"f*":case"B":case"B*":G=S}return G},nr=b.close=function(){return he("h"),this};b.stroke=function(){return he("S"),this},b.fill=function(S){return ri("f",S),this},b.fillEvenOdd=function(S){return ri("f*",S),this},b.fillStroke=function(S){return ri("B",S),this},b.fillStrokeEvenOdd=function(S){return ri("B*",S),this};var ri=function(S,G){qr(G)==="object"?Ma(G,S):he(S)},Bs=function(S){S===null||B===H&&S===void 0||(S=la(S),he(S))};function ca(S,G,ue,ge,Te){var Me=new Fu(G||this.boundingBox,ue||this.xStep,ge||this.yStep,this.gState,Te||this.matrix);Me.stream=this.stream;var He=S+"$$"+this.cloneIndex+++"$$";return Nn(He,Me),Me}var Ma=function(S,G){var ue=Xt[S.key],ge=At[ue];if(ge instanceof zc)he("q"),he(Da(G)),ge.gState&&b.setGState(ge.gState),he(S.matrix.toString()+" cm"),he("/"+ue+" sh"),he("Q");else if(ge instanceof Fu){var Te=new jt(1,0,0,-1,0,gi());S.matrix&&(Te=Te.multiply(S.matrix||ci),ue=ca.call(ge,S.key,S.boundingBox,S.xStep,S.yStep,Te).id),he("q"),he("/Pattern cs"),he("/"+ue+" scn"),ge.gState&&b.setGState(ge.gState),he(G),he("Q")}},Da=function(S){switch(S){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Fs=b.moveTo=function(S,G){return he(A(L(S))+" "+A(M(G))+" m"),this},fi=b.lineTo=function(S,G){return he(A(L(S))+" "+A(M(G))+" l"),this},po=b.curveTo=function(S,G,ue,ge,Te,Me){return he([A(L(S)),A(M(G)),A(L(ue)),A(M(ge)),A(L(Te)),A(M(Me)),"c"].join(" ")),this};b.__private__.line=b.line=function(S,G,ue,ge,Te){if(isNaN(S)||isNaN(G)||isNaN(ue)||isNaN(ge)||!Co(Te))throw new Error("Invalid arguments passed to jsPDF.line");return B===U?this.lines([[ue-S,ge-G]],S,G,[1,1],Te||"S"):this.lines([[ue-S,ge-G]],S,G,[1,1]).stroke()},b.__private__.lines=b.lines=function(S,G,ue,ge,Te,Me){var He,st,pt,Rt,yt,fr,Hr,Or,m,I,W,te;if(typeof S=="number"&&(te=ue,ue=G,G=S,S=te),ge=ge||[1,1],Me=Me||!1,isNaN(G)||isNaN(ue)||!Array.isArray(S)||!Array.isArray(ge)||!Co(Te)||typeof Me!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Fs(G,ue),He=ge[0],st=ge[1],Rt=S.length,I=G,W=ue,pt=0;pt<Rt;pt++)(yt=S[pt]).length===2?(I=yt[0]*He+I,W=yt[1]*st+W,fi(I,W)):(fr=yt[0]*He+I,Hr=yt[1]*st+W,Or=yt[2]*He+I,m=yt[3]*st+W,I=yt[4]*He+I,W=yt[5]*st+W,po(fr,Hr,Or,m,I,W));return Me&&nr(),Bs(Te),this},b.path=function(S){for(var G=0;G<S.length;G++){var ue=S[G],ge=ue.c;switch(ue.op){case"m":Fs(ge[0],ge[1]);break;case"l":fi(ge[0],ge[1]);break;case"c":po.apply(this,ge);break;case"h":nr()}}return this},b.__private__.rect=b.rect=function(S,G,ue,ge,Te){if(isNaN(S)||isNaN(G)||isNaN(ue)||isNaN(ge)||!Co(Te))throw new Error("Invalid arguments passed to jsPDF.rect");return B===U&&(ge=-ge),he([A(L(S)),A(M(G)),A(L(ue)),A(L(ge)),"re"].join(" ")),Bs(Te),this},b.__private__.triangle=b.triangle=function(S,G,ue,ge,Te,Me,He){if(isNaN(S)||isNaN(G)||isNaN(ue)||isNaN(ge)||isNaN(Te)||isNaN(Me)||!Co(He))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ue-S,ge-G],[Te-ue,Me-ge],[S-Te,G-Me]],S,G,[1,1],He,!0),this},b.__private__.roundedRect=b.roundedRect=function(S,G,ue,ge,Te,Me,He){if(isNaN(S)||isNaN(G)||isNaN(ue)||isNaN(ge)||isNaN(Te)||isNaN(Me)||!Co(He))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var st=4/3*(Math.SQRT2-1);return Te=Math.min(Te,.5*ue),Me=Math.min(Me,.5*ge),this.lines([[ue-2*Te,0],[Te*st,0,Te,Me-Me*st,Te,Me],[0,ge-2*Me],[0,Me*st,-Te*st,Me,-Te,Me],[2*Te-ue,0],[-Te*st,0,-Te,-Me*st,-Te,-Me],[0,2*Me-ge],[0,-Me*st,Te*st,-Me,Te,-Me]],S+Te,G,[1,1],He,!0),this},b.__private__.ellipse=b.ellipse=function(S,G,ue,ge,Te){if(isNaN(S)||isNaN(G)||isNaN(ue)||isNaN(ge)||!Co(Te))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Me=4/3*(Math.SQRT2-1)*ue,He=4/3*(Math.SQRT2-1)*ge;return Fs(S+ue,G),po(S+ue,G-He,S+Me,G-ge,S,G-ge),po(S-Me,G-ge,S-ue,G-He,S-ue,G),po(S-ue,G+He,S-Me,G+ge,S,G+ge),po(S+Me,G+ge,S+ue,G+He,S+ue,G),Bs(Te),this},b.__private__.circle=b.circle=function(S,G,ue,ge){if(isNaN(S)||isNaN(G)||isNaN(ue)||!Co(ge))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,G,ue,ue,ge)},b.setFont=function(S,G,ue){return ue&&(G=N(G,ue)),St=za(S,G,{disableWarning:!1}),this};var ko=b.__private__.getFont=b.getFont=function(){return dt[za.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var S,G,ue={};for(S in Wt)if(Wt.hasOwnProperty(S))for(G in ue[S]=[],Wt[S])Wt[S].hasOwnProperty(G)&&ue[S].push(G);return ue},b.addFont=function(S,G,ue,ge,Te){var Me=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Me.indexOf(arguments[3])!==-1?Te=arguments[3]:arguments[3]&&Me.indexOf(arguments[3])==-1&&(ue=N(ue,ge)),Ps.call(this,S,G,ue,Te=Te||"Identity-H")};var pi,gn=r.lineWidth||.200025,It=b.__private__.getLineWidth=b.getLineWidth=function(){return gn},Go=b.__private__.setLineWidth=b.setLineWidth=function(S){return gn=S,he(A(L(S))+" w"),this};b.__private__.setLineDash=Tt.API.setLineDash=Tt.API.setLineDashPattern=function(S,G){if(S=S||[],G=G||0,isNaN(G)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(ue){return A(L(ue))}).join(" "),G=A(L(G)),he("["+S+"] "+G+" d"),this};var Ri=b.__private__.getLineHeight=b.getLineHeight=function(){return Ue*pi};b.__private__.getLineHeight=b.getLineHeight=function(){return Ue*pi};var vl=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(pi=S),this},ps=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return pi};vl(r.lineHeight);var Bn=b.__private__.getHorizontalCoordinate=function(S){return L(S)},jo=b.__private__.getVerticalCoordinate=function(S){return B===H?S:zt[q].mediaBox.topRightY-zt[q].mediaBox.bottomLeftY-L(S)},ua=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(S){return A(Bn(S))},Er=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(S){return A(jo(S))},zs=r.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return $i(zs)},b.__private__.setStrokeColor=b.setDrawColor=function(S,G,ue,ge){return zs=mn({ch1:S,ch2:G,ch3:ue,ch4:ge,pdfColorType:"draw",precision:2}),he(zs),this};var Wa=r.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return $i(Wa)},b.__private__.setFillColor=b.setFillColor=function(S,G,ue,ge){return Wa=mn({ch1:S,ch2:G,ch3:ue,ch4:ge,pdfColorType:"fill",precision:2}),he(Wa),this};var Ui=r.textColor||"0 g",mo=b.__private__.getTextColor=b.getTextColor=function(){return $i(Ui)};b.__private__.setTextColor=b.setTextColor=function(S,G,ue,ge){return Ui=mn({ch1:S,ch2:G,ch3:ue,ch4:ge,pdfColorType:"text",precision:3}),this};var qi=r.charSpace,Ko=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(qi||0)};b.__private__.setCharSpace=b.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return qi=S,this};var Hi=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(S){var G=b.CapJoinStyles[S];if(G===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hi=G,he(G+" J"),this};var da=0;b.__private__.setLineJoin=b.setLineJoin=function(S){var G=b.CapJoinStyles[S];if(G===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return da=G,he(G+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return he(A(L(S))+" M"),this},b.GState=Gf,b.setGState=function(S){(S=typeof S=="string"?Vt[kr[S]]:Jo(null,S)).equals(Br)||(he("/"+S.id+" gs"),Br=S)};var Jo=function(S,G){if(!S||!kr[S]){var ue=!1;for(var ge in Vt)if(Vt.hasOwnProperty(ge)&&Vt[ge].equals(G)){ue=!0;break}if(ue)G=Vt[ge];else{var Te="GS"+(Object.keys(Vt).length+1).toString(10);Vt[Te]=G,G.id=Te}return S&&(kr[S]=G.id),or.publish("addGState",G),G}};b.addGState=function(S,G){return Jo(S,G),this},b.saveGraphicsState=function(){return he("q"),ir.push({key:St,size:Ue,color:Ui}),this},b.restoreGraphicsState=function(){he("Q");var S=ir.pop();return St=S.key,Ue=S.size,Ui=S.color,Br=null,this},b.setCurrentTransformationMatrix=function(S){return he(S.toString()+" cm"),this},b.comment=function(S){return he("#"+S),this};var mi=function(S,G){var ue=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ue},set:function(Me){isNaN(Me)||(ue=parseFloat(Me))}});var ge=G||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ge},set:function(Me){isNaN(Me)||(ge=parseFloat(Me))}});var Te="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Te},set:function(Me){Te=Me.toString()}}),this},ms=function(S,G,ue,ge){mi.call(this,S,G),this.type="rect";var Te=ue||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Te},set:function(He){isNaN(He)||(Te=parseFloat(He))}});var Me=ge||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Me},set:function(He){isNaN(He)||(Me=parseFloat(He))}}),this},Yo=function(){this.page=Mt,this.currentPage=q,this.pages=qe.slice(0),this.pagesContext=zt.slice(0),this.x=ft,this.y=Cr,this.matrix=rr,this.width=Io(q),this.height=Pi(q),this.outputDestination=Qe,this.id="",this.objectNumber=-1};Yo.prototype.restore=function(){Mt=this.page,q=this.currentPage,zt=this.pagesContext,qe=this.pages,ft=this.x,Cr=this.y,rr=this.matrix,$a(q,this.width),Gn(q,this.height),Qe=this.outputDestination};var ni=function(S,G,ue,ge,Te){Pn.push(new Yo),Mt=q=0,qe=[],ft=S,Cr=G,rr=Te,Ho([ue,ge])};for(var Eo in b.beginFormObject=function(S,G,ue,ge,Te){return ni(S,G,ue,ge,Te),this},b.endFormObject=function(S){return(function(G){if(_o[G])Pn.pop().restore();else{var ue=new Yo,ge="Xo"+(Object.keys(Rn).length+1).toString(10);ue.id=ge,_o[G]=ge,Rn[ge]=ue,or.publish("addFormObject",ue),Pn.pop().restore()}})(S),this},b.doFormObject=function(S,G){var ue=Rn[_o[S]];return he("q"),he(G.toString()+" cm"),he("/"+ue.id+" Do"),he("Q"),this},b.getFormObject=function(S){var G=Rn[_o[S]];return{x:G.x,y:G.y,width:G.width,height:G.height,matrix:G.matrix}},b.save=function(S,G){return S=S||"generated.pdf",(G=G||{}).returnPromise=G.returnPromise||!1,G.returnPromise===!1?(Bc(sr(hi()),S),typeof Bc.unload=="function"&&Jt.setTimeout&&setTimeout(Bc.unload,911),this):new Promise(function(ue,ge){try{var Te=Bc(sr(hi()),S);typeof Bc.unload=="function"&&Jt.setTimeout&&setTimeout(Bc.unload,911),ue(Te)}catch(Me){ge(Me.message)}})},Tt.API)Tt.API.hasOwnProperty(Eo)&&(Eo==="events"&&Tt.API.events.length?(function(S,G){var ue,ge,Te;for(Te=G.length-1;Te!==-1;Te--)ue=G[Te][0],ge=G[Te][1],S.subscribe.apply(S,[ue].concat(typeof ge=="function"?[ge]:ge))})(or,Tt.API.events):b[Eo]=Tt.API[Eo]);function Io(S){return zt[S].mediaBox.topRightX-zt[S].mediaBox.bottomLeftX}function $a(S,G){zt[S].mediaBox.topRightX=G+zt[S].mediaBox.bottomLeftX}function Pi(S){return zt[S].mediaBox.topRightY-zt[S].mediaBox.bottomLeftY}function Gn(S,G){zt[S].mediaBox.topRightY=G+zt[S].mediaBox.bottomLeftY}var ha=b.getPageWidth=function(S){return Io(S=S||q)/kt},Fn=b.setPageWidth=function(S,G){$a(S,G*kt)},gi=b.getPageHeight=function(S){return Pi(S=S||q)/kt},gs=b.setPageHeight=function(S,G){Gn(S,G*kt)};return b.internal={pdfEscape:ui,getStyle:la,getFont:ko,getFontSize:tt,getCharSpace:Ko,getTextColor:mo,getLineHeight:Ri,getLineHeightFactor:ps,getLineWidth:It,write:Pt,getHorizontalCoordinate:Bn,getVerticalCoordinate:jo,getCoordinateString:ua,getVerticalCoordinateString:Er,collections:{},newObject:Tr,newAdditionalObject:qn,newObjectDeferred:Fr,newObjectDeferredBegin:sn,getFilters:Ei,putStream:Ii,events:or,scaleFactor:kt,pageSize:{getWidth:function(){return ha(q)},setWidth:function(S){Fn(q,S)},getHeight:function(){return gi(q)},setHeight:function(S){gs(q,S)}},encryptionOptions:g,encryption:zr,getEncryptor:function(S){return g!==null?zr.encryptor(S,0):function(G){return G}},output:Ln,getNumberOfPages:di,pages:qe,out:he,f2:k,f3:v,getPageInfo:Ns,getPageInfoByObjId:Oa,getCurrentPageInfo:Va,getPDFVersion:R,Point:mi,Rectangle:ms,Matrix:jt,hasHotfix:fo},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return ha(q)},set:function(S){Fn(q,S)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return gi(q)},set:function(S){gs(q,S)},enumerable:!0,configurable:!0}),(function(S){for(var G=0,ue=vt.length;G<ue;G++){var ge=Ps.call(this,S[G][0],S[G][1],S[G][2],vt[G][3],!0);w===!1&&(C[ge]=!0);var Te=S[G][0].split("-");xl({id:ge,fontName:Te[0],fontStyle:Te[1]||""})}or.publish("addFonts",{fonts:dt,dictionary:Wt})}).call(b,vt),St="F1",aa(o,t),or.publish("initialized"),b}Iu.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},Iu.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Iu.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},Iu.prototype.processOwnerPassword=function(r,e){return b0(v0(e).substr(0,5),r)},Iu.prototype.encryptor=function(r,e){var t=v0(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return b0(t,n)}},Gf.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||qr(r)!==qr(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},Tt.API={events:[]},Tt.version="3.0.3";var En=Tt.API,og=1,Zc=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ju=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},er=function(r){return r.toFixed(2)},Ul=function(r){return r.toFixed(5)};En.__acroform__={};var Wo=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},a2=function(r){return r*og},Aa=function(r){var e=new lv,t=gt.internal.getHeight(r)||0,n=gt.internal.getWidth(r)||0;return e.BBox=[0,0,Number(er(n)),Number(er(t))],e},uT=En.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},dT=En.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},hT=En.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},Wn=En.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return hT(r,e-1)},$n=En.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return uT(r,e-1)},Un=En.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return dT(r,e-1)},fT=En.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,o=r[0],a=r[1],c=r[2],u=r[3],f={};return f.lowerLeft_X=t(o)||0,f.lowerLeft_Y=n(a+u)||0,f.upperRight_X=t(o+c)||0,f.upperRight_Y=n(a)||0,[Number(er(f.lowerLeft_X)),Number(er(f.lowerLeft_Y)),Number(er(f.upperRight_X)),Number(er(f.upperRight_Y))]},pT=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=w0(r,t),o=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+o+" "+er(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Aa(r);return a.scope=r.scope,a.stream=e.join(`
`),a}},w0=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=r.multiline?o.map(function(k){return k.split(`
`)}):o.map(function(k){return[k]});var a=t,c=gt.internal.getHeight(r)||0;c=c<0?-c:c;var u=gt.internal.getWidth(r)||0;u=u<0?-u:u;var f=function(k,v,L){if(k+1<o.length){var M=v+" "+o[k+1][0];return xf(M,r,L).width<=u-4}return!1};a++;e:for(;a>0;){e="",a--;var d,g,w=xf("3",r,a).height,C=r.multiline?c-a:(c-w)/2,b=C+=2,V=0,R=0,z=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+xf(e,r,a=12).width+", FieldWidth:"+u+`
`;break}for(var j="",U=0,H=0;H<o.length;H++)if(o.hasOwnProperty(H)){var B=!1;if(o[H].length!==1&&z!==o[H].length-1){if((w+2)*(U+2)+2>c)continue e;j+=o[H][z],B=!0,R=H,H--}else{j=(j+=o[H][z]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var re=parseInt(H),ce=f(re,j,a),N=H>=o.length-1;if(ce&&!N){j+=" ",z=0;continue}if(ce||N){if(N)R=re;else if(r.multiline&&(w+2)*(U+2)+2>c)continue e}else{if(!r.multiline||(w+2)*(U+2)+2>c)continue e;R=re}}for(var A="",T=V;T<=R;T++){var F=o[T];if(r.multiline){if(T===R){A+=F[z]+" ",z=(z+1)%F.length;continue}if(T===V){A+=F[F.length-1]+" ";continue}}A+=F[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,g=xf(A,r,a).width,r.textAlign){case"right":d=u-g-2;break;case"center":d=(u-g)/2;break;default:d=2}e+=er(d)+" "+er(b)+` Td
`,e+="("+Zc(A)+`) Tj
`,e+=-er(d)+` 0 Td
`,b=-(a+2),g=0,V=B?R:R+1,U++,j=""}break}return n.text=e,n.fontSize=a,n},xf=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:o}},mT={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},gT=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},yT=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(oa.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(mT)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");og=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new cv,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o];a.objId=void 0,a.hasAnnotation&&gT(a,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,o){var a=!n;for(var c in n||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(c)){var u=n[c],f=[],d=u.Rect;if(u.Rect&&(u.Rect=fT(u.Rect,o)),o.internal.newObjectDeferredBegin(u.objId,!0),u.DA=gt.createDefaultAppearanceStream(u),qr(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(f=u.getKeyValueListForStream()),u.Rect=d,u.hasAppearanceStream&&!u.appearanceStreamContent){var g=pT(u);f.push({key:"AP",value:"<</N "+g+">>"}),o.internal.acroformPlugin.xForms.push(g)}if(u.appearanceStreamContent){var w="";for(var C in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(C)){var b=u.appearanceStreamContent[C];if(w+="/"+C+" ",w+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var c in b)if(b.hasOwnProperty(c)){var V=b[c];typeof V=="function"&&(V=V.call(o,u)),w+="/"+c+" "+V+" ",o.internal.acroformPlugin.xForms.indexOf(V)>=0||o.internal.acroformPlugin.xForms.push(V)}}else typeof(V=b)=="function"&&(V=V.call(o,u)),w+="/"+c+" "+V,o.internal.acroformPlugin.xForms.indexOf(V)>=0||o.internal.acroformPlugin.xForms.push(V);w+=">>"}f.push({key:"AP",value:`<<
`+w+">>"})}o.internal.putStream({additionalKeyValues:f,objectId:u.objId}),o.internal.out("endobj")}a&&(function(R,z){for(var j in R)if(R.hasOwnProperty(j)){var U=j,H=R[j];z.internal.newObjectDeferredBegin(H.objId,!0),qr(H)==="object"&&typeof H.putStream=="function"&&H.putStream(),delete R[U]}})(o.internal.acroformPlugin.xForms,o)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},av=En.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(c){return c};if(Array.isArray(r)){for(var o="[",a=0;a<r.length;a++)switch(a!==0&&(o+=" "),qr(r[a])){case"boolean":case"number":case"object":o+=r[a].toString();break;case"string":r[a].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),o+="("+Zc(n(r[a].toString()))+")"):o+=r[a].toString()}return o+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Gm=function(r,e,t){var n=function(o){return o};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+Zc(n(r))+")"},ka=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ka.prototype.toString=function(){return this.objId+" 0 R"},ka.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},ka.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],o=this[n];o&&(Array.isArray(o)?r.push({key:n,value:av(o,this.objId,this.scope)}):o instanceof ka?(o.scope=this.scope,r.push({key:n,value:o.objId+" 0 R"})):typeof o!="function"&&r.push({key:n,value:o}))}return r};var lv=function(){ka.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};Wo(lv,ka);var cv=function(){ka.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Zc(t(r))+")"}},set:function(t){r=t}})};Wo(cv,ka);var oa=function r(){ka.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');e=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Wn(e,3)},set:function(j){j?this.F=$n(e,3):this.F=Un(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');t=j}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(j){n=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(j){n[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(j){n[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(j){n[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(j){n[3]=j}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Kf)return;a="FieldObject"+r.FieldNum++}var j=function(U){return U};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+Zc(j(a))+")"},set:function(j){a=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(j){a=j}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(j){c=j}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(j){u=j}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(j){f=j}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/og:d},set:function(j){d=j}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(j){g=j}});var w="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!w||this instanceof Kf||this instanceof Vc))return Gm(w,this.objId,this.scope)},set:function(j){j=j.toString(),w=j}});var C=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(C)return this instanceof Ai==0?Gm(C,this.objId,this.scope):C},set:function(j){j=j.toString(),C=this instanceof Ai==0?j.substr(0,1)==="("?ju(j.substr(1,j.length-2)):ju(j):j}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ai==1?ju(C.substr(1,C.length-1)):C},set:function(j){j=j.toString(),C=this instanceof Ai==1?"/"+j:j}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Ai==0?Gm(b,this.objId,this.scope):b},set:function(j){j=j.toString(),b=this instanceof Ai==0?j.substr(0,1)==="("?ju(j.substr(1,j.length-2)):ju(j):j}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ai==1?ju(b.substr(1,b.length-1)):b},set:function(j){j=j.toString(),b=this instanceof Ai==1?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var V,R=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return R},set:function(j){j=!!j,R=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(V)return V},set:function(j){V=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,1)},set:function(j){j?this.Ff=$n(this.Ff,1):this.Ff=Un(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,2)},set:function(j){j?this.Ff=$n(this.Ff,2):this.Ff=Un(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,3)},set:function(j){j?this.Ff=$n(this.Ff,3):this.Ff=Un(this.Ff,3)}});var z=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(z!==null)return z},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');z=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(z){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:z=2;break;case"center":case 1:z=1;break;default:z=0}}})};Wo(oa,ka);var Vu=function(){oa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return av(e,this.objId,this.scope)},set:function(t){var n,o;o=[],typeof(n=t)=="string"&&(o=(function(a,c,u){u||(u=1);for(var f,d=[];f=c.exec(a);)d.push(f[u]);return d})(n,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,18)},set:function(t){t?this.Ff=$n(this.Ff,18):this.Ff=Un(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=$n(this.Ff,19):this.Ff=Un(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,20)},set:function(t){t?(this.Ff=$n(this.Ff,20),e.sort()):this.Ff=Un(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,22)},set:function(t){t?this.Ff=$n(this.Ff,22):this.Ff=Un(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,23)},set:function(t){t?this.Ff=$n(this.Ff,23):this.Ff=Un(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,27)},set:function(t){t?this.Ff=$n(this.Ff,27):this.Ff=Un(this.Ff,27)}}),this.hasAppearanceStream=!1};Wo(Vu,oa);var Mu=function(){Vu.call(this),this.fontName="helvetica",this.combo=!1};Wo(Mu,Vu);var Du=function(){Mu.call(this),this.combo=!0};Wo(Du,Mu);var If=function(){Du.call(this),this.edit=!0};Wo(If,Du);var Ai=function(){oa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,15)},set:function(t){t?this.Ff=$n(this.Ff,15):this.Ff=Un(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,16)},set:function(t){t?this.Ff=$n(this.Ff,16):this.Ff=Un(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,17)},set:function(t){t?this.Ff=$n(this.Ff,17):this.Ff=Un(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,26)},set:function(t){t?this.Ff=$n(this.Ff,26):this.Ff=Un(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,o=[];for(n in o.push("<<"),e)o.push("/"+n+" ("+Zc(t(e[n]))+")");return o.push(">>"),o.join(`
`)}},set:function(t){qr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};Wo(Ai,oa);var Rf=function(){Ai.call(this),this.pushButton=!0};Wo(Rf,Ai);var Wu=function(){Ai.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};Wo(Wu,Ai);var Kf=function(){var r,e;oa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(o){r=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(u){return u};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var a,c=[];for(a in c.push("<<"),n)c.push("/"+a+" ("+Zc(o(n[a]))+")");return c.push(">>"),c.join(`
`)},set:function(o){qr(o)==="object"&&(n=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(o){typeof o=="string"&&(n.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(o){t="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=gt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Wo(Kf,oa),Wu.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},Wu.prototype.createOption=function(r){var e=new Kf;return e.Parent=this,e.optionName=r,this.Kids.push(e),xT.call(this.scope,e),e};var Pf=function(){Ai.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=gt.CheckBox.createAppearanceStream()};Wo(Pf,Ai);var Vc=function(){oa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,13)},set:function(e){e?this.Ff=$n(this.Ff,13):this.Ff=Un(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,21)},set:function(e){e?this.Ff=$n(this.Ff,21):this.Ff=Un(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,23)},set:function(e){e?this.Ff=$n(this.Ff,23):this.Ff=Un(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,24)},set:function(e){e?this.Ff=$n(this.Ff,24):this.Ff=Un(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,25)},set:function(e){e?this.Ff=$n(this.Ff,25):this.Ff=Un(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,26)},set:function(e){e?this.Ff=$n(this.Ff,26):this.Ff=Un(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Wo(Vc,oa);var Nf=function(){Vc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,14)},set:function(r){r?this.Ff=$n(this.Ff,14):this.Ff=Un(this.Ff,14)}}),this.password=!0};Wo(Nf,Vc);var gt={CheckBox:{createAppearanceStream:function(){return{N:{On:gt.CheckBox.YesNormal},D:{On:gt.CheckBox.YesPushDown,Off:gt.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=Aa(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,o=r.scope.__private__.encodeColorString(r.color),a=w0(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+er(gt.internal.getWidth(r))+" "+er(gt.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+er(a.fontSize)+" Tf "+o),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=Aa(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),o=[],a=gt.internal.getHeight(r),c=gt.internal.getWidth(r),u=w0(r,r.caption);return o.push("1 g"),o.push("0 0 "+er(c)+" "+er(a)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+er(c-1)+" "+er(a-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+t+" "+er(u.fontSize)+" Tf "+n),o.push(u.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(r){var e=Aa(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+er(gt.internal.getWidth(r))+" "+er(gt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:gt.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=gt.RadioButton.Circle.YesNormal,e.D[r]=gt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=Aa(r);e.scope=r.scope;var t=[],n=gt.internal.getWidth(r)<=gt.internal.getHeight(r)?gt.internal.getWidth(r)/4:gt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var o=gt.internal.Bezier_C,a=Number((n*o).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ul(gt.internal.getWidth(r)/2)+" "+Ul(gt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),t.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),t.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),t.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Aa(r);e.scope=r.scope;var t=[],n=gt.internal.getWidth(r)<=gt.internal.getHeight(r)?gt.internal.getWidth(r)/4:gt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var o=Number((2*n).toFixed(5)),a=Number((o*gt.internal.Bezier_C).toFixed(5)),c=Number((n*gt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ul(gt.internal.getWidth(r)/2)+" "+Ul(gt.internal.getHeight(r)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),t.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),t.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),t.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ul(gt.internal.getWidth(r)/2)+" "+Ul(gt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+c+" "+c+" "+n+" 0 "+n+" c"),t.push("-"+c+" "+n+" -"+n+" "+c+" -"+n+" 0 c"),t.push("-"+n+" -"+c+" -"+c+" -"+n+" 0 -"+n+" c"),t.push(c+" -"+n+" "+n+" -"+c+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=Aa(r);e.scope=r.scope;var t=[],n=gt.internal.getWidth(r)<=gt.internal.getHeight(r)?gt.internal.getWidth(r)/4:gt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var o=Number((2*n).toFixed(5)),a=Number((o*gt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ul(gt.internal.getWidth(r)/2)+" "+Ul(gt.internal.getHeight(r)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),t.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),t.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),t.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:gt.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=gt.RadioButton.Cross.YesNormal,e.D[r]=gt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=Aa(r);e.scope=r.scope;var t=[],n=gt.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+er(gt.internal.getWidth(r)-2)+" "+er(gt.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(er(n.x1.x)+" "+er(n.x1.y)+" m"),t.push(er(n.x2.x)+" "+er(n.x2.y)+" l"),t.push(er(n.x4.x)+" "+er(n.x4.y)+" m"),t.push(er(n.x3.x)+" "+er(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Aa(r);e.scope=r.scope;var t=gt.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+er(gt.internal.getWidth(r))+" "+er(gt.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+er(gt.internal.getWidth(r)-2)+" "+er(gt.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(er(t.x1.x)+" "+er(t.x1.y)+" m"),n.push(er(t.x2.x)+" "+er(t.x2.y)+" l"),n.push(er(t.x4.x)+" "+er(t.x4.y)+" m"),n.push(er(t.x3.x)+" "+er(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=Aa(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+er(gt.internal.getWidth(r))+" "+er(gt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};gt.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=gt.internal.getWidth(r),t=gt.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},gt.internal.getWidth=function(r){var e=0;return qr(r)==="object"&&(e=a2(r.Rect[2])),e},gt.internal.getHeight=function(r){var e=0;return qr(r)==="object"&&(e=a2(r.Rect[3])),e};var xT=En.addField=function(r){if(yT(this,r),!(r instanceof oa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};En.AcroFormChoiceField=Vu,En.AcroFormListBox=Mu,En.AcroFormComboBox=Du,En.AcroFormEditBox=If,En.AcroFormButton=Ai,En.AcroFormPushButton=Rf,En.AcroFormRadioButton=Wu,En.AcroFormCheckBox=Pf,En.AcroFormTextField=Vc,En.AcroFormPasswordField=Nf,En.AcroFormAppearance=gt,En.AcroForm={ChoiceField:Vu,ListBox:Mu,ComboBox:Du,EditBox:If,Button:Ai,PushButton:Rf,RadioButton:Wu,CheckBox:Pf,TextField:Vc,PasswordField:Nf,Appearance:gt},Tt.AcroForm={ChoiceField:Vu,ListBox:Mu,ComboBox:Du,EditBox:If,Button:Ai,PushButton:Rf,RadioButton:Wu,CheckBox:Pf,TextField:Vc,PasswordField:Nf,Appearance:gt};Tt.AcroForm;function uv(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=r.__addimage__.getImageFileTypeByImageData=function(k,v){var L,M,$,oe,se,ie=t;if((v=v||t)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(ce(k))for(se in n)for($=n[se],L=0;L<$.length;L+=1){for(oe=!0,M=0;M<$[L].length;M+=1)if($[L][M]!==void 0&&$[L][M]!==k[M]){oe=!1;break}if(oe===!0){ie=se;break}}else for(se in n)for($=n[se],L=0;L<$.length;L+=1){for(oe=!0,M=0;M<$[L].length;M+=1)if($[L][M]!==void 0&&$[L][M]!==k.charCodeAt(M)){oe=!1;break}if(oe===!0){ie=se;break}}return ie===t&&v!==t&&(ie=v),ie},a=function k(v){for(var L=this.internal.write,M=this.internal.putStream,$=(0,this.internal.getFilters)();$.indexOf("FlateEncode")!==-1;)$.splice($.indexOf("FlateEncode"),1);v.objectId=this.internal.newObject();var oe=[];if(oe.push({key:"Type",value:"/XObject"}),oe.push({key:"Subtype",value:"/Image"}),oe.push({key:"Width",value:v.width}),oe.push({key:"Height",value:v.height}),v.colorSpace===j.INDEXED?oe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(v.palette.length/3-1)+" "+("sMask"in v&&v.sMask!==void 0?v.objectId+2:v.objectId+1)+" 0 R]"}):(oe.push({key:"ColorSpace",value:"/"+v.colorSpace}),v.colorSpace===j.DEVICE_CMYK&&oe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),oe.push({key:"BitsPerComponent",value:v.bitsPerComponent}),"decodeParameters"in v&&v.decodeParameters!==void 0&&oe.push({key:"DecodeParms",value:"<<"+v.decodeParameters+">>"}),"transparency"in v&&Array.isArray(v.transparency)&&v.transparency.length>0){for(var se="",ie=0,ye=v.transparency.length;ie<ye;ie++)se+=v.transparency[ie]+" "+v.transparency[ie]+" ";oe.push({key:"Mask",value:"["+se+"]"})}v.sMask!==void 0&&oe.push({key:"SMask",value:v.objectId+1+" 0 R"});var xe=v.filter!==void 0?["/"+v.filter]:void 0;if(M({data:v.data,additionalKeyValues:oe,alreadyAppliedFilters:xe,objectId:v.objectId}),L("endobj"),"sMask"in v&&v.sMask!==void 0){var ee,D=(ee=v.sMaskBitsPerComponent)!==null&&ee!==void 0?ee:v.bitsPerComponent,q={width:v.width,height:v.height,colorSpace:"DeviceGray",bitsPerComponent:D,data:v.sMask};"filter"in v&&(q.decodeParameters="/Predictor ".concat(v.predictor," /Colors 1 /BitsPerComponent ").concat(D," /Columns ").concat(v.width),q.filter=v.filter),k.call(this,q)}if(v.colorSpace===j.INDEXED){var X=this.internal.newObject();M({data:A(new Uint8Array(v.palette)),objectId:X}),L("endobj")}},c=function(){var k=this.internal.collections[e+"images"];for(var v in k)a.call(this,k[v])},u=function(){var k,v=this.internal.collections[e+"images"],L=this.internal.write;for(var M in v)L("/I"+(k=v[M]).index,k.objectId,"0","R")},f=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",u))},d=function(){var k=this.internal.collections[e+"images"];return f.call(this),k},g=function(){return Object.keys(this.internal.collections[e+"images"]).length},w=function(k){return typeof r["process"+k.toUpperCase()]=="function"},C=function(k){return qr(k)==="object"&&k.nodeType===1},b=function(k,v){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var L=""+k.getAttribute("src");if(L.indexOf("data:image/")===0)return Ef(unescape(L).split("base64,").pop());var M=r.loadFile(L,!0);if(M!==void 0)return M}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var $;switch(v){case"PNG":$="image/png";break;case"WEBP":$="image/webp";break;default:$="image/jpeg"}return Ef(k.toDataURL($,1).split("base64,").pop())}},V=function(k){var v=this.internal.collections[e+"images"];if(v){for(var L in v)if(k===v[L].alias)return v[L]}},R=function(k,v,L){return k||v||(k=-96,v=-96),k<0&&(k=-1*L.width*72/k/this.internal.scaleFactor),v<0&&(v=-1*L.height*72/v/this.internal.scaleFactor),k===0&&(k=v*L.width/L.height),v===0&&(v=k*L.height/L.width),[k,v]},z=function(k,v,L,M,$,oe){var se=R.call(this,L,M,$),ie=this.internal.getCoordinateString,ye=this.internal.getVerticalCoordinateString,xe=d.call(this);if(L=se[0],M=se[1],xe[$.index]=$,oe){oe*=Math.PI/180;var ee=Math.cos(oe),D=Math.sin(oe),q=function(de){return de.toFixed(4)},X=[q(ee),q(D),q(-1*D),q(ee),0,0,"cm"]}this.internal.write("q"),oe?(this.internal.write([1,"0","0",1,ie(k),ye(v+M),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([ie(L),"0","0",ie(M),"0","0","cm"].join(" "))):this.internal.write([ie(L),"0","0",ie(M),ie(k),ye(v+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+$.index+" Do"),this.internal.write("Q")},j=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var U=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},H=r.__addimage__.sHashCode=function(k){var v,L,M=0;if(typeof k=="string")for(L=k.length,v=0;v<L;v++)M=(M<<5)-M+k.charCodeAt(v),M|=0;else if(ce(k))for(L=k.byteLength/2,v=0;v<L;v++)M=(M<<5)-M+k[v],M|=0;return M},B=r.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var v=!0;return k.length===0&&(v=!1),k.length%4!=0&&(v=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(v=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(v=!1),v},re=r.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var v=k.indexOf(",");return v<0?null:k.substring(0,v).trim().endsWith("base64")?k.substring(v+1):null};r.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var ce=r.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},N=r.__addimage__.binaryStringToUint8Array=function(k){for(var v=k.length,L=new Uint8Array(v),M=0;M<v;M++)L[M]=k.charCodeAt(M);return L},A=r.__addimage__.arrayBufferToBinaryString=function(k){for(var v="",L=ce(k)?k:new Uint8Array(k),M=0;M<L.length;M+=8192)v+=String.fromCharCode.apply(null,L.subarray(M,M+8192));return v};r.addImage=function(){var k,v,L,M,$,oe,se,ie,ye;if(typeof arguments[1]=="number"?(v=t,L=arguments[1],M=arguments[2],$=arguments[3],oe=arguments[4],se=arguments[5],ie=arguments[6],ye=arguments[7]):(v=arguments[1],L=arguments[2],M=arguments[3],$=arguments[4],oe=arguments[5],se=arguments[6],ie=arguments[7],ye=arguments[8]),qr(k=arguments[0])==="object"&&!C(k)&&"imageData"in k){var xe=k;k=xe.imageData,v=xe.format||v||t,L=xe.x||L||0,M=xe.y||M||0,$=xe.w||xe.width||$,oe=xe.h||xe.height||oe,se=xe.alias||se,ie=xe.compression||ie,ye=xe.rotation||xe.angle||ye}var ee=this.internal.getFilters();if(ie===void 0&&ee.indexOf("FlateEncode")!==-1&&(ie="SLOW"),isNaN(L)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var D=T.call(this,k,v,se,ie);return z.call(this,L,M,$,oe,D,ye),this};var T=function(k,v,L,M){var $,oe,se;if(typeof k=="string"&&o(k)===t){k=unescape(k);var ie=F(k,!1);(ie!==""||(ie=r.loadFile(k,!0))!==void 0)&&(k=ie)}if(C(k)&&(k=b(k,v)),v=o(k,v),!w(v))throw new Error("addImage does not support files of type '"+v+"', please ensure that a plugin for '"+v+"' support is added.");if(((se=L)==null||se.length===0)&&(L=(function(ye){return typeof ye=="string"||ce(ye)?H(ye):ce(ye.data)?H(ye.data):null})(k)),($=V.call(this,L))||(k instanceof Uint8Array||v==="RGBA"||(oe=k,k=N(k)),$=this["process"+v.toUpperCase()](k,g.call(this),L,(function(ye){return ye&&typeof ye=="string"&&(ye=ye.toUpperCase()),ye in r.image_compression?ye:U.NONE})(M),oe)),!$)throw new Error("An unknown error occurred whilst processing the image.");return $},F=r.__addimage__.convertBase64ToBinaryString=function(k,v){v=typeof v!="boolean"||v;var L,M="";if(typeof k=="string"){var $;L=($=re(k))!==null&&$!==void 0?$:k;try{M=Ef(L)}catch(oe){if(v)throw B(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+oe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};r.getImageProperties=function(k){var v,L,M="";if(C(k)&&(k=b(k)),typeof k=="string"&&o(k)===t&&((M=F(k,!1))===""&&(M=r.loadFile(k)||""),k=M),L=o(k),!w(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(k instanceof Uint8Array||(k=N(k)),!(v=this["process"+L.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return v.fileType=L,v}})(Tt.API),(function(r){var e=function(t){if(t!==void 0&&t!="")return!0};Tt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,o,a,c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,g=!1,w=0;w<d.length&&!g;w++)switch((n=d[w]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var C=0;C<d.length;C++){n=d[C];var b=this.internal.pdfEscape,V=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var R=this.internal.newAdditionalObject(),z=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(R.objId),U=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(o="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y)+"] ")+"/Contents ("+b(j(n.contents))+")",a+=" /Popup "+z.objId+" 0 R",a+=" /P "+f.objId+" 0 R",a+=" /T ("+b(j(U))+") >>",R.content=a;var H=R.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+c(n.bounds.x+30)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w+30)+" "+u(n.bounds.y)+"] ")+" /Parent "+H,n.open&&(a+=" /Open true"),a+=" >>",z.content=a,this.internal.write(R.objId,"0 R",z.objId,"0 R");break;case"freetext":o="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y+n.bounds.h)+"] ";var B=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+b(V(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+B+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var re=this.annotations._nameMap[n.options.name];n.options.pageNumber=re.page,n.options.top=re.y}else n.options.top||(n.options.top=0);if(o="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+b(V(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var ce=u(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+ce+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,o,a,c){var u=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:f(t),y:d(n),w:f(t+o),h:d(n+a)},options:c,type:"link"})},r.textWithLink=function(t,n,o,a){var c,u,f=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){u=a.maxWidth;var g=this.splitTextToSize(t,u).length;c=Math.ceil(d*g)}else u=f,c=d;return this.text(t,n,o,a),o+=.2*d,a.align==="center"&&(n-=f/2),a.align==="right"&&(n-=f),this.link(n,o-d,u,c,a),f},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}})(Tt.API),(function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];r.__arabicParser__={};var a=r.__arabicParser__.isInArabicSubstitutionA=function(R){return e[R.charCodeAt(0)]!==void 0},c=r.__arabicParser__.isArabicLetter=function(R){return typeof R=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(R)},u=r.__arabicParser__.isArabicEndLetter=function(R){return c(R)&&a(R)&&e[R.charCodeAt(0)].length<=2},f=r.__arabicParser__.isArabicAlfLetter=function(R){return c(R)&&o.indexOf(R.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(R){return c(R)&&a(R)&&e[R.charCodeAt(0)].length>=1};var d=r.__arabicParser__.arabicLetterHasFinalForm=function(R){return c(R)&&a(R)&&e[R.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(R){return c(R)&&a(R)&&e[R.charCodeAt(0)].length>=3};var g=r.__arabicParser__.arabicLetterHasMedialForm=function(R){return c(R)&&a(R)&&e[R.charCodeAt(0)].length==4},w=r.__arabicParser__.resolveLigatures=function(R){var z=0,j=t,U="",H=0;for(z=0;z<R.length;z+=1)j[R.charCodeAt(z)]!==void 0?(H++,typeof(j=j[R.charCodeAt(z)])=="number"&&(U+=String.fromCharCode(j),j=t,H=0),z===R.length-1&&(j=t,U+=R.charAt(z-(H-1)),z-=H-1,H=0)):(j=t,U+=R.charAt(z-H),z-=H,H=0);return U};r.__arabicParser__.isArabicDiacritic=function(R){return R!==void 0&&n[R.charCodeAt(0)]!==void 0};var C=r.__arabicParser__.getCorrectForm=function(R,z,j){return c(R)?a(R)===!1?-1:!d(R)||!c(z)&&!c(j)||!c(j)&&u(z)||u(R)&&!c(z)||u(R)&&f(z)||u(R)&&u(z)?0:g(R)&&c(z)&&!u(z)&&c(j)&&d(j)?3:u(R)||!c(j)?1:2:-1},b=function(R){var z=0,j=0,U=0,H="",B="",re="",ce=(R=R||"").split("\\s+"),N=[];for(z=0;z<ce.length;z+=1){for(N.push(""),j=0;j<ce[z].length;j+=1)H=ce[z][j],B=ce[z][j-1],re=ce[z][j+1],c(H)?(U=C(H,B,re),N[z]+=U!==-1?String.fromCharCode(e[H.charCodeAt(0)][U]):H):N[z]+=H;N[z]=w(N[z])}return N.join(" ")},V=r.__arabicParser__.processArabic=r.processArabic=function(){var R,z=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray(z)){var U=0;for(j=[],U=0;U<z.length;U+=1)Array.isArray(z[U])?j.push([b(z[U][0]),z[U][1],z[U][2]]):j.push([b(z[U])]);R=j}else R=b(z);return typeof arguments[0]=="string"?R:(arguments[0].text=R,arguments[0])};r.events.push(["preProcessText",V])})(Tt.API),Tt.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(u){n=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(u){o=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(u){a=u}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(u){c=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var o;if((t=t||"2d")!=="2d")return null;for(o in n)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=n[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Tt.API),(function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(R){f=R}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(R){d=R}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(R){g=R}});var w=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return w},set:function(R){w=R}});var C=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return C},set:function(R){C=R}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(R){b=R}});var V=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return V},set:function(R){V=R}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(f){return n.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},r.getTextDimensions=function(f,d){n.call(this);var g=(d=d||{}).fontSize||this.getFontSize(),w=d.font||this.getFont(),C=d.scaleFactor||this.internal.scaleFactor,b=0,V=0,R=0,z=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var j=d.maxWidth;j>0?typeof f=="string"?f=this.splitTextToSize(f,j):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(H,B){return H.concat(z.splitTextToSize(B,j))},[])):f=Array.isArray(f)?f:[f];for(var U=0;U<f.length;U++)b<(R=this.getStringUnitWidth(f[U],{font:w})*g)&&(b=R);return b!==0&&(V=f.length),{w:b/=C,h:Math.max((V*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/C,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=r.cell=function(){var f;f=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,w=this.internal.__cell__.margins||e,C=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===f.lineNumber?(f.x=(d.x||0)+(d.width||0),f.y=d.y||0):d.y+d.height+f.height+w.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=w.top,b&&C&&(this.printHeaderRow(f.lineNumber,!0),f.y+=C[0].height)):f.y=d.y+d.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-g,f.y+g,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+g,{align:"center",baseline:"top",maxWidth:f.width-g-g}):this.text(f.text,f.x+g,f.y+g,{align:"left",baseline:"top",maxWidth:f.width-g-g})),this.internal.__cell__.lastCell=f,this};r.table=function(f,d,g,w,C){if(n.call(this),!g)throw new Error("No data for PDF table.");var b,V,R,z,j=[],U=[],H=[],B={},re={},ce=[],N=[],A=(C=C||{}).autoSize||!1,T=C.printHeaders!==!1,F=C.css&&C.css["font-size"]!==void 0?16*C.css["font-size"]:C.fontSize||12,k=C.margins||Object.assign({width:this.getPageWidth()},e),v=typeof C.padding=="number"?C.padding:3,L=C.headerBackgroundColor||"#c8c8c8",M=C.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=v,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=M,this.setFontSize(F),w==null)U=j=Object.keys(g[0]),H=j.map(function(){return"left"});else if(Array.isArray(w)&&qr(w[0])==="object")for(j=w.map(function(xe){return xe.name}),U=w.map(function(xe){return xe.prompt||xe.name||""}),H=w.map(function(xe){return xe.align||"left"}),b=0;b<w.length;b+=1)re[w[b].name]=.7499990551181103*w[b].width;else Array.isArray(w)&&typeof w[0]=="string"&&(U=j=w,H=j.map(function(){return"left"}));if(A||Array.isArray(w)&&typeof w[0]=="string")for(b=0;b<j.length;b+=1){for(B[z=j[b]]=g.map(function(xe){return xe[z]}),this.setFont(void 0,"bold"),ce.push(this.getTextDimensions(U[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),V=B[z],this.setFont(void 0,"normal"),R=0;R<V.length;R+=1)ce.push(this.getTextDimensions(V[R],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);re[z]=Math.max.apply(null,ce)+v+v,ce=[]}if(T){var $={};for(b=0;b<j.length;b+=1)$[j[b]]={},$[j[b]].text=U[b],$[j[b]].align=H[b];var oe=u.call(this,$,re);N=j.map(function(xe){return new a(f,d,re[xe],oe,$[xe].text,void 0,$[xe].align)}),this.setTableHeaderRow(N),this.printHeaderRow(1,!1)}var se=w.reduce(function(xe,ee){return xe[ee.name]=ee.align,xe},{});for(b=0;b<g.length;b+=1){"rowStart"in C&&C.rowStart instanceof Function&&C.rowStart({row:b,data:g[b]},this);var ie=u.call(this,g[b],re);for(R=0;R<j.length;R+=1){var ye=g[b][j[R]];"cellStart"in C&&C.cellStart instanceof Function&&C.cellStart({row:b,col:R,data:ye},this),c.call(this,new a(f,d,re[j[R]],ie,ye,b+2,se[j[R]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=d,this};var u=function(f,d){var g=this.internal.__cell__.padding,w=this.internal.__cell__.table_font_size,C=this.internal.scaleFactor;return Object.keys(f).map(function(b){var V=f[b];return this.splitTextToSize(V.hasOwnProperty("text")?V.text:V,d[b]-g-g)},this).map(function(b){return this.getLineHeightFactor()*b.length*w/C+g+g},this).reduce(function(b,V){return Math.max(b,V)},0)};r.setTableHeaderRow=function(f){n.call(this),this.internal.__cell__.tableHeaderRow=f},r.printHeaderRow=function(f,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var w=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(w[0],w[1],w[2],w[3],void 0,-1)}this.setFont(void 0,"bold");for(var C=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){g=this.internal.__cell__.tableHeaderRow[b].clone(),d&&(g.y=this.internal.__cell__.margins.top||0,C.push(g)),g.lineNumber=f;var V=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,g),this.setTextColor(V)}C.length>0&&this.setTableHeaderRow(C),this.setFont(void 0,"normal"),t=!1}})(Tt.API);var dv={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},hv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],S0=uv(hv),fv=[100,200,300,400,500,600,700,800,900],vT=uv(fv);function Km(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=(function(a){return dv[a=a||"normal"]?a:"normal"})(r.style),n=(function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400})(r.weight),o=(function(a){return typeof S0[a=a||"normal"]=="number"?a:"normal"})(r.stretch);return{family:e,style:t,weight:n,stretch:o,src:r.src||[],ref:r.ref||{name:e,style:[o,t,n].join(" ")}}}function l2(r,e,t,n){var o;for(o=t;o>=0&&o<e.length;o+=n)if(r[e[o]])return r[e[o]];for(o=t;o>=0&&o<e.length;o-=n)if(r[e[o]])return r[e[o]]}var bT={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},c2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function u2(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function d2(r){return r.trimLeft()}function wT(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function ST(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var vf,h2,f2,Eu,bf,p2,m2,g2,Jm=["times"];function y2(r,e,t,n,o){var a=4,c=v2;switch(o){case Tt.API.image_compression.FAST:a=1,c=x2;break;case Tt.API.image_compression.MEDIUM:a=6,c=b2;break;case Tt.API.image_compression.SLOW:a=9,c=w2}r=(function(f,d,g,w){for(var C,b=f.length/d,V=new Uint8Array(f.length+b),R=[_T,x2,v2,b2,w2],z=0;z<b;z+=1){var j=z*d,U=f.subarray(j,j+d);if(w)V.set(w(U,g,C),j+z);else{for(var H=R.length,B=[],re=0;re<H;re+=1)B[re]=R[re](U,g,C);var ce=AT(B.concat());V.set(B[ce],j+z)}C=U}return V})(r,e,Math.ceil(t*n/8),c);var u=m0(r,{level:a});return Tt.API.__addimage__.arrayBufferToBinaryString(u)}function _T(r){var e=Array.apply([],r);return e.unshift(0),e}function x2(r,e){var t=r.length,n=[];n[0]=1;for(var o=0;o<t;o+=1){var a=r[o-e]||0;n[o+1]=r[o]-a+256&255}return n}function v2(r,e,t){var n=r.length,o=[];o[0]=2;for(var a=0;a<n;a+=1){var c=t&&t[a]||0;o[a+1]=r[a]-c+256&255}return o}function b2(r,e,t){var n=r.length,o=[];o[0]=3;for(var a=0;a<n;a+=1){var c=r[a-e]||0,u=t&&t[a]||0;o[a+1]=r[a]+256-(c+u>>>1)&255}return o}function w2(r,e,t){var n=r.length,o=[];o[0]=4;for(var a=0;a<n;a+=1){var c=TT(r[a-e]||0,t&&t[a]||0,t&&t[a-e]||0);o[a+1]=r[a]-c+256&255}return o}function TT(r,e,t){if(r===e&&e===t)return r;var n=Math.abs(e-t),o=Math.abs(r-t),a=Math.abs(r+e-t-t);return n<=o&&n<=a?r:o<=a?e:t}function AT(r){var e=r.map(function(t){return t.reduce(function(n,o){return n+Math.abs(o)},0)});return e.indexOf(Math.min.apply(null,e))}function Ym(r,e,t){var n=e*t,o=Math.floor(n/8),a=16-(n-8*o+t),c=(1<<t)-1;return pv(r,o)>>a&c}function S2(r,e,t,n){var o=t*n,a=Math.floor(o/8),c=16-(o-8*a+n),u=(1<<n)-1,f=(e&u)<<c;(function(d,g,w){if(g+1<d.byteLength)d.setUint16(g,w,!1);else{var C=w>>8&255;d.setUint8(g,C)}})(r,a,pv(r,a)&~(u<<c)&65535|f)}function pv(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function CT(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,o=r[e++],a=o>>7,c=1<<1+(7&o);r[e++],r[e++];var u=null,f=null;a&&(u=e,f=c,e+=3*c);var d=!0,g=[],w=0,C=null,b=0,V=null;for(this.width=t,this.height=n;d&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,V=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((k=r[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var R=r[e++];w=r[e++]|r[e++]<<8,C=r[e++],1&R||(C=null),b=R>>2&7,e++;break;case 254:for(;;){if(!((k=r[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var z=r[e++]|r[e++]<<8,j=r[e++]|r[e++]<<8,U=r[e++]|r[e++]<<8,H=r[e++]|r[e++]<<8,B=r[e++],re=B>>6&1,ce=1<<1+(7&B),N=u,A=f,T=!1;B>>7&&(T=!0,N=e,A=ce,e+=3*ce);var F=e;for(e++;;){var k;if(!((k=r[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}g.push({x:z,y:j,width:U,height:H,has_local_palette:T,palette_offset:N,palette_size:A,data_offset:F,data_length:e-F,transparent_index:C,interlaced:!!re,delay:w,disposal:b});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return V},this.frameInfo=function(v){if(v<0||v>=g.length)throw new Error("Frame index out of range.");return g[v]},this.decodeAndBlitFrameBGRA=function(v,L){var M=this.frameInfo(v),$=M.width*M.height,oe=new Uint8Array($);_2(r,M.data_offset,oe,$);var se=M.palette_offset,ie=M.transparent_index;ie===null&&(ie=256);var ye=M.width,xe=t-ye,ee=ye,D=4*(M.y*t+M.x),q=4*((M.y+M.height)*t+M.x),X=D,de=4*xe;M.interlaced===!0&&(de+=4*t*7);for(var me=8,we=0,Ae=oe.length;we<Ae;++we){var Ce=oe[we];if(ee===0&&(ee=ye,(X+=de)>=q&&(de=4*xe+4*t*(me-1),X=D+(ye+xe)*(me<<1),me>>=1)),Ce===ie)X+=4;else{var Be=r[se+3*Ce],qe=r[se+3*Ce+1],et=r[se+3*Ce+2];L[X++]=et,L[X++]=qe,L[X++]=Be,L[X++]=255}--ee}},this.decodeAndBlitFrameRGBA=function(v,L){var M=this.frameInfo(v),$=M.width*M.height,oe=new Uint8Array($);_2(r,M.data_offset,oe,$);var se=M.palette_offset,ie=M.transparent_index;ie===null&&(ie=256);var ye=M.width,xe=t-ye,ee=ye,D=4*(M.y*t+M.x),q=4*((M.y+M.height)*t+M.x),X=D,de=4*xe;M.interlaced===!0&&(de+=4*t*7);for(var me=8,we=0,Ae=oe.length;we<Ae;++we){var Ce=oe[we];if(ee===0&&(ee=ye,(X+=de)>=q&&(de=4*xe+4*t*(me-1),X=D+(ye+xe)*(me<<1),me>>=1)),Ce===ie)X+=4;else{var Be=r[se+3*Ce],qe=r[se+3*Ce+1],et=r[se+3*Ce+2];L[X++]=Be,L[X++]=qe,L[X++]=et,L[X++]=255}--ee}}}function _2(r,e,t,n){for(var o=r[e++],a=1<<o,c=a+1,u=c+1,f=o+1,d=(1<<f)-1,g=0,w=0,C=0,b=r[e++],V=new Int32Array(4096),R=null;;){for(;g<16&&b!==0;)w|=r[e++]<<g,g+=8,b===1?b=r[e++]:--b;if(g<f)break;var z=w&d;if(w>>=f,g-=f,z!==a){if(z===c)break;for(var j=z<u?z:R,U=0,H=j;H>a;)H=V[H]>>8,++U;var B=H;if(C+U+(j!==z?1:0)>n)return void Qr.log("Warning, gif stream longer than expected.");t[C++]=B;var re=C+=U;for(j!==z&&(t[C++]=B),H=j;U--;)H=V[H],t[--re]=255&H,H>>=8;R!==null&&u<4096&&(V[u++]=R<<8|B,u>=d+1&&f<12&&(++f,d=d<<1|1)),R=z}else u=c+1,d=(1<<(f=o+1))-1,R=null}return C!==n&&Qr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qm(r){var e,t,n,o,a,c=Math.floor,u=new Array(64),f=new Array(64),d=new Array(64),g=new Array(64),w=new Array(65535),C=new Array(65535),b=new Array(64),V=new Array(64),R=[],z=0,j=7,U=new Array(64),H=new Array(64),B=new Array(64),re=new Array(256),ce=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],v=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],$=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function oe(D,q){for(var X=0,de=0,me=new Array,we=1;we<=16;we++){for(var Ae=1;Ae<=D[we];Ae++)me[q[de]]=[],me[q[de]][0]=X,me[q[de]][1]=we,de++,X++;X*=2}return me}function se(D){for(var q=D[0],X=D[1]-1;X>=0;)q&1<<X&&(z|=1<<j),X--,--j<0&&(z==255?(ie(255),ie(0)):ie(z),j=7,z=0)}function ie(D){R.push(D)}function ye(D){ie(D>>8&255),ie(255&D)}function xe(D,q,X,de,me){for(var we,Ae=me[0],Ce=me[240],Be=(function(Ue,nt){var tt,Gt,wt,hr,Nt,Dt,yr,Ft,St,kt,ft=0;for(St=0;St<8;++St){tt=Ue[ft],Gt=Ue[ft+1],wt=Ue[ft+2],hr=Ue[ft+3],Nt=Ue[ft+4],Dt=Ue[ft+5],yr=Ue[ft+6];var Cr=tt+(Ft=Ue[ft+7]),rr=tt-Ft,dt=Gt+yr,Wt=Gt-yr,ir=wt+Dt,At=wt-Dt,Xt=hr+Nt,Vt=hr-Nt,kr=Cr+Xt,Br=Cr-Xt,Mt=dt+ir,zt=dt-ir;Ue[ft]=kr+Mt,Ue[ft+4]=kr-Mt;var or=.707106781*(zt+Br);Ue[ft+2]=Br+or,Ue[ft+6]=Br-or;var Di=.382683433*((kr=Vt+At)-(zt=Wt+rr)),Rn=.5411961*kr+Di,_o=1.306562965*zt+Di,Pn=.707106781*(Mt=At+Wt),jt=rr+Pn,ki=rr-Pn;Ue[ft+5]=ki+Rn,Ue[ft+3]=ki-Rn,Ue[ft+1]=jt+_o,Ue[ft+7]=jt-_o,ft+=8}for(ft=0,St=0;St<8;++St){tt=Ue[ft],Gt=Ue[ft+8],wt=Ue[ft+16],hr=Ue[ft+24],Nt=Ue[ft+32],Dt=Ue[ft+40],yr=Ue[ft+48];var ci=tt+(Ft=Ue[ft+56]),Nn=tt-Ft,ji=Gt+yr,Tr=Gt-yr,Fr=wt+Dt,sn=wt-Dt,qn=hr+Nt,$o=hr-Nt,Wi=ci+qn,$i=ci-qn,mn=ji+Fr,Ei=ji-Fr;Ue[ft]=Wi+mn,Ue[ft+32]=Wi-mn;var Ii=.707106781*(Ei+$i);Ue[ft+16]=$i+Ii,Ue[ft+48]=$i-Ii;var cs=.382683433*((Wi=$o+sn)-(Ei=Tr+Nn)),co=.5411961*Wi+cs,uo=1.306562965*Ei+cs,us=.707106781*(mn=sn+Tr),Uo=Nn+us,To=Nn-us;Ue[ft+40]=To+co,Ue[ft+24]=To-co,Ue[ft+8]=Uo+uo,Ue[ft+56]=Uo-uo,ft++}for(St=0;St<64;++St)kt=Ue[St]*nt[St],b[St]=kt>0?kt+.5|0:kt-.5|0;return b})(D,q),qe=0;qe<64;++qe)V[N[qe]]=Be[qe];var et=V[0]-X;X=V[0],et==0?se(de[0]):(se(de[C[we=32767+et]]),se(w[we]));for(var Qe=63;Qe>0&&V[Qe]==0;)Qe--;if(Qe==0)return se(Ae),X;for(var Fe,he=1;he<=Qe;){for(var Pt=he;V[he]==0&&he<=Qe;)++he;var Ct=he-Pt;if(Ct>=16){Fe=Ct>>4;for(var vt=1;vt<=Fe;++vt)se(Ce);Ct&=15}we=32767+V[he],se(me[(Ct<<4)+C[we]]),se(w[we]),he++}return Qe!=63&&se(Ae),X}function ee(D){D=Math.min(Math.max(D,1),100),a!=D&&((function(q){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],de=0;de<64;de++){var me=c((X[de]*q+50)/100);me=Math.min(Math.max(me,1),255),u[N[de]]=me}for(var we=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ae=0;Ae<64;Ae++){var Ce=c((we[Ae]*q+50)/100);Ce=Math.min(Math.max(Ce,1),255),f[N[Ae]]=Ce}for(var Be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],qe=0,et=0;et<8;et++)for(var Qe=0;Qe<8;Qe++)d[qe]=1/(u[N[qe]]*Be[et]*Be[Qe]*8),g[qe]=1/(f[N[qe]]*Be[et]*Be[Qe]*8),qe++})(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),a=D)}this.encode=function(D,q){q&&ee(q),R=new Array,z=0,j=7,ye(65496),ye(65504),ye(16),ie(74),ie(70),ie(73),ie(70),ie(0),ie(1),ie(1),ie(0),ye(1),ye(1),ie(0),ie(0),(function(){ye(65499),ye(132),ie(0);for(var Gt=0;Gt<64;Gt++)ie(u[Gt]);ie(1);for(var wt=0;wt<64;wt++)ie(f[wt])})(),(function(Gt,wt){ye(65472),ye(17),ie(8),ye(wt),ye(Gt),ie(3),ie(1),ie(17),ie(0),ie(2),ie(17),ie(1),ie(3),ie(17),ie(1)})(D.width,D.height),(function(){ye(65476),ye(418),ie(0);for(var Gt=0;Gt<16;Gt++)ie(A[Gt+1]);for(var wt=0;wt<=11;wt++)ie(T[wt]);ie(16);for(var hr=0;hr<16;hr++)ie(F[hr+1]);for(var Nt=0;Nt<=161;Nt++)ie(k[Nt]);ie(1);for(var Dt=0;Dt<16;Dt++)ie(v[Dt+1]);for(var yr=0;yr<=11;yr++)ie(L[yr]);ie(17);for(var Ft=0;Ft<16;Ft++)ie(M[Ft+1]);for(var St=0;St<=161;St++)ie($[St])})(),ye(65498),ye(12),ie(3),ie(1),ie(0),ie(2),ie(17),ie(3),ie(17),ie(0),ie(63),ie(0);var X=0,de=0,me=0;z=0,j=7,this.encode.displayName="_encode_";for(var we,Ae,Ce,Be,qe,et,Qe,Fe,he,Pt=D.data,Ct=D.width,vt=D.height,Ue=4*Ct,nt=0;nt<vt;){for(we=0;we<Ue;){for(qe=Ue*nt+we,Qe=-1,Fe=0,he=0;he<64;he++)et=qe+(Fe=he>>3)*Ue+(Qe=4*(7&he)),nt+Fe>=vt&&(et-=Ue*(nt+1+Fe-vt)),we+Qe>=Ue&&(et-=we+Qe-Ue+4),Ae=Pt[et++],Ce=Pt[et++],Be=Pt[et++],U[he]=(ce[Ae]+ce[Ce+256|0]+ce[Be+512|0]>>16)-128,H[he]=(ce[Ae+768|0]+ce[Ce+1024|0]+ce[Be+1280|0]>>16)-128,B[he]=(ce[Ae+1280|0]+ce[Ce+1536|0]+ce[Be+1792|0]>>16)-128;X=xe(U,d,X,e,n),de=xe(H,g,de,t,o),me=xe(B,g,me,t,o),we+=32}nt+=8}if(j>=0){var tt=[];tt[1]=j+1,tt[0]=(1<<j+1)-1,se(tt)}return ye(65497),new Uint8Array(R)},r=r||50,(function(){for(var D=String.fromCharCode,q=0;q<256;q++)re[q]=D(q)})(),e=oe(A,T),t=oe(v,L),n=oe(F,k),o=oe(M,$),(function(){for(var D=1,q=2,X=1;X<=15;X++){for(var de=D;de<q;de++)C[32767+de]=X,w[32767+de]=[],w[32767+de][1]=X,w[32767+de][0]=de;for(var me=-(q-1);me<=-D;me++)C[32767+me]=X,w[32767+me]=[],w[32767+me][1]=X,w[32767+me][0]=q-1+me;D<<=1,q<<=1}})(),(function(){for(var D=0;D<256;D++)ce[D]=19595*D,ce[D+256|0]=38470*D,ce[D+512|0]=7471*D+32768,ce[D+768|0]=-11059*D,ce[D+1024|0]=-21709*D,ce[D+1280|0]=32768*D+8421375,ce[D+1536|0]=-27439*D,ce[D+1792|0]=-5329*D})(),ee(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Zs(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function T2(r){function e(T){if(!T)throw Error("assert :P")}function t(T,F,k){for(var v=0;4>v;v++)if(T[F+v]!=k.charCodeAt(v))return!0;return!1}function n(T,F,k,v,L){for(var M=0;M<L;M++)T[F+M]=k[v+M]}function o(T,F,k,v){for(var L=0;L<v;L++)T[F+L]=k}function a(T){return new Int32Array(T)}function c(T,F){for(var k=[],v=0;v<T;v++)k.push(new F);return k}function u(T,F){var k=[];return(function v(L,M,$){for(var oe=$[M],se=0;se<oe&&(L.push($.length>M+1?[]:new F),!($.length<M+1));se++)v(L[se],M+1,$)})(k,0,T),k}var f=function(){var T=this;function F(p,x){for(var E=1<<x-1>>>0;p&E;)E>>>=1;return E?(p&E-1)+E:p}function k(p,x,E,O,K){e(!(O%E));do p[x+(O-=E)]=K;while(0<O)}function v(p,x,E,O,K){if(e(2328>=K),512>=K)var Y=a(512);else if((Y=a(K))==null)return 0;return(function(Q,Z,ne,ae,ve,Ee){var le,Se,je=Z,Ve=1<<ne,Re=a(16),ze=a(16);for(e(ve!=0),e(ae!=null),e(Q!=null),e(0<ne),Se=0;Se<ve;++Se){if(15<ae[Se])return 0;++Re[ae[Se]]}if(Re[0]==ve)return 0;for(ze[1]=0,le=1;15>le;++le){if(Re[le]>1<<le)return 0;ze[le+1]=ze[le]+Re[le]}for(Se=0;Se<ve;++Se)le=ae[Se],0<ae[Se]&&(Ee[ze[le]++]=Se);if(ze[15]==1)return(ae=new L).g=0,ae.value=Ee[0],k(Q,je,1,Ve,ae),Ve;var Oe,De=-1,We=Ve-1,bt=0,at=1,Yt=1,ht=1<<ne;for(Se=0,le=1,ve=2;le<=ne;++le,ve<<=1){if(at+=Yt<<=1,0>(Yt-=Re[le]))return 0;for(;0<Re[le];--Re[le])(ae=new L).g=le,ae.value=Ee[Se++],k(Q,je+bt,ve,ht,ae),bt=F(bt,le)}for(le=ne+1,ve=2;15>=le;++le,ve<<=1){if(at+=Yt<<=1,0>(Yt-=Re[le]))return 0;for(;0<Re[le];--Re[le]){if(ae=new L,(bt&We)!=De){for(je+=ht,Oe=1<<(De=le)-ne;15>De&&!(0>=(Oe-=Re[De]));)++De,Oe<<=1;Ve+=ht=1<<(Oe=De-ne),Q[Z+(De=bt&We)].g=Oe+ne,Q[Z+De].value=je-Z-De}ae.g=le-ne,ae.value=Ee[Se++],k(Q,je+(bt>>ne),ve,ht,ae),bt=F(bt,le)}}return at!=2*ze[15]-1?0:Ve})(p,x,E,O,K,Y)}function L(){this.value=this.g=0}function M(){this.value=this.g=0}function $(){this.G=c(5,L),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Po,M)}function oe(p,x,E,O){e(p!=null),e(x!=null),e(2147483648>O),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=x,p.pa=E,p.Jd=x,p.Yc=E+O,p.Zc=4<=O?E+O-4+1:E,Ae(p)}function se(p,x){for(var E=0;0<x--;)E|=Be(p,128)<<x;return E}function ie(p,x){var E=se(p,x);return Ce(p)?-E:E}function ye(p,x,E,O){var K,Y=0;for(e(p!=null),e(x!=null),e(4294967288>O),p.Sb=O,p.Ra=0,p.u=0,p.h=0,4<O&&(O=4),K=0;K<O;++K)Y+=x[E+K]<<8*K;p.Ra=Y,p.bb=O,p.oa=x,p.pa=E}function xe(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<pa-8>>>0,++p.bb,p.u-=8;de(p)&&(p.h=1,p.u=0)}function ee(p,x){if(e(0<=x),!p.h&&x<=xo){var E=X(p)&yo[x];return p.u+=x,xe(p),E}return p.h=1,p.u=0}function D(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(p){return p.Ra>>>(p.u&pa-1)>>>0}function de(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>pa}function me(p,x){p.u=x,p.h=de(p)}function we(p){p.u>=xs&&(e(p.u>=xs),xe(p))}function Ae(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function Ce(p){return se(p,1)}function Be(p,x){var E=p.Ca;0>p.b&&Ae(p);var O=p.b,K=E*x>>>8,Y=(p.I>>>O>K)+0;for(Y?(E-=K,p.I-=K+1<<O>>>0):E=K+1,O=E,K=0;256<=O;)K+=8,O>>=8;return O=7^K+Ms[O],p.b-=O,p.Ca=(E<<O)-1,Y}function qe(p,x,E){p[x+0]=E>>24&255,p[x+1]=E>>16&255,p[x+2]=E>>8&255,p[x+3]=255&E}function et(p,x){return p[x+0]|p[x+1]<<8}function Qe(p,x){return et(p,x)|p[x+2]<<16}function Fe(p,x){return et(p,x)|et(p,x+2)<<16}function he(p,x){var E=1<<x;return e(p!=null),e(0<x),p.X=a(E),p.X==null?0:(p.Mb=32-x,p.Xa=x,1)}function Pt(p,x){e(p!=null),e(x!=null),e(p.Xa==x.Xa),n(x.X,0,p.X,0,1<<x.Xa)}function Ct(){this.X=[],this.Xa=this.Mb=0}function vt(p,x,E,O){e(E!=null),e(O!=null);var K=E[0],Y=O[0];return K==0&&(K=(p*Y+x/2)/x),Y==0&&(Y=(x*K+p/2)/p),0>=K||0>=Y?0:(E[0]=K,O[0]=Y,1)}function Ue(p,x){return p+(1<<x)-1>>>x}function nt(p,x){return((4278255360&p)+(4278255360&x)>>>0&4278255360)+((16711935&p)+(16711935&x)>>>0&16711935)>>>0}function tt(p,x){T[x]=function(E,O,K,Y,Q,Z,ne){var ae;for(ae=0;ae<Q;++ae){var ve=T[p](Z[ne+ae-1],K,Y+ae);Z[ne+ae]=nt(E[O+ae],ve)}}}function Gt(){this.ud=this.hd=this.jd=0}function wt(p,x){return((4278124286&(p^x))>>>1)+(p&x)>>>0}function hr(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function Nt(p,x){return hr(p+(p-x+.5>>1))}function Dt(p,x,E){return Math.abs(x-E)-Math.abs(p-E)}function yr(p,x,E,O,K,Y,Q){for(O=Y[Q-1],E=0;E<K;++E)Y[Q+E]=O=nt(p[x+E],O)}function Ft(p,x,E,O,K){var Y;for(Y=0;Y<E;++Y){var Q=p[x+Y],Z=Q>>8&255,ne=16711935&(ne=(ne=16711935&Q)+((Z<<16)+Z));O[K+Y]=(4278255360&Q)+ne>>>0}}function St(p,x){x.jd=255&p,x.hd=p>>8&255,x.ud=p>>16&255}function kt(p,x,E,O,K,Y){var Q;for(Q=0;Q<O;++Q){var Z=x[E+Q],ne=Z>>>8,ae=Z,ve=255&(ve=(ve=Z>>>16)+((p.jd<<24>>24)*(ne<<24>>24)>>>5));ae=255&(ae=(ae+=(p.hd<<24>>24)*(ne<<24>>24)>>>5)+((p.ud<<24>>24)*(ve<<24>>24)>>>5)),K[Y+Q]=(4278255360&Z)+(ve<<16)+ae}}function ft(p,x,E,O,K){T[x]=function(Y,Q,Z,ne,ae,ve,Ee,le,Se){for(ne=Ee;ne<le;++ne)for(Ee=0;Ee<Se;++Ee)ae[ve++]=K(Z[O(Y[Q++])])},T[p]=function(Y,Q,Z,ne,ae,ve,Ee){var le=8>>Y.b,Se=Y.Ea,je=Y.K[0],Ve=Y.w;if(8>le)for(Y=(1<<Y.b)-1,Ve=(1<<le)-1;Q<Z;++Q){var Re,ze=0;for(Re=0;Re<Se;++Re)Re&Y||(ze=O(ne[ae++])),ve[Ee++]=K(je[ze&Ve]),ze>>=le}else T["VP8LMapColor"+E](ne,ae,je,Ve,ve,Ee,Q,Z,Se)}}function Cr(p,x,E,O,K){for(E=x+E;x<E;){var Y=p[x++];O[K++]=Y>>16&255,O[K++]=Y>>8&255,O[K++]=255&Y}}function rr(p,x,E,O,K){for(E=x+E;x<E;){var Y=p[x++];O[K++]=Y>>16&255,O[K++]=Y>>8&255,O[K++]=255&Y,O[K++]=Y>>24&255}}function dt(p,x,E,O,K){for(E=x+E;x<E;){var Y=(Q=p[x++])>>16&240|Q>>12&15,Q=240&Q|Q>>28&15;O[K++]=Y,O[K++]=Q}}function Wt(p,x,E,O,K){for(E=x+E;x<E;){var Y=(Q=p[x++])>>16&248|Q>>13&7,Q=Q>>5&224|Q>>3&31;O[K++]=Y,O[K++]=Q}}function ir(p,x,E,O,K){for(E=x+E;x<E;){var Y=p[x++];O[K++]=255&Y,O[K++]=Y>>8&255,O[K++]=Y>>16&255}}function At(p,x,E,O,K,Y){if(Y==0)for(E=x+E;x<E;)qe(O,((Y=p[x++])[0]>>24|Y[1]>>8&65280|Y[2]<<8&16711680|Y[3]<<24)>>>0),K+=32;else n(O,K,p,x,E)}function Xt(p,x){T[x][0]=T[p+"0"],T[x][1]=T[p+"1"],T[x][2]=T[p+"2"],T[x][3]=T[p+"3"],T[x][4]=T[p+"4"],T[x][5]=T[p+"5"],T[x][6]=T[p+"6"],T[x][7]=T[p+"7"],T[x][8]=T[p+"8"],T[x][9]=T[p+"9"],T[x][10]=T[p+"10"],T[x][11]=T[p+"11"],T[x][12]=T[p+"12"],T[x][13]=T[p+"13"],T[x][14]=T[p+"0"],T[x][15]=T[p+"0"]}function Vt(p){return p==kl||p==Qa||p==wc||p==Sc}function kr(){this.eb=[],this.size=this.A=this.fb=0}function Br(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Mt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new kr,this.f.kb=new Br,this.sd=null}function zt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function or(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Di(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function Rn(p,x){var E=p.T,O=x.ba.f.RGBA,K=O.eb,Y=O.fb+p.ka*O.A,Q=Ji[x.ba.S],Z=p.y,ne=p.O,ae=p.f,ve=p.N,Ee=p.ea,le=p.W,Se=x.cc,je=x.dc,Ve=x.Mc,Re=x.Nc,ze=p.ka,Oe=p.ka+p.T,De=p.U,We=De+1>>1;for(ze==0?Q(Z,ne,null,null,ae,ve,Ee,le,ae,ve,Ee,le,K,Y,null,null,De):(Q(x.ec,x.fc,Z,ne,Se,je,Ve,Re,ae,ve,Ee,le,K,Y-O.A,K,Y,De),++E);ze+2<Oe;ze+=2)Se=ae,je=ve,Ve=Ee,Re=le,ve+=p.Rc,le+=p.Rc,Y+=2*O.A,Q(Z,(ne+=2*p.fa)-p.fa,Z,ne,Se,je,Ve,Re,ae,ve,Ee,le,K,Y-O.A,K,Y,De);return ne+=p.fa,p.j+Oe<p.o?(n(x.ec,x.fc,Z,ne,De),n(x.cc,x.dc,ae,ve,We),n(x.Mc,x.Nc,Ee,le,We),E--):1&Oe||Q(Z,ne,null,null,ae,ve,Ee,le,ae,ve,Ee,le,K,Y+O.A,null,null,De),E}function _o(p,x,E){var O=p.F,K=[p.J];if(O!=null){var Y=p.U,Q=x.ba.S,Z=Q==bc||Q==wc;x=x.ba.f.RGBA;var ne=[0],ae=p.ka;ne[0]=p.T,p.Kb&&(ae==0?--ne[0]:(--ae,K[0]-=p.width),p.j+p.ka+p.T==p.o&&(ne[0]=p.o-p.j-ae));var ve=x.eb;ae=x.fb+ae*x.A,p=xc(O,K[0],p.width,Y,ne,ve,ae+(Z?0:3),x.A),e(E==ne),p&&Vt(Q)&&Ya(ve,ae,Z,Y,ne,x.A)}return 0}function Pn(p){var x=p.ma,E=x.ba.S,O=11>E,K=E==xa||E==vc||E==bc||E==Mr||E==12||Vt(E);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!bl(x.Oa,p,K?11:12))return 0;if(K&&Vt(E)&&Ze(),p.da)alert("todo:use_scaling");else{if(O){if(x.Ib=Di,p.Kb){if(E=p.U+1>>1,x.memory=a(p.U+2*E),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+p.U,x.Mc=x.cc,x.Nc=x.dc+E,x.Ib=Rn,Ze()}}else alert("todo:EmitYUV");K&&(x.Jb=_o,O&&ke())}if(O&&!ii){for(p=0;256>p;++p)Yi[p]=89858*(p-128)+es>>Us,Qi[p]=-22014*(p-128)+es,Rl[p]=-45773*(p-128),tl[p]=113618*(p-128)+es>>Us;for(p=Ir;p<Pr;++p)x=76283*(p-16)+es>>Us,hu[p-Ir]=an(x,255),Bh[p-Ir]=an(x+8>>4,15);ii=1}return 1}function jt(p){var x=p.ma,E=p.U,O=p.T;return e(!(1&p.ka)),0>=E||0>=O?0:(E=x.Ib(p,x),x.Jb!=null&&x.Jb(p,x,E),x.Dc+=E,1)}function ki(p){p.ma.memory=null}function ci(p,x,E,O){return ee(p,8)!=47?0:(x[0]=ee(p,14)+1,E[0]=ee(p,14)+1,O[0]=ee(p,1),ee(p,3)!=0?0:!p.h)}function Nn(p,x){if(4>p)return p+1;var E=p-2>>1;return(2+(1&p)<<E)+ee(x,E)+1}function ji(p,x){return 120<x?x-120:1<=(E=((E=Dp[x-1])>>4)*p+(8-(15&E)))?E:1;var E}function Tr(p,x,E){var O=X(E),K=p[x+=255&O].g-8;return 0<K&&(me(E,E.u+8),O=X(E),x+=p[x].value,x+=O&(1<<K)-1),me(E,E.u+p[x].g),p[x].value}function Fr(p,x,E){return E.g+=p.g,E.value+=p.value<<x>>>0,e(8>=E.g),p.g}function sn(p,x,E){var O=p.xc;return e((x=O==0?0:p.vc[p.md*(E>>O)+(x>>O)])<p.Wb),p.Ya[x]}function qn(p,x,E,O){var K=p.ab,Y=p.c*x,Q=p.C;x=Q+x;var Z=E,ne=O;for(O=p.Ta,E=p.Ua;0<K--;){var ae=p.gc[K],ve=Q,Ee=x,le=Z,Se=ne,je=(ne=O,Z=E,ae.Ea);switch(e(ve<Ee),e(Ee<=ae.nc),ae.hc){case 2:yn(le,Se,(Ee-ve)*je,ne,Z);break;case 0:var Ve=ve,Re=Ee,ze=ne,Oe=Z,De=(ht=ae).Ea;Ve==0&&(Ds(le,Se,null,null,1,ze,Oe),yr(le,Se+1,0,0,De-1,ze,Oe+1),Se+=De,Oe+=De,++Ve);for(var We=1<<ht.b,bt=We-1,at=Ue(De,ht.b),Yt=ht.K,ht=ht.w+(Ve>>ht.b)*at;Ve<Re;){var cr=Yt,un=ht,Zt=1;for(vs(le,Se,ze,Oe-De,1,ze,Oe);Zt<De;){var lt=(Zt&~bt)+We;lt>De&&(lt=De),(0,Ha[cr[un++]>>8&15])(le,Se+ +Zt,ze,Oe+Zt-De,lt-Zt,ze,Oe+Zt),Zt=lt}Se+=De,Oe+=De,++Ve&bt||(ht+=at)}Ee!=ae.nc&&n(ne,Z-je,ne,Z+(Ee-ve-1)*je,je);break;case 1:for(je=le,Re=Se,De=(le=ae.Ea)-(Oe=le&~(ze=(Se=1<<ae.b)-1)),Ve=Ue(le,ae.b),We=ae.K,ae=ae.w+(ve>>ae.b)*Ve;ve<Ee;){for(bt=We,at=ae,Yt=new Gt,ht=Re+Oe,cr=Re+le;Re<ht;)St(bt[at++],Yt),Sl(Yt,je,Re,Se,ne,Z),Re+=Se,Z+=Se;Re<cr&&(St(bt[at++],Yt),Sl(Yt,je,Re,De,ne,Z),Re+=De,Z+=De),++ve&ze||(ae+=Ve)}break;case 3:if(le==ne&&Se==Z&&0<ae.b){for(Re=ne,le=je=Z+(Ee-ve)*je-(Oe=(Ee-ve)*Ue(ae.Ea,ae.b)),Se=ne,ze=Z,Ve=[],Oe=(De=Oe)-1;0<=Oe;--Oe)Ve[Oe]=Se[ze+Oe];for(Oe=De-1;0<=Oe;--Oe)Re[le+Oe]=Ve[Oe];Ua(ae,ve,Ee,ne,je,ne,Z)}else Ua(ae,ve,Ee,le,Se,ne,Z)}Z=O,ne=E}ne!=E&&n(O,E,Z,ne,Y)}function $o(p,x){var E=p.V,O=p.Ba+p.c*p.C,K=x-p.C;if(e(x<=p.l.o),e(16>=K),0<K){var Y=p.l,Q=p.Ta,Z=p.Ua,ne=Y.width;if(qn(p,K,E,O),K=Z=[Z],e((E=p.C)<(O=x)),e(Y.v<Y.va),O>Y.o&&(O=Y.o),E<Y.j){var ae=Y.j-E;E=Y.j,K[0]+=ae*ne}if(E>=O?E=0:(K[0]+=4*Y.v,Y.ka=E-Y.j,Y.U=Y.va-Y.v,Y.T=O-E,E=1),E){if(Z=Z[0],11>(E=p.ca).S){var ve=E.f.RGBA,Ee=(O=E.S,K=Y.U,Y=Y.T,ae=ve.eb,ve.A),le=Y;for(ve=ve.fb+p.Ma*ve.A;0<le--;){var Se=Q,je=Z,Ve=K,Re=ae,ze=ve;switch(O){case lu:_l(Se,je,Ve,Re,ze);break;case xa:Ws(Se,je,Ve,Re,ze);break;case kl:Ws(Se,je,Ve,Re,ze),Ya(Re,ze,0,Ve,1,0);break;case Ih:Ga(Se,je,Ve,Re,ze);break;case vc:At(Se,je,Ve,Re,ze,1);break;case Qa:At(Se,je,Ve,Re,ze,1),Ya(Re,ze,0,Ve,1,0);break;case bc:At(Se,je,Ve,Re,ze,0);break;case wc:At(Se,je,Ve,Re,ze,0),Ya(Re,ze,1,Ve,1,0);break;case Mr:ma(Se,je,Ve,Re,ze);break;case Sc:ma(Se,je,Ve,Re,ze),pd(Re,ze,Ve,1,0);break;case cu:ga(Se,je,Ve,Re,ze);break;default:e(0)}Z+=ne,ve+=Ee}p.Ma+=Y}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=E.height)}}p.C=x,e(p.C<=p.i)}function Wi(p){var x;if(0<p.ua)return 0;for(x=0;x<p.Wb;++x){var E=p.Ya[x].G,O=p.Ya[x].H;if(0<E[1][O[1]+0].g||0<E[2][O[2]+0].g||0<E[3][O[3]+0].g)return 0}return 1}function $i(p,x,E,O,K,Y){if(p.Z!=0){var Q=p.qd,Z=p.rd;for(e(xi[p.Z]!=null);x<E;++x)xi[p.Z](Q,Z,O,K,O,K,Y),Q=O,Z=K,K+=Y;p.qd=Q,p.rd=Z}}function mn(p,x){var E=p.l.ma,O=E.Z==0||E.Z==1?p.l.j:p.C;if(O=p.C<O?O:p.C,e(x<=p.l.o),x>O){var K=p.l.width,Y=E.ca,Q=E.tb+K*O,Z=p.V,ne=p.Ba+p.c*O,ae=p.gc;e(p.ab==1),e(ae[0].hc==3),Xo(ae[0],O,x,Z,ne,Y,Q),$i(E,O,x,Y,Q,K)}p.C=p.Ma=x}function Ei(p,x,E,O,K,Y,Q){var Z=p.$/O,ne=p.$%O,ae=p.m,ve=p.s,Ee=E+p.$,le=Ee;K=E+O*K;var Se=E+O*Y,je=280+ve.ua,Ve=p.Pb?Z:16777216,Re=0<ve.ua?ve.Wa:null,ze=ve.wc,Oe=Ee<Se?sn(ve,ne,Z):null;e(p.C<Y),e(Se<=K);var De=!1;e:for(;;){for(;De||Ee<Se;){var We=0;if(Z>=Ve){var bt=Ee-E;e((Ve=p).Pb),Ve.wd=Ve.m,Ve.xd=bt,0<Ve.s.ua&&Pt(Ve.s.Wa,Ve.s.vb),Ve=Z+du}if(ne&ze||(Oe=sn(ve,ne,Z)),e(Oe!=null),Oe.Qb&&(x[Ee]=Oe.qb,De=!0),!De)if(we(ae),Oe.jc){We=ae,bt=x;var at=Ee,Yt=Oe.pd[X(We)&Po-1];e(Oe.jc),256>Yt.g?(me(We,We.u+Yt.g),bt[at]=Yt.value,We=0):(me(We,We.u+Yt.g-256),e(256<=Yt.value),We=Yt.value),We==0&&(De=!0)}else We=Tr(Oe.G[0],Oe.H[0],ae);if(ae.h)break;if(De||256>We){if(!De)if(Oe.nd)x[Ee]=(Oe.qb|We<<8)>>>0;else{if(we(ae),De=Tr(Oe.G[1],Oe.H[1],ae),we(ae),bt=Tr(Oe.G[2],Oe.H[2],ae),at=Tr(Oe.G[3],Oe.H[3],ae),ae.h)break;x[Ee]=(at<<24|De<<16|We<<8|bt)>>>0}if(De=!1,++Ee,++ne>=O&&(ne=0,++Z,Q!=null&&Z<=Y&&!(Z%16)&&Q(p,Z),Re!=null))for(;le<Ee;)We=x[le++],Re.X[(506832829*We&4294967295)>>>Re.Mb]=We}else if(280>We){if(We=Nn(We-256,ae),bt=Tr(Oe.G[4],Oe.H[4],ae),we(ae),bt=ji(O,bt=Nn(bt,ae)),ae.h)break;if(Ee-E<bt||K-Ee<We)break e;for(at=0;at<We;++at)x[Ee+at]=x[Ee+at-bt];for(Ee+=We,ne+=We;ne>=O;)ne-=O,++Z,Q!=null&&Z<=Y&&!(Z%16)&&Q(p,Z);if(e(Ee<=K),ne&ze&&(Oe=sn(ve,ne,Z)),Re!=null)for(;le<Ee;)We=x[le++],Re.X[(506832829*We&4294967295)>>>Re.Mb]=We}else{if(!(We<je))break e;for(De=We-280,e(Re!=null);le<Ee;)We=x[le++],Re.X[(506832829*We&4294967295)>>>Re.Mb]=We;We=Ee,e(!(De>>>(bt=Re).Xa)),x[We]=bt.X[De],De=!0}De||e(ae.h==de(ae))}if(p.Pb&&ae.h&&Ee<K)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&Pt(p.s.vb,p.s.Wa);else{if(ae.h)break e;Q!=null&&Q(p,Z>Y?Y:Z),p.a=0,p.$=Ee-E}return 1}return p.a=3,0}function Ii(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var x=p.Wa;x!=null&&(x.X=null),p.vb=null,e(p!=null)}function cs(){var p=new pt;return p==null?null:(p.a=0,p.xb=El,Xt("Predictor","VP8LPredictors"),Xt("Predictor","VP8LPredictors_C"),Xt("PredictorAdd","VP8LPredictorsAdd"),Xt("PredictorAdd","VP8LPredictorsAdd_C"),yn=Ft,Sl=kt,_l=Cr,Ws=rr,ma=dt,ga=Wt,Ga=ir,T.VP8LMapColor32b=bs,T.VP8LMapColor8b=qa,p)}function co(p,x,E,O,K){var Y=1,Q=[p],Z=[x],ne=O.m,ae=O.s,ve=null,Ee=0;e:for(;;){if(E)for(;Y&&ee(ne,1);){var le=Q,Se=Z,je=O,Ve=1,Re=je.m,ze=je.gc[je.ab],Oe=ee(Re,2);if(je.Oc&1<<Oe)Y=0;else{switch(je.Oc|=1<<Oe,ze.hc=Oe,ze.Ea=le[0],ze.nc=Se[0],ze.K=[null],++je.ab,e(4>=je.ab),Oe){case 0:case 1:ze.b=ee(Re,3)+2,Ve=co(Ue(ze.Ea,ze.b),Ue(ze.nc,ze.b),0,je,ze.K),ze.K=ze.K[0];break;case 3:var De,We=ee(Re,8)+1,bt=16<We?0:4<We?1:2<We?2:3;if(le[0]=Ue(ze.Ea,bt),ze.b=bt,De=Ve=co(We,1,0,je,ze.K)){var at,Yt=We,ht=ze,cr=1<<(8>>ht.b),un=a(cr);if(un==null)De=0;else{var Zt=ht.K[0],lt=ht.w;for(un[0]=ht.K[0][0],at=1;at<1*Yt;++at)un[at]=nt(Zt[lt+at],un[at-1]);for(;at<4*cr;++at)un[at]=0;ht.K[0]=null,ht.K[0]=un,De=1}}Ve=De;break;case 2:break;default:e(0)}Y=Ve}}if(Q=Q[0],Z=Z[0],Y&&ee(ne,1)&&!(Y=1<=(Ee=ee(ne,4))&&11>=Ee)){O.a=3;break e}var rt;if(rt=Y)t:{var xn,$t,ar,Kr=O,Kn=Q,An=Z,rn=Ee,On=E,Jn=Kr.m,Xr=Kr.s,dr=[null],wr=1,Zr=0,Sr=Ph[rn];r:for(;;){if(On&&ee(Jn,1)){var dn=ee(Jn,3)+2,hn=Ue(Kn,dn),Dr=Ue(An,dn),vi=hn*Dr;if(!co(hn,Dr,0,Kr,dr))break r;for(dr=dr[0],Xr.xc=dn,xn=0;xn<vi;++xn){var Nr=dr[xn]>>8&65535;dr[xn]=Nr,Nr>=wr&&(wr=Nr+1)}}if(Jn.h)break r;for($t=0;5>$t;++$t){var Wr=Xa[$t];!$t&&0<rn&&(Wr+=1<<rn),Zr<Wr&&(Zr=Wr)}var Cn=c(wr*Sr,L),oi=wr,Xi=c(oi,$);if(Xi==null)var vn=null;else e(65536>=oi),vn=Xi;var bn=a(Zr);if(vn==null||bn==null||Cn==null){Kr.a=1;break r}var bi=Cn;for(xn=ar=0;xn<wr;++xn){var $r=vn[xn],wi=$r.G,Bo=$r.H,ts=0,Yn=1,wn=0;for($t=0;5>$t;++$t){Wr=Xa[$t],wi[$t]=bi,Bo[$t]=ar,!$t&&0<rn&&(Wr+=1<<rn);i:{var wa,Hs=Wr,Pl=Kr,_s=bn,zh=bi,Cd=ar,Yr=0,rs=Pl.m,kd=ee(rs,1);if(o(_s,0,0,Hs),kd){var jd=ee(rs,1)+1,fu=ee(rs,1),pu=ee(rs,fu==0?1:8);_s[pu]=1,jd==2&&(_s[pu=ee(rs,8)]=1);var Ts=1}else{var en=a(19),kn=ee(rs,4)+4;if(19<kn){Pl.a=3;var Sn=0;break i}for(wa=0;wa<kn;++wa)en[Mp[wa]]=ee(rs,3);var Nl=void 0,Gs=void 0,Ll=Pl,Hp=en,Vn=Hs,mu=_s,kc=0,As=Ll.m,ns=8,vo=c(128,L);n:for(;v(vo,0,7,Hp,19);){if(ee(As,1)){var jc=2+2*ee(As,3);if((Nl=2+ee(As,jc))>Vn)break n}else Nl=Vn;for(Gs=0;Gs<Vn&&Nl--;){we(As);var gu=vo[0+(127&X(As))];me(As,As.u+gu.g);var Sa=gu.value;if(16>Sa)mu[Gs++]=Sa,Sa!=0&&(ns=Sa);else{var Oh=Sa==16,Ed=Sa-16,Vh=uu[Ed],Id=ee(As,_c[Ed])+Vh;if(Gs+Id>Vn)break n;for(var Mh=Oh?ns:0;0<Id--;)mu[Gs++]=Mh}}kc=1;break n}kc||(Ll.a=3),Ts=kc}(Ts=Ts&&!rs.h)&&(Yr=v(zh,Cd,8,_s,Hs)),Ts&&Yr!=0?Sn=Yr:(Pl.a=3,Sn=0)}if(Sn==0)break r;if(Yn&&Rh[$t]==1&&(Yn=bi[ar].g==0),ts+=bi[ar].g,ar+=Sn,3>=$t){var Bl,yu=bn[0];for(Bl=1;Bl<Wr;++Bl)bn[Bl]>yu&&(yu=bn[Bl]);wn+=yu}}if($r.nd=Yn,$r.Qb=0,Yn&&($r.qb=(wi[3][Bo[3]+0].value<<24|wi[1][Bo[1]+0].value<<16|wi[2][Bo[2]+0].value)>>>0,ts==0&&256>wi[0][Bo[0]+0].value&&($r.Qb=1,$r.qb+=wi[0][Bo[0]+0].value<<8)),$r.jc=!$r.Qb&&6>wn,$r.jc){var Ec,bo=$r;for(Ec=0;Ec<Po;++Ec){var Ks=Ec,is=bo.pd[Ks],nl=bo.G[0][bo.H[0]+Ks];256<=nl.value?(is.g=nl.g+256,is.value=nl.value):(is.g=0,is.value=0,Ks>>=Fr(nl,8,is),Ks>>=Fr(bo.G[1][bo.H[1]+Ks],16,is),Ks>>=Fr(bo.G[2][bo.H[2]+Ks],0,is),Fr(bo.G[3][bo.H[3]+Ks],24,is))}}}Xr.vc=dr,Xr.Wb=wr,Xr.Ya=vn,Xr.yc=Cn,rt=1;break t}rt=0}if(!(Y=rt)){O.a=3;break e}if(0<Ee){if(ae.ua=1<<Ee,!he(ae.Wa,Ee)){O.a=1,Y=0;break e}}else ae.ua=0;var xu=O,vu=Q,Dh=Z,bu=xu.s,wu=bu.xc;if(xu.c=vu,xu.i=Dh,bu.md=Ue(vu,wu),bu.wc=wu==0?-1:(1<<wu)-1,E){O.xb=Ss;break e}if((ve=a(Q*Z))==null){O.a=1,Y=0;break e}Y=(Y=Ei(O,ve,0,Q,Z,Z,null))&&!ne.h;break e}return Y?(K!=null?K[0]=ve:(e(ve==null),e(E)),O.$=0,E||Ii(ae)):Ii(ae),Y}function uo(p,x){var E=p.c*p.i,O=E+x+16*x;return e(p.c<=x),p.V=a(O),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+E+x,1)}function us(p,x){var E=p.C,O=x-E,K=p.V,Y=p.Ba+p.c*E;for(e(x<=p.l.o);0<O;){var Q=16<O?16:O,Z=p.l.ma,ne=p.l.width,ae=ne*Q,ve=Z.ca,Ee=Z.tb+ne*E,le=p.Ta,Se=p.Ua;qn(p,Q,K,Y),md(le,Se,ve,Ee,ae),$i(Z,E,E+Q,ve,Ee,ne),O-=Q,K+=Q*p.c,E+=Q}e(E==x),p.C=p.Ma=x}function Uo(){this.ub=this.yd=this.td=this.Rb=0}function To(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function qo(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function jr(){this.Yb=(function(){var p=[];return(function x(E,O,K){for(var Y=K[O],Q=0;Q<Y&&(E.push(K.length>O+1?[]:0),!(K.length<O+1));Q++)x(E[Q],O+1,K)})(p,0,[3,11]),p})()}function xl(){this.jb=a(3),this.Wc=u([4,8],jr),this.Xc=u([4,17],jr)}function Ps(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function ui(){this.ld=this.La=this.dd=this.tc=0}function Ho(){this.Na=this.la=0}function aa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ds(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function hs(){this.uc=this.M=this.Nb=0,this.wa=Array(new ui),this.Y=0,this.ya=Array(new ds),this.aa=0,this.l=new Hn}function di(){this.y=a(16),this.f=a(8),this.ea=a(8)}function za(){this.cb=this.a=0,this.sc="",this.m=new D,this.Od=new Uo,this.Kc=new To,this.ed=new Ps,this.Qa=new qo,this.Ic=this.$c=this.Aa=0,this.D=new hs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,D),this.ia=0,this.pb=c(4,aa),this.Pa=new xl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new di),this.Hd=0,this.rb=Array(new Ho),this.sb=0,this.wa=Array(new ui),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ds),this.L=this.aa=0,this.gd=u([4,2],ui),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Hn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ao(){var p=new za;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,Za||(Za=hi)),p}function vr(p,x,E){return p.a==0&&(p.a=x,p.sc=E,p.cb=0),0}function fs(p,x,E){return 3<=E&&p[x+0]==157&&p[x+1]==1&&p[x+2]==42}function ho(p,x){if(p==null)return 0;if(p.a=0,p.sc="OK",x==null)return vr(p,2,"null VP8Io passed to VP8GetHeaders()");var E=x.data,O=x.w,K=x.ha;if(4>K)return vr(p,7,"Truncated header.");var Y=E[O+0]|E[O+1]<<8|E[O+2]<<16,Q=p.Od;if(Q.Rb=!(1&Y),Q.td=Y>>1&7,Q.yd=Y>>4&1,Q.ub=Y>>5,3<Q.td)return vr(p,3,"Incorrect keyframe parameters.");if(!Q.yd)return vr(p,4,"Frame not displayable.");O+=3,K-=3;var Z=p.Kc;if(Q.Rb){if(7>K)return vr(p,7,"cannot parse picture header");if(!fs(E,O,K))return vr(p,3,"Bad code word");Z.c=16383&(E[O+4]<<8|E[O+3]),Z.Td=E[O+4]>>6,Z.i=16383&(E[O+6]<<8|E[O+5]),Z.Ud=E[O+6]>>6,O+=7,K-=7,p.za=Z.c+15>>4,p.Ub=Z.i+15>>4,x.width=Z.c,x.height=Z.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,o((Y=p.Pa).jb,0,255,Y.jb.length),e((Y=p.Qa)!=null),Y.Cb=0,Y.Bb=0,Y.Fb=1,o(Y.Zb,0,0,Y.Zb.length),o(Y.Lb,0,0,Y.Lb)}if(Q.ub>K)return vr(p,7,"bad partition length");oe(Y=p.m,E,O,Q.ub),O+=Q.ub,K-=Q.ub,Q.Rb&&(Z.Ld=Ce(Y),Z.Kd=Ce(Y)),Z=p.Qa;var ne,ae=p.Pa;if(e(Y!=null),e(Z!=null),Z.Cb=Ce(Y),Z.Cb){if(Z.Bb=Ce(Y),Ce(Y)){for(Z.Fb=Ce(Y),ne=0;4>ne;++ne)Z.Zb[ne]=Ce(Y)?ie(Y,7):0;for(ne=0;4>ne;++ne)Z.Lb[ne]=Ce(Y)?ie(Y,6):0}if(Z.Bb)for(ne=0;3>ne;++ne)ae.jb[ne]=Ce(Y)?se(Y,8):255}else Z.Bb=0;if(Y.Ka)return vr(p,3,"cannot parse segment header");if((Z=p.ed).zd=Ce(Y),Z.Tb=se(Y,6),Z.wb=se(Y,3),Z.Pc=Ce(Y),Z.Pc&&Ce(Y)){for(ae=0;4>ae;++ae)Ce(Y)&&(Z.vd[ae]=ie(Y,6));for(ae=0;4>ae;++ae)Ce(Y)&&(Z.od[ae]=ie(Y,6))}if(p.L=Z.Tb==0?0:Z.zd?1:2,Y.Ka)return vr(p,3,"cannot parse filter header");var ve=K;if(K=ne=O,O=ne+ve,Z=ve,p.Xb=(1<<se(p.m,2))-1,ve<3*(ae=p.Xb))E=7;else{for(ne+=3*ae,Z-=3*ae,ve=0;ve<ae;++ve){var Ee=E[K+0]|E[K+1]<<8|E[K+2]<<16;Ee>Z&&(Ee=Z),oe(p.Jc[+ve],E,ne,Ee),ne+=Ee,Z-=Ee,K+=3}oe(p.Jc[+ae],E,ne,Z),E=ne<O?0:5}if(E!=0)return vr(p,E,"cannot parse partitions");for(E=se(ne=p.m,7),K=Ce(ne)?ie(ne,4):0,O=Ce(ne)?ie(ne,4):0,Z=Ce(ne)?ie(ne,4):0,ae=Ce(ne)?ie(ne,4):0,ne=Ce(ne)?ie(ne,4):0,ve=p.Qa,Ee=0;4>Ee;++Ee){if(ve.Cb){var le=ve.Zb[Ee];ve.Fb||(le+=E)}else{if(0<Ee){p.pb[Ee]=p.pb[0];continue}le=E}var Se=p.pb[Ee];Se.Sc[0]=jl[an(le+K,127)],Se.Sc[1]=Tc[an(le+0,127)],Se.Eb[0]=2*jl[an(le+O,127)],Se.Eb[1]=101581*Tc[an(le+Z,127)]>>16,8>Se.Eb[1]&&(Se.Eb[1]=8),Se.Qc[0]=jl[an(le+ae,117)],Se.Qc[1]=Tc[an(le+ne,127)],Se.lc=le+ne}if(!Q.Rb)return vr(p,4,"Not a key frame.");for(Ce(Y),Q=p.Pa,E=0;4>E;++E){for(K=0;8>K;++K)for(O=0;3>O;++O)for(Z=0;11>Z;++Z)ae=Be(Y,$p[E][K][O][Z])?se(Y,8):Lh[E][K][O][Z],Q.Wc[E][K].Yb[O][Z]=ae;for(K=0;17>K;++K)Q.Xc[E][K]=Q.Wc[E][_d[K]]}return p.kc=Ce(Y),p.kc&&(p.Bd=se(Y,8)),p.cb=1}function hi(p,x,E,O,K,Y,Q){var Z=x[K].Yb[E];for(E=0;16>K;++K){if(!Be(p,Z[E+0]))return K;for(;!Be(p,Z[E+1]);)if(Z=x[++K].Yb[0],E=0,K==16)return 16;var ne=x[K+1].Yb;if(Be(p,Z[E+2])){var ae=p,ve=0;if(Be(ae,(le=Z)[(Ee=E)+3]))if(Be(ae,le[Ee+6])){for(Z=0,Ee=2*(ve=Be(ae,le[Ee+8]))+(le=Be(ae,le[Ee+9+ve])),ve=0,le=wd[Ee];le[Z];++Z)ve+=ve+Be(ae,le[Z]);ve+=3+(8<<Ee)}else Be(ae,le[Ee+7])?(ve=7+2*Be(ae,165),ve+=Be(ae,145)):ve=5+Be(ae,159);else ve=Be(ae,le[Ee+4])?3+Be(ae,le[Ee+5]):2;Z=ne[2]}else ve=1,Z=ne[1];ne=Q+Sd[K],0>(ae=p).b&&Ae(ae);var Ee,le=ae.b,Se=(Ee=ae.Ca>>1)-(ae.I>>le)>>31;--ae.b,ae.Ca+=Se,ae.Ca|=1,ae.I-=(Ee+1&Se)<<le,Y[ne]=((ve^Se)-Se)*O[(0<K)+0]}return 16}function sr(p){var x=p.rb[p.sb-1];x.la=0,x.Na=0,o(p.zc,0,0,p.zc.length),p.ja=0}function Ln(p,x,E,O,K){K=p[x+E+32*O]+(K>>3),p[x+E+32*O]=-256&K?0>K?0:255:K}function fo(p,x,E,O,K,Y){Ln(p,x,0,E,O+K),Ln(p,x,1,E,O+Y),Ln(p,x,2,E,O-Y),Ln(p,x,3,E,O-K)}function zr(p){return(20091*p>>16)+p}function Ns(p,x,E,O){var K,Y=0,Q=a(16);for(K=0;4>K;++K){var Z=p[x+0]+p[x+8],ne=p[x+0]-p[x+8],ae=(35468*p[x+4]>>16)-zr(p[x+12]),ve=zr(p[x+4])+(35468*p[x+12]>>16);Q[Y+0]=Z+ve,Q[Y+1]=ne+ae,Q[Y+2]=ne-ae,Q[Y+3]=Z-ve,Y+=4,x++}for(K=Y=0;4>K;++K)Z=(p=Q[Y+0]+4)+Q[Y+8],ne=p-Q[Y+8],ae=(35468*Q[Y+4]>>16)-zr(Q[Y+12]),Ln(E,O,0,0,Z+(ve=zr(Q[Y+4])+(35468*Q[Y+12]>>16))),Ln(E,O,1,0,ne+ae),Ln(E,O,2,0,ne-ae),Ln(E,O,3,0,Z-ve),Y++,O+=32}function Oa(p,x,E,O){var K=p[x+0]+4,Y=35468*p[x+4]>>16,Q=zr(p[x+4]),Z=35468*p[x+1]>>16;fo(E,O,0,K+Q,p=zr(p[x+1]),Z),fo(E,O,1,K+Y,p,Z),fo(E,O,2,K-Y,p,Z),fo(E,O,3,K-Q,p,Z)}function Va(p,x,E,O,K){Ns(p,x,E,O),K&&Ns(p,x+16,E,O+4)}function Ls(p,x,E,O){Ka(p,x+0,E,O,1),Ka(p,x+32,E,O+128,1)}function Co(p,x,E,O){var K;for(p=p[x+0]+4,K=0;4>K;++K)for(x=0;4>x;++x)Ln(E,O,x,K,p)}function la(p,x,E,O){p[x+0]&&br(p,x+0,E,O),p[x+16]&&br(p,x+16,E,O+4),p[x+32]&&br(p,x+32,E,O+128),p[x+48]&&br(p,x+48,E,O+128+4)}function nr(p,x,E,O){var K,Y=a(16);for(K=0;4>K;++K){var Q=p[x+0+K]+p[x+12+K],Z=p[x+4+K]+p[x+8+K],ne=p[x+4+K]-p[x+8+K],ae=p[x+0+K]-p[x+12+K];Y[0+K]=Q+Z,Y[8+K]=Q-Z,Y[4+K]=ae+ne,Y[12+K]=ae-ne}for(K=0;4>K;++K)Q=(p=Y[0+4*K]+3)+Y[3+4*K],Z=Y[1+4*K]+Y[2+4*K],ne=Y[1+4*K]-Y[2+4*K],ae=p-Y[3+4*K],E[O+0]=Q+Z>>3,E[O+16]=ae+ne>>3,E[O+32]=Q-Z>>3,E[O+48]=ae-ne>>3,O+=64}function ri(p,x,E){var O,K=x-32,Y=Li,Q=255-p[K-1];for(O=0;O<E;++O){var Z,ne=Y,ae=Q+p[x-1];for(Z=0;Z<E;++Z)p[x+Z]=ne[ae+p[K+Z]];x+=32}}function Bs(p,x){ri(p,x,4)}function ca(p,x){ri(p,x,8)}function Ma(p,x){ri(p,x,16)}function Da(p,x){var E;for(E=0;16>E;++E)n(p,x+32*E,p,x-32,16)}function Fs(p,x){var E;for(E=16;0<E;--E)o(p,x,p[x-1],16),x+=32}function fi(p,x,E){var O;for(O=0;16>O;++O)o(x,E+32*O,p,16)}function po(p,x){var E,O=16;for(E=0;16>E;++E)O+=p[x-1+32*E]+p[x+E-32];fi(O>>5,p,x)}function ko(p,x){var E,O=8;for(E=0;16>E;++E)O+=p[x-1+32*E];fi(O>>4,p,x)}function pi(p,x){var E,O=8;for(E=0;16>E;++E)O+=p[x+E-32];fi(O>>4,p,x)}function gn(p,x){fi(128,p,x)}function It(p,x,E){return p+2*x+E+2>>2}function Go(p,x){var E,O=x-32;for(O=new Uint8Array([It(p[O-1],p[O+0],p[O+1]),It(p[O+0],p[O+1],p[O+2]),It(p[O+1],p[O+2],p[O+3]),It(p[O+2],p[O+3],p[O+4])]),E=0;4>E;++E)n(p,x+32*E,O,0,O.length)}function Ri(p,x){var E=p[x-1],O=p[x-1+32],K=p[x-1+64],Y=p[x-1+96];qe(p,x+0,16843009*It(p[x-1-32],E,O)),qe(p,x+32,16843009*It(E,O,K)),qe(p,x+64,16843009*It(O,K,Y)),qe(p,x+96,16843009*It(K,Y,Y))}function vl(p,x){var E,O=4;for(E=0;4>E;++E)O+=p[x+E-32]+p[x-1+32*E];for(O>>=3,E=0;4>E;++E)o(p,x+32*E,O,4)}function ps(p,x){var E=p[x-1+0],O=p[x-1+32],K=p[x-1+64],Y=p[x-1-32],Q=p[x+0-32],Z=p[x+1-32],ne=p[x+2-32],ae=p[x+3-32];p[x+0+96]=It(O,K,p[x-1+96]),p[x+1+96]=p[x+0+64]=It(E,O,K),p[x+2+96]=p[x+1+64]=p[x+0+32]=It(Y,E,O),p[x+3+96]=p[x+2+64]=p[x+1+32]=p[x+0+0]=It(Q,Y,E),p[x+3+64]=p[x+2+32]=p[x+1+0]=It(Z,Q,Y),p[x+3+32]=p[x+2+0]=It(ne,Z,Q),p[x+3+0]=It(ae,ne,Z)}function Bn(p,x){var E=p[x+1-32],O=p[x+2-32],K=p[x+3-32],Y=p[x+4-32],Q=p[x+5-32],Z=p[x+6-32],ne=p[x+7-32];p[x+0+0]=It(p[x+0-32],E,O),p[x+1+0]=p[x+0+32]=It(E,O,K),p[x+2+0]=p[x+1+32]=p[x+0+64]=It(O,K,Y),p[x+3+0]=p[x+2+32]=p[x+1+64]=p[x+0+96]=It(K,Y,Q),p[x+3+32]=p[x+2+64]=p[x+1+96]=It(Y,Q,Z),p[x+3+64]=p[x+2+96]=It(Q,Z,ne),p[x+3+96]=It(Z,ne,ne)}function jo(p,x){var E=p[x-1+0],O=p[x-1+32],K=p[x-1+64],Y=p[x-1-32],Q=p[x+0-32],Z=p[x+1-32],ne=p[x+2-32],ae=p[x+3-32];p[x+0+0]=p[x+1+64]=Y+Q+1>>1,p[x+1+0]=p[x+2+64]=Q+Z+1>>1,p[x+2+0]=p[x+3+64]=Z+ne+1>>1,p[x+3+0]=ne+ae+1>>1,p[x+0+96]=It(K,O,E),p[x+0+64]=It(O,E,Y),p[x+0+32]=p[x+1+96]=It(E,Y,Q),p[x+1+32]=p[x+2+96]=It(Y,Q,Z),p[x+2+32]=p[x+3+96]=It(Q,Z,ne),p[x+3+32]=It(Z,ne,ae)}function ua(p,x){var E=p[x+0-32],O=p[x+1-32],K=p[x+2-32],Y=p[x+3-32],Q=p[x+4-32],Z=p[x+5-32],ne=p[x+6-32],ae=p[x+7-32];p[x+0+0]=E+O+1>>1,p[x+1+0]=p[x+0+64]=O+K+1>>1,p[x+2+0]=p[x+1+64]=K+Y+1>>1,p[x+3+0]=p[x+2+64]=Y+Q+1>>1,p[x+0+32]=It(E,O,K),p[x+1+32]=p[x+0+96]=It(O,K,Y),p[x+2+32]=p[x+1+96]=It(K,Y,Q),p[x+3+32]=p[x+2+96]=It(Y,Q,Z),p[x+3+64]=It(Q,Z,ne),p[x+3+96]=It(Z,ne,ae)}function Er(p,x){var E=p[x-1+0],O=p[x-1+32],K=p[x-1+64],Y=p[x-1+96];p[x+0+0]=E+O+1>>1,p[x+2+0]=p[x+0+32]=O+K+1>>1,p[x+2+32]=p[x+0+64]=K+Y+1>>1,p[x+1+0]=It(E,O,K),p[x+3+0]=p[x+1+32]=It(O,K,Y),p[x+3+32]=p[x+1+64]=It(K,Y,Y),p[x+3+64]=p[x+2+64]=p[x+0+96]=p[x+1+96]=p[x+2+96]=p[x+3+96]=Y}function zs(p,x){var E=p[x-1+0],O=p[x-1+32],K=p[x-1+64],Y=p[x-1+96],Q=p[x-1-32],Z=p[x+0-32],ne=p[x+1-32],ae=p[x+2-32];p[x+0+0]=p[x+2+32]=E+Q+1>>1,p[x+0+32]=p[x+2+64]=O+E+1>>1,p[x+0+64]=p[x+2+96]=K+O+1>>1,p[x+0+96]=Y+K+1>>1,p[x+3+0]=It(Z,ne,ae),p[x+2+0]=It(Q,Z,ne),p[x+1+0]=p[x+3+32]=It(E,Q,Z),p[x+1+32]=p[x+3+64]=It(O,E,Q),p[x+1+64]=p[x+3+96]=It(K,O,E),p[x+1+96]=It(Y,K,O)}function Wa(p,x){var E;for(E=0;8>E;++E)n(p,x+32*E,p,x-32,8)}function Ui(p,x){var E;for(E=0;8>E;++E)o(p,x,p[x-1],8),x+=32}function mo(p,x,E){var O;for(O=0;8>O;++O)o(x,E+32*O,p,8)}function qi(p,x){var E,O=8;for(E=0;8>E;++E)O+=p[x+E-32]+p[x-1+32*E];mo(O>>4,p,x)}function Ko(p,x){var E,O=4;for(E=0;8>E;++E)O+=p[x+E-32];mo(O>>3,p,x)}function Hi(p,x){var E,O=4;for(E=0;8>E;++E)O+=p[x-1+32*E];mo(O>>3,p,x)}function da(p,x){mo(128,p,x)}function Jo(p,x,E){var O=p[x-E],K=p[x+0],Y=3*(K-O)+ws[1020+p[x-2*E]-p[x+E]],Q=Cl[112+(Y+4>>3)];p[x-E]=Li[255+O+Cl[112+(Y+3>>3)]],p[x+0]=Li[255+K-Q]}function mi(p,x,E,O){var K=p[x+0],Y=p[x+E];return No[255+p[x-2*E]-p[x-E]]>O||No[255+Y-K]>O}function ms(p,x,E,O){return 4*No[255+p[x-E]-p[x+0]]+No[255+p[x-2*E]-p[x+E]]<=O}function Yo(p,x,E,O,K){var Y=p[x-3*E],Q=p[x-2*E],Z=p[x-E],ne=p[x+0],ae=p[x+E],ve=p[x+2*E],Ee=p[x+3*E];return 4*No[255+Z-ne]+No[255+Q-ae]>O?0:No[255+p[x-4*E]-Y]<=K&&No[255+Y-Q]<=K&&No[255+Q-Z]<=K&&No[255+Ee-ve]<=K&&No[255+ve-ae]<=K&&No[255+ae-ne]<=K}function ni(p,x,E,O){var K=2*O+1;for(O=0;16>O;++O)ms(p,x+O,E,K)&&Jo(p,x+O,E)}function Eo(p,x,E,O){var K=2*O+1;for(O=0;16>O;++O)ms(p,x+O*E,1,K)&&Jo(p,x+O*E,1)}function Io(p,x,E,O){var K;for(K=3;0<K;--K)ni(p,x+=4*E,E,O)}function $a(p,x,E,O){var K;for(K=3;0<K;--K)Eo(p,x+=4,E,O)}function Pi(p,x,E,O,K,Y,Q,Z){for(Y=2*Y+1;0<K--;){if(Yo(p,x,E,Y,Q))if(mi(p,x,E,Z))Jo(p,x,E);else{var ne=p,ae=x,ve=E,Ee=ne[ae-2*ve],le=ne[ae-ve],Se=ne[ae+0],je=ne[ae+ve],Ve=ne[ae+2*ve],Re=27*(Oe=ws[1020+3*(Se-le)+ws[1020+Ee-je]])+63>>7,ze=18*Oe+63>>7,Oe=9*Oe+63>>7;ne[ae-3*ve]=Li[255+ne[ae-3*ve]+Oe],ne[ae-2*ve]=Li[255+Ee+ze],ne[ae-ve]=Li[255+le+Re],ne[ae+0]=Li[255+Se-Re],ne[ae+ve]=Li[255+je-ze],ne[ae+2*ve]=Li[255+Ve-Oe]}x+=O}}function Gn(p,x,E,O,K,Y,Q,Z){for(Y=2*Y+1;0<K--;){if(Yo(p,x,E,Y,Q))if(mi(p,x,E,Z))Jo(p,x,E);else{var ne=p,ae=x,ve=E,Ee=ne[ae-ve],le=ne[ae+0],Se=ne[ae+ve],je=Cl[112+(4+(Ve=3*(le-Ee))>>3)],Ve=Cl[112+(Ve+3>>3)],Re=je+1>>1;ne[ae-2*ve]=Li[255+ne[ae-2*ve]+Re],ne[ae-ve]=Li[255+Ee+Ve],ne[ae+0]=Li[255+le-je],ne[ae+ve]=Li[255+Se-Re]}x+=O}}function ha(p,x,E,O,K,Y){Pi(p,x,E,1,16,O,K,Y)}function Fn(p,x,E,O,K,Y){Pi(p,x,1,E,16,O,K,Y)}function gi(p,x,E,O,K,Y){var Q;for(Q=3;0<Q;--Q)Gn(p,x+=4*E,E,1,16,O,K,Y)}function gs(p,x,E,O,K,Y){var Q;for(Q=3;0<Q;--Q)Gn(p,x+=4,1,E,16,O,K,Y)}function S(p,x,E,O,K,Y,Q,Z){Pi(p,x,K,1,8,Y,Q,Z),Pi(E,O,K,1,8,Y,Q,Z)}function G(p,x,E,O,K,Y,Q,Z){Pi(p,x,1,K,8,Y,Q,Z),Pi(E,O,1,K,8,Y,Q,Z)}function ue(p,x,E,O,K,Y,Q,Z){Gn(p,x+4*K,K,1,8,Y,Q,Z),Gn(E,O+4*K,K,1,8,Y,Q,Z)}function ge(p,x,E,O,K,Y,Q,Z){Gn(p,x+4,1,K,8,Y,Q,Z),Gn(E,O+4,1,K,8,Y,Q,Z)}function Te(){this.ba=new Mt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new or,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Me(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function He(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function st(){this.ua=0,this.Wa=new Ct,this.vb=new Ct,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new $,this.yc=new L}function pt(){this.xb=this.a=0,this.l=new Hn,this.ca=new Mt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new q,this.Pb=0,this.wd=new q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new st,this.ab=0,this.gc=c(4,He),this.Oc=0}function Rt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Hn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function yt(p,x,E,O,K,Y,Q){for(p=p==null?0:p[x+0],x=0;x<Q;++x)K[Y+x]=p+E[O+x]&255,p=K[Y+x]}function fr(p,x,E,O,K,Y,Q){var Z;if(p==null)yt(null,null,E,O,K,Y,Q);else for(Z=0;Z<Q;++Z)K[Y+Z]=p[x+Z]+E[O+Z]&255}function Hr(p,x,E,O,K,Y,Q){if(p==null)yt(null,null,E,O,K,Y,Q);else{var Z,ne=p[x+0],ae=ne,ve=ne;for(Z=0;Z<Q;++Z)ae=ve+(ne=p[x+Z])-ae,ve=E[O+Z]+(-256&ae?0>ae?0:255:ae)&255,ae=ne,K[Y+Z]=ve}}function Or(p,x,E,O){var K=x.width,Y=x.o;if(e(p!=null&&x!=null),0>E||0>=O||E+O>Y)return null;if(!p.Cc){if(p.ga==null){var Q;if(p.ga=new Rt,(Q=p.ga==null)||(Q=x.width*x.o,e(p.Gb.length==0),p.Gb=a(Q),p.Uc=0,p.Gb==null?Q=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,Q=1),Q=!Q),!Q){Q=p.ga;var Z=p.Fa,ne=p.P,ae=p.qc,ve=p.mb,Ee=p.nb,le=ne+1,Se=ae-1,je=Q.l;if(e(Z!=null&&ve!=null&&x!=null),xi[0]=null,xi[1]=yt,xi[2]=fr,xi[3]=Hr,Q.ca=ve,Q.tb=Ee,Q.c=x.width,Q.i=x.height,e(0<Q.c&&0<Q.i),1>=ae)x=0;else if(Q.$a=3&Z[ne+0],Q.Z=Z[ne+0]>>2&3,Q.Lc=Z[ne+0]>>4&3,ne=Z[ne+0]>>6&3,0>Q.$a||1<Q.$a||4<=Q.Z||1<Q.Lc||ne)x=0;else if(je.put=jt,je.ac=Pn,je.bc=ki,je.ma=Q,je.width=x.width,je.height=x.height,je.Da=x.Da,je.v=x.v,je.va=x.va,je.j=x.j,je.o=x.o,Q.$a)e:{e(Q.$a==1),x=cs();t:for(;;){if(x==null){x=0;break e}if(e(Q!=null),Q.mc=x,x.c=Q.c,x.i=Q.i,x.l=Q.l,x.l.ma=Q,x.l.width=Q.c,x.l.height=Q.i,x.a=0,ye(x.m,Z,le,Se),!co(Q.c,Q.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&Wi(x.s)?(Q.ic=1,Z=x.c*x.i,x.Ta=null,x.Ua=0,x.V=a(Z),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(Q.ic=0,x=uo(x,Q.c)),!x))break t;x=1;break e}Q.mc=null,x=0}else x=Se>=Q.c*Q.i;Q=!x}if(Q)return null;p.ga.Lc!=1?p.Ga=0:O=Y-E}e(p.ga!=null),e(E+O<=Y);e:{if(x=(Z=p.ga).c,Y=Z.l.o,Z.$a==0){if(le=p.rc,Se=p.Vc,je=p.Fa,ne=p.P+1+E*x,ae=p.mb,ve=p.nb+E*x,e(ne<=p.P+p.qc),Z.Z!=0)for(e(xi[Z.Z]!=null),Q=0;Q<O;++Q)xi[Z.Z](le,Se,je,ne,ae,ve,x),le=ae,Se=ve,ve+=x,ne+=x;else for(Q=0;Q<O;++Q)n(ae,ve,je,ne,x),le=ae,Se=ve,ve+=x,ne+=x;p.rc=le,p.Vc=Se}else{if(e(Z.mc!=null),x=E+O,e((Q=Z.mc)!=null),e(x<=Q.i),Q.C>=x)x=1;else if(Z.ic||ke(),Z.ic){Z=Q.V,le=Q.Ba,Se=Q.c;var Ve=Q.i,Re=(je=1,ne=Q.$/Se,ae=Q.$%Se,ve=Q.m,Ee=Q.s,Q.$),ze=Se*Ve,Oe=Se*x,De=Ee.wc,We=Re<Oe?sn(Ee,ae,ne):null;e(Re<=ze),e(x<=Ve),e(Wi(Ee));t:for(;;){for(;!ve.h&&Re<Oe;){if(ae&De||(We=sn(Ee,ae,ne)),e(We!=null),we(ve),256>(Ve=Tr(We.G[0],We.H[0],ve)))Z[le+Re]=Ve,++Re,++ae>=Se&&(ae=0,++ne<=x&&!(ne%16)&&mn(Q,ne));else{if(!(280>Ve)){je=0;break t}Ve=Nn(Ve-256,ve);var bt,at=Tr(We.G[4],We.H[4],ve);if(we(ve),!(Re>=(at=ji(Se,at=Nn(at,ve)))&&ze-Re>=Ve)){je=0;break t}for(bt=0;bt<Ve;++bt)Z[le+Re+bt]=Z[le+Re+bt-at];for(Re+=Ve,ae+=Ve;ae>=Se;)ae-=Se,++ne<=x&&!(ne%16)&&mn(Q,ne);Re<Oe&&ae&De&&(We=sn(Ee,ae,ne))}e(ve.h==de(ve))}mn(Q,ne>x?x:ne);break t}!je||ve.h&&Re<ze?(je=0,Q.a=ve.h?5:3):Q.$=Re,x=je}else x=Ei(Q,Q.V,Q.Ba,Q.c,Q.i,x,us);if(!x){O=0;break e}}E+O>=Y&&(p.Cc=1),O=1}if(!O)return null;if(p.Cc&&((O=p.ga)!=null&&(O.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+E*K}function m(p,x,E,O,K,Y){for(;0<K--;){var Q,Z=p,ne=x+(E?1:0),ae=p,ve=x+(E?0:3);for(Q=0;Q<O;++Q){var Ee=ae[ve+4*Q];Ee!=255&&(Ee*=32897,Z[ne+4*Q+0]=Z[ne+4*Q+0]*Ee>>23,Z[ne+4*Q+1]=Z[ne+4*Q+1]*Ee>>23,Z[ne+4*Q+2]=Z[ne+4*Q+2]*Ee>>23)}x+=Y}}function I(p,x,E,O,K){for(;0<O--;){var Y;for(Y=0;Y<E;++Y){var Q=p[x+2*Y+0],Z=15&(ae=p[x+2*Y+1]),ne=4369*Z,ae=(240&ae|ae>>4)*ne>>16;p[x+2*Y+0]=(240&Q|Q>>4)*ne>>16&240|(15&Q|Q<<4)*ne>>16>>4&15,p[x+2*Y+1]=240&ae|Z}x+=K}}function W(p,x,E,O,K,Y,Q,Z){var ne,ae,ve=255;for(ae=0;ae<K;++ae){for(ne=0;ne<O;++ne){var Ee=p[x+ne];Y[Q+4*ne]=Ee,ve&=Ee}x+=E,Q+=Z}return ve!=255}function te(p,x,E,O,K){var Y;for(Y=0;Y<K;++Y)E[O+Y]=p[x+Y]>>8}function ke(){Ya=m,pd=I,xc=W,md=te}function Pe(p,x,E){T[p]=function(O,K,Y,Q,Z,ne,ae,ve,Ee,le,Se,je,Ve,Re,ze,Oe,De){var We,bt=De-1>>1,at=Z[ne+0]|ae[ve+0]<<16,Yt=Ee[le+0]|Se[je+0]<<16;e(O!=null);var ht=3*at+Yt+131074>>2;for(x(O[K+0],255&ht,ht>>16,Ve,Re),Y!=null&&(ht=3*Yt+at+131074>>2,x(Y[Q+0],255&ht,ht>>16,ze,Oe)),We=1;We<=bt;++We){var cr=Z[ne+We]|ae[ve+We]<<16,un=Ee[le+We]|Se[je+We]<<16,Zt=at+cr+Yt+un+524296,lt=Zt+2*(cr+Yt)>>3;ht=lt+at>>1,at=(Zt=Zt+2*(at+un)>>3)+cr>>1,x(O[K+2*We-1],255&ht,ht>>16,Ve,Re+(2*We-1)*E),x(O[K+2*We-0],255&at,at>>16,Ve,Re+(2*We-0)*E),Y!=null&&(ht=Zt+Yt>>1,at=lt+un>>1,x(Y[Q+2*We-1],255&ht,ht>>16,ze,Oe+(2*We-1)*E),x(Y[Q+2*We+0],255&at,at>>16,ze,Oe+(2*We+0)*E)),at=cr,Yt=un}1&De||(ht=3*at+Yt+131074>>2,x(O[K+De-1],255&ht,ht>>16,Ve,Re+(De-1)*E),Y!=null&&(ht=3*Yt+at+131074>>2,x(Y[Q+De-1],255&ht,ht>>16,ze,Oe+(De-1)*E)))}}function Ze(){Ji[lu]=Up,Ji[xa]=va,Ji[Ih]=qp,Ji[vc]=Il,Ji[bc]=el,Ji[Mr]=Ac,Ji[cu]=Td,Ji[kl]=va,Ji[Qa]=Il,Ji[wc]=el,Ji[Sc]=Ac}function Ot(p){return p&-16384?0>p?0:255:p>>ba}function Vr(p,x){return Ot((19077*p>>8)+(26149*x>>8)-14234)}function lr(p,x,E){return Ot((19077*p>>8)-(6419*x>>8)-(13320*E>>8)+8708)}function Gr(p,x){return Ot((19077*p>>8)+(33050*x>>8)-17685)}function zn(p,x,E,O,K){O[K+0]=Vr(p,E),O[K+1]=lr(p,x,E),O[K+2]=Gr(p,x)}function Ni(p,x,E,O,K){O[K+0]=Gr(p,x),O[K+1]=lr(p,x,E),O[K+2]=Vr(p,E)}function Jr(p,x,E,O,K){var Y=lr(p,x,E);x=Y<<3&224|Gr(p,x)>>3,O[K+0]=248&Vr(p,E)|Y>>5,O[K+1]=x}function yi(p,x,E,O,K){var Y=240&Gr(p,x)|15;O[K+0]=240&Vr(p,E)|lr(p,x,E)>>4,O[K+1]=Y}function Ro(p,x,E,O,K){O[K+0]=255,zn(p,x,E,O,K+1)}function Os(p,x,E,O,K){Ni(p,x,E,O,K),O[K+3]=255}function mc(p,x,E,O,K){zn(p,x,E,O,K),O[K+3]=255}function an(p,x){return 0>p?0:p>x?x:p}function Qo(p,x,E){T[p]=function(O,K,Y,Q,Z,ne,ae,ve,Ee){for(var le=ve+(-2&Ee)*E;ve!=le;)x(O[K+0],Y[Q+0],Z[ne+0],ae,ve),x(O[K+1],Y[Q+0],Z[ne+0],ae,ve+E),K+=2,++Q,++ne,ve+=2*E;1&Ee&&x(O[K+0],Y[Q+0],Z[ne+0],ae,ve)}}function ys(p,x,E){return E==0?p==0?x==0?6:5:x==0?4:0:E}function ou(p,x,E,O,K){switch(p>>>30){case 3:Ka(x,E,O,K,0);break;case 2:ln(x,E,O,K);break;case 1:br(x,E,O,K)}}function go(p,x){var E,O,K=x.M,Y=x.Nb,Q=p.oc,Z=p.pc+40,ne=p.oc,ae=p.pc+584,ve=p.oc,Ee=p.pc+600;for(E=0;16>E;++E)Q[Z+32*E-1]=129;for(E=0;8>E;++E)ne[ae+32*E-1]=129,ve[Ee+32*E-1]=129;for(0<K?Q[Z-1-32]=ne[ae-1-32]=ve[Ee-1-32]=129:(o(Q,Z-32-1,127,21),o(ne,ae-32-1,127,9),o(ve,Ee-32-1,127,9)),O=0;O<p.za;++O){var le=x.ya[x.aa+O];if(0<O){for(E=-1;16>E;++E)n(Q,Z+32*E-4,Q,Z+32*E+12,4);for(E=-1;8>E;++E)n(ne,ae+32*E-4,ne,ae+32*E+4,4),n(ve,Ee+32*E-4,ve,Ee+32*E+4,4)}var Se=p.Gd,je=p.Hd+O,Ve=le.ad,Re=le.Hc;if(0<K&&(n(Q,Z-32,Se[je].y,0,16),n(ne,ae-32,Se[je].f,0,8),n(ve,Ee-32,Se[je].ea,0,8)),le.Za){var ze=Q,Oe=Z-32+16;for(0<K&&(O>=p.za-1?o(ze,Oe,Se[je].y[15],4):n(ze,Oe,Se[je+1].y,0,4)),E=0;4>E;E++)ze[Oe+128+E]=ze[Oe+256+E]=ze[Oe+384+E]=ze[Oe+0+E];for(E=0;16>E;++E,Re<<=2)ze=Q,Oe=Z+Ad[E],Lo[le.Ob[E]](ze,Oe),ou(Re,Ve,16*+E,ze,Oe)}else if(ze=ys(O,K,le.Ob[0]),Bi[ze](Q,Z),Re!=0)for(E=0;16>E;++E,Re<<=2)ou(Re,Ve,16*+E,Q,Z+Ad[E]);for(E=le.Gc,ze=ys(O,K,le.Dd),Ki[ze](ne,ae),Ki[ze](ve,Ee),Re=Ve,ze=ne,Oe=ae,255&(le=0|E)&&(170&le?Gi(Re,256,ze,Oe):Rr(Re,256,ze,Oe)),le=ve,Re=Ee,255&(E>>=8)&&(170&E?Gi(Ve,320,le,Re):Rr(Ve,320,le,Re)),K<p.Ub-1&&(n(Se[je].y,0,Q,Z+480,16),n(Se[je].f,0,ne,ae+224,8),n(Se[je].ea,0,ve,Ee+224,8)),E=8*Y*p.B,Se=p.sa,je=p.ta+16*O+16*Y*p.R,Ve=p.qa,le=p.ra+8*O+E,Re=p.Ha,ze=p.Ia+8*O+E,E=0;16>E;++E)n(Se,je+E*p.R,Q,Z+32*E,16);for(E=0;8>E;++E)n(Ve,le+E*p.B,ne,ae+32*E,8),n(Re,ze+E*p.B,ve,Ee+32*E,8)}}function fa(p,x,E,O,K,Y,Q,Z,ne){var ae=[0],ve=[0],Ee=0,le=ne!=null?ne.kd:0,Se=ne??new Me;if(p==null||12>E)return 7;Se.data=p,Se.w=x,Se.ha=E,x=[x],E=[E],Se.gb=[Se.gb];e:{var je=x,Ve=E,Re=Se.gb;if(e(p!=null),e(Ve!=null),e(Re!=null),Re[0]=0,12<=Ve[0]&&!t(p,je[0],"RIFF")){if(t(p,je[0]+8,"WEBP")){Re=3;break e}var ze=Fe(p,je[0]+4);if(12>ze||4294967286<ze){Re=3;break e}if(le&&ze>Ve[0]-8){Re=7;break e}Re[0]=ze,je[0]+=12,Ve[0]-=12}Re=0}if(Re!=0)return Re;for(ze=0<Se.gb[0],E=E[0];;){e:{var Oe=p;Ve=x,Re=E;var De=ae,We=ve,bt=je=[0];if((ht=Ee=[Ee])[0]=0,8>Re[0])Re=7;else{if(!t(Oe,Ve[0],"VP8X")){if(Fe(Oe,Ve[0]+4)!=10){Re=3;break e}if(18>Re[0]){Re=7;break e}var at=Fe(Oe,Ve[0]+8),Yt=1+Qe(Oe,Ve[0]+12);if(2147483648<=Yt*(Oe=1+Qe(Oe,Ve[0]+15))){Re=3;break e}bt!=null&&(bt[0]=at),De!=null&&(De[0]=Yt),We!=null&&(We[0]=Oe),Ve[0]+=18,Re[0]-=18,ht[0]=1}Re=0}}if(Ee=Ee[0],je=je[0],Re!=0)return Re;if(Ve=!!(2&je),!ze&&Ee)return 3;if(Y!=null&&(Y[0]=!!(16&je)),Q!=null&&(Q[0]=Ve),Z!=null&&(Z[0]=0),Q=ae[0],je=ve[0],Ee&&Ve&&ne==null){Re=0;break}if(4>E){Re=7;break}if(ze&&Ee||!ze&&!Ee&&!t(p,x[0],"ALPH")){E=[E],Se.na=[Se.na],Se.P=[Se.P],Se.Sa=[Se.Sa];e:{at=p,Re=x,ze=E;var ht=Se.gb;De=Se.na,We=Se.P,bt=Se.Sa,Yt=22,e(at!=null),e(ze!=null),Oe=Re[0];var cr=ze[0];for(e(De!=null),e(bt!=null),De[0]=null,We[0]=null,bt[0]=0;;){if(Re[0]=Oe,ze[0]=cr,8>cr){Re=7;break e}var un=Fe(at,Oe+4);if(4294967286<un){Re=3;break e}var Zt=8+un+1&-2;if(Yt+=Zt,0<ht&&Yt>ht){Re=3;break e}if(!t(at,Oe,"VP8 ")||!t(at,Oe,"VP8L")){Re=0;break e}if(cr[0]<Zt){Re=7;break e}t(at,Oe,"ALPH")||(De[0]=at,We[0]=Oe+8,bt[0]=un),Oe+=Zt,cr-=Zt}}if(E=E[0],Se.na=Se.na[0],Se.P=Se.P[0],Se.Sa=Se.Sa[0],Re!=0)break}E=[E],Se.Ja=[Se.Ja],Se.xa=[Se.xa];e:if(ht=p,Re=x,ze=E,De=Se.gb[0],We=Se.Ja,bt=Se.xa,at=Re[0],Oe=!t(ht,at,"VP8 "),Yt=!t(ht,at,"VP8L"),e(ht!=null),e(ze!=null),e(We!=null),e(bt!=null),8>ze[0])Re=7;else{if(Oe||Yt){if(ht=Fe(ht,at+4),12<=De&&ht>De-12){Re=3;break e}if(le&&ht>ze[0]-8){Re=7;break e}We[0]=ht,Re[0]+=8,ze[0]-=8,bt[0]=Yt}else bt[0]=5<=ze[0]&&ht[at+0]==47&&!(ht[at+4]>>5),We[0]=ze[0];Re=0}if(E=E[0],Se.Ja=Se.Ja[0],Se.xa=Se.xa[0],x=x[0],Re!=0)break;if(4294967286<Se.Ja)return 3;if(Z==null||Ve||(Z[0]=Se.xa?2:1),Q=[Q],je=[je],Se.xa){if(5>E){Re=7;break}Z=Q,le=je,Ve=Y,p==null||5>E?p=0:5<=E&&p[x+0]==47&&!(p[x+4]>>5)?(ze=[0],ht=[0],De=[0],ye(We=new q,p,x,E),ci(We,ze,ht,De)?(Z!=null&&(Z[0]=ze[0]),le!=null&&(le[0]=ht[0]),Ve!=null&&(Ve[0]=De[0]),p=1):p=0):p=0}else{if(10>E){Re=7;break}Z=je,p==null||10>E||!fs(p,x+3,E-3)?p=0:(le=p[x+0]|p[x+1]<<8|p[x+2]<<16,Ve=16383&(p[x+7]<<8|p[x+6]),p=16383&(p[x+9]<<8|p[x+8]),1&le||3<(le>>1&7)||!(le>>4&1)||le>>5>=Se.Ja||!Ve||!p?p=0:(Q&&(Q[0]=Ve),Z&&(Z[0]=p),p=1))}if(!p||(Q=Q[0],je=je[0],Ee&&(ae[0]!=Q||ve[0]!=je)))return 3;ne!=null&&(ne[0]=Se,ne.offset=x-ne.w,e(4294967286>x-ne.w),e(ne.offset==ne.ha-E));break}return Re==0||Re==7&&Ee&&ne==null?(Y!=null&&(Y[0]|=Se.na!=null&&0<Se.na.length),O!=null&&(O[0]=Q),K!=null&&(K[0]=je),0):Re}function bl(p,x,E){var O=x.width,K=x.height,Y=0,Q=0,Z=O,ne=K;if(x.Da=p!=null&&0<p.Da,x.Da&&(Z=p.cd,ne=p.bd,Y=p.v,Q=p.j,11>E||(Y&=-2,Q&=-2),0>Y||0>Q||0>=Z||0>=ne||Y+Z>O||Q+ne>K))return 0;if(x.v=Y,x.j=Q,x.va=Y+Z,x.o=Q+ne,x.U=Z,x.T=ne,x.da=p!=null&&0<p.da,x.da){if(!vt(Z,ne,E=[p.ib],Y=[p.hb]))return 0;x.ib=E[0],x.hb=Y[0]}return x.ob=p!=null&&p.ob,x.Kb=p==null||!p.Sd,x.da&&(x.ob=x.ib<3*O/4&&x.hb<3*K/4,x.Kb=0),1}function wl(p){if(p==null)return 2;if(11>p.S){var x=p.f.RGBA;x.fb+=(p.height-1)*x.A,x.A=-x.A}else x=p.f.kb,p=p.height,x.O+=(p-1)*x.fa,x.fa=-x.fa,x.N+=(p-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(p-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(p-1)*x.lb,x.lb=-x.lb);return 0}function Vs(p,x,E,O){if(O==null||0>=p||0>=x)return 2;if(E!=null){if(E.Da){var K=E.cd,Y=E.bd,Q=-2&E.v,Z=-2&E.j;if(0>Q||0>Z||0>=K||0>=Y||Q+K>p||Z+Y>x)return 2;p=K,x=Y}if(E.da){if(!vt(p,x,K=[E.ib],Y=[E.hb]))return 2;p=K[0],x=Y[0]}}O.width=p,O.height=x;e:{var ne=O.width,ae=O.height;if(p=O.S,0>=ne||0>=ae||!(p>=lu&&13>p))p=2;else{if(0>=O.Rd&&O.sd==null){Q=Y=K=x=0;var ve=(Z=ne*Cc[p])*ae;if(11>p||(Y=(ae+1)/2*(x=(ne+1)/2),p==12&&(Q=(K=ne)*ae)),(ae=a(ve+2*Y+Q))==null){p=1;break e}O.sd=ae,11>p?((ne=O.f.RGBA).eb=ae,ne.fb=0,ne.A=Z,ne.size=ve):((ne=O.f.kb).y=ae,ne.O=0,ne.fa=Z,ne.Fd=ve,ne.f=ae,ne.N=0+ve,ne.Ab=x,ne.Cd=Y,ne.ea=ae,ne.W=0+ve+Y,ne.Db=x,ne.Ed=Y,p==12&&(ne.F=ae,ne.J=0+ve+2*Y),ne.Tc=Q,ne.lb=K)}if(x=1,K=O.S,Y=O.width,Q=O.height,K>=lu&&13>K)if(11>K)p=O.f.RGBA,x&=(Z=Math.abs(p.A))*(Q-1)+Y<=p.size,x&=Z>=Y*Cc[K],x&=p.eb!=null;else{p=O.f.kb,Z=(Y+1)/2,ve=(Q+1)/2,ne=Math.abs(p.fa),ae=Math.abs(p.Ab);var Ee=Math.abs(p.Db),le=Math.abs(p.lb),Se=le*(Q-1)+Y;x&=ne*(Q-1)+Y<=p.Fd,x&=ae*(ve-1)+Z<=p.Cd,x=(x&=Ee*(ve-1)+Z<=p.Ed)&ne>=Y&ae>=Z&Ee>=Z,x&=p.y!=null,x&=p.f!=null,x&=p.ea!=null,K==12&&(x&=le>=Y,x&=Se<=p.Tc,x&=p.F!=null)}else x=0;p=x?0:2}}return p!=0||E!=null&&E.fd&&(p=wl(O)),p}var Po=64,yo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],xo=24,pa=32,xs=8,Ms=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];tt("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(p){return p},T.Predictor2=function(p,x,E){return x[E+0]},T.Predictor3=function(p,x,E){return x[E+1]},T.Predictor4=function(p,x,E){return x[E-1]},T.Predictor5=function(p,x,E){return wt(wt(p,x[E+1]),x[E+0])},T.Predictor6=function(p,x,E){return wt(p,x[E-1])},T.Predictor7=function(p,x,E){return wt(p,x[E+0])},T.Predictor8=function(p,x,E){return wt(x[E-1],x[E+0])},T.Predictor9=function(p,x,E){return wt(x[E+0],x[E+1])},T.Predictor10=function(p,x,E){return wt(wt(p,x[E-1]),wt(x[E+0],x[E+1]))},T.Predictor11=function(p,x,E){var O=x[E+0];return 0>=Dt(O>>24&255,p>>24&255,(x=x[E-1])>>24&255)+Dt(O>>16&255,p>>16&255,x>>16&255)+Dt(O>>8&255,p>>8&255,x>>8&255)+Dt(255&O,255&p,255&x)?O:p},T.Predictor12=function(p,x,E){var O=x[E+0];return(hr((p>>24&255)+(O>>24&255)-((x=x[E-1])>>24&255))<<24|hr((p>>16&255)+(O>>16&255)-(x>>16&255))<<16|hr((p>>8&255)+(O>>8&255)-(x>>8&255))<<8|hr((255&p)+(255&O)-(255&x)))>>>0},T.Predictor13=function(p,x,E){var O=x[E-1];return(Nt((p=wt(p,x[E+0]))>>24&255,O>>24&255)<<24|Nt(p>>16&255,O>>16&255)<<16|Nt(p>>8&255,O>>8&255)<<8|Nt(255&p,255&O))>>>0};var Ds=T.PredictorAdd0;T.PredictorAdd1=yr,tt("Predictor2","PredictorAdd2"),tt("Predictor3","PredictorAdd3"),tt("Predictor4","PredictorAdd4"),tt("Predictor5","PredictorAdd5"),tt("Predictor6","PredictorAdd6"),tt("Predictor7","PredictorAdd7"),tt("Predictor8","PredictorAdd8"),tt("Predictor9","PredictorAdd9"),tt("Predictor10","PredictorAdd10"),tt("Predictor11","PredictorAdd11"),tt("Predictor12","PredictorAdd12"),tt("Predictor13","PredictorAdd13");var vs=T.PredictorAdd2;ft("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),ft("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var yn,Ua=T.ColorIndexInverseTransform,bs=T.MapARGB,Xo=T.VP8LColorIndexInverseTransformAlpha,qa=T.MapAlpha,Ha=T.VP8LPredictorsAdd=[];Ha.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var Sl,_l,Ws,ma,ga,Ga,ya,Ka,ln,Gi,br,Rr,cn,Tn,Zo,gc,Tl,$s,su,Al,au,fd,yc,Ja,Ya,pd,xc,md,gd=a(511),yd=a(2041),xd=a(225),vd=a(767),bd=0,ws=yd,Cl=xd,Li=vd,No=gd,lu=0,xa=1,Ih=2,vc=3,bc=4,Mr=5,cu=6,kl=7,Qa=8,wc=9,Sc=10,_c=[2,3,7],uu=[3,3,11],Xa=[280,256,256,256,40],Rh=[0,1,1,1,0],Mp=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Dp=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ph=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],du=8,jl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Tc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Za=null,wd=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Sd=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Nh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Lh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Wp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],$p=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],_d=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Bi=[],Lo=[],Ki=[],Ss=1,El=2,xi=[],Ji=[];Pe("UpsampleRgbLinePair",zn,3),Pe("UpsampleBgrLinePair",Ni,3),Pe("UpsampleRgbaLinePair",mc,4),Pe("UpsampleBgraLinePair",Os,4),Pe("UpsampleArgbLinePair",Ro,4),Pe("UpsampleRgba4444LinePair",yi,2),Pe("UpsampleRgb565LinePair",Jr,2);var Up=T.UpsampleRgbLinePair,qp=T.UpsampleBgrLinePair,va=T.UpsampleRgbaLinePair,Il=T.UpsampleBgraLinePair,el=T.UpsampleArgbLinePair,Ac=T.UpsampleRgba4444LinePair,Td=T.UpsampleRgb565LinePair,Us=16,es=1<<Us-1,Ir=-227,Pr=482,ba=6,ii=0,Yi=a(256),tl=a(256),Rl=a(256),Qi=a(256),hu=a(Pr-Ir),Bh=a(Pr-Ir);Qo("YuvToRgbRow",zn,3),Qo("YuvToBgrRow",Ni,3),Qo("YuvToRgbaRow",mc,4),Qo("YuvToBgraRow",Os,4),Qo("YuvToArgbRow",Ro,4),Qo("YuvToRgba4444Row",yi,2),Qo("YuvToRgb565Row",Jr,2);var Ad=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],rl=[0,2,8],Fh=[8,7,6,4,4,2,2,2,1,1,1,1],qs=1;this.WebPDecodeRGBA=function(p,x,E,O,K){var Y=xa,Q=new Te,Z=new Mt;Q.ba=Z,Z.S=Y,Z.width=[Z.width],Z.height=[Z.height];var ne=Z.width,ae=Z.height,ve=new zt;if(ve==null||p==null)var Ee=2;else e(ve!=null),Ee=fa(p,x,E,ve.width,ve.height,ve.Pd,ve.Qd,ve.format,null);if(Ee!=0?ne=0:(ne!=null&&(ne[0]=ve.width[0]),ae!=null&&(ae[0]=ve.height[0]),ne=1),ne){Z.width=Z.width[0],Z.height=Z.height[0],O!=null&&(O[0]=Z.width),K!=null&&(K[0]=Z.height);e:{if(O=new Hn,(K=new Me).data=p,K.w=x,K.ha=E,K.kd=1,x=[0],e(K!=null),((p=fa(K.data,K.w,K.ha,null,null,null,x,null,K))==0||p==7)&&x[0]&&(p=4),(x=p)==0){if(e(Q!=null),O.data=K.data,O.w=K.w+K.offset,O.ha=K.ha-K.offset,O.put=jt,O.ac=Pn,O.bc=ki,O.ma=Q,K.xa){if((p=cs())==null){Q=1;break e}if((function(le,Se){var je=[0],Ve=[0],Re=[0];t:for(;;){if(le==null)return 0;if(Se==null)return le.a=2,0;if(le.l=Se,le.a=0,ye(le.m,Se.data,Se.w,Se.ha),!ci(le.m,je,Ve,Re)){le.a=3;break t}if(le.xb=El,Se.width=je[0],Se.height=Ve[0],!co(je[0],Ve[0],1,le,null))break t;return 1}return e(le.a!=0),0})(p,O)){if(O=(x=Vs(O.width,O.height,Q.Oa,Q.ba))==0){t:{O=p;r:for(;;){if(O==null){O=0;break t}if(e(O.s.yc!=null),e(O.s.Ya!=null),e(0<O.s.Wb),e((E=O.l)!=null),e((K=E.ma)!=null),O.xb!=0){if(O.ca=K.ba,O.tb=K.tb,e(O.ca!=null),!bl(K.Oa,E,vc)){O.a=2;break r}if(!uo(O,E.width)||E.da)break r;if((E.da||Vt(O.ca.S))&&ke(),11>O.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),O.ca.f.kb.F!=null&&ke()),O.Pb&&0<O.s.ua&&O.s.vb.X==null&&!he(O.s.vb,O.s.Wa.Xa)){O.a=1;break r}O.xb=0}if(!Ei(O,O.V,O.Ba,O.c,O.i,E.o,$o))break r;K.Dc=O.Ma,O=1;break t}e(O.a!=0),O=0}O=!O}O&&(x=p.a)}else x=p.a}else{if((p=new Ao)==null){Q=1;break e}if(p.Fa=K.na,p.P=K.P,p.qc=K.Sa,ho(p,O)){if((x=Vs(O.width,O.height,Q.Oa,Q.ba))==0){if(p.Aa=0,E=Q.Oa,e((K=p)!=null),E!=null){if(0<(ne=0>(ne=E.Md)?0:100<ne?255:255*ne/100)){for(ae=ve=0;4>ae;++ae)12>(Ee=K.pb[ae]).lc&&(Ee.ia=ne*Fh[0>Ee.lc?0:Ee.lc]>>3),ve|=Ee.ia;ve&&(alert("todo:VP8InitRandom"),K.ia=1)}K.Ga=E.Id,100<K.Ga?K.Ga=100:0>K.Ga&&(K.Ga=0)}(function(le,Se){if(le==null)return 0;if(Se==null)return vr(le,2,"NULL VP8Io parameter in VP8Decode().");if(!le.cb&&!ho(le,Se))return 0;if(e(le.cb),Se.ac==null||Se.ac(Se)){Se.ob&&(le.L=0);var je=rl[le.L];if(le.L==2?(le.yb=0,le.zb=0):(le.yb=Se.v-je>>4,le.zb=Se.j-je>>4,0>le.yb&&(le.yb=0),0>le.zb&&(le.zb=0)),le.Va=Se.o+15+je>>4,le.Hb=Se.va+15+je>>4,le.Hb>le.za&&(le.Hb=le.za),le.Va>le.Ub&&(le.Va=le.Ub),0<le.L){var Ve=le.ed;for(je=0;4>je;++je){var Re;if(le.Qa.Cb){var ze=le.Qa.Lb[je];le.Qa.Fb||(ze+=Ve.Tb)}else ze=Ve.Tb;for(Re=0;1>=Re;++Re){var Oe=le.gd[je][Re],De=ze;if(Ve.Pc&&(De+=Ve.vd[0],Re&&(De+=Ve.od[0])),0<(De=0>De?0:63<De?63:De)){var We=De;0<Ve.wb&&(We=4<Ve.wb?We>>2:We>>1)>9-Ve.wb&&(We=9-Ve.wb),1>We&&(We=1),Oe.dd=We,Oe.tc=2*De+We,Oe.ld=40<=De?2:15<=De?1:0}else Oe.tc=0;Oe.La=Re}}}je=0}else vr(le,6,"Frame setup failed"),je=le.a;if(je=je==0){if(je){le.$c=0,0<le.Aa||(le.Ic=qs);t:{je=le.Ic,Ve=4*(We=le.za);var bt=32*We,at=We+1,Yt=0<le.L?We*(0<le.Aa?2:1):0,ht=(le.Aa==2?2:1)*We;if((Oe=Ve+832+(Re=3*(16*je+rl[le.L])/2*bt)+(ze=le.Fa!=null&&0<le.Fa.length?le.Kc.c*le.Kc.i:0))!=Oe)je=0;else{if(Oe>le.Vb){if(le.Vb=0,le.Ec=a(Oe),le.Fc=0,le.Ec==null){je=vr(le,1,"no memory during frame initialization.");break t}le.Vb=Oe}Oe=le.Ec,De=le.Fc,le.Ac=Oe,le.Bc=De,De+=Ve,le.Gd=c(bt,di),le.Hd=0,le.rb=c(at+1,Ho),le.sb=1,le.wa=Yt?c(Yt,ui):null,le.Y=0,le.D.Nb=0,le.D.wa=le.wa,le.D.Y=le.Y,0<le.Aa&&(le.D.Y+=We),e(!0),le.oc=Oe,le.pc=De,De+=832,le.ya=c(ht,ds),le.aa=0,le.D.ya=le.ya,le.D.aa=le.aa,le.Aa==2&&(le.D.aa+=We),le.R=16*We,le.B=8*We,We=(bt=rl[le.L])*le.R,bt=bt/2*le.B,le.sa=Oe,le.ta=De+We,le.qa=le.sa,le.ra=le.ta+16*je*le.R+bt,le.Ha=le.qa,le.Ia=le.ra+8*je*le.B+bt,le.$c=0,De+=Re,le.mb=ze?Oe:null,le.nb=ze?De:null,e(De+ze<=le.Fc+le.Vb),sr(le),o(le.Ac,le.Bc,0,Ve),je=1}}if(je){if(Se.ka=0,Se.y=le.sa,Se.O=le.ta,Se.f=le.qa,Se.N=le.ra,Se.ea=le.Ha,Se.Vd=le.Ia,Se.fa=le.R,Se.Rc=le.B,Se.F=null,Se.J=0,!bd){for(je=-255;255>=je;++je)gd[255+je]=0>je?-je:je;for(je=-1020;1020>=je;++je)yd[1020+je]=-128>je?-128:127<je?127:je;for(je=-112;112>=je;++je)xd[112+je]=-16>je?-16:15<je?15:je;for(je=-255;510>=je;++je)vd[255+je]=0>je?0:255<je?255:je;bd=1}ya=nr,Ka=Va,Gi=Ls,br=Co,Rr=la,ln=Oa,cn=ha,Tn=Fn,Zo=S,gc=G,Tl=gi,$s=gs,su=ue,Al=ge,au=ni,fd=Eo,yc=Io,Ja=$a,Lo[0]=vl,Lo[1]=Bs,Lo[2]=Go,Lo[3]=Ri,Lo[4]=ps,Lo[5]=jo,Lo[6]=Bn,Lo[7]=ua,Lo[8]=zs,Lo[9]=Er,Bi[0]=po,Bi[1]=Ma,Bi[2]=Da,Bi[3]=Fs,Bi[4]=ko,Bi[5]=pi,Bi[6]=gn,Ki[0]=qi,Ki[1]=ca,Ki[2]=Wa,Ki[3]=Ui,Ki[4]=Hi,Ki[5]=Ko,Ki[6]=da,je=1}else je=0}je&&(je=(function(cr,un){for(cr.M=0;cr.M<cr.Va;++cr.M){var Zt,lt=cr.Jc[cr.M&cr.Xb],rt=cr.m,xn=cr;for(Zt=0;Zt<xn.za;++Zt){var $t=rt,ar=xn,Kr=ar.Ac,Kn=ar.Bc+4*Zt,An=ar.zc,rn=ar.ya[ar.aa+Zt];if(ar.Qa.Bb?rn.$b=Be($t,ar.Pa.jb[0])?2+Be($t,ar.Pa.jb[2]):Be($t,ar.Pa.jb[1]):rn.$b=0,ar.kc&&(rn.Ad=Be($t,ar.Bd)),rn.Za=!Be($t,145)+0,rn.Za){var On=rn.Ob,Jn=0;for(ar=0;4>ar;++ar){var Xr,dr=An[0+ar];for(Xr=0;4>Xr;++Xr){dr=Wp[Kr[Kn+Xr]][dr];for(var wr=Nh[Be($t,dr[0])];0<wr;)wr=Nh[2*wr+Be($t,dr[wr])];dr=-wr,Kr[Kn+Xr]=dr}n(On,Jn,Kr,Kn,4),Jn+=4,An[0+ar]=dr}}else dr=Be($t,156)?Be($t,128)?1:3:Be($t,163)?2:0,rn.Ob[0]=dr,o(Kr,Kn,dr,4),o(An,0,dr,4);rn.Dd=Be($t,142)?Be($t,114)?Be($t,183)?1:3:2:0}if(xn.m.Ka)return vr(cr,7,"Premature end-of-partition0 encountered.");for(;cr.ja<cr.za;++cr.ja){if(xn=lt,$t=(rt=cr).rb[rt.sb-1],Kr=rt.rb[rt.sb+rt.ja],Zt=rt.ya[rt.aa+rt.ja],Kn=rt.kc?Zt.Ad:0)$t.la=Kr.la=0,Zt.Za||($t.Na=Kr.Na=0),Zt.Hc=0,Zt.Gc=0,Zt.ia=0;else{var Zr,Sr;if($t=Kr,Kr=xn,Kn=rt.Pa.Xc,An=rt.ya[rt.aa+rt.ja],rn=rt.pb[An.$b],ar=An.ad,On=0,Jn=rt.rb[rt.sb-1],dr=Xr=0,o(ar,On,0,384),An.Za)var dn=0,hn=Kn[3];else{wr=a(16);var Dr=$t.Na+Jn.Na;if(Dr=Za(Kr,Kn[1],Dr,rn.Eb,0,wr,0),$t.Na=Jn.Na=(0<Dr)+0,1<Dr)ya(wr,0,ar,On);else{var vi=wr[0]+3>>3;for(wr=0;256>wr;wr+=16)ar[On+wr]=vi}dn=1,hn=Kn[0]}var Nr=15&$t.la,Wr=15&Jn.la;for(wr=0;4>wr;++wr){var Cn=1&Wr;for(vi=Sr=0;4>vi;++vi)Nr=Nr>>1|(Cn=(Dr=Za(Kr,hn,Dr=Cn+(1&Nr),rn.Sc,dn,ar,On))>dn)<<7,Sr=Sr<<2|(3<Dr?3:1<Dr?2:ar[On+0]!=0),On+=16;Nr>>=4,Wr=Wr>>1|Cn<<7,Xr=(Xr<<8|Sr)>>>0}for(hn=Nr,dn=Wr>>4,Zr=0;4>Zr;Zr+=2){for(Sr=0,Nr=$t.la>>4+Zr,Wr=Jn.la>>4+Zr,wr=0;2>wr;++wr){for(Cn=1&Wr,vi=0;2>vi;++vi)Dr=Cn+(1&Nr),Nr=Nr>>1|(Cn=0<(Dr=Za(Kr,Kn[2],Dr,rn.Qc,0,ar,On)))<<3,Sr=Sr<<2|(3<Dr?3:1<Dr?2:ar[On+0]!=0),On+=16;Nr>>=2,Wr=Wr>>1|Cn<<5}dr|=Sr<<4*Zr,hn|=Nr<<4<<Zr,dn|=(240&Wr)<<Zr}$t.la=hn,Jn.la=dn,An.Hc=Xr,An.Gc=dr,An.ia=43690&dr?0:rn.ia,Kn=!(Xr|dr)}if(0<rt.L&&(rt.wa[rt.Y+rt.ja]=rt.gd[Zt.$b][Zt.Za],rt.wa[rt.Y+rt.ja].La|=!Kn),xn.Ka)return vr(cr,7,"Premature end-of-file encountered.")}if(sr(cr),rt=un,xn=1,Zt=(lt=cr).D,$t=0<lt.L&&lt.M>=lt.zb&&lt.M<=lt.Va,lt.Aa==0)t:{if(Zt.M=lt.M,Zt.uc=$t,go(lt,Zt),xn=1,Zt=(Sr=lt.D).Nb,$t=(dr=rl[lt.L])*lt.R,Kr=dr/2*lt.B,wr=16*Zt*lt.R,vi=8*Zt*lt.B,Kn=lt.sa,An=lt.ta-$t+wr,rn=lt.qa,ar=lt.ra-Kr+vi,On=lt.Ha,Jn=lt.Ia-Kr+vi,Wr=(Nr=Sr.M)==0,Xr=Nr>=lt.Va-1,lt.Aa==2&&go(lt,Sr),Sr.uc)for(Cn=(Dr=lt).D.M,e(Dr.D.uc),Sr=Dr.yb;Sr<Dr.Hb;++Sr){dn=Sr,hn=Cn;var oi=(Xi=(wn=Dr).D).Nb;Zr=wn.R;var Xi=Xi.wa[Xi.Y+dn],vn=wn.sa,bn=wn.ta+16*oi*Zr+16*dn,bi=Xi.dd,$r=Xi.tc;if($r!=0)if(e(3<=$r),wn.L==1)0<dn&&fd(vn,bn,Zr,$r+4),Xi.La&&Ja(vn,bn,Zr,$r),0<hn&&au(vn,bn,Zr,$r+4),Xi.La&&yc(vn,bn,Zr,$r);else{var wi=wn.B,Bo=wn.qa,ts=wn.ra+8*oi*wi+8*dn,Yn=wn.Ha,wn=wn.Ia+8*oi*wi+8*dn;oi=Xi.ld,0<dn&&(Tn(vn,bn,Zr,$r+4,bi,oi),gc(Bo,ts,Yn,wn,wi,$r+4,bi,oi)),Xi.La&&($s(vn,bn,Zr,$r,bi,oi),Al(Bo,ts,Yn,wn,wi,$r,bi,oi)),0<hn&&(cn(vn,bn,Zr,$r+4,bi,oi),Zo(Bo,ts,Yn,wn,wi,$r+4,bi,oi)),Xi.La&&(Tl(vn,bn,Zr,$r,bi,oi),su(Bo,ts,Yn,wn,wi,$r,bi,oi))}}if(lt.ia&&alert("todo:DitherRow"),rt.put!=null){if(Sr=16*Nr,Nr=16*(Nr+1),Wr?(rt.y=lt.sa,rt.O=lt.ta+wr,rt.f=lt.qa,rt.N=lt.ra+vi,rt.ea=lt.Ha,rt.W=lt.Ia+vi):(Sr-=dr,rt.y=Kn,rt.O=An,rt.f=rn,rt.N=ar,rt.ea=On,rt.W=Jn),Xr||(Nr-=dr),Nr>rt.o&&(Nr=rt.o),rt.F=null,rt.J=null,lt.Fa!=null&&0<lt.Fa.length&&Sr<Nr&&(rt.J=Or(lt,rt,Sr,Nr-Sr),rt.F=lt.mb,rt.F==null&&rt.F.length==0)){xn=vr(lt,3,"Could not decode alpha data.");break t}Sr<rt.j&&(dr=rt.j-Sr,Sr=rt.j,e(!(1&dr)),rt.O+=lt.R*dr,rt.N+=lt.B*(dr>>1),rt.W+=lt.B*(dr>>1),rt.F!=null&&(rt.J+=rt.width*dr)),Sr<Nr&&(rt.O+=rt.v,rt.N+=rt.v>>1,rt.W+=rt.v>>1,rt.F!=null&&(rt.J+=rt.v),rt.ka=Sr-rt.j,rt.U=rt.va-rt.v,rt.T=Nr-Sr,xn=rt.put(rt))}Zt+1!=lt.Ic||Xr||(n(lt.sa,lt.ta-$t,Kn,An+16*lt.R,$t),n(lt.qa,lt.ra-Kr,rn,ar+8*lt.B,Kr),n(lt.Ha,lt.Ia-Kr,On,Jn+8*lt.B,Kr))}if(!xn)return vr(cr,6,"Output aborted.")}return 1})(le,Se)),Se.bc!=null&&Se.bc(Se),je&=1}return je?(le.cb=0,je):0})(p,O)||(x=p.a)}}else x=p.a}x==0&&Q.Oa!=null&&Q.Oa.fd&&(x=wl(Q.ba))}Q=x}Y=Q!=0?null:11>Y?Z.f.RGBA.eb:Z.f.kb.y}else Y=null;return Y};var Cc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(T,F){for(var k="",v=0;v<4;v++)k+=String.fromCharCode(T[F++]);return k}function g(T,F){return T[F+0]|T[F+1]<<8}function w(T,F){return(T[F+0]|T[F+1]<<8|T[F+2]<<16)>>>0}function C(T,F){return(T[F+0]|T[F+1]<<8|T[F+2]<<16|T[F+3]<<24)>>>0}new f;var b=[0],V=[0],R=[],z=new f,j=r,U=(function(T,F){var k={},v=0,L=!1,M=0,$=0;if(k.frames=[],!(function(D,q){for(var X=0;X<4;X++)if(D[q+X]!="RIFF".charCodeAt(X))return!0;return!1})(T,F)){for(C(T,F+=4),F+=8;F<T.length;){var oe=d(T,F),se=C(T,F+=4);F+=4;var ie=se+(1&se);switch(oe){case"VP8 ":case"VP8L":k.frames[v]===void 0&&(k.frames[v]={}),(ee=k.frames[v]).src_off=L?$:F-8,ee.src_size=M+se+8,v++,L&&(L=!1,M=0,$=0);break;case"VP8X":(ee=k.header={}).feature_flags=T[F];var ye=F+4;ee.canvas_width=1+w(T,ye),ye+=3,ee.canvas_height=1+w(T,ye),ye+=3;break;case"ALPH":L=!0,M=ie+8,$=F-8;break;case"ANIM":(ee=k.header).bgcolor=C(T,F),ye=F+4,ee.loop_count=g(T,ye),ye+=2;break;case"ANMF":var xe,ee;(ee=k.frames[v]={}).offset_x=2*w(T,F),F+=3,ee.offset_y=2*w(T,F),F+=3,ee.width=1+w(T,F),F+=3,ee.height=1+w(T,F),F+=3,ee.duration=w(T,F),F+=3,xe=T[F++],ee.dispose=1&xe,ee.blend=xe>>1&1}oe!="ANMF"&&(F+=ie)}return k}})(j,0);U.response=j,U.rgbaoutput=!0,U.dataurl=!1;var H=U.header?U.header:null,B=U.frames?U.frames:null;if(H){H.loop_counter=H.loop_count,b=[H.canvas_height],V=[H.canvas_width];for(var re=0;re<B.length&&B[re].blend!=0;re++);}var ce=B[0],N=z.WebPDecodeRGBA(j,ce.src_off,ce.src_size,V,b);ce.rgba=N,ce.imgwidth=V[0],ce.imgheight=b[0];for(var A=0;A<V[0]*b[0]*4;A++)R[A]=N[A];return this.width=V,this.height=b,this.data=R,this}(function(r){var e,t,n,o,a,c,u,f,d,g=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new f,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new c,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new c,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new w(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,c=this.internal.Point,u=this.internal.Rectangle,f=this.internal.Matrix,d=new g}]);var w=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=D;Object.defineProperty(this,"pdf",{get:function(){return q}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Fe){X=!!Fe}});var de=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return de},set:function(Fe){de=!!Fe}});var me=0;Object.defineProperty(this,"posX",{get:function(){return me},set:function(Fe){isNaN(Fe)||(me=Fe)}});var we=0;Object.defineProperty(this,"posY",{get:function(){return we},set:function(Fe){isNaN(Fe)||(we=Fe)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Fe){var he;typeof Fe=="number"?he=[Fe,Fe,Fe,Fe]:((he=new Array(4))[0]=Fe[0],he[1]=Fe.length>=2?Fe[1]:he[0],he[2]=Fe.length>=3?Fe[2]:he[0],he[3]=Fe.length>=4?Fe[3]:he[1]),d.margin=he}});var Ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ae},set:function(Fe){Ae=Fe}});var Ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ce},set:function(Fe){Ce=Fe}});var Be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Be},set:function(Fe){Be=Fe}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Fe){Fe instanceof g&&(d=Fe)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Fe){d.path=Fe}});var qe=[];Object.defineProperty(this,"ctxStack",{get:function(){return qe},set:function(Fe){qe=Fe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Fe){var he;he=C(Fe),this.ctx.fillStyle=he.style,this.ctx.isFillTransparent=he.a===0,this.ctx.fillOpacity=he.a,this.pdf.setFillColor(he.r,he.g,he.b,{a:he.a}),this.pdf.setTextColor(he.r,he.g,he.b,{a:he.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Fe){var he=C(Fe);this.ctx.strokeStyle=he.style,this.ctx.isStrokeTransparent=he.a===0,this.ctx.strokeOpacity=he.a,he.a===0?this.pdf.setDrawColor(255,255,255):(he.a,this.pdf.setDrawColor(he.r,he.g,he.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Fe){["butt","round","square"].indexOf(Fe)!==-1&&(this.ctx.lineCap=Fe,this.pdf.setLineCap(Fe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Fe){isNaN(Fe)||(this.ctx.lineWidth=Fe,this.pdf.setLineWidth(Fe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Fe){["bevel","round","miter"].indexOf(Fe)!==-1&&(this.ctx.lineJoin=Fe,this.pdf.setLineJoin(Fe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Fe){isNaN(Fe)||(this.ctx.miterLimit=Fe,this.pdf.setMiterLimit(Fe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Fe){this.ctx.textBaseline=Fe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Fe){["right","end","center","left","start"].indexOf(Fe)!==-1&&(this.ctx.textAlign=Fe)}});var et=null,Qe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Qe},set:function(Fe){et=null,Qe=Fe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Fe){var he;if(this.ctx.font=Fe,(he=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Fe))!==null){var Pt=he[1];he[2];var Ct=he[3],vt=he[4];he[5];var Ue=he[6],nt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(vt)[2];vt=Math.floor(nt==="px"?parseFloat(vt)*this.pdf.internal.scaleFactor:nt==="em"?parseFloat(vt)*this.pdf.getFontSize():parseFloat(vt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(vt);var tt=(function(kt){var ft,Cr,rr=[],dt=kt.trim();if(dt==="")return Jm;if(dt in c2)return[c2[dt]];for(;dt!=="";){switch(Cr=null,ft=(dt=d2(dt)).charAt(0)){case'"':case"'":Cr=wT(dt.substring(1),ft);break;default:Cr=ST(dt)}if(Cr===null||(rr.push(Cr[0]),(dt=d2(Cr[1]))!==""&&dt.charAt(0)!==","))return Jm;dt=dt.replace(/^,/,"")}return rr})(Ue);if(this.fontFaces){var Gt=(function(kt,ft){if(et===null){var Cr=(function(rr){var dt=[];return Object.keys(rr).forEach(function(Wt){rr[Wt].forEach(function(ir){var At=null;switch(ir){case"bold":At={family:Wt,weight:"bold"};break;case"italic":At={family:Wt,style:"italic"};break;case"bolditalic":At={family:Wt,weight:"bold",style:"italic"};break;case"":case"normal":At={family:Wt}}At!==null&&(At.ref={name:Wt,style:ir},dt.push(At))})}),dt})(kt.getFontList());et=(function(rr){for(var dt={},Wt=0;Wt<rr.length;++Wt){var ir=Km(rr[Wt]),At=ir.family,Xt=ir.stretch,Vt=ir.style,kr=ir.weight;dt[At]=dt[At]||{},dt[At][Xt]=dt[At][Xt]||{},dt[At][Xt][Vt]=dt[At][Xt][Vt]||{},dt[At][Xt][Vt][kr]=ir}return dt})(Cr.concat(ft))}return et})(this.pdf,this.fontFaces),wt=tt.map(function(kt){return{family:kt,stretch:"normal",weight:Ct,style:Pt}}),hr=(function(kt,ft,Cr){for(var rr=(Cr=Cr||{}).defaultFontFamily||"times",dt=Object.assign({},bT,Cr.genericFontFamilies||{}),Wt=null,ir=null,At=0;At<ft.length;++At)if(dt[(Wt=Km(ft[At])).family]&&(Wt.family=dt[Wt.family]),kt.hasOwnProperty(Wt.family)){ir=kt[Wt.family];break}if(!(ir=ir||kt[rr]))throw new Error("Could not find a font-family for the rule '"+u2(Wt)+"' and default family '"+rr+"'.");if(ir=(function(Xt,Vt){if(Vt[Xt])return Vt[Xt];var kr=S0[Xt],Br=kr<=S0.normal?-1:1,Mt=l2(Vt,hv,kr,Br);if(!Mt)throw new Error("Could not find a matching font-stretch value for "+Xt);return Mt})(Wt.stretch,ir),ir=(function(Xt,Vt){if(Vt[Xt])return Vt[Xt];for(var kr=dv[Xt],Br=0;Br<kr.length;++Br)if(Vt[kr[Br]])return Vt[kr[Br]];throw new Error("Could not find a matching font-style for "+Xt)})(Wt.style,ir),!(ir=(function(Xt,Vt){if(Vt[Xt])return Vt[Xt];if(Xt===400&&Vt[500])return Vt[500];if(Xt===500&&Vt[400])return Vt[400];var kr=vT[Xt],Br=l2(Vt,fv,kr,Xt<400?-1:1);if(!Br)throw new Error("Could not find a matching font-weight for value "+Xt);return Br})(Wt.weight,ir)))throw new Error("Failed to resolve a font for the rule '"+u2(Wt)+"'.");return ir})(Gt,wt);this.pdf.setFont(hr.ref.name,hr.ref.style)}else{var Nt="";(Ct==="bold"||parseInt(Ct,10)>=700||Pt==="bold")&&(Nt="bold"),Pt==="italic"&&(Nt+="italic"),Nt.length===0&&(Nt="normal");for(var Dt="",yr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ft=0;Ft<tt.length;Ft++){if(this.pdf.internal.getFont(tt[Ft],Nt,{noFallback:!0,disableWarning:!0})!==void 0){Dt=tt[Ft];break}if(Nt==="bolditalic"&&this.pdf.internal.getFont(tt[Ft],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Dt=tt[Ft],Nt="bold";else if(this.pdf.internal.getFont(tt[Ft],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Dt=tt[Ft],Nt="normal";break}}if(Dt===""){for(var St=0;St<tt.length;St++)if(yr[tt[St]]){Dt=yr[tt[St]];break}}Dt=Dt===""?"Times":Dt,this.pdf.setFont(Dt,Nt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Fe){this.ctx.globalCompositeOperation=Fe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Fe){this.ctx.globalAlpha=Fe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Fe){this.ctx.lineDashOffset=Fe,ee.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Fe){this.ctx.lineDash=Fe,ee.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Fe){this.ctx.ignoreClearRect=!!Fe}})};w.prototype.setLineDash=function(D){this.lineDash=D},w.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},w.prototype.fill=function(){B.call(this,"fill",!1)},w.prototype.stroke=function(){B.call(this,"stroke",!1)},w.prototype.beginPath=function(){this.path=[{type:"begin"}]},w.prototype.moveTo=function(D,q){if(isNaN(D)||isNaN(q))throw Qr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new c(D,q));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new c(D,q)},w.prototype.closePath=function(){var D=new c(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&qr(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){D=new c(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(D.x,D.y)},w.prototype.lineTo=function(D,q){if(isNaN(D)||isNaN(q))throw Qr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new c(D,q));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new c(X.x,X.y)},w.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),B.call(this,null,!0)},w.prototype.quadraticCurveTo=function(D,q,X,de){if(isNaN(X)||isNaN(de)||isNaN(D)||isNaN(q))throw Qr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var me=this.ctx.transform.applyToPoint(new c(X,de)),we=this.ctx.transform.applyToPoint(new c(D,q));this.path.push({type:"qct",x1:we.x,y1:we.y,x:me.x,y:me.y}),this.ctx.lastPoint=new c(me.x,me.y)},w.prototype.bezierCurveTo=function(D,q,X,de,me,we){if(isNaN(me)||isNaN(we)||isNaN(D)||isNaN(q)||isNaN(X)||isNaN(de))throw Qr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ae=this.ctx.transform.applyToPoint(new c(me,we)),Ce=this.ctx.transform.applyToPoint(new c(D,q)),Be=this.ctx.transform.applyToPoint(new c(X,de));this.path.push({type:"bct",x1:Ce.x,y1:Ce.y,x2:Be.x,y2:Be.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new c(Ae.x,Ae.y)},w.prototype.arc=function(D,q,X,de,me,we){if(isNaN(D)||isNaN(q)||isNaN(X)||isNaN(de)||isNaN(me))throw Qr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(we=!!we,!this.ctx.transform.isIdentity){var Ae=this.ctx.transform.applyToPoint(new c(D,q));D=Ae.x,q=Ae.y;var Ce=this.ctx.transform.applyToPoint(new c(0,X)),Be=this.ctx.transform.applyToPoint(new c(0,0));X=Math.sqrt(Math.pow(Ce.x-Be.x,2)+Math.pow(Ce.y-Be.y,2))}Math.abs(me-de)>=2*Math.PI&&(de=0,me=2*Math.PI),this.path.push({type:"arc",x:D,y:q,radius:X,startAngle:de,endAngle:me,counterclockwise:we})},w.prototype.arcTo=function(D,q,X,de,me){throw new Error("arcTo not implemented.")},w.prototype.rect=function(D,q,X,de){if(isNaN(D)||isNaN(q)||isNaN(X)||isNaN(de))throw Qr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,q),this.lineTo(D+X,q),this.lineTo(D+X,q+de),this.lineTo(D,q+de),this.lineTo(D,q),this.lineTo(D+X,q),this.lineTo(D,q)},w.prototype.fillRect=function(D,q,X,de){if(isNaN(D)||isNaN(q)||isNaN(X)||isNaN(de))throw Qr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var me={};this.lineCap!=="butt"&&(me.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(me.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,q,X,de),this.fill(),me.hasOwnProperty("lineCap")&&(this.lineCap=me.lineCap),me.hasOwnProperty("lineJoin")&&(this.lineJoin=me.lineJoin)}},w.prototype.strokeRect=function(D,q,X,de){if(isNaN(D)||isNaN(q)||isNaN(X)||isNaN(de))throw Qr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");V.call(this)||(this.beginPath(),this.rect(D,q,X,de),this.stroke())},w.prototype.clearRect=function(D,q,X,de){if(isNaN(D)||isNaN(q)||isNaN(X)||isNaN(de))throw Qr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,q,X,de))},w.prototype.save=function(D){D=typeof D!="boolean"||D;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var de=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=de}},w.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(q),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},w.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var C=function(D){var q,X,de,me;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))q=0,X=0,de=0,me=0;else{var we=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(we!==null)q=parseInt(we[1]),X=parseInt(we[2]),de=parseInt(we[3]),me=1;else if((we=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)q=parseInt(we[1]),X=parseInt(we[2]),de=parseInt(we[3]),me=parseFloat(we[4]);else{if(me=1,typeof D=="string"&&D.charAt(0)!=="#"){var Ae=new iv(D);D=Ae.ok?Ae.toHex():"#000000"}D.length===4?(q=D.substring(1,2),q+=q,X=D.substring(2,3),X+=X,de=D.substring(3,4),de+=de):(q=D.substring(1,3),X=D.substring(3,5),de=D.substring(5,7)),q=parseInt(q,16),X=parseInt(X,16),de=parseInt(de,16)}}return{r:q,g:X,b:de,a:me,style:D}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},V=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};w.prototype.fillText=function(D,q,X,de){if(isNaN(q)||isNaN(X)||typeof D!="string")throw Qr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(de=isNaN(de)?void 0:de,!b.call(this)){var me=ie(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;v.call(this,{text:D,x:q,y:X,scale:we,angle:me,align:this.textAlign,maxWidth:de})}},w.prototype.strokeText=function(D,q,X,de){if(isNaN(q)||isNaN(X)||typeof D!="string")throw Qr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!V.call(this)){de=isNaN(de)?void 0:de;var me=ie(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;v.call(this,{text:D,x:q,y:X,scale:we,renderingMode:"stroke",angle:me,align:this.textAlign,maxWidth:de})}},w.prototype.measureText=function(D){if(typeof D!="string")throw Qr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,X=this.pdf.internal.scaleFactor,de=q.internal.getFontSize(),me=q.getStringUnitWidth(D)*de/q.internal.scaleFactor;return new function(we){var Ae=(we=we||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ae}}),this}({width:me*=Math.round(96*X/72*1e4)/1e4})},w.prototype.scale=function(D,q){if(isNaN(D)||isNaN(q))throw Qr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new f(D,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},w.prototype.rotate=function(D){if(isNaN(D))throw Qr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new f(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},w.prototype.translate=function(D,q){if(isNaN(D)||isNaN(q))throw Qr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new f(1,0,0,1,D,q);this.ctx.transform=this.ctx.transform.multiply(X)},w.prototype.transform=function(D,q,X,de,me,we){if(isNaN(D)||isNaN(q)||isNaN(X)||isNaN(de)||isNaN(me)||isNaN(we))throw Qr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ae=new f(D,q,X,de,me,we);this.ctx.transform=this.ctx.transform.multiply(Ae)},w.prototype.setTransform=function(D,q,X,de,me,we){D=isNaN(D)?1:D,q=isNaN(q)?0:q,X=isNaN(X)?0:X,de=isNaN(de)?1:de,me=isNaN(me)?0:me,we=isNaN(we)?0:we,this.ctx.transform=new f(D,q,X,de,me,we)};var R=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};w.prototype.drawImage=function(D,q,X,de,me,we,Ae,Ce,Be){var qe=this.pdf.getImageProperties(D),et=1,Qe=1,Fe=1,he=1;de!==void 0&&Ce!==void 0&&(Fe=Ce/de,he=Be/me,et=qe.width/de*Ce/de,Qe=qe.height/me*Be/me),we===void 0&&(we=q,Ae=X,q=0,X=0),de!==void 0&&Ce===void 0&&(Ce=de,Be=me),de===void 0&&Ce===void 0&&(Ce=qe.width,Be=qe.height);for(var Pt,Ct=this.ctx.transform.decompose(),vt=ie(Ct.rotate.shx),Ue=new f,nt=(Ue=(Ue=(Ue=Ue.multiply(Ct.translate)).multiply(Ct.skew)).multiply(Ct.scale)).applyToRectangle(new u(we-q*Fe,Ae-X*he,de*et,me*Qe)),tt=z.call(this,nt),Gt=[],wt=0;wt<tt.length;wt+=1)Gt.indexOf(tt[wt])===-1&&Gt.push(tt[wt]);if(H(Gt),this.autoPaging)for(var hr=Gt[0],Nt=Gt[Gt.length-1],Dt=hr;Dt<Nt+1;Dt++){this.pdf.setPage(Dt);var yr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ft=Dt===1?this.posY+this.margin[0]:this.margin[0],St=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=Dt===1?0:St+(Dt-2)*kt;if(this.ctx.clip_path.length!==0){var Cr=this.path;Pt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(Pt,this.posX+this.margin[3],-ft+Ft+this.ctx.prevPageLastElemOffset),re.call(this,"fill",!0),this.path=Cr}var rr=JSON.parse(JSON.stringify(nt));rr=U([rr],this.posX+this.margin[3],-ft+Ft+this.ctx.prevPageLastElemOffset)[0];var dt=(Dt>hr||Dt<Nt)&&R.call(this);dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yr,kt,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",rr.x,rr.y,rr.w,rr.h,null,null,vt),dt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",nt.x,nt.y,nt.w,nt.h,null,null,vt)};var z=function(D,q,X){var de=[];q=q||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var me=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":de.push(Math.floor((D.y+me)/X)+1);break;case"arc":de.push(Math.floor((D.y+me-D.radius)/X)+1),de.push(Math.floor((D.y+me+D.radius)/X)+1);break;case"qct":var we=ye(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);de.push(Math.floor((we.y+me)/X)+1),de.push(Math.floor((we.y+we.h+me)/X)+1);break;case"bct":var Ae=xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);de.push(Math.floor((Ae.y+me)/X)+1),de.push(Math.floor((Ae.y+Ae.h+me)/X)+1);break;case"rect":de.push(Math.floor((D.y+me)/X)+1),de.push(Math.floor((D.y+D.h+me)/X)+1)}for(var Ce=0;Ce<de.length;Ce+=1)for(;this.pdf.internal.getNumberOfPages()<de[Ce];)j.call(this);return de},j=function(){var D=this.fillStyle,q=this.strokeStyle,X=this.font,de=this.lineCap,me=this.lineWidth,we=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=q,this.font=X,this.lineCap=de,this.lineWidth=me,this.lineJoin=we},U=function(D,q,X){for(var de=0;de<D.length;de++)switch(D[de].type){case"bct":D[de].x2+=q,D[de].y2+=X;case"qct":D[de].x1+=q,D[de].y1+=X;default:D[de].x+=q,D[de].y+=X}return D},H=function(D){return D.sort(function(q,X){return q-X})},B=function(D,q){for(var X,de,me=this.fillStyle,we=this.strokeStyle,Ae=this.lineCap,Ce=this.lineWidth,Be=Math.abs(Ce*this.ctx.transform.scaleX),qe=this.lineJoin,et=JSON.parse(JSON.stringify(this.path)),Qe=JSON.parse(JSON.stringify(this.path)),Fe=[],he=0;he<Qe.length;he++)if(Qe[he].x!==void 0)for(var Pt=z.call(this,Qe[he]),Ct=0;Ct<Pt.length;Ct+=1)Fe.indexOf(Pt[Ct])===-1&&Fe.push(Pt[Ct]);for(var vt=0;vt<Fe.length;vt++)for(;this.pdf.internal.getNumberOfPages()<Fe[vt];)j.call(this);if(H(Fe),this.autoPaging)for(var Ue=Fe[0],nt=Fe[Fe.length-1],tt=Ue;tt<nt+1;tt++){this.pdf.setPage(tt),this.fillStyle=me,this.strokeStyle=we,this.lineCap=Ae,this.lineWidth=Be,this.lineJoin=qe;var Gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],wt=tt===1?this.posY+this.margin[0]:this.margin[0],hr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Dt=tt===1?0:hr+(tt-2)*Nt;if(this.ctx.clip_path.length!==0){var yr=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(X,this.posX+this.margin[3],-Dt+wt+this.ctx.prevPageLastElemOffset),re.call(this,D,!0),this.path=yr}if(de=JSON.parse(JSON.stringify(et)),this.path=U(de,this.posX+this.margin[3],-Dt+wt+this.ctx.prevPageLastElemOffset),q===!1||tt===0){var Ft=(tt>Ue||tt<nt)&&R.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gt,Nt,null).clip().discardPath()),re.call(this,D,q),Ft&&this.pdf.restoreGraphicsState()}this.lineWidth=Ce}else this.lineWidth=Be,re.call(this,D,q),this.lineWidth=Ce;this.path=et},re=function(D,q){if((D!=="stroke"||q||!V.call(this))&&(D==="stroke"||q||!b.call(this))){for(var X,de,me=[],we=this.path,Ae=0;Ae<we.length;Ae++){var Ce=we[Ae];switch(Ce.type){case"begin":me.push({begin:!0});break;case"close":me.push({close:!0});break;case"mt":me.push({start:Ce,deltas:[],abs:[]});break;case"lt":var Be=me.length;if(we[Ae-1]&&!isNaN(we[Ae-1].x)&&(X=[Ce.x-we[Ae-1].x,Ce.y-we[Ae-1].y],Be>0)){for(;Be>=0;Be--)if(me[Be-1].close!==!0&&me[Be-1].begin!==!0){me[Be-1].deltas.push(X),me[Be-1].abs.push(Ce);break}}break;case"bct":X=[Ce.x1-we[Ae-1].x,Ce.y1-we[Ae-1].y,Ce.x2-we[Ae-1].x,Ce.y2-we[Ae-1].y,Ce.x-we[Ae-1].x,Ce.y-we[Ae-1].y],me[me.length-1].deltas.push(X);break;case"qct":var qe=we[Ae-1].x+2/3*(Ce.x1-we[Ae-1].x),et=we[Ae-1].y+2/3*(Ce.y1-we[Ae-1].y),Qe=Ce.x+2/3*(Ce.x1-Ce.x),Fe=Ce.y+2/3*(Ce.y1-Ce.y),he=Ce.x,Pt=Ce.y;X=[qe-we[Ae-1].x,et-we[Ae-1].y,Qe-we[Ae-1].x,Fe-we[Ae-1].y,he-we[Ae-1].x,Pt-we[Ae-1].y],me[me.length-1].deltas.push(X);break;case"arc":me.push({deltas:[],abs:[],arc:!0}),Array.isArray(me[me.length-1].abs)&&me[me.length-1].abs.push(Ce)}}de=q?null:D==="stroke"?"stroke":"fill";for(var Ct=!1,vt=0;vt<me.length;vt++)if(me[vt].arc)for(var Ue=me[vt].abs,nt=0;nt<Ue.length;nt++){var tt=Ue[nt];tt.type==="arc"?A.call(this,tt.x,tt.y,tt.radius,tt.startAngle,tt.endAngle,tt.counterclockwise,void 0,q,!Ct):L.call(this,tt.x,tt.y),Ct=!0}else if(me[vt].close===!0)this.pdf.internal.out("h"),Ct=!1;else if(me[vt].begin!==!0){var Gt=me[vt].start.x,wt=me[vt].start.y;M.call(this,me[vt].deltas,Gt,wt),Ct=!0}de&&T.call(this,de),q&&F.call(this)}},ce=function(D){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-X;case"top":return D+q-X;case"hanging":return D+q-2*X;case"middle":return D+q/2-X;default:return D}},N=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};w.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(q,X){this.colorStops.push([q,X])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},w.prototype.createPattern=function(){return this.createLinearGradient()},w.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(D,q,X,de,me,we,Ae,Ce,Be){for(var qe=oe.call(this,X,de,me,we),et=0;et<qe.length;et++){var Qe=qe[et];et===0&&(Be?k.call(this,Qe.x1+D,Qe.y1+q):L.call(this,Qe.x1+D,Qe.y1+q)),$.call(this,D,q,Qe.x2,Qe.y2,Qe.x3,Qe.y3,Qe.x4,Qe.y4)}Ce?F.call(this):T.call(this,Ae)},T=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(D,q){this.pdf.internal.out(t(D)+" "+n(q)+" m")},v=function(D){var q;switch(D.align){case"right":case"end":q="right";break;case"center":q="center";break;default:q="left"}var X=this.pdf.getTextDimensions(D.text),de=ce.call(this,D.y),me=N.call(this,de)-X.h,we=this.ctx.transform.applyToPoint(new c(D.x,de)),Ae=this.ctx.transform.decompose(),Ce=new f;Ce=(Ce=(Ce=Ce.multiply(Ae.translate)).multiply(Ae.skew)).multiply(Ae.scale);for(var Be,qe,et,Qe=this.ctx.transform.applyToRectangle(new u(D.x,de,X.w,X.h)),Fe=Ce.applyToRectangle(new u(D.x,me,X.w,X.h)),he=z.call(this,Fe),Pt=[],Ct=0;Ct<he.length;Ct+=1)Pt.indexOf(he[Ct])===-1&&Pt.push(he[Ct]);if(H(Pt),this.autoPaging)for(var vt=Pt[0],Ue=Pt[Pt.length-1],nt=vt;nt<Ue+1;nt++){this.pdf.setPage(nt);var tt=nt===1?this.posY+this.margin[0]:this.margin[0],Gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wt=this.pdf.internal.pageSize.height-this.margin[2],hr=wt-this.margin[0],Nt=this.pdf.internal.pageSize.width-this.margin[1],Dt=Nt-this.margin[3],yr=nt===1?0:Gt+(nt-2)*hr;if(this.ctx.clip_path.length!==0){var Ft=this.path;Be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(Be,this.posX+this.margin[3],-1*yr+tt),re.call(this,"fill",!0),this.path=Ft}var St=U([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-yr+tt+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qe*D.scale),et=this.lineWidth,this.lineWidth=et*D.scale);var kt=this.autoPaging!=="text";if(kt||St.y+St.h<=wt){if(kt||St.y>=tt&&St.x<=Nt){var ft=kt?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||Nt-St.x)[0],Cr=U([JSON.parse(JSON.stringify(Qe))],this.posX+this.margin[3],-yr+tt+this.ctx.prevPageLastElemOffset)[0],rr=kt&&(nt>vt||nt<Ue)&&R.call(this);rr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dt,hr,null).clip().discardPath()),this.pdf.text(ft,Cr.x,Cr.y,{angle:D.angle,align:q,renderingMode:D.renderingMode}),rr&&this.pdf.restoreGraphicsState()}}else St.y<wt&&(this.ctx.prevPageLastElemOffset+=wt-St.y);D.scale>=.01&&(this.pdf.setFontSize(qe),this.lineWidth=et)}else D.scale>=.01&&(qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qe*D.scale),et=this.lineWidth,this.lineWidth=et*D.scale),this.pdf.text(D.text,we.x+this.posX,we.y+this.posY,{angle:D.angle,align:q,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(qe),this.lineWidth=et)},L=function(D,q,X,de){X=X||0,de=de||0,this.pdf.internal.out(t(D+X)+" "+n(q+de)+" l")},M=function(D,q,X){return this.pdf.lines(D,q,X,null,null)},$=function(D,q,X,de,me,we,Ae,Ce){this.pdf.internal.out([e(o(X+D)),e(a(de+q)),e(o(me+D)),e(a(we+q)),e(o(Ae+D)),e(a(Ce+q)),"c"].join(" "))},oe=function(D,q,X,de){for(var me=2*Math.PI,we=Math.PI/2;q>X;)q-=me;var Ae=Math.abs(X-q);Ae<me&&de&&(Ae=me-Ae);for(var Ce=[],Be=de?-1:1,qe=q;Ae>1e-5;){var et=qe+Be*Math.min(Ae,we);Ce.push(se.call(this,D,qe,et)),Ae-=Math.abs(et-qe),qe=et}return Ce},se=function(D,q,X){var de=(X-q)/2,me=D*Math.cos(de),we=D*Math.sin(de),Ae=me,Ce=-we,Be=Ae*Ae+Ce*Ce,qe=Be+Ae*me+Ce*we,et=4/3*(Math.sqrt(2*Be*qe)-qe)/(Ae*we-Ce*me),Qe=Ae-et*Ce,Fe=Ce+et*Ae,he=Qe,Pt=-Fe,Ct=de+q,vt=Math.cos(Ct),Ue=Math.sin(Ct);return{x1:D*Math.cos(q),y1:D*Math.sin(q),x2:Qe*vt-Fe*Ue,y2:Qe*Ue+Fe*vt,x3:he*vt-Pt*Ue,y3:he*Ue+Pt*vt,x4:D*Math.cos(X),y4:D*Math.sin(X)}},ie=function(D){return 180*D/Math.PI},ye=function(D,q,X,de,me,we){var Ae=D+.5*(X-D),Ce=q+.5*(de-q),Be=me+.5*(X-me),qe=we+.5*(de-we),et=Math.min(D,me,Ae,Be),Qe=Math.max(D,me,Ae,Be),Fe=Math.min(q,we,Ce,qe),he=Math.max(q,we,Ce,qe);return new u(et,Fe,Qe-et,he-Fe)},xe=function(D,q,X,de,me,we,Ae,Ce){var Be,qe,et,Qe,Fe,he,Pt,Ct,vt,Ue,nt,tt,Gt,wt,hr=X-D,Nt=de-q,Dt=me-X,yr=we-de,Ft=Ae-me,St=Ce-we;for(qe=0;qe<41;qe++)vt=(Pt=(et=D+(Be=qe/40)*hr)+Be*((Fe=X+Be*Dt)-et))+Be*(Fe+Be*(me+Be*Ft-Fe)-Pt),Ue=(Ct=(Qe=q+Be*Nt)+Be*((he=de+Be*yr)-Qe))+Be*(he+Be*(we+Be*St-he)-Ct),qe==0?(nt=vt,tt=Ue,Gt=vt,wt=Ue):(nt=Math.min(nt,vt),tt=Math.min(tt,Ue),Gt=Math.max(Gt,vt),wt=Math.max(wt,Ue));return new u(Math.round(nt),Math.round(tt),Math.round(Gt-nt),Math.round(wt-tt))},ee=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,q,X=(D=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:q}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(Tt.API),(function(r){var e=function(c){var u,f,d,g,w,C,b,V,R,z;for(f=[],d=0,g=(c+=u="\0\0\0\0".slice(c.length%4||4)).length;g>d;d+=4)(w=(c.charCodeAt(d)<<24)+(c.charCodeAt(d+1)<<16)+(c.charCodeAt(d+2)<<8)+c.charCodeAt(d+3))!==0?(C=(w=((w=((w=((w=(w-(z=w%85))/85)-(R=w%85))/85)-(V=w%85))/85)-(b=w%85))/85)%85,f.push(C+33,b+33,V+33,R+33,z+33)):f.push(122);return(function(j,U){for(var H=U;H>0;H--)j.pop()})(f,u.length),String.fromCharCode.apply(String,f)+"~>"},t=function(c){var u,f,d,g,w,C=String,b="length",V=255,R="charCodeAt",z="slice",j="replace";for(c[z](-2),c=c[z](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),d=[],g=0,w=(c+=u="uuuuu"[z](c[b]%5||5))[b];w>g;g+=5)f=52200625*(c[R](g)-33)+614125*(c[R](g+1)-33)+7225*(c[R](g+2)-33)+85*(c[R](g+3)-33)+(c[R](g+4)-33),d.push(V&f>>24,V&f>>16,V&f>>8,V&f);return(function(U,H){for(var B=H;B>0;B--)U.pop()})(d,u[b]),C.fromCharCode.apply(C,d)},n=function(c){return c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},o=function(c){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),u.test(c)===!1)return"";for(var f="",d=0;d<c.length;d+=2)f+=String.fromCharCode("0x"+(c[d]+c[d+1]));return f},a=function(c){for(var u=new Uint8Array(c.length),f=c.length;f--;)u[f]=c.charCodeAt(f);return(u=m0(u)).reduce(function(d,g){return d+String.fromCharCode(g)},"")};r.processDataByFilters=function(c,u){var f=0,d=c||"",g=[];for(typeof(u=u||[])=="string"&&(u=[u]),f=0;f<u.length;f+=1)switch(u[f]){case"ASCII85Decode":case"/ASCII85Decode":d=t(d),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=o(d),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=n(d),g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=a(d),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[f]+'" is not implemented')}return{data:d,reverseChain:g.reverse().join(" ")}}})(Tt.API),(function(r){r.loadFile=function(e,t,n){return(function(o,a,c){a=a!==!1,c=typeof c=="function"?c:function(){};var u=void 0;try{u=(function(f,d,g){var w=new XMLHttpRequest,C=0,b=function(V){var R=V.length,z=[],j=String.fromCharCode;for(C=0;C<R;C+=1)z.push(j(255&V.charCodeAt(C)));return z.join("")};if(w.open("GET",f,!d),w.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(w.onload=function(){w.status===200?g(b(this.responseText)):g(void 0)}),w.send(null),d&&w.status===200)return b(w.responseText)})(o,a,c)}catch{}return u})(e,t,n)},r.loadImageFile=r.loadFile})(Tt.API),(function(r){function e(){return(Jt.html2canvas?Promise.resolve(Jt.html2canvas):Ou(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function t(){return(Jt.DOMPurify?Promise.resolve(Jt.DOMPurify):Ou(()=>import("./purify.es-aGzT-_H7.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var n=function(u){var f=qr(u);return f==="undefined"?"undefined":f==="string"||u instanceof String?"string":f==="number"||u instanceof Number?"number":f==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":f==="object"?"object":"unknown"},o=function(u,f){var d=document.createElement(u);for(var g in f.className&&(d.className=f.className),f.innerHTML&&f.dompurify&&(d.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)d.style[g]=f.style[g];return d},a=function u(f,d){for(var g=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),w=f.firstChild;w;w=w.nextSibling)d!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||g.appendChild(u(w,d));return f.nodeType===1&&(f.nodeName==="CANVAS"?(g.width=f.width,g.height=f.height,g.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(g.value=f.value),g.addEventListener("load",function(){g.scrollTop=f.scrollTop,g.scrollLeft=f.scrollLeft},!0)),g},c=function u(f){var d=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),g=u.convert(Promise.resolve(),d);return(g=g.setProgress(1,u,1,[u])).set(f)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(u,f){return u.__proto__=f||c.prototype,u},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(u,f){return this.then(function(){switch(f=f||(function(d){switch(n(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(u),f){case"string":return this.then(t).then(function(d){return this.set({src:o("div",{innerHTML:u,dompurify:d})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},c.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(f){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,f(this.prop.container,d)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(f){var d=this.opt.jsPDF,g=this.opt.fontFaces,w=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,C=Object.assign({async:!0,allowTaint:!0,scale:w,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete C.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=g,g)for(var b=0;b<g.length;++b){var V=g[b],R=V.src.find(function(z){return z.format==="truetype"});R&&d.addFont(R.url,V.ref.name,V.ref.style)}return C.windowHeight=C.windowHeight||0,C.windowHeight=C.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):C.windowHeight,d.context2d.save(!0),f(this.prop.container,C)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(u,f,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(u,f):this.outputPdf(u,f)},c.prototype.outputPdf=function(u,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,f)})},c.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},c.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(u){if(n(u)!=="object")return this;var f=Object.keys(u||{}).map(function(d){if(d in c.template.prop)return function(){this.prop[d]=u[d]};switch(d){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[d]=u[d]}}},this);return this.then(function(){return this.thenList(f)})},c.prototype.get=function(u,f){return this.then(function(){var d=u in c.template.prop?this.prop[u]:this.opt[u];return f?f(d):d})},c.prototype.setMargin=function(u){return this.then(function(){switch(n(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},c.prototype.setPageSize=function(u){function f(d,g){return Math.floor(d*g/72*96)}return this.then(function(){(u=u||Tt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:f(u.inner.width,u.k),height:f(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},c.prototype.setProgress=function(u,f,d,g){return u!=null&&(this.progress.val=u),f!=null&&(this.progress.state=f),d!=null&&(this.progress.n=d),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(u,f,d,g){return this.setProgress(u?this.progress.val+u:null,f||null,d?this.progress.n+d:null,g?this.progress.stack.concat(g):null)},c.prototype.then=function(u,f){var d=this;return this.thenCore(u,f,function(g,w){return d.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,function(C){return d.updateProgress(null,g),C}).then(g,w).then(function(C){return d.updateProgress(1),C})})},c.prototype.thenCore=function(u,f,d){d=d||Promise.prototype.then;var g=this;u&&(u=u.bind(g)),f&&(f=f.bind(g));var w=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?g:c.convert(Object.assign({},g),Promise.prototype),C=d.call(w,u,f);return c.convert(C,g.__proto__)},c.prototype.thenExternal=function(u,f){return Promise.prototype.then.call(this,u,f)},c.prototype.thenList=function(u){var f=this;return u.forEach(function(d){f=f.thenCore(d)}),f},c.prototype.catch=function(u){u&&(u=u.bind(this));var f=Promise.prototype.catch.call(this,u);return c.convert(f,this)},c.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},c.prototype.error=function(u){return this.then(function(){throw new Error(u)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,Tt.getPageSize=function(u,f,d){if(qr(u)==="object"){var g=u;u=g.orientation,f=g.unit||f,d=g.format||d}f=f||"mm",d=d||"a4",u=(""+(u||"P")).toLowerCase();var w,C=(""+d).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":w=1;break;case"mm":w=72/25.4;break;case"cm":w=72/2.54;break;case"in":w=72;break;case"px":w=.75;break;case"pc":case"em":w=12;break;case"ex":w=6;break;default:throw"Invalid unit: "+f}var V,R=0,z=0;if(b.hasOwnProperty(C))R=b[C][1]/w,z=b[C][0]/w;else try{R=d[1],z=d[0]}catch{throw new Error("Invalid format: "+d)}if(u==="p"||u==="portrait")u="p",z>R&&(V=z,z=R,R=V);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",R>z&&(V=z,z=R,R=V)}return{width:z,height:R,unit:f,k:w,orientation:u}},r.html=function(u,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(Km):null;var d=new c(f);return f.worker?d:d.from(u).doCallback()}})(Tt.API),Tt.API.addJS=function(r){return f2=r,this.internal.events.subscribe("postPutResources",function(){vf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(vf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),h2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+f2+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){vf!==void 0&&h2!==void 0&&this.internal.out("/Names <</JavaScript "+vf+" 0 R>>")}),this},(function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=t.outline.render().split(/\r\n/),a=0;a<o.length;a++){var c=o[a],u=n.exec(c);if(u!=null){var f=u[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(c)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,g=[];for(a=0;a<d;a++){var w=t.internal.newObject();g.push(w);var C=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+C.objId+" 0 R /XYZ null null null]>> endobj")}var b=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<g.length;a++)t.internal.write("(page_"+(a+1)+")"+g[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+b+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,o,a){var c={title:o,options:a,children:[]};return n==null&&(n=this.root),n.children.push(c),c},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var o=0;o<n.children.length;o++)this.genIds_r(n.children[o])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var c=n.children[a];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var u=this.count=this.count_r({count:0},c);if(u>0&&this.line("/Count "+u),c.options&&c.options.pageNumber){var f=t.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,o){for(var a=0;a<o.children.length;a++)n.count++,this.count_r(n,o.children[a]);return n.count}}])})(Tt.API),(function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,o,a,c,u){var f,d=this.decode.DCT_DECODE,g=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=c||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,f=(function(w){for(var C,b=256*w.charCodeAt(4)+w.charCodeAt(5),V=w.length,R={width:0,height:0,numcomponents:1},z=4;z<V;z+=2){if(z+=b,e.indexOf(w.charCodeAt(z+1))!==-1){C=256*w.charCodeAt(z+5)+w.charCodeAt(z+6),R={width:256*w.charCodeAt(z+7)+w.charCodeAt(z+8),height:C,numcomponents:w.charCodeAt(z+9)};break}b=256*w.charCodeAt(z+2)+w.charCodeAt(z+3)}return R})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),f.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}g={data:t,width:f.width,height:f.height,colorSpace:u,bitsPerComponent:8,filter:d,index:n,alias:o}}return g}})(Tt.API),Tt.API.processPNG=function(r,e,t,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var o,a=oT(r,{checkCrc:!0}),c=a.width,u=a.height,f=a.channels,d=a.palette,g=a.depth;o=d&&f===1?(function(A){for(var T=A.width,F=A.height,k=A.data,v=A.palette,L=A.depth,M=!1,$=[],oe=[],se=void 0,ie=!1,ye=0,xe=0;xe<v.length;xe++){var ee=y5(v[xe],4),D=ee[0],q=ee[1],X=ee[2],de=ee[3];$.push(D,q,X),de!=null&&(de===0?(ye++,oe.length<1&&oe.push(xe)):de<255&&(ie=!0))}if(ie||ye>1){M=!0,oe=void 0;var me=T*F;se=new Uint8Array(me);for(var we=new DataView(k.buffer),Ae=0;Ae<me;Ae++){var Ce=Ym(we,Ae,L),Be=y5(v[Ce],4)[3];se[Ae]=Be}}else ye===0&&(oe=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:M?8:void 0,colorBytes:k,alphaBytes:se,needSMask:M,palette:$,mask:oe}})(a):f===2||f===4?(function(A){for(var T=A.data,F=A.width,k=A.height,v=A.channels,L=A.depth,M=v===2?"DeviceGray":"DeviceRGB",$=v-1,oe=F*k,se=$,ie=oe*se,ye=1*oe,xe=Math.ceil(ie*L/8),ee=Math.ceil(ye*L/8),D=new Uint8Array(xe),q=new Uint8Array(ee),X=new DataView(T.buffer),de=new DataView(D.buffer),me=new DataView(q.buffer),we=!1,Ae=0;Ae<oe;Ae++){for(var Ce=Ae*v,Be=0;Be<se;Be++)S2(de,Ym(X,Ce+Be,L),Ae*se+Be,L);var qe=Ym(X,Ce+se,L);qe<(1<<L)-1&&(we=!0),S2(me,qe,1*Ae,L)}return{colorSpace:M,colorsPerPixel:$,sMaskBitsPerComponent:we?L:void 0,colorBytes:D,alphaBytes:q,needSMask:we}})(a):(function(A){var T=A.data,F=A.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:F,colorsPerPixel:F==="DeviceGray"?1:3,colorBytes:T instanceof Uint16Array?(function(k){for(var v=k.length,L=new Uint8Array(2*v),M=new DataView(L.buffer,L.byteOffset,L.byteLength),$=0;$<v;$++)M.setUint16(2*$,k[$],!1);return L})(T):T,needSMask:!1}})(a);var w,C,b,V=o,R=V.colorSpace,z=V.colorsPerPixel,j=V.sMaskBitsPerComponent,U=V.colorBytes,H=V.alphaBytes,B=V.needSMask,re=V.palette,ce=V.mask,N=null;return n!==Tt.API.image_compression.NONE&&typeof m0=="function"?(N=(function(A){var T;switch(A){case Tt.API.image_compression.FAST:T=11;break;case Tt.API.image_compression.MEDIUM:T=13;break;case Tt.API.image_compression.SLOW:T=14;break;default:T=12}return T})(n),w=this.decode.FLATE_DECODE,C="/Predictor ".concat(N," /Colors ").concat(z," /BitsPerComponent ").concat(g," /Columns ").concat(c),r=y2(U,Math.ceil(c*z*g/8),z,g,n),B&&(b=y2(H,Math.ceil(c*j/8),1,j,n))):(w=void 0,C=void 0,r=U,B&&(b=H)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:t,data:r,index:e,filter:w,decodeParameters:C,transparency:ce,palette:re,sMask:b,predictor:N,width:c,height:u,bitsPerComponent:g,sMaskBitsPerComponent:j,colorSpace:R}}},(function(r){r.processGIF89A=function(e,t,n,o){var a=new CT(e),c=a.width,u=a.height,f=[];a.decodeAndBlitFrameRGBA(0,f);var d={data:f,width:c,height:u},g=new Qm(100).encode(d,100);return r.processJPEG.call(this,g,t,n,o)},r.processGIF87A=r.processGIF89A})(Tt.API),Zs.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:n,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Zs.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){Qr.log("bit decode error:"+t)}},Zs.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,o=0;o<e;o++)for(var a=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+8*o*4,u=0;u<8&&8*o+u<this.width;u++){var f=this.palette[a>>7-u&1];this.data[c+4*u]=f.blue,this.data[c+4*u+1]=f.green,this.data[c+4*u+2]=f.red,this.data[c+4*u+3]=255}t!==0&&(this.pos+=4-t)}},Zs.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,o=0;o<r;o++){var a=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+2*o*4,u=a>>4,f=15&a,d=this.palette[u];if(this.data[c]=d.blue,this.data[c+1]=d.green,this.data[c+2]=d.red,this.data[c+3]=255,2*o+1>=this.width)break;d=this.palette[f],this.data[c+4]=d.blue,this.data[c+4+1]=d.green,this.data[c+4+2]=d.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},Zs.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;if(o<this.palette.length){var c=this.palette[o];this.data[a]=c.red,this.data[a+1]=c.green,this.data[a+2]=c.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}r!==0&&(this.pos+=4-r)}},Zs.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(a&e)/e*255|0,u=(a>>5&e)/e*255|0,f=(a>>10&e)/e*255|0,d=a>>15?255:0,g=n*this.width*4+4*o;this.data[g]=f,this.data[g+1]=u,this.data[g+2]=c,this.data[g+3]=d}this.pos+=r}},Zs.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var o=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(c&e)/e*255|0,f=(c>>5&t)/t*255|0,d=(c>>11)/e*255|0,g=o*this.width*4+4*a;this.data[g]=d,this.data[g+1]=f,this.data[g+2]=u,this.data[g+3]=255}this.pos+=r}},Zs.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=a,this.data[c+1]=o,this.data[c+2]=n,this.data[c+3]=255}this.pos+=this.width%4}},Zs.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=a,this.data[u+1]=o,this.data[u+2]=n,this.data[u+3]=c}},Zs.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(e,t,n,o){var a=new Zs(e,!1),c=a.width,u=a.height,f={data:a.getData(),width:c,height:u},d=new Qm(100).encode(f,100);return r.processJPEG.call(this,d,t,n,o)}})(Tt.API),T2.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(e,t,n,o){var a=new T2(e),c=a.width,u=a.height,f={data:a.getData(),width:c,height:u},d=new Qm(100).encode(f,100);return r.processJPEG.call(this,d,t,n,o)}})(Tt.API),Tt.API.processRGBA=function(r,e,t){for(var n=r.data,o=n.length,a=new Uint8Array(o/4*3),c=new Uint8Array(o/4),u=0,f=0,d=0;d<o;d+=4){var g=n[d],w=n[d+1],C=n[d+2],b=n[d+3];a[u++]=g,a[u++]=w,a[u++]=C,c[f++]=b}var V=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:V,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Tt.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Eu=Tt.API,bf=Eu.getCharWidthsArray=function(r,e){var t,n,o=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:o.metadata.Unicode.widths,f=u.fof?u.fof:1,d=e.kerning?e.kerning:o.metadata.Unicode.kerning,g=d.fof?d.fof:1,w=e.doKerning!==!1,C=0,b=r.length,V=0,R=u[0]||f,z=[];for(t=0;t<b;t++)n=r.charCodeAt(t),typeof o.metadata.widthOfString=="function"?z.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(n))+c*(1e3/a)||0)/1e3):(C=w&&qr(d[n])==="object"&&!isNaN(parseInt(d[n][V],10))?d[n][V]/g:0,z.push((u[n]||R)/f+C)),V=n;return z},p2=Eu.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return Eu.processArabic&&(r=Eu.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,o)/t:bf.apply(this,arguments).reduce(function(a,c){return a+c},0)},m2=function(r,e,t,n){for(var o=[],a=0,c=r.length,u=0;a!==c&&u+e[a]<t;)u+=e[a],a++;o.push(r.slice(0,a));var f=a;for(u=0;a!==c;)u+e[a]>n&&(o.push(r.slice(f,a)),u=0,f=a),u+=e[a],a++;return f!==a&&o.push(r.slice(f,a)),o},g2=function(r,e,t){t||(t={});var n,o,a,c,u,f,d,g=[],w=[g],C=t.textIndent||0,b=0,V=0,R=r.split(" "),z=bf.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?R[0].length+2:t.lineIndent||0){var j=Array(f).join(" "),U=[];R.map(function(B){(B=B.split(/\s*\n/)).length>1?U=U.concat(B.map(function(re,ce){return(ce&&re.length?`
`:"")+re})):U.push(B[0])}),R=U,f=p2.apply(this,[j,t])}for(a=0,c=R.length;a<c;a++){var H=0;if(n=R[a],f&&n[0]==`
`&&(n=n.substr(1),H=1),C+b+(V=(o=bf.apply(this,[n,t])).reduce(function(B,re){return B+re},0))>e||H){if(V>e){for(u=m2.apply(this,[n,o,e-(C+b),e]),g.push(u.shift()),g=[u.pop()];u.length;)w.push([u.shift()]);V=o.slice(n.length-(g[0]?g[0].length:0)).reduce(function(B,re){return B+re},0)}else g=[n];w.push(g),C=V+f,b=z}else g.push(n),C+=b+V,b=z}return d=f?function(B,re){return(re?j:"")+B.join(" ")}:function(B){return B.join(" ")},w.map(d)},Eu.splitTextToSize=function(r,e,t){var n,o=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var w=this.internal.getFont(g.fontName,g.fontStyle),C="Unicode";return w.metadata[C]?{widths:w.metadata[C].widths||{0:1},kerning:w.metadata[C].kerning||{}}:{font:w.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/o;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/o:0,a.lineIndent=t.lineIndent;var u,f,d=[];for(u=0,f=n.length;u<f;u++)d=d.concat(g2.apply(this,[n[u],c,a]));return d},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",n={},o={},a=0;a<16;a++)n[t[a]]=e[a],o[e[a]]=t[a];var c=function(C){return"0x"+parseInt(C,10).toString(16)},u=r.__fontmetrics__.compress=function(C){var b,V,R,z,j=["{"];for(var U in C){if(b=C[U],isNaN(parseInt(U,10))?V="'"+U+"'":(U=parseInt(U,10),V=(V=c(U).slice(2)).slice(0,-1)+o[V.slice(-1)]),typeof b=="number")b<0?(R=c(b).slice(3),z="-"):(R=c(b).slice(2),z=""),R=z+R.slice(0,-1)+o[R.slice(-1)];else{if(qr(b)!=="object")throw new Error("Don't know what to do with value type "+qr(b)+".");R=u(b)}j.push(V+R)}return j.push("}"),j.join("")},f=r.__fontmetrics__.uncompress=function(C){if(typeof C!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,V,R,z,j={},U=1,H=j,B=[],re="",ce="",N=C.length-1,A=1;A<N;A+=1)(z=C[A])=="'"?b?(R=b.join(""),b=void 0):b=[]:b?b.push(z):z=="{"?(B.push([H,R]),H={},R=void 0):z=="}"?((V=B.pop())[0][V[1]]=H,R=void 0,H=V[0]):z=="-"?U=-1:R===void 0?n.hasOwnProperty(z)?(re+=n[z],R=parseInt(re,16)*U,U=1,re=""):re+=z:n.hasOwnProperty(z)?(ce+=n[z],H[R]=parseInt(ce,16)*U,U=1,R=void 0,ce=""):ce+=z;return j},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},w={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(C){var b=C.font,V=w.Unicode[b.postScriptName];V&&(b.metadata.Unicode={},b.metadata.Unicode.widths=V.widths,b.metadata.Unicode.kerning=V.kerning);var R=g.Unicode[b.postScriptName];R&&(b.metadata.Unicode.encoding=R,b.encoding=R.codePages[0])}])})(Tt.API),(function(r){var e=function(t){for(var n=t.length,o=new Uint8Array(n),a=0;a<n;a++)o[a]=t.charCodeAt(a);return o};r.API.events.push(["addFont",function(t){var n=void 0,o=t.font,a=t.instance;if(!o.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(n=a.existsFileInVFS(o.postScriptName)===!1?a.loadFile(o.postScriptName):a.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(c,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(Ef(u)),c.metadata=r.API.TTFFont.open(u),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(o,n)}}])})(Tt),Tt.API.addSvgAsImage=function(r,e,t,n,o,a,c,u){if(isNaN(e)||isNaN(t))throw Qr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(o))throw Qr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=n,f.height=o;var d=f.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,f.width,f.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},w=this;return(Jt.canvg?Promise.resolve(Jt.canvg):Ou(()=>import("./index.es-DVw73KAT.js"),[])).catch(function(C){return Promise.reject(new Error("Could not load canvg: "+C))}).then(function(C){return C.default?C.default:C}).then(function(C){return C.fromString(d,r,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(g)}).then(function(){w.addImage(f.toDataURL("image/jpeg",1),e,t,n,o,c,u)})},Tt.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var o=0;o<this.internal.pages[n].length;o++)this.internal.pages[n][o]=this.internal.pages[n][o].replace(e,t);return this},Tt.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,o,a,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(c),f=[],d=0,g=0,w=0;function C(V,R){var z,j=!1;for(z=0;z<V.length;z+=1)V[z]===R&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var b=u.length;for(w=0;w<b;w+=1)t[u[w]].value=t[u[w]].defaultValue,t[u[w]].explicitSet=!1}if(qr(r)==="object"){for(o in r)if(a=r[o],C(u,o)&&a!==void 0){if(t[o].type==="boolean"&&typeof a=="boolean")t[o].value=a;else if(t[o].type==="name"&&C(t[o].valueSet,a))t[o].value=a;else if(t[o].type==="integer"&&Number.isInteger(a))t[o].value=a;else if(t[o].type==="array"){for(d=0;d<a.length;d+=1)if(n=!0,a[d].length===1&&typeof a[d][0]=="number")f.push(String(a[d]-1));else if(a[d].length>1){for(g=0;g<a[d].length;g+=1)typeof a[d][g]!="number"&&(n=!1);n===!0&&f.push([a[d][0]-1,a[d][1]-1].join(" "))}t[o].value="["+f.join(" ")+"]"}else t[o].value=t[o].defaultValue;t[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var V,R=[];for(V in t)t[V].explicitSet===!0&&(t[V].type==="name"?R.push("/"+V+" /"+t[V].value):R.push("/"+V+" "+t[V].value));R.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+R.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),d=a.length+c.length+u.length+o.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(o+a+c+u+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Tt.API),(function(r){var e=r.API,t=e.pdfEscape16=function(a,c){for(var u,f=c.metadata.Unicode.widths,d=["","0","00","000","0000"],g=[""],w=0,C=a.length;w<C;++w){if(u=c.metadata.characterToGlyph(a.charCodeAt(w)),c.metadata.glyIdsUsed.push(u),c.metadata.toUnicode[u]=a.charCodeAt(w),f.indexOf(u)==-1&&(f.push(u),f.push([parseInt(c.metadata.widthOfGlyph(u),10)])),u=="0")return g.join("");u=u.toString(16),g.push(d[4-u.length],u)}return g.join("")},n=function(a){var c,u,f,d,g,w,C;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],w=0,C=(u=Object.keys(a).sort(function(b,V){return b-V})).length;w<C;w++)c=u[w],f.length>=100&&(g+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),a[c]!==void 0&&a[c]!==null&&typeof a[c].toString=="function"&&(d=("0000"+a[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),f.push("<"+c+"><"+d+">"));return f.length&&(g+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),g+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(c){var u=c.font,f=c.out,d=c.newObject,g=c.putStream;if(u.metadata instanceof r.API.TTFFont&&u.encoding==="Identity-H"){for(var w=u.metadata.Unicode.widths,C=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),b="",V=0;V<C.length;V++)b+=String.fromCharCode(C[V]);var R=d();g({data:b,addLength1:!0,objectId:R}),f("endobj");var z=d();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:z}),f("endobj");var j=d();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+Ru(u.fontName)),f("/FontFile2 "+R+" 0 R"),f("/FontBBox "+r.API.PDFObject.convert(u.metadata.bbox)),f("/Flags "+u.metadata.flags),f("/StemV "+u.metadata.stemV),f("/ItalicAngle "+u.metadata.italicAngle),f("/Ascent "+u.metadata.ascender),f("/Descent "+u.metadata.decender),f("/CapHeight "+u.metadata.capHeight),f(">>"),f("endobj");var U=d();f("<<"),f("/Type /Font"),f("/BaseFont /"+Ru(u.fontName)),f("/FontDescriptor "+j+" 0 R"),f("/W "+r.API.PDFObject.convert(w)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+u.encoding+")"),f(">>"),f(">>"),f("endobj"),u.objectNumber=d(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+z+" 0 R"),f("/BaseFont /"+Ru(u.fontName)),f("/Encoding /"+u.encoding),f("/DescendantFonts ["+U+" 0 R]"),f(">>"),f("endobj"),u.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(c){var u=c.font,f=c.out,d=c.newObject,g=c.putStream;if(u.metadata instanceof r.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var w=u.metadata.rawData,C="",b=0;b<w.length;b++)C+=String.fromCharCode(w[b]);var V=d();g({data:C,addLength1:!0,objectId:V}),f("endobj");var R=d();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:R}),f("endobj");var z=d();f("<<"),f("/Descent "+u.metadata.decender),f("/CapHeight "+u.metadata.capHeight),f("/StemV "+u.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+V+" 0 R"),f("/Flags 96"),f("/FontBBox "+r.API.PDFObject.convert(u.metadata.bbox)),f("/FontName /"+Ru(u.fontName)),f("/ItalicAngle "+u.metadata.italicAngle),f("/Ascent "+u.metadata.ascender),f(">>"),f("endobj"),u.objectNumber=d();for(var j=0;j<u.metadata.hmtx.widths.length;j++)u.metadata.hmtx.widths[j]=parseInt(u.metadata.hmtx.widths[j]*(1e3/u.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+R+" 0 R/BaseFont/"+Ru(u.fontName)+"/FontDescriptor "+z+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),f("endobj"),u.isAlreadyPutted=!0}})(a)}]);var o=function(a){var c,u=a.text||"",f=a.x,d=a.y,g=a.options||{},w=a.mutex||{},C=w.pdfEscape,b=w.activeFontKey,V=w.fonts,R=b,z="",j=0,U="",H=V[R].encoding;if(V[R].encoding!=="Identity-H")return{text:u,x:f,y:d,options:g,mutex:w};for(U=u,R=b,Array.isArray(u)&&(U=u[0]),j=0;j<U.length;j+=1)V[R].metadata.hasOwnProperty("cmap")&&(c=V[R].metadata.cmap.unicode.codeMap[U[j].charCodeAt(0)]),c||U[j].charCodeAt(0)<256&&V[R].metadata.hasOwnProperty("Unicode")?z+=U[j]:z+="";var B="";return parseInt(R.slice(1))<14||H==="WinAnsiEncoding"?B=C(z,R).split("").map(function(re){return re.charCodeAt(0).toString(16)}).join(""):H==="Identity-H"&&(B=t(z,V[R])),w.isHex=!0,{text:B,x:f,y:d,options:g,mutex:w}};e.events.push(["postProcessText",function(a){var c=a.text||"",u=[],f={text:c,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(c)){var d=0;for(d=0;d<c.length;d+=1)Array.isArray(c[d])&&c[d].length===3?u.push([o(Object.assign({},f,{text:c[d][0]})).text,c[d][1],c[d][2]]):u.push(o(Object.assign({},f,{text:c[d]})).text);a.text=u}else a.text=o(Object.assign({},f,{text:c})).text}])})(Tt),(function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Tt.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var o,a,c,u,f,d,g,w=e,C=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],V={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},R={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},z=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),U=!1,H=0;this.__bidiEngine__={};var B=function(k){var v=k.charCodeAt(),L=v>>8,M=R[L];return M!==void 0?w[256*M+(255&v)]:L===252||L===253?"AL":j.test(L)?"L":L===8?"R":"N"},re=function(k){for(var v,L=0;L<k.length;L++){if((v=B(k.charAt(L)))==="L")return!1;if(v==="R")return!0}return!1},ce=function(k,v,L,M){var $,oe,se,ie,ye=v[M];switch(ye){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":U=!1;break;case"N":case"AN":break;case"EN":U&&(ye="AN");break;case"AL":U=!0,ye="R";break;case"WS":case"BN":ye="N";break;case"CS":M<1||M+1>=v.length||($=L[M-1])!=="EN"&&$!=="AN"||(oe=v[M+1])!=="EN"&&oe!=="AN"?ye="N":U&&(oe="AN"),ye=oe===$?oe:"N";break;case"ES":ye=($=M>0?L[M-1]:"B")==="EN"&&M+1<v.length&&v[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&L[M-1]==="EN"){ye="EN";break}if(U){ye="N";break}for(se=M+1,ie=v.length;se<ie&&v[se]==="ET";)se++;ye=se<ie&&v[se]==="EN"?"EN":"N";break;case"NSM":if(c&&!u){for(ie=v.length,se=M+1;se<ie&&v[se]==="NSM";)se++;if(se<ie){var xe=k[M],ee=xe>=1425&&xe<=2303||xe===64286;if($=v[se],ee&&($==="R"||$==="AL")){ye="R";break}}}ye=M<1||($=v[M-1])==="B"?"N":L[M-1];break;case"B":U=!1,o=!0,ye=H;break;case"S":a=!0,ye="N"}return ye},N=function(k,v,L){var M=k.split("");return L&&A(M,L,{hiLevel:H}),M.reverse(),v&&v.reverse(),M.join("")},A=function(k,v,L){var M,$,oe,se,ie,ye=-1,xe=k.length,ee=0,D=[],q=H?b:C,X=[];for(U=!1,o=!1,a=!1,$=0;$<xe;$++)X[$]=B(k[$]);for(oe=0;oe<xe;oe++){if(ie=ee,D[oe]=ce(k,X,D,oe),M=240&(ee=q[ie][V[D[oe]]]),ee&=15,v[oe]=se=q[ee][5],M>0)if(M===16){for($=ye;$<oe;$++)v[$]=1;ye=-1}else ye=-1;if(q[ee][6])ye===-1&&(ye=oe);else if(ye>-1){for($=ye;$<oe;$++)v[$]=se;ye=-1}X[oe]==="B"&&(v[oe]=0),L.hiLevel|=se}a&&(function(de,me,we){for(var Ae=0;Ae<we;Ae++)if(de[Ae]==="S"){me[Ae]=H;for(var Ce=Ae-1;Ce>=0&&de[Ce]==="WS";Ce--)me[Ce]=H}})(X,v,xe)},T=function(k,v,L,M,$){if(!($.hiLevel<k)){if(k===1&&H===1&&!o)return v.reverse(),void(L&&L.reverse());for(var oe,se,ie,ye,xe=v.length,ee=0;ee<xe;){if(M[ee]>=k){for(ie=ee+1;ie<xe&&M[ie]>=k;)ie++;for(ye=ee,se=ie-1;ye<se;ye++,se--)oe=v[ye],v[ye]=v[se],v[se]=oe,L&&(oe=L[ye],L[ye]=L[se],L[se]=oe);ee=ie}ee++}}},F=function(k,v,L){var M=k.split(""),$={hiLevel:H};return L||(L=[]),A(M,L,$),(function(oe,se,ie){if(ie.hiLevel!==0&&g)for(var ye,xe=0;xe<oe.length;xe++)se[xe]===1&&(ye=z.indexOf(oe[xe]))>=0&&(oe[xe]=z[ye+1])})(M,L,$),T(2,M,v,L,$),T(1,M,v,L,$),M.join("")};return this.__bidiEngine__.doBidiReorder=function(k,v,L){if((function($,oe){if(oe)for(var se=0;se<$.length;se++)oe[se]=se;u===void 0&&(u=re($)),d===void 0&&(d=re($))})(k,v),c||!f||d)if(c&&f&&u^d)H=u?1:0,k=N(k,v,L);else if(!c&&f&&d)H=u?1:0,k=F(k,v,L),k=N(k,v);else if(!c||u||f||d){if(c&&!f&&u^d)k=N(k,v),u?(H=0,k=F(k,v,L)):(H=1,k=F(k,v,L),k=N(k,v));else if(c&&u&&!f&&d)H=1,k=F(k,v,L),k=N(k,v);else if(!c&&!f&&u^d){var M=g;u?(H=1,k=F(k,v,L),H=0,g=!1,k=F(k,v,L),g=M):(H=0,k=F(k,v,L),k=N(k,v),H=1,g=!1,k=F(k,v,L),g=M,k=N(k,v))}}else H=0,k=F(k,v,L);else H=u?1:0,k=F(k,v,L);return k},this.__bidiEngine__.setOptions=function(k){k&&(c=k.isInputVisual,f=k.isOutputVisual,u=k.isInputRtl,d=k.isOutputRtl,g=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var o=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var c=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(o)==="[object Array]"){var u=0;for(c=[],u=0;u<o.length;u+=1)Object.prototype.toString.call(o[u])==="[object Array]"?c.push([t.doBidiReorder(o[u][0]),o[u][1],o[u][2]]):c.push([t.doBidiReorder(o[u])]);n.text=c}else n.text=t.doBidiReorder(o);t.setOptions({isInputVisual:!0})}])})(Tt),Tt.API.TTFFont=(function(){function r(e){var t;if(this.rawData=e,t=this.contents=new ic(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new DT(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new kT(this.contents),this.head=new ET(this),this.name=new LT(this),this.cmap=new mv(this),this.toUnicode={},this.hhea=new IT(this),this.maxp=new BT(this),this.hmtx=new FT(this),this.post=new PT(this),this.os2=new RT(this),this.loca=new MT(this),this.glyf=new zT(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,o,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,u,f,d;for(d=[],c=0,u=(f=this.bbox).length;c<u;c++)e=f[c],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(o=this.post.italic_angle),32768&(t=o>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var o,a,c,u;for(c=0,a=0,u=(e=""+e).length;0<=u?a<u:a>u;a=0<=u?++a:--a)o=e.charCodeAt(a),c+=this.widthOfGlyph(this.characterToGlyph(o))+n*(1e3/t)||0;return c*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r})();var sa,ic=(function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,o;for(o=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)o.push(this.writeByte(e.charCodeAt(t)));return o},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,o,a,c,u,f;return e=this.readByte(),t=this.readByte(),n=this.readByte(),o=this.readByte(),a=this.readByte(),c=this.readByte(),u=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^o)+16777216*(255^a)+65536*(255^c)+256*(255^u)+(255^f)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*o+16777216*a+65536*c+256*u+f},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,o,a;for(a=[],n=0,o=e.length;n<o;n++)t=e[n],a.push(this.writeByte(t));return a},r})(),kT=(function(){var r;function e(t){var n,o,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},o=0,a=this.tableCount;0<=a?o<a:o>a;o=0<=a?++o:--o)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,o,a,c,u,f,d,g,w,C,b,V,R;for(R in b=Object.keys(t).length,f=Math.log(2),w=16*Math.floor(Math.log(b)/f),c=Math.floor(w/f),g=16*b-w,(o=new ic).writeInt(this.scalarType),o.writeShort(b),o.writeShort(w),o.writeShort(c),o.writeShort(g),a=16*b,d=o.pos+a,u=null,V=[],t)for(C=t[R],o.writeString(R),o.writeInt(r(C)),o.writeInt(d),o.writeInt(C.length),V=V.concat(C),R==="head"&&(u=d),d+=C.length;d%4;)V.push(0),d++;return o.write(V),n=2981146554-r(o.data),o.pos=u+8,o.writeUInt32(n),o.data},r=function(t){var n,o,a,c;for(t=gv.call(t);t.length%4;)t.push(0);for(a=new ic(t),o=0,n=0,c=t.length;n<c;n=n+=4)o+=a.readUInt32();return 4294967295&o},e})(),jT={}.hasOwnProperty,Fa=function(r,e){for(var t in e)jT.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};sa=(function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var ET=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Fa(r,sa),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new ic).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r})(),A2=(function(){function r(e,t){var n,o,a,c,u,f,d,g,w,C,b,V,R,z,j,U,H;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),w=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(b=e.readUInt16(),C=b/2,e.pos+=6,a=(function(){var B,re;for(re=[],f=B=0;0<=C?B<C:B>C;f=0<=C?++B:--B)re.push(e.readUInt16());return re})(),e.pos+=2,R=(function(){var B,re;for(re=[],f=B=0;0<=C?B<C:B>C;f=0<=C?++B:--B)re.push(e.readUInt16());return re})(),d=(function(){var B,re;for(re=[],f=B=0;0<=C?B<C:B>C;f=0<=C?++B:--B)re.push(e.readUInt16());return re})(),g=(function(){var B,re;for(re=[],f=B=0;0<=C?B<C:B>C;f=0<=C?++B:--B)re.push(e.readUInt16());return re})(),o=(this.length-e.pos+this.offset)/2,u=(function(){var B,re;for(re=[],f=B=0;0<=o?B<o:B>o;f=0<=o?++B:--B)re.push(e.readUInt16());return re})(),f=j=0,H=a.length;j<H;f=++j)for(z=a[f],n=U=V=R[f];V<=z?U<=z:U>=z;n=V<=z?++U:--U)g[f]===0?c=n+d[f]:(c=u[g[f]/2+(n-V)-(C-f)]||0)!==0&&(c+=d[f]),this.codeMap[n]=65535&c}e.pos=w}return r.encode=function(e,t){var n,o,a,c,u,f,d,g,w,C,b,V,R,z,j,U,H,B,re,ce,N,A,T,F,k,v,L,M,$,oe,se,ie,ye,xe,ee,D,q,X,de,me,we,Ae,Ce,Be,qe,et;switch(M=new ic,c=Object.keys(e).sort(function(Qe,Fe){return Qe-Fe}),t){case"macroman":for(R=0,z=(function(){var Qe=[];for(V=0;V<256;++V)Qe.push(0);return Qe})(),U={0:0},a={},$=0,ye=c.length;$<ye;$++)U[Ce=e[o=c[$]]]==null&&(U[Ce]=++R),a[o]={old:e[o],new:U[e[o]]},z[o]=U[e[o]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(z),{charMap:a,subtable:M.data,maxGlyphID:R+1};case"unicode":for(v=[],w=[],H=0,U={},n={},j=d=null,oe=0,xe=c.length;oe<xe;oe++)U[re=e[o=c[oe]]]==null&&(U[re]=++H),n[o]={old:re,new:U[re]},u=U[re]-o,j!=null&&u===d||(j&&w.push(j),v.push(o),d=u),j=o;for(j&&w.push(j),w.push(65535),v.push(65535),F=2*(T=v.length),A=2*Math.pow(Math.log(T)/Math.LN2,2),C=Math.log(A/2)/Math.LN2,N=2*T-A,f=[],ce=[],b=[],V=se=0,ee=v.length;se<ee;V=++se){if(k=v[V],g=w[V],k===65535){f.push(0),ce.push(0);break}if(k-(L=n[k].new)>=32768)for(f.push(0),ce.push(2*(b.length+T-V)),o=ie=k;k<=g?ie<=g:ie>=g;o=k<=g?++ie:--ie)b.push(n[o].new);else f.push(L-k),ce.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*T+2*b.length),M.writeUInt16(0),M.writeUInt16(F),M.writeUInt16(A),M.writeUInt16(C),M.writeUInt16(N),we=0,D=w.length;we<D;we++)o=w[we],M.writeUInt16(o);for(M.writeUInt16(0),Ae=0,q=v.length;Ae<q;Ae++)o=v[Ae],M.writeUInt16(o);for(Be=0,X=f.length;Be<X;Be++)u=f[Be],M.writeUInt16(u);for(qe=0,de=ce.length;qe<de;qe++)B=ce[qe],M.writeUInt16(B);for(et=0,me=b.length;et<me;et++)R=b[et],M.writeUInt16(R);return{charMap:n,subtable:M.data,maxGlyphID:H+1}}},r})(),mv=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Fa(r,sa),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,n,o;for(e.pos=this.offset,this.version=e.readUInt16(),o=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=o?n<o:n>o;n=0<=o?++n:--n)t=new A2(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var n,o;return t==null&&(t="macroman"),n=A2.encode(e,t),(o=new ic).writeUInt16(0),o.writeUInt16(1),n.table=o.data.concat(n.subtable),n},r})(),IT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Fa(r,sa),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r})(),RT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Fa(r,sa),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n})(),this.charRange=(function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r})(),PT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Fa(r,sa),r.prototype.tag="post",r.prototype.parse=function(e){var t,n,o;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],o=[];e.pos<this.offset+this.length;)t=e.readByte(),o.push(this.names.push(e.readString(t)));return o;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var c,u,f;for(f=[],a=c=0,u=this.file.maxp.numGlyphs;0<=u?c<u:c>u;a=0<=u?++c:--c)f.push(e.readUInt32());return f}).call(this)}},r})(),NT=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},LT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Fa(r,sa),r.prototype.tag="name",r.prototype.parse=function(e){var t,n,o,a,c,u,f,d,g,w,C;for(e.pos=this.offset,e.readShort(),t=e.readShort(),u=e.readShort(),n=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+u+e.readShort()});for(f={},a=g=0,w=n.length;g<w;a=++g)o=n[a],e.pos=o.offset,d=e.readString(o.length),c=new NT(d,o),f[C=o.nameID]==null&&(f[C]=[]),f[o.nameID].push(c);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},r})(),BT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Fa(r,sa),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r})(),FT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Fa(r,sa),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,n,o,a,c,u,f;for(e.pos=this.offset,this.metrics=[],t=0,u=this.file.hhea.numberOfMetrics;0<=u?t<u:t>u;t=0<=u?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,g;for(g=[],t=d=0;0<=o?d<o:d>o;t=0<=o?++d:--d)g.push(e.readInt16());return g})(),this.widths=(function(){var d,g,w,C;for(C=[],d=0,g=(w=this.metrics).length;d<g;d++)a=w[d],C.push(a.advance);return C}).call(this),n=this.widths[this.widths.length-1],f=[],t=c=0;0<=o?c<o:c>o;t=0<=o?++c:--c)f.push(this.widths.push(n));return f},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r})(),gv=[].slice,zT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Fa(r,sa),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,n,o,a,c,u,f,d,g,w;return e in this.cache?this.cache[e]:(a=this.file.loca,t=this.file.contents,n=a.indexOf(e),(o=a.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+n,c=(u=new ic(t.read(o))).readShort(),d=u.readShort(),w=u.readShort(),f=u.readShort(),g=u.readShort(),this.cache[e]=c===-1?new VT(u,d,w,f,g):new OT(u,c,d,w,f,g),this.cache[e]))},r.prototype.encode=function(e,t,n){var o,a,c,u,f;for(c=[],a=[],u=0,f=t.length;u<f;u++)o=e[t[u]],a.push(c.length),o&&(c=c.concat(o.encode(n)));return a.push(c.length),{table:c,offsets:a}},r})(),OT=(function(){function r(e,t,n,o,a,c){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=o,this.xMax=a,this.yMax=c,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),VT=(function(){function r(e,t,n,o,a){var c,u;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=o,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;u=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&u;)c.pos+=1&u?4:2,128&u?c.pos+=8:64&u?c.pos+=4:8&u&&(c.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new ic(gv.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r})(),MT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Fa(r,sa),r.prototype.tag="loca",r.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var o,a;for(a=[],n=0,o=this.length;n<o;n+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var o,a;for(a=[],n=0,o=this.length;n<o;n+=4)a.push(e.readUInt32());return a}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),o=0,a=0,c=0;c<n.length;++c)if(n[c]=o,a<t.length&&t[a]==c){++a,n[c]=o;var u=this.offsets[c],f=this.offsets[c+1]-u;f>0&&(o+=f)}for(var d=new Array(4*n.length),g=0;g<n.length;++g)d[4*g+3]=255&n[g],d[4*g+2]=(65280&n[g])>>8,d[4*g+1]=(16711680&n[g])>>16,d[4*g]=(4278190080&n[g])>>24;return d},r})(),DT=(function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,o,a;for(t in o=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[t],e[t]=o[n];return e},r.prototype.glyphsFor=function(e){var t,n,o,a,c,u,f;for(o={},c=0,u=e.length;c<u;c++)o[a=e[c]]=this.font.glyf.glyphFor(a);for(a in t=[],o)(n=o[a])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(a in f=this.glyphsFor(t))n=f[a],o[a]=n;return o},r.prototype.encode=function(e,t){var n,o,a,c,u,f,d,g,w,C,b,V,R,z,j;for(o in n=mv.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),b={0:0},j=n.charMap)b[(f=j[o]).old]=f.new;for(V in C=n.maxGlyphID,c)V in b||(b[V]=C++);return g=(function(U){var H,B;for(H in B={},U)B[U[H]]=H;return B})(b),w=Object.keys(g).sort(function(U,H){return U-H}),R=(function(){var U,H,B;for(B=[],U=0,H=w.length;U<H;U++)u=w[U],B.push(g[u]);return B})(),a=this.font.glyf.encode(c,R,b),d=this.font.loca.encode(a.offsets,R),z={cmap:this.font.cmap.raw(),glyf:a.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(z["OS/2"]=this.font.os2.raw()),this.font.directory.encode(z)},r})();Tt.API.PDFObject=(function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,o,a,c;if(Array.isArray(t))return"["+(function(){var u,f,d;for(d=[],u=0,f=t.length;u<f;u++)n=t[u],d.push(e.convert(n));return d})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(o in a=["<<"],t)c=t[o],a.push("/"+o+" "+e.convert(c));return a.push(">>"),a.join(`
`)}return""+t},e})();const pn=r=>{const{calculatorName:e,inputs:t,results:n,necReferences:o,additionalInfo:a}=r,c=new Tt({orientation:"portrait",unit:"mm",format:"letter"}),u=c.internal.pageSize.getWidth(),f=c.internal.pageSize.getHeight(),d=15,g=u-d*2;let w=d;const C=re=>w+re>f-d?(c.addPage(),w=d,!0):!1,b=(re,ce,N,A,T=10)=>{c.setFontSize(T);const F=c.splitTextToSize(re,A);return c.text(F,ce,N),F.length*(T*.4)};c.setFillColor(37,99,235),c.rect(0,0,u,25,"F"),c.setTextColor(255,255,255),c.setFontSize(20),c.setFont("helvetica","bold"),c.text("Electrician Toolkit",d,12),c.setFontSize(12),c.setFont("helvetica","normal"),c.text(e,d,19),c.setFontSize(9);const V=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});c.text(V,u-d-c.getTextWidth(V),19),w=35,c.setTextColor(0,0,0),c.setFontSize(14),c.setFont("helvetica","bold"),c.text("Input Parameters",d,w),w+=7,c.setDrawColor(37,99,235),c.setLineWidth(.5),c.line(d,w,u-d,w),w+=5,c.setFontSize(10),c.setFont("helvetica","normal"),Object.entries(t).forEach(([re,ce])=>{C(10);const N=re.replace(/([A-Z])/g," $1").trim(),A=N.charAt(0).toUpperCase()+N.slice(1);c.setFont("helvetica","bold");const T=`${A}:`;c.text(T,d+5,w);const F=c.getTextWidth(T);c.setFont("helvetica","normal"),c.text(String(ce),d+5+F+3,w),w+=6}),w+=5,C(20),c.setFontSize(14),c.setFont("helvetica","bold"),c.text("Results",d,w),w+=7,c.setDrawColor(37,99,235),c.line(d,w,u-d,w),w+=5,c.setFontSize(10),c.setFont("helvetica","normal"),Object.entries(n).forEach(([re,ce])=>{C(10);const N=re.replace(/([A-Z])/g," $1").trim(),A=N.charAt(0).toUpperCase()+N.slice(1);c.setFont("helvetica","bold");const T=`${A}:`;c.text(T,d+5,w);let F=String(ce);typeof ce=="boolean"&&(F=ce?"Yes":"No");const k=c.getTextWidth(T);c.setFont("helvetica","normal"),c.text(F,d+5+k+3,w),w+=6}),w+=5,a&&Object.keys(a).length>0&&(C(20),c.setFontSize(14),c.setFont("helvetica","bold"),c.text("Calculation Details",d,w),w+=7,c.setDrawColor(37,99,235),c.line(d,w,u-d,w),w+=5,c.setFontSize(10),c.setFont("helvetica","normal"),Object.entries(a).forEach(([re,ce])=>{C(10);const N=re.replace(/([A-Z])/g," $1").trim(),A=N.charAt(0).toUpperCase()+N.slice(1),T=b(`${A}: ${ce}`,d+5,w,g-10,10);w+=T+2}),w+=5),o&&(C(20),c.setFontSize(14),c.setFont("helvetica","bold"),c.text("NEC Code References",d,w),w+=7,c.setDrawColor(37,99,235),c.line(d,w,u-d,w),w+=5,c.setFontSize(10),c.setFont("helvetica","normal"),(Array.isArray(o)?o:[o]).forEach(ce=>{C(15);const N=b(` ${ce}`,d+5,w,g-10,10);w+=N+2}));const R=f-10;c.setFontSize(8),c.setTextColor(100,100,100),c.setFont("helvetica","italic");const z="This calculation is for reference only. Always verify with current NEC and local codes.",j=c.getTextWidth(z);c.text(z,(u-j)/2,R);const U=e.toLowerCase().replace(/\s+/g,"-"),H=new Date().toISOString().split("T")[0],B=`${U}-${H}.pdf`;c.save(B)},WT=()=>{};var C2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let o=r.charCodeAt(n);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},$T=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const o=r[t++];if(o<128)e[n++]=String.fromCharCode(o);else if(o>191&&o<224){const a=r[t++];e[n++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=r[t++],c=r[t++],u=r[t++],f=((o&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(f>>10)),e[n++]=String.fromCharCode(56320+(f&1023))}else{const a=r[t++],c=r[t++];e[n++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},xv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let o=0;o<r.length;o+=3){const a=r[o],c=o+1<r.length,u=c?r[o+1]:0,f=o+2<r.length,d=f?r[o+2]:0,g=a>>2,w=(a&3)<<4|u>>4;let C=(u&15)<<2|d>>6,b=d&63;f||(b=64,c||(C=64)),n.push(t[g],t[w],t[C],t[b])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(yv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):$T(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let o=0;o<r.length;){const a=t[r.charAt(o++)],u=o<r.length?t[r.charAt(o)]:0;++o;const d=o<r.length?t[r.charAt(o)]:64;++o;const w=o<r.length?t[r.charAt(o)]:64;if(++o,a==null||u==null||d==null||w==null)throw new UT;const C=a<<2|u>>4;if(n.push(C),d!==64){const b=u<<4&240|d>>2;if(n.push(b),w!==64){const V=d<<6&192|w;n.push(V)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class UT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qT=function(r){const e=yv(r);return xv.encodeByteArray(e,!0)},Jf=function(r){return qT(r).replace(/\./g,"")},vv=function(r){try{return xv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=()=>HT().__FIREBASE_DEFAULTS__,KT=()=>{if(typeof process>"u"||typeof C2>"u")return;const r=C2.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},JT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&vv(r[1]);return e&&JSON.parse(e)},yp=()=>{try{return WT()||GT()||KT()||JT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},bv=r=>{var e,t;return(t=(e=yp())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},YT=r=>{const e=bv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},wv=()=>{var r;return(r=yp())==null?void 0:r.config},Sv=r=>{var e;return(e=yp())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _v(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",o=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Jf(JSON.stringify(t)),Jf(JSON.stringify(c)),""].join(".")}const Gd={};function ZT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Gd))Gd[e]?r.emulator.push(e):r.prod.push(e);return r}function e6(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let k2=!1;function Tv(r,e){if(typeof window>"u"||typeof document>"u"||!id(window.location.host)||Gd[r]===e||Gd[r]||k2)return;Gd[r]=e;function t(C){return`__firebase__banner__${C}`}const n="__firebase__banner",a=ZT().prod.length>0;function c(){const C=document.getElementById(n);C&&C.remove()}function u(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function f(C,b){C.setAttribute("width","24"),C.setAttribute("id",b),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function d(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{k2=!0,c()},C}function g(C,b){C.setAttribute("id",b),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function w(){const C=e6(n),b=t("text"),V=document.getElementById(b)||document.createElement("span"),R=t("learnmore"),z=document.getElementById(R)||document.createElement("a"),j=t("preprendIcon"),U=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const H=C.element;u(H),g(z,R);const B=d();f(U,j),H.append(U,V,z,B),document.body.appendChild(H)}a?(V.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function t6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lo())}function r6(){var e;const r=(e=yp())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function n6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function i6(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function o6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function s6(){const r=lo();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function a6(){return!r6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function l6(){try{return typeof indexedDB=="object"}catch{return!1}}function c6(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(n);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6="FirebaseError";class gl extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=u6,Object.setPrototypeOf(this,gl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mh.prototype.create)}}class mh{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?d6(a,n):"Error",u=`${this.serviceName}: ${c} (${o}).`;return new gl(o,u,n)}}function d6(r,e){return r.replace(h6,(t,n)=>{const o=e[n];return o!=null?String(o):`<${n}?>`})}const h6=/\{\$([^}]+)}/g;function f6(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function $c(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const o of t){if(!n.includes(o))return!1;const a=r[o],c=e[o];if(j2(a)&&j2(c)){if(!$c(a,c))return!1}else if(a!==c)return!1}for(const o of n)if(!t.includes(o))return!1;return!0}function j2(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Md(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[o,a]=n.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Dd(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function p6(r,e){const t=new m6(r,e);return t.subscribe.bind(t)}class m6{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let o;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");g6(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:n},o.next===void 0&&(o.next=Xm),o.error===void 0&&(o.error=Xm),o.complete===void 0&&(o.complete=Xm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function g6(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Xm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(r){return r&&r._delegate?r._delegate:r}class Uc{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new QT;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&n.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(n)return null;throw o}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(v6(e))try{this.getOrInitializeService({instanceIdentifier:Fc})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});n.resolve(a)}catch{}}}}clearInstance(e=Fc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fc){return this.instances.has(e)}getOptions(e=Fc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);n===u&&c.resolve(o)}return o}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(n)??new Set;o.add(e),this.onInitCallbacks.set(n,o);const a=this.instances.get(n);return a&&e(a,n),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const o of n)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:x6(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Fc){return this.component?this.component.multipleInstances?e:Fc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function x6(r){return r===Fc?void 0:r}function v6(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new y6(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pr;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(pr||(pr={}));const w6={debug:pr.DEBUG,verbose:pr.VERBOSE,info:pr.INFO,warn:pr.WARN,error:pr.ERROR,silent:pr.SILENT},S6=pr.INFO,_6={[pr.DEBUG]:"log",[pr.VERBOSE]:"log",[pr.INFO]:"info",[pr.WARN]:"warn",[pr.ERROR]:"error"},T6=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),o=_6[e];if(o)console[o](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sg{constructor(e){this.name=e,this._logLevel=S6,this._logHandler=T6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?w6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pr.DEBUG,...e),this._logHandler(this,pr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pr.VERBOSE,...e),this._logHandler(this,pr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pr.INFO,...e),this._logHandler(this,pr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pr.WARN,...e),this._logHandler(this,pr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pr.ERROR,...e),this._logHandler(this,pr.ERROR,...e)}}const A6=(r,e)=>e.some(t=>r instanceof t);let E2,I2;function C6(){return E2||(E2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function k6(){return I2||(I2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Av=new WeakMap,_0=new WeakMap,Cv=new WeakMap,Zm=new WeakMap,ag=new WeakMap;function j6(r){const e=new Promise((t,n)=>{const o=()=>{r.removeEventListener("success",a),r.removeEventListener("error",c)},a=()=>{t(Xl(r.result)),o()},c=()=>{n(r.error),o()};r.addEventListener("success",a),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Av.set(t,r)}).catch(()=>{}),ag.set(e,r),e}function E6(r){if(_0.has(r))return;const e=new Promise((t,n)=>{const o=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",c),r.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{n(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",a),r.addEventListener("error",c),r.addEventListener("abort",c)});_0.set(r,e)}let T0={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return _0.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Cv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xl(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function I6(r){T0=r(T0)}function R6(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(e0(this),e,...t);return Cv.set(n,e.sort?e.sort():[e]),Xl(n)}:k6().includes(r)?function(...e){return r.apply(e0(this),e),Xl(Av.get(this))}:function(...e){return Xl(r.apply(e0(this),e))}}function P6(r){return typeof r=="function"?R6(r):(r instanceof IDBTransaction&&E6(r),A6(r,C6())?new Proxy(r,T0):r)}function Xl(r){if(r instanceof IDBRequest)return j6(r);if(Zm.has(r))return Zm.get(r);const e=P6(r);return e!==r&&(Zm.set(r,e),ag.set(e,r)),e}const e0=r=>ag.get(r);function N6(r,e,{blocked:t,upgrade:n,blocking:o,terminated:a}={}){const c=indexedDB.open(r,e),u=Xl(c);return n&&c.addEventListener("upgradeneeded",f=>{n(Xl(c.result),f.oldVersion,f.newVersion,Xl(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),u.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",d=>o(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const L6=["get","getKey","getAll","getAllKeys","count"],B6=["put","add","delete","clear"],t0=new Map;function R2(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(t0.get(e))return t0.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,o=B6.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(o||L6.includes(t)))return;const a=async function(c,...u){const f=this.transaction(c,o?"readwrite":"readonly");let d=f.store;return n&&(d=d.index(u.shift())),(await Promise.all([d[t](...u),o&&f.done]))[0]};return t0.set(e,a),a}I6(r=>({...r,get:(e,t,n)=>R2(e,t)||r.get(e,t,n),has:(e,t)=>!!R2(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(z6(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function z6(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const A0="@firebase/app",P2="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=new sg("@firebase/app"),O6="@firebase/app-compat",V6="@firebase/analytics-compat",M6="@firebase/analytics",D6="@firebase/app-check-compat",W6="@firebase/app-check",$6="@firebase/auth",U6="@firebase/auth-compat",q6="@firebase/database",H6="@firebase/data-connect",G6="@firebase/database-compat",K6="@firebase/functions",J6="@firebase/functions-compat",Y6="@firebase/installations",Q6="@firebase/installations-compat",X6="@firebase/messaging",Z6="@firebase/messaging-compat",eA="@firebase/performance",tA="@firebase/performance-compat",rA="@firebase/remote-config",nA="@firebase/remote-config-compat",iA="@firebase/storage",oA="@firebase/storage-compat",sA="@firebase/firestore",aA="@firebase/ai",lA="@firebase/firestore-compat",cA="firebase",uA="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="[DEFAULT]",dA={[A0]:"fire-core",[O6]:"fire-core-compat",[M6]:"fire-analytics",[V6]:"fire-analytics-compat",[W6]:"fire-app-check",[D6]:"fire-app-check-compat",[$6]:"fire-auth",[U6]:"fire-auth-compat",[q6]:"fire-rtdb",[H6]:"fire-data-connect",[G6]:"fire-rtdb-compat",[K6]:"fire-fn",[J6]:"fire-fn-compat",[Y6]:"fire-iid",[Q6]:"fire-iid-compat",[X6]:"fire-fcm",[Z6]:"fire-fcm-compat",[eA]:"fire-perf",[tA]:"fire-perf-compat",[rA]:"fire-rc",[nA]:"fire-rc-compat",[iA]:"fire-gcs",[oA]:"fire-gcs-compat",[sA]:"fire-fst",[lA]:"fire-fst-compat",[aA]:"fire-vertex","fire-js":"fire-js",[cA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf=new Map,hA=new Map,k0=new Map;function N2(r,e){try{r.container.addComponent(e)}catch(t){hl.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Ju(r){const e=r.name;if(k0.has(e))return hl.debug(`There were multiple attempts to register component ${e}.`),!1;k0.set(e,r);for(const t of Yf.values())N2(t,r);for(const t of hA.values())N2(t,r);return!0}function lg(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function js(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zl=new mh("app","Firebase",fA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Uc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=uA;function kv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:C0,automaticDataCollectionEnabled:!0,...e},o=n.name;if(typeof o!="string"||!o)throw Zl.create("bad-app-name",{appName:String(o)});if(t||(t=wv()),!t)throw Zl.create("no-options");const a=Yf.get(o);if(a){if($c(t,a.options)&&$c(n,a.config))return a;throw Zl.create("duplicate-app",{appName:o})}const c=new b6(o);for(const f of k0.values())c.addComponent(f);const u=new pA(t,n,c);return Yf.set(o,u),u}function jv(r=C0){const e=Yf.get(r);if(!e&&r===C0&&wv())return kv();if(!e)throw Zl.create("no-app",{appName:r});return e}function ec(r,e,t){let n=dA[r]??r;t&&(n+=`-${t}`);const o=n.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const c=[`Unable to register library "${n}" with version "${e}":`];o&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hl.warn(c.join(" "));return}Ju(new Uc(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="firebase-heartbeat-database",gA=1,rh="firebase-heartbeat-store";let r0=null;function Ev(){return r0||(r0=N6(mA,gA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(rh)}catch(t){console.warn(t)}}}}).catch(r=>{throw Zl.create("idb-open",{originalErrorMessage:r.message})})),r0}async function yA(r){try{const t=(await Ev()).transaction(rh),n=await t.objectStore(rh).get(Iv(r));return await t.done,n}catch(e){if(e instanceof gl)hl.warn(e.message);else{const t=Zl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hl.warn(t.message)}}}async function L2(r,e){try{const n=(await Ev()).transaction(rh,"readwrite");await n.objectStore(rh).put(e,Iv(r)),await n.done}catch(t){if(t instanceof gl)hl.warn(t.message);else{const n=Zl.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});hl.warn(n.message)}}}function Iv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=1024,vA=30;class bA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new SA(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=B2();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>vA){const c=_A(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){hl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=B2(),{heartbeatsToSend:n,unsentEntries:o}=wA(this._heartbeatsCache.heartbeats),a=Jf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return hl.warn(t),""}}}function B2(){return new Date().toISOString().substring(0,10)}function wA(r,e=xA){const t=[];let n=r.slice();for(const o of r){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),F2(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),F2(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class SA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return l6()?c6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await yA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return L2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return L2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function F2(r){return Jf(JSON.stringify({version:2,heartbeats:r})).length}function _A(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(r){Ju(new Uc("platform-logger",e=>new F6(e),"PRIVATE")),Ju(new Uc("heartbeat",e=>new bA(e),"PRIVATE")),ec(A0,P2,r),ec(A0,P2,"esm2020"),ec("fire-js","")}TA("");var AA="firebase",CA="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ec(AA,CA,"app");function Rv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kA=Rv,Pv=new mh("auth","Firebase",Rv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=new sg("@firebase/auth");function jA(r,...e){Qf.logLevel<=pr.WARN&&Qf.warn(`Auth (${od}): ${r}`,...e)}function Lf(r,...e){Qf.logLevel<=pr.ERROR&&Qf.error(`Auth (${od}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(r,...e){throw cg(r,...e)}function ja(r,...e){return cg(r,...e)}function Nv(r,e,t){const n={...kA(),[e]:t};return new mh("auth","Firebase",n).create(e,{appName:r.name})}function dl(r){return Nv(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cg(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return Pv.create(r,...e)}function Ut(r,e,...t){if(!r)throw cg(e,...t)}function cl(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Lf(e),new Error(e)}function fl(r,e){r||cl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function EA(){return z2()==="http:"||z2()==="https:"}function z2(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EA()||i6()||"connection"in navigator)?navigator.onLine:!0}function RA(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,t){this.shortDelay=e,this.longDelay=t,fl(t>e,"Short delay should be less than long delay!"),this.isMobile=t6()||o6()}get(){return IA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(r,e){fl(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],LA=new yh(3e4,6e4);function dc(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function hc(r,e,t,n,o={}){return Bv(r,o,async()=>{let a={},c={};n&&(e==="GET"?c=n:a={body:JSON.stringify(n)});const u=gh({key:r.config.apiKey,...c}).slice(1),f=await r._getAdditionalHeaders();f["Content-Type"]="application/json",r.languageCode&&(f["X-Firebase-Locale"]=r.languageCode);const d={method:e,headers:f,...a};return n6()||(d.referrerPolicy="no-referrer"),r.emulatorConfig&&id(r.emulatorConfig.host)&&(d.credentials="include"),Lv.fetch()(await Fv(r,r.config.apiHost,t,u),d)})}async function Bv(r,e,t){r._canInitEmulator=!1;const n={...PA,...e};try{const o=new FA(r),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw wf(r,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[f,d]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw wf(r,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw wf(r,"email-already-in-use",c);if(f==="USER_DISABLED")throw wf(r,"user-disabled",c);const g=n[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Nv(r,g,d);na(r,g)}}catch(o){if(o instanceof gl)throw o;na(r,"network-request-failed",{message:String(o)})}}async function xh(r,e,t,n,o={}){const a=await hc(r,e,t,n,o);return"mfaPendingCredential"in a&&na(r,"multi-factor-auth-required",{_serverResponse:a}),a}async function Fv(r,e,t,n){const o=`${e}${t}?${n}`,a=r,c=a.config.emulator?ug(r.config,o):`${r.config.apiScheme}://${o}`;return NA.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function BA(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class FA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(ja(this.auth,"network-request-failed")),LA.get())})}}function wf(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const o=ja(r,e,n);return o.customData._tokenResponse=t,o}function O2(r){return r!==void 0&&r.enterprise!==void 0}class zA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return BA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OA(r,e){return hc(r,"GET","/v2/recaptchaConfig",dc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(r,e){return hc(r,"POST","/v1/accounts:delete",e)}async function Xf(r,e){return hc(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MA(r,e=!1){const t=Ci(r),n=await t.getIdToken(e),o=dg(n);Ut(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:o,token:n,authTime:Kd(n0(o.auth_time)),issuedAtTime:Kd(n0(o.iat)),expirationTime:Kd(n0(o.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function n0(r){return Number(r)*1e3}function dg(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Lf("JWT malformed, contained fewer than 3 sections"),null;try{const o=vv(t);return o?JSON.parse(o):(Lf("Failed to decode base64 JWT payload"),null)}catch(o){return Lf("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function V2(r){const e=dg(r);return Ut(e,"internal-error"),Ut(typeof e.exp<"u","internal-error"),Ut(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nh(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof gl&&DA(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function DA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kd(this.lastLoginAt),this.creationTime=Kd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zf(r){var w;const e=r.auth,t=await r.getIdToken(),n=await nh(r,Xf(e,{idToken:t}));Ut(n==null?void 0:n.users.length,e,"internal-error");const o=n.users[0];r._notifyReloadListener(o);const a=(w=o.providerUserInfo)!=null&&w.length?zv(o.providerUserInfo):[],c=UA(r.providerData,a),u=r.isAnonymous,f=!(r.email&&o.passwordHash)&&!(c!=null&&c.length),d=u?f:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new E0(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(r,g)}async function $A(r){const e=Ci(r);await Zf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UA(r,e){return[...r.filter(n=>!e.some(o=>o.providerId===n.providerId)),...e]}function zv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qA(r,e){const t=await Bv(r,{},async()=>{const n=gh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=r.config,c=await Fv(r,o,"/v1/token",`key=${a}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:n};return r.emulatorConfig&&id(r.emulatorConfig.host)&&(f.credentials="include"),Lv.fetch()(c,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function HA(r,e){return hc(r,"POST","/v2/accounts:revokeToken",dc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ut(e.idToken,"internal-error"),Ut(typeof e.idToken<"u","internal-error"),Ut(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):V2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ut(e.length!==0,"internal-error");const t=V2(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ut(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:o,expiresIn:a}=await qA(e,t);this.updateTokensAndExpiration(n,o,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:o,expirationTime:a}=t,c=new $u;return n&&(Ut(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),o&&(Ut(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(Ut(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $u,this.toJSON())}_performRefresh(){return cl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(r,e){Ut(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ea{constructor({uid:e,auth:t,stsTokenManager:n,...o}){this.providerId="firebase",this.proactiveRefresh=new WA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new E0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await nh(this,this.stsTokenManager.getToken(this.auth,e));return Ut(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return MA(this,e)}reload(){return $A(this)}_assign(e){this!==e&&(Ut(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ea({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Zf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(js(this.auth.app))return Promise.reject(dl(this.auth));const e=await this.getIdToken();return await nh(this,VA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,f=t._redirectEventId??void 0,d=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:w,emailVerified:C,isAnonymous:b,providerData:V,stsTokenManager:R}=t;Ut(w&&R,e,"internal-error");const z=$u.fromJSON(this.name,R);Ut(typeof w=="string",e,"internal-error"),ql(n,e.name),ql(o,e.name),Ut(typeof C=="boolean",e,"internal-error"),Ut(typeof b=="boolean",e,"internal-error"),ql(a,e.name),ql(c,e.name),ql(u,e.name),ql(f,e.name),ql(d,e.name),ql(g,e.name);const j=new ea({uid:w,auth:e,email:o,emailVerified:C,displayName:n,isAnonymous:b,photoURL:c,phoneNumber:a,tenantId:u,stsTokenManager:z,createdAt:d,lastLoginAt:g});return V&&Array.isArray(V)&&(j.providerData=V.map(U=>({...U}))),f&&(j._redirectEventId=f),j}static async _fromIdTokenResponse(e,t,n=!1){const o=new $u;o.updateFromServerResponse(t);const a=new ea({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:n});return await Zf(a),a}static async _fromGetAccountInfoResponse(e,t,n){const o=t.users[0];Ut(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?zv(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),u=new $u;u.updateFromIdToken(n);const f=new ea({uid:o.localId,auth:e,stsTokenManager:u,isAnonymous:c}),d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new E0(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=new Map;function ul(r){fl(r instanceof Function,"Expected a class definition");let e=M2.get(r);return e?(fl(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,M2.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ov.type="NONE";const D2=Ov;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(r,e,t){return`firebase:${r}:${e}:${t}`}class Uu{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:o,name:a}=this.auth;this.fullUserKey=Bf(this.userKey,o.apiKey,a),this.fullPersistenceKey=Bf("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Xf(this.auth,{idToken:e}).catch(()=>{});return t?ea._fromGetAccountInfoResponse(this.auth,t,e):null}return ea._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Uu(ul(D2),e,n);const o=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=o[0]||ul(D2);const c=Bf(n,e.config.apiKey,e.name);let u=null;for(const d of t)try{const g=await d._get(c);if(g){let w;if(typeof g=="string"){const C=await Xf(e,{idToken:g}).catch(()=>{});if(!C)break;w=await ea._fromGetAccountInfoResponse(e,C,g)}else w=ea._fromJSON(e,g);d!==a&&(u=w),a=d;break}}catch{}const f=o.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Uu(a,e,n):(a=f[0],u&&await a._set(c,u.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(c)}catch{}})),new Uu(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Wv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Vv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Uv(e))return"Blackberry";if(qv(e))return"Webos";if(Mv(e))return"Safari";if((e.includes("chrome/")||Dv(e))&&!e.includes("edge/"))return"Chrome";if($v(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Vv(r=lo()){return/firefox\//i.test(r)}function Mv(r=lo()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Dv(r=lo()){return/crios\//i.test(r)}function Wv(r=lo()){return/iemobile/i.test(r)}function $v(r=lo()){return/android/i.test(r)}function Uv(r=lo()){return/blackberry/i.test(r)}function qv(r=lo()){return/webos/i.test(r)}function hg(r=lo()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function GA(r=lo()){var e;return hg(r)&&!!((e=window.navigator)!=null&&e.standalone)}function KA(){return s6()&&document.documentMode===10}function Hv(r=lo()){return hg(r)||$v(r)||qv(r)||Uv(r)||/windows phone/i.test(r)||Wv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(r,e=[]){let t;switch(r){case"Browser":t=W2(lo());break;case"Worker":t=`${W2(lo())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${od}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=a=>new Promise((c,u)=>{try{const f=e(a);c(f)}catch(f){u(f)}});n.onAbort=t,this.queue.push(n);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YA(r,e={}){return hc(r,"GET","/v2/passwordPolicy",dc(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=6;class XA{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??QA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let o=0;o<e.length;o++)n=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t,n,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $2(this),this.idTokenSubscription=new $2(this),this.beforeStateQueue=new JA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ul(t)),this._initializationPromise=this.queue(async()=>{var n,o,a;if(!this._deleted&&(this.persistenceManager=await Uu.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Xf(this,{idToken:e}),n=await ea._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(js(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(a=this.redirectUser)==null?void 0:a._redirectEventId,u=n==null?void 0:n._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===u)&&(f!=null&&f.user)&&(n=f.user,o=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(n)}catch(c){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Zf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(js(this.app))return Promise.reject(dl(this));const t=e?Ci(e):null;return t&&Ut(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ut(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return js(this.app)?Promise.reject(dl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return js(this.app)?Promise.reject(dl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ul(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YA(this),t=new XA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mh("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await HA(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ul(e)||this._popupRedirectResolver;Ut(t,this,"argument-error"),this.redirectPersistenceManager=await Uu.create(this,[ul(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ut(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,n,o);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(js(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&jA(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function eu(r){return Ci(r)}class $2{constructor(e){this.auth=e,this.observer=null,this.addObserver=p6(t=>this.observer=t)}get next(){return Ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eC(r){xp=r}function Kv(r){return xp.loadJS(r)}function tC(){return xp.recaptchaEnterpriseScript}function rC(){return xp.gapiScript}function nC(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class iC{constructor(){this.enterprise=new oC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class oC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const sC="recaptcha-enterprise",Jv="NO_RECAPTCHA";class aC{constructor(e){this.type=sC,this.auth=eu(e)}async verify(e="verify",t=!1){async function n(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{OA(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new zA(f);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,c(d.siteKey)}}).catch(f=>{u(f)})})}function o(a,c,u){const f=window.grecaptcha;O2(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(d=>{c(d)}).catch(()=>{c(Jv)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new iC().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{n(this.auth).then(u=>{if(!t&&O2(window.grecaptcha))o(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=tC();f.length!==0&&(f+=u),Kv(f).then(()=>{o(u,a,c)}).catch(d=>{c(d)})}}).catch(u=>{c(u)})})}}async function U2(r,e,t,n=!1,o=!1){const a=new aC(r);let c;if(o)c=Jv;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const f=u.phoneEnrollmentInfo.phoneNumber,d=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const f=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function I0(r,e,t,n,o){var a;if((a=r._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await U2(r,e,t,t==="getOobCode");return n(r,c)}else return n(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await U2(r,e,t,t==="getOobCode");return n(r,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(r,e){const t=lg(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if($c(a,e??{}))return o;na(o,"already-initialized")}return t.initialize({options:e})}function cC(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(ul);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function uC(r,e,t){const n=eu(r);Ut(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const o=!1,a=Yv(e),{host:c,port:u}=dC(e),f=u===null?"":`:${u}`,d={url:`${a}//${c}${f}/`},g=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!n._canInitEmulator){Ut(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ut($c(d,n.config.emulator)&&$c(g,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=g,n.settings.appVerificationDisabledForTesting=!0,id(c)?(_v(`${a}//${c}${f}`),Tv("Auth",!0)):hC()}function Yv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function dC(r){const e=Yv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(n);if(o){const a=o[1];return{host:a,port:q2(n.substr(a.length+1))}}else{const[a,c]=n.split(":");return{host:a,port:q2(c)}}}function q2(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function hC(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return cl("not implemented")}_getIdTokenResponse(e){return cl("not implemented")}_linkToIdToken(e,t){return cl("not implemented")}_getReauthenticationResolver(e){return cl("not implemented")}}async function fC(r,e){return hc(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(r,e){return xh(r,"POST","/v1/accounts:signInWithPassword",dc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(r,e){return xh(r,"POST","/v1/accounts:signInWithEmailLink",dc(r,e))}async function gC(r,e){return xh(r,"POST","/v1/accounts:signInWithEmailLink",dc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih extends fg{constructor(e,t,n,o=null){super("password",n),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ih(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new ih(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return I0(e,t,"signInWithPassword",pC);case"emailLink":return mC(e,{email:this._email,oobCode:this._password});default:na(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return I0(e,n,"signUpPassword",fC);case"emailLink":return gC(e,{idToken:t,email:this._email,oobCode:this._password});default:na(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qu(r,e){return xh(r,"POST","/v1/accounts:signInWithIdp",dc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="http://localhost";class qc extends fg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):na("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:o,...a}=t;if(!n||!o)return null;const c=new qc(n,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return qu(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,qu(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qu(e,t)}buildRequest(){const e={requestUri:yC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vC(r){const e=Md(Dd(r)).link,t=e?Md(Dd(e)).deep_link_id:null,n=Md(Dd(r)).deep_link_id;return(n?Md(Dd(n)).link:null)||n||t||e||r}class pg{constructor(e){const t=Md(Dd(e)),n=t.apiKey??null,o=t.oobCode??null,a=xC(t.mode??null);Ut(n&&o&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=vC(e);try{return new pg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(){this.providerId=sd.PROVIDER_ID}static credential(e,t){return ih._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=pg.parseLink(t);return Ut(n,"argument-error"),ih._fromEmailAndCode(e,n.code,n.tenantId)}}sd.PROVIDER_ID="password";sd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh extends Qv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends vh{constructor(){super("facebook.com")}static credential(e){return qc._fromParams({providerId:Hl.PROVIDER_ID,signInMethod:Hl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hl.credentialFromTaggedObject(e)}static credentialFromError(e){return Hl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hl.credential(e.oauthAccessToken)}catch{return null}}}Hl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends vh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qc._fromParams({providerId:Gl.PROVIDER_ID,signInMethod:Gl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gl.credentialFromTaggedObject(e)}static credentialFromError(e){return Gl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Gl.credential(t,n)}catch{return null}}}Gl.GOOGLE_SIGN_IN_METHOD="google.com";Gl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends vh{constructor(){super("github.com")}static credential(e){return qc._fromParams({providerId:Kl.PROVIDER_ID,signInMethod:Kl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kl.credentialFromTaggedObject(e)}static credentialFromError(e){return Kl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kl.credential(e.oauthAccessToken)}catch{return null}}}Kl.GITHUB_SIGN_IN_METHOD="github.com";Kl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends vh{constructor(){super("twitter.com")}static credential(e,t){return qc._fromParams({providerId:Jl.PROVIDER_ID,signInMethod:Jl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Jl.credentialFromTaggedObject(e)}static credentialFromError(e){return Jl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Jl.credential(t,n)}catch{return null}}}Jl.TWITTER_SIGN_IN_METHOD="twitter.com";Jl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bC(r,e){return xh(r,"POST","/v1/accounts:signUp",dc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,o=!1){const a=await ea._fromIdTokenResponse(e,n,o),c=H2(n);return new Hc({user:a,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const o=H2(n);return new Hc({user:e,providerId:o,_tokenResponse:n,operationType:t})}}function H2(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends gl{constructor(e,t,n,o){super(t.code,t.message),this.operationType=n,this.user=o,Object.setPrototypeOf(this,ep.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,o){return new ep(e,t,n,o)}}function Xv(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?ep._fromErrorAndOperation(r,a,e,n):a})}async function wC(r,e,t=!1){const n=await nh(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Hc._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SC(r,e,t=!1){const{auth:n}=r;if(js(n.app))return Promise.reject(dl(n));const o="reauthenticate";try{const a=await nh(r,Xv(n,o,e,r),t);Ut(a.idToken,n,"internal-error");const c=dg(a.idToken);Ut(c,n,"internal-error");const{sub:u}=c;return Ut(r.uid===u,n,"user-mismatch"),Hc._forOperation(r,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&na(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zv(r,e,t=!1){if(js(r.app))return Promise.reject(dl(r));const n="signIn",o=await Xv(r,n,e),a=await Hc._fromIdTokenResponse(r,n,o);return t||await r._updateCurrentUser(a.user),a}async function _C(r,e){return Zv(eu(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eb(r){const e=eu(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function TC(r,e,t){if(js(r.app))return Promise.reject(dl(r));const n=eu(r),c=await I0(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bC).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&eb(r),f}),u=await Hc._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(u.user),u}function AC(r,e,t){return js(r.app)?Promise.reject(dl(r)):_C(Ci(r),sd.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&eb(r),n})}function CC(r,e,t,n){return Ci(r).onIdTokenChanged(e,t,n)}function kC(r,e,t){return Ci(r).beforeAuthStateChanged(e,t)}function vp(r,e,t,n){return Ci(r).onAuthStateChanged(e,t,n)}function jC(r){return Ci(r).signOut()}const tp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(tp,"1"),this.storage.removeItem(tp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=1e3,IC=10;class rb extends tb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Hv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),o=this.localCache[t];n!==o&&e(t,o,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,f)=>{this.notifyListeners(c,f)});return}const n=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(n);!t&&this.localCache[n]===c||this.notifyListeners(n,c)},a=this.storage.getItem(n);KA()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,IC):o()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const o of Array.from(n))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},EC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rb.type="LOCAL";const RC=rb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb extends tb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}nb.type="SESSION";const ib=nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const n=new bp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:o,data:a}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:o});const u=Array.from(c).map(async d=>d(t.origin,a)),f=await PC(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((u,f)=>{const d=mg("",20);o.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},n);c={messageChannel:o,onMessage(w){const C=w;if(C.data.eventId===d)switch(C.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(C.data.response);break;default:clearTimeout(g),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(){return window}function LC(r){Ea().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(){return typeof Ea().WorkerGlobalScope<"u"&&typeof Ea().importScripts=="function"}async function BC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function zC(){return ob()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="firebaseLocalStorageDb",OC=1,rp="firebaseLocalStorage",ab="fbase_key";class bh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function wp(r,e){return r.transaction([rp],e?"readwrite":"readonly").objectStore(rp)}function VC(){const r=indexedDB.deleteDatabase(sb);return new bh(r).toPromise()}function R0(){const r=indexedDB.open(sb,OC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(rp,{keyPath:ab})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(rp)?e(n):(n.close(),await VC(),e(await R0()))})})}async function G2(r,e,t){const n=wp(r,!0).put({[ab]:e,value:t});return new bh(n).toPromise()}async function MC(r,e){const t=wp(r,!1).get(e),n=await new bh(t).toPromise();return n===void 0?null:n.value}function K2(r,e){const t=wp(r,!0).delete(e);return new bh(t).toPromise()}const DC=800,WC=3;class lb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await R0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>WC)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ob()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bp._getInstance(zC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await BC(),!this.activeServiceWorker)return;this.sender=new NC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await R0();return await G2(e,tp,"1"),await K2(e,tp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>G2(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>MC(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>K2(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=wp(o,!1).getAll();return new bh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)n.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!n.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const o of Array.from(n))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lb.type="LOCAL";const $C=lb;new yh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(r,e){return e?ul(e):(Ut(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg extends fg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qC(r){return Zv(r.auth,new gg(r),r.bypassAuthState)}function HC(r){const{auth:e,user:t}=r;return Ut(t,e,"internal-error"),SC(t,new gg(r),r.bypassAuthState)}async function GC(r){const{auth:e,user:t}=r;return Ut(t,e,"internal-error"),wC(t,new gg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,t,n,o,a=!1){this.auth=e,this.resolver=n,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:o,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qC;case"linkViaPopup":case"linkViaRedirect":return GC;case"reauthViaPopup":case"reauthViaRedirect":return HC;default:na(this.auth,"internal-error")}}resolve(e){fl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=new yh(2e3,1e4);class zu extends cb{constructor(e,t,n,o,a){super(e,t,o,a),this.provider=n,this.authWindow=null,this.pollId=null,zu.currentPopupAction&&zu.currentPopupAction.cancel(),zu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ut(e,this.auth,"internal-error"),e}async onExecution(){fl(this.filter.length===1,"Popup operations only handle one event");const e=mg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ja(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ja(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ja(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KC.get())};e()}}zu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="pendingRedirect",Ff=new Map;class YC extends cb{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Ff.get(this.auth._key());if(!e){try{const n=await QC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Ff.set(this.auth._key(),e)}return this.bypassAuthState||Ff.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QC(r,e){const t=ek(e),n=ZC(r);if(!await n._isAvailable())return!1;const o=await n._get(t)==="true";return await n._remove(t),o}function XC(r,e){Ff.set(r._key(),e)}function ZC(r){return ul(r._redirectPersistence)}function ek(r){return Bf(JC,r.config.apiKey,r.name)}async function tk(r,e,t=!1){if(js(r.app))return Promise.reject(dl(r));const n=eu(r),o=UC(n,e),c=await new YC(n,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=600*1e3;class nk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ik(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ub(e)){const o=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(ja(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rk&&this.cachedEventUids.clear(),this.cachedEventUids.has(J2(e))}saveEventToCache(e){this.cachedEventUids.add(J2(e)),this.lastProcessedEventTime=Date.now()}}function J2(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function ub({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ik(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ub(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok(r,e={}){return hc(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ak=/^https?/;async function lk(r){if(r.config.emulator)return;const{authorizedDomains:e}=await ok(r);for(const t of e)try{if(ck(t))return}catch{}na(r,"unauthorized-domain")}function ck(r){const e=j0(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===n}if(!ak.test(t))return!1;if(sk.test(r))return n===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=new yh(3e4,6e4);function Y2(){const r=Ea().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function dk(r){return new Promise((e,t)=>{var o,a,c;function n(){Y2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y2(),t(ja(r,"network-request-failed"))},timeout:uk.get()})}if((a=(o=Ea().gapi)==null?void 0:o.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((c=Ea().gapi)!=null&&c.load)n();else{const u=nC("iframefcb");return Ea()[u]=()=>{gapi.load?n():t(ja(r,"network-request-failed"))},Kv(`${rC()}?onload=${u}`).catch(f=>t(f))}}).catch(e=>{throw zf=null,e})}let zf=null;function hk(r){return zf=zf||dk(r),zf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=new yh(5e3,15e3),pk="__/auth/iframe",mk="emulator/auth/iframe",gk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xk(r){const e=r.config;Ut(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?ug(e,mk):`https://${r.config.authDomain}/${pk}`,n={apiKey:e.apiKey,appName:r.name,v:od},o=yk.get(r.config.apiHost);o&&(n.eid=o);const a=r._getFrameworks();return a.length&&(n.fw=a.join(",")),`${t}?${gh(n).slice(1)}`}async function vk(r){const e=await hk(r),t=Ea().gapi;return Ut(t,r,"internal-error"),e.open({where:document.body,url:xk(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gk,dontclear:!0},n=>new Promise(async(o,a)=>{await n.restyle({setHideOnLeave:!1});const c=ja(r,"network-request-failed"),u=Ea().setTimeout(()=>{a(c)},fk.get());function f(){Ea().clearTimeout(u),o(n)}n.ping(f).then(f,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wk=500,Sk=600,_k="_blank",Tk="http://localhost";class Q2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ak(r,e,t,n=wk,o=Sk){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const f={...bk,width:n.toString(),height:o.toString(),top:a,left:c},d=lo().toLowerCase();t&&(u=Dv(d)?_k:t),Vv(d)&&(e=e||Tk,f.scrollbars="yes");const g=Object.entries(f).reduce((C,[b,V])=>`${C}${b}=${V},`,"");if(GA(d)&&u!=="_self")return Ck(e||"",u),new Q2(null);const w=window.open(e||"",u,g);Ut(w,r,"popup-blocked");try{w.focus()}catch{}return new Q2(w)}function Ck(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk="__/auth/handler",jk="emulator/auth/handler",Ek=encodeURIComponent("fac");async function X2(r,e,t,n,o,a){Ut(r.config.authDomain,r,"auth-domain-config-required"),Ut(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:od,eventId:o};if(e instanceof Qv){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",f6(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,w]of Object.entries({}))c[g]=w}if(e instanceof vh){const g=e.getScopes().filter(w=>w!=="");g.length>0&&(c.scopes=g.join(","))}r.tenantId&&(c.tid=r.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const f=await r._getAppCheckToken(),d=f?`#${Ek}=${encodeURIComponent(f)}`:"";return`${Ik(r)}?${gh(u).slice(1)}${d}`}function Ik({config:r}){return r.emulator?ug(r,jk):`https://${r.authDomain}/${kk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="webStorageSupport";class Rk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ib,this._completeRedirectFn=tk,this._overrideRedirectResult=XC}async _openPopup(e,t,n,o){var c;fl((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const a=await X2(e,t,n,j0(),o);return Ak(e,a,mg())}async _openRedirect(e,t,n,o){await this._originValidation(e);const a=await X2(e,t,n,j0(),o);return LC(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(fl(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await vk(e),n=new nk(e);return t.register("authEvent",o=>(Ut(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:n.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(i0,{type:i0},o=>{var c;const a=(c=o==null?void 0:o[0])==null?void 0:c[i0];a!==void 0&&t(!!a),na(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Hv()||Mv()||hg()}}const Pk=Rk;var Z2="@firebase/auth",ey="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Bk(r){Ju(new Uc("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=n.options;Ut(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const f={apiKey:c,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gv(r)},d=new ZA(n,o,a,f);return cC(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ju(new Uc("auth-internal",e=>{const t=eu(e.getProvider("auth").getImmediate());return(n=>new Nk(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ec(Z2,ey,Lk(r)),ec(Z2,ey,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=300,zk=Sv("authIdTokenMaxAge")||Fk;let ty=null;const Ok=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>zk)return;const o=t==null?void 0:t.token;ty!==o&&(ty=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Vk(r=jv()){const e=lg(r,"auth");if(e.isInitialized())return e.getImmediate();const t=lC(r,{popupRedirectResolver:Pk,persistence:[$C,RC,ib]}),n=Sv("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const c=Ok(a.toString());kC(t,c,()=>c(t.currentUser)),CC(t,u=>c(u))}}const o=bv("auth");return o&&uC(t,`http://${o}`),t}function Mk(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}eC({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=o=>{const a=ja("internal-error");a.customData=o,t(a)},n.type="text/javascript",n.charset="UTF-8",Mk().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Bk("Browser");var ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tc,db;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function T(){}T.prototype=A.prototype,N.F=A.prototype,N.prototype=new T,N.prototype.constructor=N,N.D=function(F,k,v){for(var L=Array(arguments.length-2),M=2;M<arguments.length;M++)L[M-2]=arguments[M];return A.prototype[k].apply(F,L)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,A,T){T||(T=0);const F=Array(16);if(typeof A=="string")for(var k=0;k<16;++k)F[k]=A.charCodeAt(T++)|A.charCodeAt(T++)<<8|A.charCodeAt(T++)<<16|A.charCodeAt(T++)<<24;else for(k=0;k<16;++k)F[k]=A[T++]|A[T++]<<8|A[T++]<<16|A[T++]<<24;A=N.g[0],T=N.g[1],k=N.g[2];let v=N.g[3],L;L=A+(v^T&(k^v))+F[0]+3614090360&4294967295,A=T+(L<<7&4294967295|L>>>25),L=v+(k^A&(T^k))+F[1]+3905402710&4294967295,v=A+(L<<12&4294967295|L>>>20),L=k+(T^v&(A^T))+F[2]+606105819&4294967295,k=v+(L<<17&4294967295|L>>>15),L=T+(A^k&(v^A))+F[3]+3250441966&4294967295,T=k+(L<<22&4294967295|L>>>10),L=A+(v^T&(k^v))+F[4]+4118548399&4294967295,A=T+(L<<7&4294967295|L>>>25),L=v+(k^A&(T^k))+F[5]+1200080426&4294967295,v=A+(L<<12&4294967295|L>>>20),L=k+(T^v&(A^T))+F[6]+2821735955&4294967295,k=v+(L<<17&4294967295|L>>>15),L=T+(A^k&(v^A))+F[7]+4249261313&4294967295,T=k+(L<<22&4294967295|L>>>10),L=A+(v^T&(k^v))+F[8]+1770035416&4294967295,A=T+(L<<7&4294967295|L>>>25),L=v+(k^A&(T^k))+F[9]+2336552879&4294967295,v=A+(L<<12&4294967295|L>>>20),L=k+(T^v&(A^T))+F[10]+4294925233&4294967295,k=v+(L<<17&4294967295|L>>>15),L=T+(A^k&(v^A))+F[11]+2304563134&4294967295,T=k+(L<<22&4294967295|L>>>10),L=A+(v^T&(k^v))+F[12]+1804603682&4294967295,A=T+(L<<7&4294967295|L>>>25),L=v+(k^A&(T^k))+F[13]+4254626195&4294967295,v=A+(L<<12&4294967295|L>>>20),L=k+(T^v&(A^T))+F[14]+2792965006&4294967295,k=v+(L<<17&4294967295|L>>>15),L=T+(A^k&(v^A))+F[15]+1236535329&4294967295,T=k+(L<<22&4294967295|L>>>10),L=A+(k^v&(T^k))+F[1]+4129170786&4294967295,A=T+(L<<5&4294967295|L>>>27),L=v+(T^k&(A^T))+F[6]+3225465664&4294967295,v=A+(L<<9&4294967295|L>>>23),L=k+(A^T&(v^A))+F[11]+643717713&4294967295,k=v+(L<<14&4294967295|L>>>18),L=T+(v^A&(k^v))+F[0]+3921069994&4294967295,T=k+(L<<20&4294967295|L>>>12),L=A+(k^v&(T^k))+F[5]+3593408605&4294967295,A=T+(L<<5&4294967295|L>>>27),L=v+(T^k&(A^T))+F[10]+38016083&4294967295,v=A+(L<<9&4294967295|L>>>23),L=k+(A^T&(v^A))+F[15]+3634488961&4294967295,k=v+(L<<14&4294967295|L>>>18),L=T+(v^A&(k^v))+F[4]+3889429448&4294967295,T=k+(L<<20&4294967295|L>>>12),L=A+(k^v&(T^k))+F[9]+568446438&4294967295,A=T+(L<<5&4294967295|L>>>27),L=v+(T^k&(A^T))+F[14]+3275163606&4294967295,v=A+(L<<9&4294967295|L>>>23),L=k+(A^T&(v^A))+F[3]+4107603335&4294967295,k=v+(L<<14&4294967295|L>>>18),L=T+(v^A&(k^v))+F[8]+1163531501&4294967295,T=k+(L<<20&4294967295|L>>>12),L=A+(k^v&(T^k))+F[13]+2850285829&4294967295,A=T+(L<<5&4294967295|L>>>27),L=v+(T^k&(A^T))+F[2]+4243563512&4294967295,v=A+(L<<9&4294967295|L>>>23),L=k+(A^T&(v^A))+F[7]+1735328473&4294967295,k=v+(L<<14&4294967295|L>>>18),L=T+(v^A&(k^v))+F[12]+2368359562&4294967295,T=k+(L<<20&4294967295|L>>>12),L=A+(T^k^v)+F[5]+4294588738&4294967295,A=T+(L<<4&4294967295|L>>>28),L=v+(A^T^k)+F[8]+2272392833&4294967295,v=A+(L<<11&4294967295|L>>>21),L=k+(v^A^T)+F[11]+1839030562&4294967295,k=v+(L<<16&4294967295|L>>>16),L=T+(k^v^A)+F[14]+4259657740&4294967295,T=k+(L<<23&4294967295|L>>>9),L=A+(T^k^v)+F[1]+2763975236&4294967295,A=T+(L<<4&4294967295|L>>>28),L=v+(A^T^k)+F[4]+1272893353&4294967295,v=A+(L<<11&4294967295|L>>>21),L=k+(v^A^T)+F[7]+4139469664&4294967295,k=v+(L<<16&4294967295|L>>>16),L=T+(k^v^A)+F[10]+3200236656&4294967295,T=k+(L<<23&4294967295|L>>>9),L=A+(T^k^v)+F[13]+681279174&4294967295,A=T+(L<<4&4294967295|L>>>28),L=v+(A^T^k)+F[0]+3936430074&4294967295,v=A+(L<<11&4294967295|L>>>21),L=k+(v^A^T)+F[3]+3572445317&4294967295,k=v+(L<<16&4294967295|L>>>16),L=T+(k^v^A)+F[6]+76029189&4294967295,T=k+(L<<23&4294967295|L>>>9),L=A+(T^k^v)+F[9]+3654602809&4294967295,A=T+(L<<4&4294967295|L>>>28),L=v+(A^T^k)+F[12]+3873151461&4294967295,v=A+(L<<11&4294967295|L>>>21),L=k+(v^A^T)+F[15]+530742520&4294967295,k=v+(L<<16&4294967295|L>>>16),L=T+(k^v^A)+F[2]+3299628645&4294967295,T=k+(L<<23&4294967295|L>>>9),L=A+(k^(T|~v))+F[0]+4096336452&4294967295,A=T+(L<<6&4294967295|L>>>26),L=v+(T^(A|~k))+F[7]+1126891415&4294967295,v=A+(L<<10&4294967295|L>>>22),L=k+(A^(v|~T))+F[14]+2878612391&4294967295,k=v+(L<<15&4294967295|L>>>17),L=T+(v^(k|~A))+F[5]+4237533241&4294967295,T=k+(L<<21&4294967295|L>>>11),L=A+(k^(T|~v))+F[12]+1700485571&4294967295,A=T+(L<<6&4294967295|L>>>26),L=v+(T^(A|~k))+F[3]+2399980690&4294967295,v=A+(L<<10&4294967295|L>>>22),L=k+(A^(v|~T))+F[10]+4293915773&4294967295,k=v+(L<<15&4294967295|L>>>17),L=T+(v^(k|~A))+F[1]+2240044497&4294967295,T=k+(L<<21&4294967295|L>>>11),L=A+(k^(T|~v))+F[8]+1873313359&4294967295,A=T+(L<<6&4294967295|L>>>26),L=v+(T^(A|~k))+F[15]+4264355552&4294967295,v=A+(L<<10&4294967295|L>>>22),L=k+(A^(v|~T))+F[6]+2734768916&4294967295,k=v+(L<<15&4294967295|L>>>17),L=T+(v^(k|~A))+F[13]+1309151649&4294967295,T=k+(L<<21&4294967295|L>>>11),L=A+(k^(T|~v))+F[4]+4149444226&4294967295,A=T+(L<<6&4294967295|L>>>26),L=v+(T^(A|~k))+F[11]+3174756917&4294967295,v=A+(L<<10&4294967295|L>>>22),L=k+(A^(v|~T))+F[2]+718787259&4294967295,k=v+(L<<15&4294967295|L>>>17),L=T+(v^(k|~A))+F[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(k+(L<<21&4294967295|L>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+v&4294967295}n.prototype.v=function(N,A){A===void 0&&(A=N.length);const T=A-this.blockSize,F=this.C;let k=this.h,v=0;for(;v<A;){if(k==0)for(;v<=T;)o(this,N,v),v+=this.blockSize;if(typeof N=="string"){for(;v<A;)if(F[k++]=N.charCodeAt(v++),k==this.blockSize){o(this,F),k=0;break}}else for(;v<A;)if(F[k++]=N[v++],k==this.blockSize){o(this,F),k=0;break}}this.h=k,this.o+=A},n.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;A=this.o*8;for(var T=N.length-8;T<N.length;++T)N[T]=A&255,A/=256;for(this.v(N),N=Array(16),A=0,T=0;T<4;++T)for(let F=0;F<32;F+=8)N[A++]=this.g[T]>>>F&255;return N};function a(N,A){var T=u;return Object.prototype.hasOwnProperty.call(T,N)?T[N]:T[N]=A(N)}function c(N,A){this.h=A;const T=[];let F=!0;for(let k=N.length-1;k>=0;k--){const v=N[k]|0;F&&v==A||(T[k]=v,F=!1)}this.g=T}var u={};function f(N){return-128<=N&&N<128?a(N,function(A){return new c([A|0],A<0?-1:0)}):new c([N|0],N<0?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return w;if(N<0)return z(d(-N));const A=[];let T=1;for(let F=0;N>=T;F++)A[F]=N/T|0,T*=4294967296;return new c(A,0)}function g(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return z(g(N.substring(1),A));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=d(Math.pow(A,8));let F=w;for(let v=0;v<N.length;v+=8){var k=Math.min(8,N.length-v);const L=parseInt(N.substring(v,v+k),A);k<8?(k=d(Math.pow(A,k)),F=F.j(k).add(d(L))):(F=F.j(T),F=F.add(d(L)))}return F}var w=f(0),C=f(1),b=f(16777216);r=c.prototype,r.m=function(){if(R(this))return-z(this).m();let N=0,A=1;for(let T=0;T<this.g.length;T++){const F=this.i(T);N+=(F>=0?F:4294967296+F)*A,A*=4294967296}return N},r.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(V(this))return"0";if(R(this))return"-"+z(this).toString(N);const A=d(Math.pow(N,6));var T=this;let F="";for(;;){const k=B(T,A).g;T=j(T,k.j(A));let v=((T.g.length>0?T.g[0]:T.h)>>>0).toString(N);if(T=k,V(T))return v+F;for(;v.length<6;)v="0"+v;F=v+F}},r.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function V(N){if(N.h!=0)return!1;for(let A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function R(N){return N.h==-1}r.l=function(N){return N=j(this,N),R(N)?-1:V(N)?0:1};function z(N){const A=N.g.length,T=[];for(let F=0;F<A;F++)T[F]=~N.g[F];return new c(T,~N.h).add(C)}r.abs=function(){return R(this)?z(this):this},r.add=function(N){const A=Math.max(this.g.length,N.g.length),T=[];let F=0;for(let k=0;k<=A;k++){let v=F+(this.i(k)&65535)+(N.i(k)&65535),L=(v>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);F=L>>>16,v&=65535,L&=65535,T[k]=L<<16|v}return new c(T,T[T.length-1]&-2147483648?-1:0)};function j(N,A){return N.add(z(A))}r.j=function(N){if(V(this)||V(N))return w;if(R(this))return R(N)?z(this).j(z(N)):z(z(this).j(N));if(R(N))return z(this.j(z(N)));if(this.l(b)<0&&N.l(b)<0)return d(this.m()*N.m());const A=this.g.length+N.g.length,T=[];for(var F=0;F<2*A;F++)T[F]=0;for(F=0;F<this.g.length;F++)for(let k=0;k<N.g.length;k++){const v=this.i(F)>>>16,L=this.i(F)&65535,M=N.i(k)>>>16,$=N.i(k)&65535;T[2*F+2*k]+=L*$,U(T,2*F+2*k),T[2*F+2*k+1]+=v*$,U(T,2*F+2*k+1),T[2*F+2*k+1]+=L*M,U(T,2*F+2*k+1),T[2*F+2*k+2]+=v*M,U(T,2*F+2*k+2)}for(N=0;N<A;N++)T[N]=T[2*N+1]<<16|T[2*N];for(N=A;N<2*A;N++)T[N]=0;return new c(T,0)};function U(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function H(N,A){this.g=N,this.h=A}function B(N,A){if(V(A))throw Error("division by zero");if(V(N))return new H(w,w);if(R(N))return A=B(z(N),A),new H(z(A.g),z(A.h));if(R(A))return A=B(N,z(A)),new H(z(A.g),A.h);if(N.g.length>30){if(R(N)||R(A))throw Error("slowDivide_ only works with positive integers.");for(var T=C,F=A;F.l(N)<=0;)T=re(T),F=re(F);var k=ce(T,1),v=ce(F,1);for(F=ce(F,2),T=ce(T,2);!V(F);){var L=v.add(F);L.l(N)<=0&&(k=k.add(T),v=L),F=ce(F,1),T=ce(T,1)}return A=j(N,k.j(A)),new H(k,A)}for(k=w;N.l(A)>=0;){for(T=Math.max(1,Math.floor(N.m()/A.m())),F=Math.ceil(Math.log(T)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),v=d(T),L=v.j(A);R(L)||L.l(N)>0;)T-=F,v=d(T),L=v.j(A);V(v)&&(v=C),k=k.add(v),N=j(N,L)}return new H(k,N)}r.B=function(N){return B(this,N).h},r.and=function(N){const A=Math.max(this.g.length,N.g.length),T=[];for(let F=0;F<A;F++)T[F]=this.i(F)&N.i(F);return new c(T,this.h&N.h)},r.or=function(N){const A=Math.max(this.g.length,N.g.length),T=[];for(let F=0;F<A;F++)T[F]=this.i(F)|N.i(F);return new c(T,this.h|N.h)},r.xor=function(N){const A=Math.max(this.g.length,N.g.length),T=[];for(let F=0;F<A;F++)T[F]=this.i(F)^N.i(F);return new c(T,this.h^N.h)};function re(N){const A=N.g.length+1,T=[];for(let F=0;F<A;F++)T[F]=N.i(F)<<1|N.i(F-1)>>>31;return new c(T,N.h)}function ce(N,A){const T=A>>5;A%=32;const F=N.g.length-T,k=[];for(let v=0;v<F;v++)k[v]=A>0?N.i(v+T)>>>A|N.i(v+T+1)<<32-A:N.i(v+T);return new c(k,N.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,db=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=d,c.fromString=g,tc=c}).apply(typeof ry<"u"?ry:typeof self<"u"?self:typeof window<"u"?window:{});var Sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hb,Wd,fb,Of,P0,pb,mb,gb;(function(){var r,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sf=="object"&&Sf];for(var I=0;I<m.length;++I){var W=m[I];if(W&&W.Math==Math)return W}throw Error("Cannot find global object")}var n=t(this);function o(m,I){if(I)e:{var W=n;m=m.split(".");for(var te=0;te<m.length-1;te++){var ke=m[te];if(!(ke in W))break e;W=W[ke]}m=m[m.length-1],te=W[m],I=I(te),I!=te&&I!=null&&e(W,m,{configurable:!0,writable:!0,value:I})}}o("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(m){return m||function(I){var W=[],te;for(te in I)Object.prototype.hasOwnProperty.call(I,te)&&W.push([te,I[te]]);return W}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(m){var I=typeof m;return I=="object"&&m!=null||I=="function"}function f(m,I,W){return m.call.apply(m.bind,arguments)}function d(m,I,W){return d=f,d.apply(null,arguments)}function g(m,I){var W=Array.prototype.slice.call(arguments,1);return function(){var te=W.slice();return te.push.apply(te,arguments),m.apply(this,te)}}function w(m,I){function W(){}W.prototype=I.prototype,m.Z=I.prototype,m.prototype=new W,m.prototype.constructor=m,m.Ob=function(te,ke,Pe){for(var Ze=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)Ze[Ot-2]=arguments[Ot];return I.prototype[ke].apply(te,Ze)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function b(m){const I=m.length;if(I>0){const W=Array(I);for(let te=0;te<I;te++)W[te]=m[te];return W}return[]}function V(m,I){for(let te=1;te<arguments.length;te++){const ke=arguments[te];var W=typeof ke;if(W=W!="object"?W:ke?Array.isArray(ke)?"array":W:"null",W=="array"||W=="object"&&typeof ke.length=="number"){W=m.length||0;const Pe=ke.length||0;m.length=W+Pe;for(let Ze=0;Ze<Pe;Ze++)m[W+Ze]=ke[Ze]}else m.push(ke)}}class R{constructor(I,W){this.i=I,this.j=W,this.h=0,this.g=null}get(){let I;return this.h>0?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function z(m){c.setTimeout(()=>{throw m},0)}function j(){var m=N;let I=null;return m.g&&(I=m.g,m.g=m.g.next,m.g||(m.h=null),I.next=null),I}class U{constructor(){this.h=this.g=null}add(I,W){const te=H.get();te.set(I,W),this.h?this.h.next=te:this.g=te,this.h=te}}var H=new R(()=>new B,m=>m.reset());class B{constructor(){this.next=this.g=this.h=null}set(I,W){this.h=I,this.g=W,this.next=null}reset(){this.next=this.g=this.h=null}}let re,ce=!1,N=new U,A=()=>{const m=Promise.resolve(void 0);re=()=>{m.then(T)}};function T(){for(var m;m=j();){try{m.h.call(m.g)}catch(W){z(W)}var I=H;I.j(m),I.h<100&&(I.h++,m.next=I.g,I.g=m)}ce=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(m,I){this.type=m,this.g=this.target=I,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var v=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,I=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const W=()=>{};c.addEventListener("test",W,I),c.removeEventListener("test",W,I)}catch{}return m})();function L(m){return/^[\s\xa0]*$/.test(m)}function M(m,I){k.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,I)}w(M,k),M.prototype.init=function(m,I){const W=this.type=m.type,te=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=I,I=m.relatedTarget,I||(W=="mouseover"?I=m.fromElement:W=="mouseout"&&(I=m.toElement)),this.relatedTarget=I,te?(this.clientX=te.clientX!==void 0?te.clientX:te.pageX,this.clientY=te.clientY!==void 0?te.clientY:te.pageY,this.screenX=te.screenX||0,this.screenY=te.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&M.Z.h.call(this)},M.prototype.h=function(){M.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var $="closure_listenable_"+(Math.random()*1e6|0),oe=0;function se(m,I,W,te,ke){this.listener=m,this.proxy=null,this.src=I,this.type=W,this.capture=!!te,this.ha=ke,this.key=++oe,this.da=this.fa=!1}function ie(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ye(m,I,W){for(const te in m)I.call(W,m[te],te,m)}function xe(m,I){for(const W in m)I.call(void 0,m[W],W,m)}function ee(m){const I={};for(const W in m)I[W]=m[W];return I}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(m,I){let W,te;for(let ke=1;ke<arguments.length;ke++){te=arguments[ke];for(W in te)m[W]=te[W];for(let Pe=0;Pe<D.length;Pe++)W=D[Pe],Object.prototype.hasOwnProperty.call(te,W)&&(m[W]=te[W])}}function X(m){this.src=m,this.g={},this.h=0}X.prototype.add=function(m,I,W,te,ke){const Pe=m.toString();m=this.g[Pe],m||(m=this.g[Pe]=[],this.h++);const Ze=me(m,I,te,ke);return Ze>-1?(I=m[Ze],W||(I.fa=!1)):(I=new se(I,this.src,Pe,!!te,ke),I.fa=W,m.push(I)),I};function de(m,I){const W=I.type;if(W in m.g){var te=m.g[W],ke=Array.prototype.indexOf.call(te,I,void 0),Pe;(Pe=ke>=0)&&Array.prototype.splice.call(te,ke,1),Pe&&(ie(I),m.g[W].length==0&&(delete m.g[W],m.h--))}}function me(m,I,W,te){for(let ke=0;ke<m.length;++ke){const Pe=m[ke];if(!Pe.da&&Pe.listener==I&&Pe.capture==!!W&&Pe.ha==te)return ke}return-1}var we="closure_lm_"+(Math.random()*1e6|0),Ae={};function Ce(m,I,W,te,ke){if(Array.isArray(I)){for(let Pe=0;Pe<I.length;Pe++)Ce(m,I[Pe],W,te,ke);return null}return W=vt(W),m&&m[$]?m.J(I,W,u(te)?!!te.capture:!1,ke):Be(m,I,W,!1,te,ke)}function Be(m,I,W,te,ke,Pe){if(!I)throw Error("Invalid event type");const Ze=u(ke)?!!ke.capture:!!ke;let Ot=Pt(m);if(Ot||(m[we]=Ot=new X(m)),W=Ot.add(I,W,te,Ze,Pe),W.proxy)return W;if(te=qe(),W.proxy=te,te.src=m,te.listener=W,m.addEventListener)v||(ke=Ze),ke===void 0&&(ke=!1),m.addEventListener(I.toString(),te,ke);else if(m.attachEvent)m.attachEvent(Fe(I.toString()),te);else if(m.addListener&&m.removeListener)m.addListener(te);else throw Error("addEventListener and attachEvent are unavailable.");return W}function qe(){function m(W){return I.call(m.src,m.listener,W)}const I=he;return m}function et(m,I,W,te,ke){if(Array.isArray(I))for(var Pe=0;Pe<I.length;Pe++)et(m,I[Pe],W,te,ke);else te=u(te)?!!te.capture:!!te,W=vt(W),m&&m[$]?(m=m.i,Pe=String(I).toString(),Pe in m.g&&(I=m.g[Pe],W=me(I,W,te,ke),W>-1&&(ie(I[W]),Array.prototype.splice.call(I,W,1),I.length==0&&(delete m.g[Pe],m.h--)))):m&&(m=Pt(m))&&(I=m.g[I.toString()],m=-1,I&&(m=me(I,W,te,ke)),(W=m>-1?I[m]:null)&&Qe(W))}function Qe(m){if(typeof m!="number"&&m&&!m.da){var I=m.src;if(I&&I[$])de(I.i,m);else{var W=m.type,te=m.proxy;I.removeEventListener?I.removeEventListener(W,te,m.capture):I.detachEvent?I.detachEvent(Fe(W),te):I.addListener&&I.removeListener&&I.removeListener(te),(W=Pt(I))?(de(W,m),W.h==0&&(W.src=null,I[we]=null)):ie(m)}}}function Fe(m){return m in Ae?Ae[m]:Ae[m]="on"+m}function he(m,I){if(m.da)m=!0;else{I=new M(I,this);const W=m.listener,te=m.ha||m.src;m.fa&&Qe(m),m=W.call(te,I)}return m}function Pt(m){return m=m[we],m instanceof X?m:null}var Ct="__closure_events_fn_"+(Math.random()*1e9>>>0);function vt(m){return typeof m=="function"?m:(m[Ct]||(m[Ct]=function(I){return m.handleEvent(I)}),m[Ct])}function Ue(){F.call(this),this.i=new X(this),this.M=this,this.G=null}w(Ue,F),Ue.prototype[$]=!0,Ue.prototype.removeEventListener=function(m,I,W,te){et(this,m,I,W,te)};function nt(m,I){var W,te=m.G;if(te)for(W=[];te;te=te.G)W.push(te);if(m=m.M,te=I.type||I,typeof I=="string")I=new k(I,m);else if(I instanceof k)I.target=I.target||m;else{var ke=I;I=new k(te,m),q(I,ke)}ke=!0;let Pe,Ze;if(W)for(Ze=W.length-1;Ze>=0;Ze--)Pe=I.g=W[Ze],ke=tt(Pe,te,!0,I)&&ke;if(Pe=I.g=m,ke=tt(Pe,te,!0,I)&&ke,ke=tt(Pe,te,!1,I)&&ke,W)for(Ze=0;Ze<W.length;Ze++)Pe=I.g=W[Ze],ke=tt(Pe,te,!1,I)&&ke}Ue.prototype.N=function(){if(Ue.Z.N.call(this),this.i){var m=this.i;for(const I in m.g){const W=m.g[I];for(let te=0;te<W.length;te++)ie(W[te]);delete m.g[I],m.h--}}this.G=null},Ue.prototype.J=function(m,I,W,te){return this.i.add(String(m),I,!1,W,te)},Ue.prototype.K=function(m,I,W,te){return this.i.add(String(m),I,!0,W,te)};function tt(m,I,W,te){if(I=m.i.g[String(I)],!I)return!0;I=I.concat();let ke=!0;for(let Pe=0;Pe<I.length;++Pe){const Ze=I[Pe];if(Ze&&!Ze.da&&Ze.capture==W){const Ot=Ze.listener,Vr=Ze.ha||Ze.src;Ze.fa&&de(m.i,Ze),ke=Ot.call(Vr,te)!==!1&&ke}}return ke&&!te.defaultPrevented}function Gt(m,I){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=d(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(I)>2147483647?-1:c.setTimeout(m,I||0)}function wt(m){m.g=Gt(()=>{m.g=null,m.i&&(m.i=!1,wt(m))},m.l);const I=m.h;m.h=null,m.m.apply(null,I)}class hr extends F{constructor(I,W){super(),this.m=I,this.l=W,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:wt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nt(m){F.call(this),this.h=m,this.g={}}w(Nt,F);var Dt=[];function yr(m){ye(m.g,function(I,W){this.g.hasOwnProperty(W)&&Qe(I)},m),m.g={}}Nt.prototype.N=function(){Nt.Z.N.call(this),yr(this)},Nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ft=c.JSON.stringify,St=c.JSON.parse,kt=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function ft(){}function Cr(){}var rr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function dt(){k.call(this,"d")}w(dt,k);function Wt(){k.call(this,"c")}w(Wt,k);var ir={},At=null;function Xt(){return At=At||new Ue}ir.Ia="serverreachability";function Vt(m){k.call(this,ir.Ia,m)}w(Vt,k);function kr(m){const I=Xt();nt(I,new Vt(I))}ir.STAT_EVENT="statevent";function Br(m,I){k.call(this,ir.STAT_EVENT,m),this.stat=I}w(Br,k);function Mt(m){const I=Xt();nt(I,new Br(I,m))}ir.Ja="timingevent";function zt(m,I){k.call(this,ir.Ja,m),this.size=I}w(zt,k);function or(m,I){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},I)}function Di(){this.g=!0}Di.prototype.ua=function(){this.g=!1};function Rn(m,I,W,te,ke,Pe){m.info(function(){if(m.g)if(Pe){var Ze="",Ot=Pe.split("&");for(let lr=0;lr<Ot.length;lr++){var Vr=Ot[lr].split("=");if(Vr.length>1){const Gr=Vr[0];Vr=Vr[1];const zn=Gr.split("_");Ze=zn.length>=2&&zn[1]=="type"?Ze+(Gr+"="+Vr+"&"):Ze+(Gr+"=redacted&")}}}else Ze=null;else Ze=Pe;return"XMLHTTP REQ ("+te+") [attempt "+ke+"]: "+I+`
`+W+`
`+Ze})}function _o(m,I,W,te,ke,Pe,Ze){m.info(function(){return"XMLHTTP RESP ("+te+") [ attempt "+ke+"]: "+I+`
`+W+`
`+Pe+" "+Ze})}function Pn(m,I,W,te){m.info(function(){return"XMLHTTP TEXT ("+I+"): "+ki(m,W)+(te?" "+te:"")})}function jt(m,I){m.info(function(){return"TIMEOUT: "+I})}Di.prototype.info=function(){};function ki(m,I){if(!m.g)return I;if(!I)return null;try{const Pe=JSON.parse(I);if(Pe){for(m=0;m<Pe.length;m++)if(Array.isArray(Pe[m])){var W=Pe[m];if(!(W.length<2)){var te=W[1];if(Array.isArray(te)&&!(te.length<1)){var ke=te[0];if(ke!="noop"&&ke!="stop"&&ke!="close")for(let Ze=1;Ze<te.length;Ze++)te[Ze]=""}}}}return Ft(Pe)}catch{return I}}var ci={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Nn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ji;function Tr(){}w(Tr,ft),Tr.prototype.g=function(){return new XMLHttpRequest},ji=new Tr;function Fr(m){return encodeURIComponent(String(m))}function sn(m){var I=1;m=m.split(":");const W=[];for(;I>0&&m.length;)W.push(m.shift()),I--;return m.length&&W.push(m.join(":")),W}function qn(m,I,W,te){this.j=m,this.i=I,this.l=W,this.S=te||1,this.V=new Nt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $o}function $o(){this.i=null,this.g="",this.h=!1}var Wi={},$i={};function mn(m,I,W){m.M=1,m.A=Ln(vr(I)),m.u=W,m.R=!0,Ei(m,null)}function Ei(m,I){m.F=Date.now(),uo(m),m.B=vr(m.A);var W=m.B,te=m.S;Array.isArray(te)||(te=[String(te)]),Da(W.i,"t",te),m.C=0,W=m.j.L,m.h=new $o,m.g=st(m.j,W?I:null,!m.u),m.P>0&&(m.O=new hr(d(m.Y,m,m.g),m.P)),I=m.V,W=m.g,te=m.ba;var ke="readystatechange";Array.isArray(ke)||(ke&&(Dt[0]=ke.toString()),ke=Dt);for(let Pe=0;Pe<ke.length;Pe++){const Ze=Ce(W,ke[Pe],te||I.handleEvent,!1,I.h||I);if(!Ze)break;I.g[Ze.key]=Ze}I=m.J?ee(m.J):{},m.u?(m.v||(m.v="POST"),I["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,I)):(m.v="GET",m.g.ea(m.B,m.v,null,I)),kr(),Rn(m.i,m.v,m.B,m.l,m.S,m.u)}qn.prototype.ba=function(m){m=m.target;const I=this.O;I&&Hi(m)==3?I.j():this.Y(m)},qn.prototype.Y=function(m){try{if(m==this.g)e:{const Ot=Hi(this.g),Vr=this.g.ya(),lr=this.g.ca();if(!(Ot<3)&&(Ot!=3||this.g&&(this.h.h||this.g.la()||da(this.g)))){this.K||Ot!=4||Vr==7||(Vr==8||lr<=0?kr(3):kr(2)),Uo(this);var I=this.g.ca();this.X=I;var W=Ii(this);if(this.o=I==200,_o(this.i,this.v,this.B,this.l,this.S,Ot,I),this.o){if(this.U&&!this.L){t:{if(this.g){var te,ke=this.g;if((te=ke.g?ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(te)){var Pe=te;break t}}Pe=null}if(m=Pe)Pn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,jr(this,m);else{this.o=!1,this.m=3,Mt(12),qo(this),To(this);break e}}if(this.R){m=!0;let Gr;for(;!this.K&&this.C<W.length;)if(Gr=co(this,W),Gr==$i){Ot==4&&(this.m=4,Mt(14),m=!1),Pn(this.i,this.l,null,"[Incomplete Response]");break}else if(Gr==Wi){this.m=4,Mt(15),Pn(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}else Pn(this.i,this.l,Gr,null),jr(this,Gr);if(cs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||W.length!=0||this.h.h||(this.m=1,Mt(16),m=!1),this.o=this.o&&m,!m)Pn(this.i,this.l,W,"[Invalid Chunked Response]"),qo(this),To(this);else if(W.length>0&&!this.W){this.W=!0;var Ze=this.j;Ze.g==this&&Ze.aa&&!Ze.P&&(Ze.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),gs(Ze),Ze.P=!0,Mt(11))}}else Pn(this.i,this.l,W,null),jr(this,W);Ot==4&&qo(this),this.o&&!this.K&&(Ot==4?ue(this.j,this):(this.o=!1,uo(this)))}else Jo(this.g),I==400&&W.indexOf("Unknown SID")>0?(this.m=3,Mt(12)):(this.m=0,Mt(13)),qo(this),To(this)}}}catch{}finally{}};function Ii(m){if(!cs(m))return m.g.la();const I=da(m.g);if(I==="")return"";let W="";const te=I.length,ke=Hi(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return qo(m),To(m),"";m.h.i=new c.TextDecoder}for(let Pe=0;Pe<te;Pe++)m.h.h=!0,W+=m.h.i.decode(I[Pe],{stream:!(ke&&Pe==te-1)});return I.length=0,m.h.g+=W,m.C=0,m.h.g}function cs(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function co(m,I){var W=m.C,te=I.indexOf(`
`,W);return te==-1?$i:(W=Number(I.substring(W,te)),isNaN(W)?Wi:(te+=1,te+W>I.length?$i:(I=I.slice(te,te+W),m.C=te+W,I)))}qn.prototype.cancel=function(){this.K=!0,qo(this)};function uo(m){m.T=Date.now()+m.H,us(m,m.H)}function us(m,I){if(m.D!=null)throw Error("WatchDog timer not null");m.D=or(d(m.aa,m),I)}function Uo(m){m.D&&(c.clearTimeout(m.D),m.D=null)}qn.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(jt(this.i,this.B),this.M!=2&&(kr(),Mt(17)),qo(this),this.m=2,To(this)):us(this,this.T-m)};function To(m){m.j.I==0||m.K||ue(m.j,m)}function qo(m){Uo(m);var I=m.O;I&&typeof I.dispose=="function"&&I.dispose(),m.O=null,yr(m.V),m.g&&(I=m.g,m.g=null,I.abort(),I.dispose())}function jr(m,I){try{var W=m.j;if(W.I!=0&&(W.g==m||aa(W.h,m))){if(!m.L&&aa(W.h,m)&&W.I==3){try{var te=W.Ba.g.parse(I)}catch{te=null}if(Array.isArray(te)&&te.length==3){var ke=te;if(ke[0]==0){e:if(!W.v){if(W.g)if(W.g.F+3e3<m.F)G(W),ni(W);else break e;gi(W),Mt(18)}}else W.xa=ke[1],0<W.xa-W.K&&ke[2]<37500&&W.F&&W.A==0&&!W.C&&(W.C=or(d(W.Va,W),6e3));Ho(W.h)<=1&&W.ta&&(W.ta=void 0)}else Te(W,11)}else if((m.L||W.g==m)&&G(W),!L(I))for(ke=W.Ba.g.parse(I),I=0;I<ke.length;I++){let lr=ke[I];const Gr=lr[0];if(!(Gr<=W.K))if(W.K=Gr,lr=lr[1],W.I==2)if(lr[0]=="c"){W.M=lr[1],W.ba=lr[2];const zn=lr[3];zn!=null&&(W.ka=zn,W.j.info("VER="+W.ka));const Ni=lr[4];Ni!=null&&(W.za=Ni,W.j.info("SVER="+W.za));const Jr=lr[5];Jr!=null&&typeof Jr=="number"&&Jr>0&&(te=1.5*Jr,W.O=te,W.j.info("backChannelRequestTimeoutMs_="+te)),te=W;const yi=m.g;if(yi){const Ro=yi.g?yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ro){var Pe=te.h;Pe.g||Ro.indexOf("spdy")==-1&&Ro.indexOf("quic")==-1&&Ro.indexOf("h2")==-1||(Pe.j=Pe.l,Pe.g=new Set,Pe.h&&(ds(Pe,Pe.h),Pe.h=null))}if(te.G){const Os=yi.g?yi.g.getResponseHeader("X-HTTP-Session-Id"):null;Os&&(te.wa=Os,sr(te.J,te.G,Os))}}W.I=3,W.l&&W.l.ra(),W.aa&&(W.T=Date.now()-m.F,W.j.info("Handshake RTT: "+W.T+"ms")),te=W;var Ze=m;if(te.na=He(te,te.L?te.ba:null,te.W),Ze.L){hs(te.h,Ze);var Ot=Ze,Vr=te.O;Vr&&(Ot.H=Vr),Ot.D&&(Uo(Ot),uo(Ot)),te.g=Ze}else Fn(te);W.i.length>0&&Io(W)}else lr[0]!="stop"&&lr[0]!="close"||Te(W,7);else W.I==3&&(lr[0]=="stop"||lr[0]=="close"?lr[0]=="stop"?Te(W,7):Yo(W):lr[0]!="noop"&&W.l&&W.l.qa(lr),W.A=0)}}kr(4)}catch{}}var xl=class{constructor(m,I){this.g=m,this.map=I}};function Ps(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ui(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ho(m){return m.h?1:m.g?m.g.size:0}function aa(m,I){return m.h?m.h==I:m.g?m.g.has(I):!1}function ds(m,I){m.g?m.g.add(I):m.h=I}function hs(m,I){m.h&&m.h==I?m.h=null:m.g&&m.g.has(I)&&m.g.delete(I)}Ps.prototype.cancel=function(){if(this.i=di(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function di(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let I=m.i;for(const W of m.g.values())I=I.concat(W.G);return I}return b(m.i)}var za=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hn(m,I){if(m){m=m.split("&");for(let W=0;W<m.length;W++){const te=m[W].indexOf("=");let ke,Pe=null;te>=0?(ke=m[W].substring(0,te),Pe=m[W].substring(te+1)):ke=m[W],I(ke,Pe?decodeURIComponent(Pe.replace(/\+/g," ")):"")}}}function Ao(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let I;m instanceof Ao?(this.l=m.l,fs(this,m.j),this.o=m.o,this.g=m.g,ho(this,m.u),this.h=m.h,hi(this,Fs(m.i)),this.m=m.m):m&&(I=String(m).match(za))?(this.l=!1,fs(this,I[1]||"",!0),this.o=fo(I[2]||""),this.g=fo(I[3]||"",!0),ho(this,I[4]),this.h=fo(I[5]||"",!0),hi(this,I[6]||"",!0),this.m=fo(I[7]||"")):(this.l=!1,this.i=new nr(null,this.l))}Ao.prototype.toString=function(){const m=[];var I=this.j;I&&m.push(zr(I,Oa,!0),":");var W=this.g;return(W||I=="file")&&(m.push("//"),(I=this.o)&&m.push(zr(I,Oa,!0),"@"),m.push(Fr(W).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),W=this.u,W!=null&&m.push(":",String(W))),(W=this.h)&&(this.g&&W.charAt(0)!="/"&&m.push("/"),m.push(zr(W,W.charAt(0)=="/"?Ls:Va,!0))),(W=this.i.toString())&&m.push("?",W),(W=this.m)&&m.push("#",zr(W,la)),m.join("")},Ao.prototype.resolve=function(m){const I=vr(this);let W=!!m.j;W?fs(I,m.j):W=!!m.o,W?I.o=m.o:W=!!m.g,W?I.g=m.g:W=m.u!=null;var te=m.h;if(W)ho(I,m.u);else if(W=!!m.h){if(te.charAt(0)!="/")if(this.g&&!this.h)te="/"+te;else{var ke=I.h.lastIndexOf("/");ke!=-1&&(te=I.h.slice(0,ke+1)+te)}if(ke=te,ke==".."||ke==".")te="";else if(ke.indexOf("./")!=-1||ke.indexOf("/.")!=-1){te=ke.lastIndexOf("/",0)==0,ke=ke.split("/");const Pe=[];for(let Ze=0;Ze<ke.length;){const Ot=ke[Ze++];Ot=="."?te&&Ze==ke.length&&Pe.push(""):Ot==".."?((Pe.length>1||Pe.length==1&&Pe[0]!="")&&Pe.pop(),te&&Ze==ke.length&&Pe.push("")):(Pe.push(Ot),te=!0)}te=Pe.join("/")}else te=ke}return W?I.h=te:W=m.i.toString()!=="",W?hi(I,Fs(m.i)):W=!!m.m,W&&(I.m=m.m),I};function vr(m){return new Ao(m)}function fs(m,I,W){m.j=W?fo(I,!0):I,m.j&&(m.j=m.j.replace(/:$/,""))}function ho(m,I){if(I){if(I=Number(I),isNaN(I)||I<0)throw Error("Bad port number "+I);m.u=I}else m.u=null}function hi(m,I,W){I instanceof nr?(m.i=I,po(m.i,m.l)):(W||(I=zr(I,Co)),m.i=new nr(I,m.l))}function sr(m,I,W){m.i.set(I,W)}function Ln(m){return sr(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function fo(m,I){return m?I?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function zr(m,I,W){return typeof m=="string"?(m=encodeURI(m).replace(I,Ns),W&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Ns(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Oa=/[#\/\?@]/g,Va=/[#\?:]/g,Ls=/[#\?]/g,Co=/[#\?@]/g,la=/#/g;function nr(m,I){this.h=this.g=null,this.i=m||null,this.j=!!I}function ri(m){m.g||(m.g=new Map,m.h=0,m.i&&Hn(m.i,function(I,W){m.add(decodeURIComponent(I.replace(/\+/g," ")),W)}))}r=nr.prototype,r.add=function(m,I){ri(this),this.i=null,m=fi(this,m);let W=this.g.get(m);return W||this.g.set(m,W=[]),W.push(I),this.h+=1,this};function Bs(m,I){ri(m),I=fi(m,I),m.g.has(I)&&(m.i=null,m.h-=m.g.get(I).length,m.g.delete(I))}function ca(m,I){return ri(m),I=fi(m,I),m.g.has(I)}r.forEach=function(m,I){ri(this),this.g.forEach(function(W,te){W.forEach(function(ke){m.call(I,ke,te,this)},this)},this)};function Ma(m,I){ri(m);let W=[];if(typeof I=="string")ca(m,I)&&(W=W.concat(m.g.get(fi(m,I))));else for(m=Array.from(m.g.values()),I=0;I<m.length;I++)W=W.concat(m[I]);return W}r.set=function(m,I){return ri(this),this.i=null,m=fi(this,m),ca(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[I]),this.h+=1,this},r.get=function(m,I){return m?(m=Ma(this,m),m.length>0?String(m[0]):I):I};function Da(m,I,W){Bs(m,I),W.length>0&&(m.i=null,m.g.set(fi(m,I),b(W)),m.h+=W.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],I=Array.from(this.g.keys());for(let te=0;te<I.length;te++){var W=I[te];const ke=Fr(W);W=Ma(this,W);for(let Pe=0;Pe<W.length;Pe++){let Ze=ke;W[Pe]!==""&&(Ze+="="+Fr(W[Pe])),m.push(Ze)}}return this.i=m.join("&")};function Fs(m){const I=new nr;return I.i=m.i,m.g&&(I.g=new Map(m.g),I.h=m.h),I}function fi(m,I){return I=String(I),m.j&&(I=I.toLowerCase()),I}function po(m,I){I&&!m.j&&(ri(m),m.i=null,m.g.forEach(function(W,te){const ke=te.toLowerCase();te!=ke&&(Bs(this,te),Da(this,ke,W))},m)),m.j=I}function ko(m,I){const W=new Di;if(c.Image){const te=new Image;te.onload=g(gn,W,"TestLoadImage: loaded",!0,I,te),te.onerror=g(gn,W,"TestLoadImage: error",!1,I,te),te.onabort=g(gn,W,"TestLoadImage: abort",!1,I,te),te.ontimeout=g(gn,W,"TestLoadImage: timeout",!1,I,te),c.setTimeout(function(){te.ontimeout&&te.ontimeout()},1e4),te.src=m}else I(!1)}function pi(m,I){const W=new Di,te=new AbortController,ke=setTimeout(()=>{te.abort(),gn(W,"TestPingServer: timeout",!1,I)},1e4);fetch(m,{signal:te.signal}).then(Pe=>{clearTimeout(ke),Pe.ok?gn(W,"TestPingServer: ok",!0,I):gn(W,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(ke),gn(W,"TestPingServer: error",!1,I)})}function gn(m,I,W,te,ke){try{ke&&(ke.onload=null,ke.onerror=null,ke.onabort=null,ke.ontimeout=null),te(W)}catch{}}function It(){this.g=new kt}function Go(m){this.i=m.Sb||null,this.h=m.ab||!1}w(Go,ft),Go.prototype.g=function(){return new Ri(this.i,this.h)};function Ri(m,I){Ue.call(this),this.H=m,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Ri,Ue),r=Ri.prototype,r.open=function(m,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=I,this.readyState=1,Bn(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const I={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(I.body=m),(this.H||c).fetch(new Request(this.D,I)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ps(this)),this.readyState=0},r.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Bn(this)),this.g&&(this.readyState=3,Bn(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vl(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function vl(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}r.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var I=m.value?m.value:new Uint8Array(0);(I=this.B.decode(I,{stream:!m.done}))&&(this.response=this.responseText+=I)}m.done?ps(this):Bn(this),this.readyState==3&&vl(this)}},r.Oa=function(m){this.g&&(this.response=this.responseText=m,ps(this))},r.Na=function(m){this.g&&(this.response=m,ps(this))},r.ga=function(){this.g&&ps(this)};function ps(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Bn(m)}r.setRequestHeader=function(m,I){this.A.append(m,I)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],I=this.h.entries();for(var W=I.next();!W.done;)W=W.value,m.push(W[0]+": "+W[1]),W=I.next();return m.join(`\r
`)};function Bn(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ri.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function jo(m){let I="";return ye(m,function(W,te){I+=te,I+=":",I+=W,I+=`\r
`}),I}function ua(m,I,W){e:{for(te in W){var te=!1;break e}te=!0}te||(W=jo(W),typeof m=="string"?W!=null&&Fr(W):sr(m,I,W))}function Er(m){Ue.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Er,Ue);var zs=/^https?$/i,Wa=["POST","PUT"];r=Er.prototype,r.Fa=function(m){this.H=m},r.ea=function(m,I,W,te){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);I=I?I.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ji.g(),this.g.onreadystatechange=C(d(this.Ca,this));try{this.B=!0,this.g.open(I,String(m),!0),this.B=!1}catch(Pe){Ui(this,Pe);return}if(m=W||"",W=new Map(this.headers),te)if(Object.getPrototypeOf(te)===Object.prototype)for(var ke in te)W.set(ke,te[ke]);else if(typeof te.keys=="function"&&typeof te.get=="function")for(const Pe of te.keys())W.set(Pe,te.get(Pe));else throw Error("Unknown input type for opt_headers: "+String(te));te=Array.from(W.keys()).find(Pe=>Pe.toLowerCase()=="content-type"),ke=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Wa,I,void 0)>=0)||te||ke||W.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Pe,Ze]of W)this.g.setRequestHeader(Pe,Ze);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Pe){Ui(this,Pe)}};function Ui(m,I){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=I,m.o=5,mo(m),Ko(m)}function mo(m){m.A||(m.A=!0,nt(m,"complete"),nt(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,nt(this,"complete"),nt(this,"abort"),Ko(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ko(this,!0)),Er.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?qi(this):this.Xa())},r.Xa=function(){qi(this)};function qi(m){if(m.h&&typeof a<"u"){if(m.v&&Hi(m)==4)setTimeout(m.Ca.bind(m),0);else if(nt(m,"readystatechange"),Hi(m)==4){m.h=!1;try{const Pe=m.ca();e:switch(Pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var W;if(!(W=I)){var te;if(te=Pe===0){let Ze=String(m.D).match(za)[1]||null;!Ze&&c.self&&c.self.location&&(Ze=c.self.location.protocol.slice(0,-1)),te=!zs.test(Ze?Ze.toLowerCase():"")}W=te}if(W)nt(m,"complete"),nt(m,"success");else{m.o=6;try{var ke=Hi(m)>2?m.g.statusText:""}catch{ke=""}m.l=ke+" ["+m.ca()+"]",mo(m)}}finally{Ko(m)}}}}function Ko(m,I){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const W=m.g;m.g=null,I||nt(m,"ready");try{W.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Hi(m){return m.g?m.g.readyState:0}r.ca=function(){try{return Hi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(m){if(this.g){var I=this.g.responseText;return m&&I.indexOf(m)==0&&(I=I.substring(m.length)),St(I)}};function da(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Jo(m){const I={};m=(m.g&&Hi(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let te=0;te<m.length;te++){if(L(m[te]))continue;var W=sn(m[te]);const ke=W[0];if(W=W[1],typeof W!="string")continue;W=W.trim();const Pe=I[ke]||[];I[ke]=Pe,Pe.push(W)}xe(I,function(te){return te.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function mi(m,I,W){return W&&W.internalChannelParams&&W.internalChannelParams[m]||I}function ms(m){this.za=0,this.i=[],this.j=new Di,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=mi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=mi("baseRetryDelayMs",5e3,m),this.Za=mi("retryDelaySeedMs",1e4,m),this.Ta=mi("forwardChannelMaxRetries",2,m),this.va=mi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Ps(m&&m.concurrentRequestLimit),this.Ba=new It,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ms.prototype,r.ka=8,r.I=1,r.connect=function(m,I,W,te){Mt(0),this.W=m,this.H=I||{},W&&te!==void 0&&(this.H.OSID=W,this.H.OAID=te),this.F=this.X,this.J=He(this,null,this.W),Io(this)};function Yo(m){if(Eo(m),m.I==3){var I=m.V++,W=vr(m.J);if(sr(W,"SID",m.M),sr(W,"RID",I),sr(W,"TYPE","terminate"),Gn(m,W),I=new qn(m,m.j,I),I.M=2,I.A=Ln(vr(W)),W=!1,c.navigator&&c.navigator.sendBeacon)try{W=c.navigator.sendBeacon(I.A.toString(),"")}catch{}!W&&c.Image&&(new Image().src=I.A,W=!0),W||(I.g=st(I.j,null),I.g.ea(I.A)),I.F=Date.now(),uo(I)}Me(m)}function ni(m){m.g&&(gs(m),m.g.cancel(),m.g=null)}function Eo(m){ni(m),m.v&&(c.clearTimeout(m.v),m.v=null),G(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function Io(m){if(!ui(m.h)&&!m.m){m.m=!0;var I=m.Ea;re||A(),ce||(re(),ce=!0),N.add(I,m),m.D=0}}function $a(m,I){return Ho(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=I.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=or(d(m.Ea,m,I),ge(m,m.D)),m.D++,!0)}r.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const ke=new qn(this,this.j,m);let Pe=this.o;if(this.U&&(Pe?(Pe=ee(Pe),q(Pe,this.U)):Pe=this.U),this.u!==null||this.R||(ke.J=Pe,Pe=null),this.S)e:{for(var I=0,W=0;W<this.i.length;W++){t:{var te=this.i[W];if("__data__"in te.map&&(te=te.map.__data__,typeof te=="string")){te=te.length;break t}te=void 0}if(te===void 0)break;if(I+=te,I>4096){I=W;break e}if(I===4096||W===this.i.length-1){I=W+1;break e}}I=1e3}else I=1e3;I=ha(this,ke,I),W=vr(this.J),sr(W,"RID",m),sr(W,"CVER",22),this.G&&sr(W,"X-HTTP-Session-Id",this.G),Gn(this,W),Pe&&(this.R?I="headers="+Fr(jo(Pe))+"&"+I:this.u&&ua(W,this.u,Pe)),ds(this.h,ke),this.Ra&&sr(W,"TYPE","init"),this.S?(sr(W,"$req",I),sr(W,"SID","null"),ke.U=!0,mn(ke,W,null)):mn(ke,W,I),this.I=2}}else this.I==3&&(m?Pi(this,m):this.i.length==0||ui(this.h)||Pi(this))};function Pi(m,I){var W;I?W=I.l:W=m.V++;const te=vr(m.J);sr(te,"SID",m.M),sr(te,"RID",W),sr(te,"AID",m.K),Gn(m,te),m.u&&m.o&&ua(te,m.u,m.o),W=new qn(m,m.j,W,m.D+1),m.u===null&&(W.J=m.o),I&&(m.i=I.G.concat(m.i)),I=ha(m,W,1e3),W.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),ds(m.h,W),mn(W,te,I)}function Gn(m,I){m.H&&ye(m.H,function(W,te){sr(I,te,W)}),m.l&&ye({},function(W,te){sr(I,te,W)})}function ha(m,I,W){W=Math.min(m.i.length,W);const te=m.l?d(m.l.Ka,m.l,m):null;e:{var ke=m.i;let Ot=-1;for(;;){const Vr=["count="+W];Ot==-1?W>0?(Ot=ke[0].g,Vr.push("ofs="+Ot)):Ot=0:Vr.push("ofs="+Ot);let lr=!0;for(let Gr=0;Gr<W;Gr++){var Pe=ke[Gr].g;const zn=ke[Gr].map;if(Pe-=Ot,Pe<0)Ot=Math.max(0,ke[Gr].g-100),lr=!1;else try{Pe="req"+Pe+"_"||"";try{var Ze=zn instanceof Map?zn:Object.entries(zn);for(const[Ni,Jr]of Ze){let yi=Jr;u(Jr)&&(yi=Ft(Jr)),Vr.push(Pe+Ni+"="+encodeURIComponent(yi))}}catch(Ni){throw Vr.push(Pe+"type="+encodeURIComponent("_badmap")),Ni}}catch{te&&te(zn)}}if(lr){Ze=Vr.join("&");break e}}Ze=void 0}return m=m.i.splice(0,W),I.G=m,Ze}function Fn(m){if(!m.g&&!m.v){m.Y=1;var I=m.Da;re||A(),ce||(re(),ce=!0),N.add(I,m),m.A=0}}function gi(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=or(d(m.Da,m),ge(m,m.A)),m.A++,!0)}r.Da=function(){if(this.v=null,S(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=or(d(this.Wa,this),m)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Mt(10),ni(this),S(this))};function gs(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function S(m){m.g=new qn(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var I=vr(m.na);sr(I,"RID","rpc"),sr(I,"SID",m.M),sr(I,"AID",m.K),sr(I,"CI",m.F?"0":"1"),!m.F&&m.ia&&sr(I,"TO",m.ia),sr(I,"TYPE","xmlhttp"),Gn(m,I),m.u&&m.o&&ua(I,m.u,m.o),m.O&&(m.g.H=m.O);var W=m.g;m=m.ba,W.M=1,W.A=Ln(vr(I)),W.u=null,W.R=!0,Ei(W,m)}r.Va=function(){this.C!=null&&(this.C=null,ni(this),gi(this),Mt(19))};function G(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function ue(m,I){var W=null;if(m.g==I){G(m),gs(m),m.g=null;var te=2}else if(aa(m.h,I))W=I.G,hs(m.h,I),te=1;else return;if(m.I!=0){if(I.o)if(te==1){W=I.u?I.u.length:0,I=Date.now()-I.F;var ke=m.D;te=Xt(),nt(te,new zt(te,W)),Io(m)}else Fn(m);else if(ke=I.m,ke==3||ke==0&&I.X>0||!(te==1&&$a(m,I)||te==2&&gi(m)))switch(W&&W.length>0&&(I=m.h,I.i=I.i.concat(W)),ke){case 1:Te(m,5);break;case 4:Te(m,10);break;case 3:Te(m,6);break;default:Te(m,2)}}}function ge(m,I){let W=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(W*=2),W*I}function Te(m,I){if(m.j.info("Error code "+I),I==2){var W=d(m.bb,m),te=m.Ua;const ke=!te;te=new Ao(te||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||fs(te,"https"),Ln(te),ke?ko(te.toString(),W):pi(te.toString(),W)}else Mt(2);m.I=0,m.l&&m.l.pa(I),Me(m),Eo(m)}r.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function Me(m){if(m.I=0,m.ja=[],m.l){const I=di(m.h);(I.length!=0||m.i.length!=0)&&(V(m.ja,I),V(m.ja,m.i),m.h.i.length=0,b(m.i),m.i.length=0),m.l.oa()}}function He(m,I,W){var te=W instanceof Ao?vr(W):new Ao(W);if(te.g!="")I&&(te.g=I+"."+te.g),ho(te,te.u);else{var ke=c.location;te=ke.protocol,I=I?I+"."+ke.hostname:ke.hostname,ke=+ke.port;const Pe=new Ao(null);te&&fs(Pe,te),I&&(Pe.g=I),ke&&ho(Pe,ke),W&&(Pe.h=W),te=Pe}return W=m.G,I=m.wa,W&&I&&sr(te,W,I),sr(te,"VER",m.ka),Gn(m,te),te}function st(m,I,W){if(I&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return I=m.Aa&&!m.ma?new Er(new Go({ab:W})):new Er(m.ma),I.Fa(m.L),I}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function pt(){}r=pt.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Rt(){}Rt.prototype.g=function(m,I){return new yt(m,I)};function yt(m,I){Ue.call(this),this.g=new ms(I),this.l=m,this.h=I&&I.messageUrlParams||null,m=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(m?m["X-WebChannel-Content-Type"]=I.messageContentType:m={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.sa&&(m?m["X-WebChannel-Client-Profile"]=I.sa:m={"X-WebChannel-Client-Profile":I.sa}),this.g.U=m,(m=I&&I.Qb)&&!L(m)&&(this.g.u=m),this.A=I&&I.supportsCrossDomainXhr||!1,this.v=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!L(I)&&(this.g.G=I,m=this.h,m!==null&&I in m&&(m=this.h,I in m&&delete m[I])),this.j=new Or(this)}w(yt,Ue),yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yt.prototype.close=function(){Yo(this.g)},yt.prototype.o=function(m){var I=this.g;if(typeof m=="string"){var W={};W.__data__=m,m=W}else this.v&&(W={},W.__data__=Ft(m),m=W);I.i.push(new xl(I.Ya++,m)),I.I==3&&Io(I)},yt.prototype.N=function(){this.g.l=null,delete this.j,Yo(this.g),delete this.g,yt.Z.N.call(this)};function fr(m){dt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var I=m.__sm__;if(I){e:{for(const W in I){m=W;break e}m=void 0}(this.i=m)&&(m=this.i,I=I!==null&&m in I?I[m]:void 0),this.data=I}else this.data=m}w(fr,dt);function Hr(){Wt.call(this),this.status=1}w(Hr,Wt);function Or(m){this.g=m}w(Or,pt),Or.prototype.ra=function(){nt(this.g,"a")},Or.prototype.qa=function(m){nt(this.g,new fr(m))},Or.prototype.pa=function(m){nt(this.g,new Hr)},Or.prototype.oa=function(){nt(this.g,"b")},Rt.prototype.createWebChannel=Rt.prototype.g,yt.prototype.send=yt.prototype.o,yt.prototype.open=yt.prototype.m,yt.prototype.close=yt.prototype.close,gb=function(){return new Rt},mb=function(){return Xt()},pb=ir,P0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ci.NO_ERROR=0,ci.TIMEOUT=8,ci.HTTP_ERROR=6,Of=ci,Nn.COMPLETE="complete",fb=Nn,Cr.EventType=rr,rr.OPEN="a",rr.CLOSE="b",rr.ERROR="c",rr.MESSAGE="d",Ue.prototype.listen=Ue.prototype.J,Wd=Cr,Er.prototype.listenOnce=Er.prototype.K,Er.prototype.getLastError=Er.prototype.Ha,Er.prototype.getLastErrorCode=Er.prototype.ya,Er.prototype.getStatus=Er.prototype.ca,Er.prototype.getResponseJson=Er.prototype.La,Er.prototype.getResponseText=Er.prototype.la,Er.prototype.send=Er.prototype.ea,Er.prototype.setWithCredentials=Er.prototype.Fa,hb=Er}).apply(typeof Sf<"u"?Sf:typeof self<"u"?self:typeof window<"u"?window:{});const ny="@firebase/firestore",iy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}so.UNAUTHENTICATED=new so(null),so.GOOGLE_CREDENTIALS=new so("google-credentials-uid"),so.FIRST_PARTY=new so("first-party-uid"),so.MOCK_USER=new so("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new sg("@firebase/firestore");function Pu(){return Gc.logLevel}function ct(r,...e){if(Gc.logLevel<=pr.DEBUG){const t=e.map(yg);Gc.debug(`Firestore (${ad}): ${r}`,...t)}}function pl(r,...e){if(Gc.logLevel<=pr.ERROR){const t=e.map(yg);Gc.error(`Firestore (${ad}): ${r}`,...t)}}function Yu(r,...e){if(Gc.logLevel<=pr.WARN){const t=e.map(yg);Gc.warn(`Firestore (${ad}): ${r}`,...t)}}function yg(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,yb(r,n,t)}function yb(r,e,t){let n=`FIRESTORE (${ad}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw pl(n),new Error(n)}function Lr(r,e,t,n){let o="Unexpected state";typeof t=="string"?o=t:n=t,r||yb(e,o,n)}function tr(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class it extends gl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Dk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(so.UNAUTHENTICATED)))}shutdown(){}}class Wk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $k{constructor(e){this.t=e,this.currentUser=so.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Lr(this.o===void 0,42304);let n=this.i;const o=f=>this.i!==n?(n=this.i,t(f)):Promise.resolve();let a=new rc;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new rc,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await o(this.currentUser)}))},u=f=>{ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new rc)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Lr(typeof n.accessToken=="string",31837,{l:n}),new xb(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Lr(e===null||typeof e=="string",2055,{h:e}),new so(e)}}class Uk{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=so.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qk{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Uk(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(so.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class oy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,js(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Lr(this.o===void 0,3512);const n=a=>{a.error!=null&&ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,ct("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const o=a=>{ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new oy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Lr(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new oy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const o=Gk(40);for(let a=0;a<o.length;++a)n.length<20&&o[a]<t&&(n+=e.charAt(o[a]%62))}return n}}function mr(r,e){return r<e?-1:r>e?1:0}function N0(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const o=r.charAt(n),a=e.charAt(n);if(o!==a)return o0(o)===o0(a)?mr(o,a):o0(o)?1:-1}return mr(r.length,e.length)}const Kk=55296,Jk=57343;function o0(r){const e=r.charCodeAt(0);return e>=Kk&&e<=Jk}function Qu(r,e,t){return r.length===e.length&&r.every(((n,o)=>t(n,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="__name__";class Ca{constructor(e,t,n){t===void 0?t=0:t>e.length&&qt(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&qt(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Ca.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ca?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let o=0;o<n;o++){const a=Ca.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return mr(e.length,t.length)}static compareSegments(e,t){const n=Ca.isNumericId(e),o=Ca.isNumericId(t);return n&&!o?-1:!n&&o?1:n&&o?Ca.extractNumericId(e).compare(Ca.extractNumericId(t)):N0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return tc.fromString(e.substring(4,e.length-2))}}class tn extends Ca{construct(e,t,n){return new tn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new it($e.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((o=>o.length>0)))}return new tn(t)}static emptyPath(){return new tn([])}}const Yk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vi extends Ca{construct(e,t,n){return new Vi(e,t,n)}static isValidIdentifier(e){return Yk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sy}static keyField(){return new Vi([sy])}static fromServerFormat(e){const t=[];let n="",o=0;const a=()=>{if(n.length===0)throw new it($e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let c=!1;for(;o<e.length;){const u=e[o];if(u==="\\"){if(o+1===e.length)throw new it($e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new it($e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=f,o+=2}else u==="`"?(c=!c,o++):u!=="."||c?(n+=u,o++):(a(),o++)}if(a(),c)throw new it($e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vi(t)}static emptyPath(){return new Vi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.path=e}static fromPath(e){return new Et(tn.fromString(e))}static fromName(e){return new Et(tn.fromString(e).popFirst(5))}static empty(){return new Et(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Et(new tn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(r,e,t){if(!t)throw new it($e.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Qk(r,e,t,n){if(e===!0&&n===!0)throw new it($e.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ay(r){if(!Et.isDocumentKey(r))throw new it($e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ly(r){if(Et.isDocumentKey(r))throw new it($e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function bb(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Sp(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":qt(12329,{type:typeof r})}function Kc(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new it($e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sp(r);throw new it($e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(r,e){const t={typeString:r};return e&&(t.value=e),t}function wh(r,e){if(!bb(r))throw new it($e.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const o=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const c=r[n];if(o&&typeof c!==o){t=`JSON field '${n}' must be a ${o}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${n}' field to equal '${a.value}'`;break}}if(t)throw new it($e.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=-62135596800,uy=1e6;class nn{static now(){return nn.fromMillis(Date.now())}static fromDate(e){return nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*uy);return new nn(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new it($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new it($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<cy)throw new it($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new it($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uy}_compareTo(e){return this.seconds===e.seconds?mr(this.nanoseconds,e.nanoseconds):mr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wh(e,nn._jsonSchema))return new nn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nn._jsonSchemaVersion="firestore/timestamp/1.0",nn._jsonSchema={type:ei("string",nn._jsonSchemaVersion),seconds:ei("number"),nanoseconds:ei("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{static fromTimestamp(e){return new Qt(e)}static min(){return new Qt(new nn(0,0))}static max(){return new Qt(new nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=-1;function Xk(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,o=Qt.fromTimestamp(n===1e9?new nn(t+1,0):new nn(t,n));return new oc(o,Et.empty(),e)}function Zk(r){return new oc(r.readTime,r.key,oh)}class oc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new oc(Qt.min(),Et.empty(),oh)}static max(){return new oc(Qt.max(),Et.empty(),oh)}}function ej(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Et.comparator(r.documentKey,e.documentKey),t!==0?t:mr(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ld(r){if(r.code!==$e.FAILED_PRECONDITION||r.message!==tj)throw r;ct("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ge(((n,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ge?t:Ge.resolve(t)}catch(t){return Ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ge.reject(t)}static resolve(e){return new Ge(((t,n)=>{t(e)}))}static reject(e){return new Ge(((t,n)=>{n(e)}))}static waitFor(e){return new Ge(((t,n)=>{let o=0,a=0,c=!1;e.forEach((u=>{++o,u.next((()=>{++a,c&&a===o&&t()}),(f=>n(f)))})),c=!0,a===o&&t()}))}static or(e){let t=Ge.resolve(!1);for(const n of e)t=t.next((o=>o?Ge.resolve(o):n()));return t}static forEach(e,t){const n=[];return e.forEach(((o,a)=>{n.push(t.call(this,o,a))})),this.waitFor(n)}static mapArray(e,t){return new Ge(((n,o)=>{const a=e.length,c=new Array(a);let u=0;for(let f=0;f<a;f++){const d=f;t(e[d]).next((g=>{c[d]=g,++u,u===a&&n(c)}),(g=>o(g)))}}))}static doWhile(e,t){return new Ge(((n,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):n()};a()}))}}function nj(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function cd(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_p.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=-1;function Tp(r){return r==null}function np(r){return r===0&&1/r==-1/0}function ij(r){return typeof r=="number"&&Number.isInteger(r)&&!np(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="";function oj(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=dy(e)),e=sj(r.get(t),e);return dy(e)}function sj(r,e){let t=e;const n=r.length;for(let o=0;o<n;o++){const a=r.charAt(o);switch(a){case"\0":t+="";break;case wb:t+="";break;default:t+=a}}return t}function dy(r){return r+wb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function fc(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Sb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t){this.comparator=e,this.root=t||Oi.EMPTY}insert(e,t){return new _n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Oi.BLACK,null,null))}remove(e){return new _n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return t+n.left.size;o<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _f(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _f(this.root,e,this.comparator,!1)}getReverseIterator(){return new _f(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _f(this.root,e,this.comparator,!0)}}class _f{constructor(e,t,n,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Oi{constructor(e,t,n,o,a){this.key=e,this.value=t,this.color=n??Oi.RED,this.left=o??Oi.EMPTY,this.right=a??Oi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,o,a){return new Oi(e??this.key,t??this.value,n??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let o=this;const a=n(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,n),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,n)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Oi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Oi.EMPTY;n=o.right.min(),o=o.copy(n.key,n.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw qt(27949);return e+(this.isRed()?0:1)}}Oi.EMPTY=null,Oi.RED=!0,Oi.BLACK=!1;Oi.EMPTY=new class{constructor(){this.size=0}get key(){throw qt(57766)}get value(){throw qt(16141)}get color(){throw qt(16727)}get left(){throw qt(29726)}get right(){throw qt(36894)}copy(e,t,n,o,a){return this}insert(e,t,n){return new Oi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this.comparator=e,this.data=new _n(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const o=n.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fy(this.data.getIterator())}getIteratorFrom(e){return new fy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof li)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=n.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new li(this.comparator);return t.data=e,t}}class fy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.fields=e,e.sort(Vi.comparator)}static empty(){return new ls([])}unionWith(e){let t=new li(Vi.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ls(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qu(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new _b("Invalid base64 string: "+a):a}})(e);return new Mi(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a})(e);return new Mi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mi.EMPTY_BYTE_STRING=new Mi("");const aj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sc(r){if(Lr(!!r,39018),typeof r=="string"){let e=0;const t=aj.exec(r);if(Lr(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Dn(r.seconds),nanos:Dn(r.nanos)}}function Dn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ac(r){return typeof r=="string"?Mi.fromBase64String(r):Mi.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="server_timestamp",Ab="__type__",Cb="__previous_value__",kb="__local_write_time__";function bg(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Ab])==null?void 0:n.stringValue)===Tb}function Ap(r){const e=r.mapValue.fields[Cb];return bg(e)?Ap(e):e}function sh(r){const e=sc(r.mapValue.fields[kb].timestampValue);return new nn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,t,n,o,a,c,u,f,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=g}}const ip="(default)";class ah{constructor(e,t){this.projectId=e,this.database=t||ip}static empty(){return new ah("","")}get isDefaultDatabase(){return this.database===ip}isEqual(e){return e instanceof ah&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="__type__",cj="__max__",Tf={mapValue:{}},Eb="__vector__",op="value";function lc(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?bg(r)?4:dj(r)?9007199254740991:uj(r)?10:11:qt(28295,{value:r})}function Ba(r,e){if(r===e)return!0;const t=lc(r);if(t!==lc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return sh(r).isEqual(sh(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=sc(o.timestampValue),u=sc(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,a){return ac(o.bytesValue).isEqual(ac(a.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,a){return Dn(o.geoPointValue.latitude)===Dn(a.geoPointValue.latitude)&&Dn(o.geoPointValue.longitude)===Dn(a.geoPointValue.longitude)})(r,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return Dn(o.integerValue)===Dn(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=Dn(o.doubleValue),u=Dn(a.doubleValue);return c===u?np(c)===np(u):isNaN(c)&&isNaN(u)}return!1})(r,e);case 9:return Qu(r.arrayValue.values||[],e.arrayValue.values||[],Ba);case 10:case 11:return(function(o,a){const c=o.mapValue.fields||{},u=a.mapValue.fields||{};if(hy(c)!==hy(u))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(u[f]===void 0||!Ba(c[f],u[f])))return!1;return!0})(r,e);default:return qt(52216,{left:r})}}function lh(r,e){return(r.values||[]).find((t=>Ba(t,e)))!==void 0}function Xu(r,e){if(r===e)return 0;const t=lc(r),n=lc(e);if(t!==n)return mr(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return mr(r.booleanValue,e.booleanValue);case 2:return(function(a,c){const u=Dn(a.integerValue||a.doubleValue),f=Dn(c.integerValue||c.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1})(r,e);case 3:return py(r.timestampValue,e.timestampValue);case 4:return py(sh(r),sh(e));case 5:return N0(r.stringValue,e.stringValue);case 6:return(function(a,c){const u=ac(a),f=ac(c);return u.compareTo(f)})(r.bytesValue,e.bytesValue);case 7:return(function(a,c){const u=a.split("/"),f=c.split("/");for(let d=0;d<u.length&&d<f.length;d++){const g=mr(u[d],f[d]);if(g!==0)return g}return mr(u.length,f.length)})(r.referenceValue,e.referenceValue);case 8:return(function(a,c){const u=mr(Dn(a.latitude),Dn(c.latitude));return u!==0?u:mr(Dn(a.longitude),Dn(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return my(r.arrayValue,e.arrayValue);case 10:return(function(a,c){var C,b,V,R;const u=a.fields||{},f=c.fields||{},d=(C=u[op])==null?void 0:C.arrayValue,g=(b=f[op])==null?void 0:b.arrayValue,w=mr(((V=d==null?void 0:d.values)==null?void 0:V.length)||0,((R=g==null?void 0:g.values)==null?void 0:R.length)||0);return w!==0?w:my(d,g)})(r.mapValue,e.mapValue);case 11:return(function(a,c){if(a===Tf.mapValue&&c===Tf.mapValue)return 0;if(a===Tf.mapValue)return 1;if(c===Tf.mapValue)return-1;const u=a.fields||{},f=Object.keys(u),d=c.fields||{},g=Object.keys(d);f.sort(),g.sort();for(let w=0;w<f.length&&w<g.length;++w){const C=N0(f[w],g[w]);if(C!==0)return C;const b=Xu(u[f[w]],d[g[w]]);if(b!==0)return b}return mr(f.length,g.length)})(r.mapValue,e.mapValue);default:throw qt(23264,{he:t})}}function py(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return mr(r,e);const t=sc(r),n=sc(e),o=mr(t.seconds,n.seconds);return o!==0?o:mr(t.nanos,n.nanos)}function my(r,e){const t=r.values||[],n=e.values||[];for(let o=0;o<t.length&&o<n.length;++o){const a=Xu(t[o],n[o]);if(a)return a}return mr(t.length,n.length)}function Zu(r){return L0(r)}function L0(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=sc(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ac(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Et.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",o=!0;for(const a of t.values||[])o?o=!1:n+=",",n+=L0(a);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of n)a?a=!1:o+=",",o+=`${c}:${L0(t.fields[c])}`;return o+"}"})(r.mapValue):qt(61005,{value:r})}function Vf(r){switch(lc(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ap(r);return e?16+Vf(e):16;case 5:return 2*r.stringValue.length;case 6:return ac(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((o,a)=>o+Vf(a)),0)})(r.arrayValue);case 10:case 11:return(function(n){let o=0;return fc(n.fields,((a,c)=>{o+=a.length+Vf(c)})),o})(r.mapValue);default:throw qt(13486,{value:r})}}function gy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function B0(r){return!!r&&"integerValue"in r}function wg(r){return!!r&&"arrayValue"in r}function yy(r){return!!r&&"nullValue"in r}function xy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Mf(r){return!!r&&"mapValue"in r}function uj(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[jb])==null?void 0:n.stringValue)===Eb}function Jd(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return fc(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Jd(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Jd(r.arrayValue.values[t]);return e}return{...r}}function dj(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===cj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.value=e}static empty(){return new Do({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Mf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jd(t)}setAll(e){let t=Vi.emptyPath(),n={},o=[];e.forEach(((c,u)=>{if(!t.isImmediateParentOf(u)){const f=this.getFieldsMap(t);this.applyChanges(f,n,o),n={},o=[],t=u.popLast()}c?n[u.lastSegment()]=Jd(c):o.push(u.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,n,o)}delete(e){const t=this.field(e.popLast());Mf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ba(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let o=t.mapValue.fields[e.get(n)];Mf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,n){fc(t,((o,a)=>e[o]=a));for(const o of n)delete e[o]}clone(){return new Do(Jd(this.value))}}function Ib(r){const e=[];return fc(r.fields,((t,n)=>{const o=new Vi([t]);if(Mf(n)){const a=Ib(n.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)})),new ls(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,t,n,o,a,c,u){this.key=e,this.documentType=t,this.version=n,this.readTime=o,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new ao(e,0,Qt.min(),Qt.min(),Qt.min(),Do.empty(),0)}static newFoundDocument(e,t,n,o){return new ao(e,1,t,Qt.min(),n,o,0)}static newNoDocument(e,t){return new ao(e,2,t,Qt.min(),Qt.min(),Do.empty(),0)}static newUnknownDocument(e,t){return new ao(e,3,t,Qt.min(),Qt.min(),Do.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Qt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Do.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Do.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ao&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ao(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,t){this.position=e,this.inclusive=t}}function vy(r,e,t){let n=0;for(let o=0;o<r.position.length;o++){const a=e[o],c=r.position[o];if(a.field.isKeyField()?n=Et.comparator(Et.fromName(c.referenceValue),t.key):n=Xu(c,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function by(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ba(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,t="asc"){this.field=e,this.dir=t}}function hj(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{}class Zn extends Rb{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new pj(e,t,n):t==="array-contains"?new yj(e,n):t==="in"?new xj(e,n):t==="not-in"?new vj(e,n):t==="array-contains-any"?new bj(e,n):new Zn(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new mj(e,n):new gj(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xu(t,this.value)):t!==null&&lc(this.value)===lc(t)&&this.matchesComparison(Xu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return qt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ia extends Rb{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ia(e,t)}matches(e){return Pb(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Pb(r){return r.op==="and"}function Nb(r){return fj(r)&&Pb(r)}function fj(r){for(const e of r.filters)if(e instanceof ia)return!1;return!0}function F0(r){if(r instanceof Zn)return r.field.canonicalString()+r.op.toString()+Zu(r.value);if(Nb(r))return r.filters.map((e=>F0(e))).join(",");{const e=r.filters.map((t=>F0(t))).join(",");return`${r.op}(${e})`}}function Lb(r,e){return r instanceof Zn?(function(n,o){return o instanceof Zn&&n.op===o.op&&n.field.isEqual(o.field)&&Ba(n.value,o.value)})(r,e):r instanceof ia?(function(n,o){return o instanceof ia&&n.op===o.op&&n.filters.length===o.filters.length?n.filters.reduce(((a,c,u)=>a&&Lb(c,o.filters[u])),!0):!1})(r,e):void qt(19439)}function Bb(r){return r instanceof Zn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Zu(t.value)}`})(r):r instanceof ia?(function(t){return t.op.toString()+" {"+t.getFilters().map(Bb).join(" ,")+"}"})(r):"Filter"}class pj extends Zn{constructor(e,t,n){super(e,t,n),this.key=Et.fromName(n.referenceValue)}matches(e){const t=Et.comparator(e.key,this.key);return this.matchesComparison(t)}}class mj extends Zn{constructor(e,t){super(e,"in",t),this.keys=Fb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class gj extends Zn{constructor(e,t){super(e,"not-in",t),this.keys=Fb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Fb(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((n=>Et.fromName(n.referenceValue)))}class yj extends Zn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wg(t)&&lh(t.arrayValue,this.value)}}class xj extends Zn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&lh(this.value.arrayValue,t)}}class vj extends Zn{constructor(e,t){super(e,"not-in",t)}matches(e){if(lh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!lh(this.value.arrayValue,t)}}class bj extends Zn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>lh(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,t=null,n=[],o=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=o,this.limit=a,this.startAt=c,this.endAt=u,this.Te=null}}function wy(r,e=null,t=[],n=[],o=null,a=null,c=null){return new wj(r,e,t,n,o,a,c)}function Sg(r){const e=tr(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>F0(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),Tp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>Zu(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>Zu(n))).join(",")),e.Te=t}return e.Te}function _g(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!hj(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Lb(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!by(r.startAt,e.startAt)&&by(r.endAt,e.endAt)}function z0(r){return Et.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t=null,n=[],o=[],a=null,c="F",u=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=o,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Sj(r,e,t,n,o,a,c,u){return new ud(r,e,t,n,o,a,c,u)}function zb(r){return new ud(r)}function Sy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Ob(r){return r.collectionGroup!==null}function Yd(r){const e=tr(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new li(Vi.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((d=>{d.isInequality()&&(u=u.add(d.field))}))})),u})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new ch(a,n))})),t.has(Vi.keyField().canonicalString())||e.Ie.push(new ch(Vi.keyField(),n))}return e.Ie}function Ia(r){const e=tr(r);return e.Ee||(e.Ee=_j(e,Yd(r))),e.Ee}function _j(r,e){if(r.limitType==="F")return wy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new ch(o.field,a)}));const t=r.endAt?new sp(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new sp(r.startAt.position,r.startAt.inclusive):null;return wy(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function O0(r,e){const t=r.filters.concat([e]);return new ud(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function V0(r,e,t){return new ud(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Cp(r,e){return _g(Ia(r),Ia(e))&&r.limitType===e.limitType}function Vb(r){return`${Sg(Ia(r))}|lt:${r.limitType}`}function Nu(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((o=>Bb(o))).join(", ")}]`),Tp(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((o=>Zu(o))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((o=>Zu(o))).join(",")),`Target(${n})`})(Ia(r))}; limitType=${r.limitType})`}function kp(r,e){return e.isFoundDocument()&&(function(n,o){const a=o.key.path;return n.collectionGroup!==null?o.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):Et.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(r,e)&&(function(n,o){for(const a of Yd(n))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(r,e)&&(function(n,o){for(const a of n.filters)if(!a.matches(o))return!1;return!0})(r,e)&&(function(n,o){return!(n.startAt&&!(function(c,u,f){const d=vy(c,u,f);return c.inclusive?d<=0:d<0})(n.startAt,Yd(n),o)||n.endAt&&!(function(c,u,f){const d=vy(c,u,f);return c.inclusive?d>=0:d>0})(n.endAt,Yd(n),o))})(r,e)}function Tj(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Mb(r){return(e,t)=>{let n=!1;for(const o of Yd(r)){const a=Aj(o,e,t);if(a!==0)return a;n=n||o.field.isKeyField()}return 0}}function Aj(r,e,t){const n=r.field.isKeyField()?Et.comparator(e.key,t.key):(function(a,c,u){const f=c.data.field(a),d=u.data.field(a);return f!==null&&d!==null?Xu(f,d):qt(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return qt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[o,a]of n)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let o=0;o<n.length;o++)if(this.equalsFn(n[o][0],e))return n.length===1?delete this.inner[t]:n.splice(o,1),this.innerSize--,!0;return!1}forEach(e){fc(this.inner,((t,n)=>{for(const[o,a]of n)e(o,a)}))}isEmpty(){return Sb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj=new _n(Et.comparator);function ml(){return Cj}const Db=new _n(Et.comparator);function $d(...r){let e=Db;for(const t of r)e=e.insert(t.key,t);return e}function Wb(r){let e=Db;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Oc(){return Qd()}function $b(){return Qd()}function Qd(){return new tu((r=>r.toString()),((r,e)=>r.isEqual(e)))}const kj=new _n(Et.comparator),jj=new li(Et.comparator);function gr(...r){let e=jj;for(const t of r)e=e.add(t);return e}const Ej=new li(mr);function Ij(){return Ej}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:np(e)?"-0":e}}function Ub(r){return{integerValue:""+r}}function Rj(r,e){return ij(e)?Ub(e):Tg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(){this._=void 0}}function Pj(r,e,t){return r instanceof uh?(function(o,a){const c={fields:{[Ab]:{stringValue:Tb},[kb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&bg(a)&&(a=Ap(a)),a&&(c.fields[Cb]=a),{mapValue:c}})(t,e):r instanceof dh?Hb(r,e):r instanceof hh?Gb(r,e):(function(o,a){const c=qb(o,a),u=_y(c)+_y(o.Ae);return B0(c)&&B0(o.Ae)?Ub(u):Tg(o.serializer,u)})(r,e)}function Nj(r,e,t){return r instanceof dh?Hb(r,e):r instanceof hh?Gb(r,e):t}function qb(r,e){return r instanceof ap?(function(n){return B0(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class uh extends jp{}class dh extends jp{constructor(e){super(),this.elements=e}}function Hb(r,e){const t=Kb(e);for(const n of r.elements)t.some((o=>Ba(o,n)))||t.push(n);return{arrayValue:{values:t}}}class hh extends jp{constructor(e){super(),this.elements=e}}function Gb(r,e){let t=Kb(e);for(const n of r.elements)t=t.filter((o=>!Ba(o,n)));return{arrayValue:{values:t}}}class ap extends jp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function _y(r){return Dn(r.integerValue||r.doubleValue)}function Kb(r){return wg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,t){this.field=e,this.transform=t}}function Bj(r,e){return r.field.isEqual(e.field)&&(function(n,o){return n instanceof dh&&o instanceof dh||n instanceof hh&&o instanceof hh?Qu(n.elements,o.elements,Ba):n instanceof ap&&o instanceof ap?Ba(n.Ae,o.Ae):n instanceof uh&&o instanceof uh})(r.transform,e.transform)}class Fj{constructor(e,t){this.version=e,this.transformResults=t}}class ta{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ta}static exists(e){return new ta(void 0,e)}static updateTime(e){return new ta(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Df(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Ep{}function Jb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Ag(r.key,ta.none()):new Sh(r.key,r.data,ta.none());{const t=r.data,n=Do.empty();let o=new li(Vi.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?n.delete(a):n.set(a,c),o=o.add(a)}return new pc(r.key,n,new ls(o.toArray()),ta.none())}}function zj(r,e,t){r instanceof Sh?(function(o,a,c){const u=o.value.clone(),f=Ay(o.fieldTransforms,a,c.transformResults);u.setAll(f),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(r,e,t):r instanceof pc?(function(o,a,c){if(!Df(o.precondition,a))return void a.convertToUnknownDocument(c.version);const u=Ay(o.fieldTransforms,a,c.transformResults),f=a.data;f.setAll(Yb(o)),f.setAll(u),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(r,e,t):(function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Xd(r,e,t,n){return r instanceof Sh?(function(a,c,u,f){if(!Df(a.precondition,c))return u;const d=a.value.clone(),g=Cy(a.fieldTransforms,f,c);return d.setAll(g),c.convertToFoundDocument(c.version,d).setHasLocalMutations(),null})(r,e,t,n):r instanceof pc?(function(a,c,u,f){if(!Df(a.precondition,c))return u;const d=Cy(a.fieldTransforms,f,c),g=c.data;return g.setAll(Yb(a)),g.setAll(d),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(r,e,t,n):(function(a,c,u){return Df(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(r,e,t)}function Oj(r,e){let t=null;for(const n of r.fieldTransforms){const o=e.data.field(n.field),a=qb(n.transform,o||null);a!=null&&(t===null&&(t=Do.empty()),t.set(n.field,a))}return t||null}function Ty(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,o){return n===void 0&&o===void 0||!(!n||!o)&&Qu(n,o,((a,c)=>Bj(a,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Sh extends Ep{constructor(e,t,n,o=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class pc extends Ep{constructor(e,t,n,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Yb(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function Ay(r,e,t){const n=new Map;Lr(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const a=r[o],c=a.transform,u=e.data.field(a.field);n.set(a.field,Nj(c,u,t[o]))}return n}function Cy(r,e,t){const n=new Map;for(const o of r){const a=o.transform,c=t.data.field(o.field);n.set(o.field,Pj(a,c,e))}return n}class Ag extends Ep{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vj extends Ep{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,t,n,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=o}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&zj(a,e,n[o])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Xd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Xd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=$b();return this.mutations.forEach((o=>{const a=e.get(o.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=t.has(o.key)?null:u;const f=Jb(c,u);f!==null&&n.set(o.key,f),c.isValidDocument()||c.convertToNoDocument(Qt.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),gr())}isEqual(e){return this.batchId===e.batchId&&Qu(this.mutations,e.mutations,((t,n)=>Ty(t,n)))&&Qu(this.baseMutations,e.baseMutations,((t,n)=>Ty(t,n)))}}class Cg{constructor(e,t,n,o){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=o}static from(e,t,n){Lr(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let o=(function(){return kj})();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,n[c].version);return new Cg(e,t,n,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xn,xr;function $j(r){switch(r){case $e.OK:return qt(64938);case $e.CANCELLED:case $e.UNKNOWN:case $e.DEADLINE_EXCEEDED:case $e.RESOURCE_EXHAUSTED:case $e.INTERNAL:case $e.UNAVAILABLE:case $e.UNAUTHENTICATED:return!1;case $e.INVALID_ARGUMENT:case $e.NOT_FOUND:case $e.ALREADY_EXISTS:case $e.PERMISSION_DENIED:case $e.FAILED_PRECONDITION:case $e.ABORTED:case $e.OUT_OF_RANGE:case $e.UNIMPLEMENTED:case $e.DATA_LOSS:return!0;default:return qt(15467,{code:r})}}function Qb(r){if(r===void 0)return pl("GRPC error has no .code"),$e.UNKNOWN;switch(r){case Xn.OK:return $e.OK;case Xn.CANCELLED:return $e.CANCELLED;case Xn.UNKNOWN:return $e.UNKNOWN;case Xn.DEADLINE_EXCEEDED:return $e.DEADLINE_EXCEEDED;case Xn.RESOURCE_EXHAUSTED:return $e.RESOURCE_EXHAUSTED;case Xn.INTERNAL:return $e.INTERNAL;case Xn.UNAVAILABLE:return $e.UNAVAILABLE;case Xn.UNAUTHENTICATED:return $e.UNAUTHENTICATED;case Xn.INVALID_ARGUMENT:return $e.INVALID_ARGUMENT;case Xn.NOT_FOUND:return $e.NOT_FOUND;case Xn.ALREADY_EXISTS:return $e.ALREADY_EXISTS;case Xn.PERMISSION_DENIED:return $e.PERMISSION_DENIED;case Xn.FAILED_PRECONDITION:return $e.FAILED_PRECONDITION;case Xn.ABORTED:return $e.ABORTED;case Xn.OUT_OF_RANGE:return $e.OUT_OF_RANGE;case Xn.UNIMPLEMENTED:return $e.UNIMPLEMENTED;case Xn.DATA_LOSS:return $e.DATA_LOSS;default:return qt(39323,{code:r})}}(xr=Xn||(Xn={}))[xr.OK=0]="OK",xr[xr.CANCELLED=1]="CANCELLED",xr[xr.UNKNOWN=2]="UNKNOWN",xr[xr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xr[xr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xr[xr.NOT_FOUND=5]="NOT_FOUND",xr[xr.ALREADY_EXISTS=6]="ALREADY_EXISTS",xr[xr.PERMISSION_DENIED=7]="PERMISSION_DENIED",xr[xr.UNAUTHENTICATED=16]="UNAUTHENTICATED",xr[xr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xr[xr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xr[xr.ABORTED=10]="ABORTED",xr[xr.OUT_OF_RANGE=11]="OUT_OF_RANGE",xr[xr.UNIMPLEMENTED=12]="UNIMPLEMENTED",xr[xr.INTERNAL=13]="INTERNAL",xr[xr.UNAVAILABLE=14]="UNAVAILABLE",xr[xr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj=new tc([4294967295,4294967295],0);function ky(r){const e=Uj().encode(r),t=new db;return t.update(e),new Uint8Array(t.digest())}function jy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new tc([t,n],0),new tc([o,a],0)]}class kg{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Ud(`Invalid padding: ${t}`);if(n<0)throw new Ud(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Ud(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Ud(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=tc.fromNumber(this.ge)}ye(e,t,n){let o=e.add(t.multiply(tc.fromNumber(n)));return o.compare(qj)===1&&(o=new tc([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ky(e),[n,o]=jy(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(n,o,a);if(!this.we(c))return!1}return!0}static create(e,t,n){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new kg(a,o,t);return n.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const t=ky(e),[n,o]=jy(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(n,o,a);this.Se(c)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Ud extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,t,n,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const o=new Map;return o.set(e,_h.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ip(Qt.min(),o,new _n(mr),ml(),gr())}}class _h{constructor(e,t,n,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new _h(n,t,gr(),gr(),gr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t,n,o){this.be=e,this.removedTargetIds=t,this.key=n,this.De=o}}class Xb{constructor(e,t){this.targetId=e,this.Ce=t}}class Zb{constructor(e,t,n=Mi.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=o}}class Ey{constructor(){this.ve=0,this.Fe=Iy(),this.Me=Mi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=gr(),t=gr(),n=gr();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:n=n.add(o);break;default:qt(38017,{changeType:a})}})),new _h(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Iy()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Lr(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Hj{constructor(e){this.Ge=e,this.ze=new Map,this.je=ml(),this.Je=Af(),this.He=Af(),this.Ye=new _n(mr)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:qt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,n=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(z0(a))if(n===0){const c=new Et(a.path);this.et(t,c,ao.newNoDocument(c,Qt.min()))}else Lr(n===1,20013,{expectedCount:n});else{const c=this._t(t);if(c!==n){const u=this.ut(e),f=u?this.ct(u,e,c):1;if(f!==0){this.it(t);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:o=0},hashCount:a=0}=t;let c,u;try{c=ac(n).toUint8Array()}catch(f){if(f instanceof _b)return Yu("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{u=new kg(c,o,a)}catch(f){return Yu(f instanceof Ud?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let o=0;return n.forEach((a=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const u=this.ot(c);if(u){if(a.current&&z0(u.target)){const f=new Et(u.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,ao.newNoDocument(f,e))}a.Be&&(t.set(c,a.ke()),a.qe())}}));let n=gr();this.He.forEach(((a,c)=>{let u=!0;c.forEachWhile((f=>{const d=this.ot(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const o=new Ip(e,t,this.Ye,this.je,n);return this.je=ml(),this.Je=Af(),this.He=Af(),this.Ye=new _n(mr),o}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Ey,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new li(mr),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new li(mr),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ct("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ey),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Af(){return new _n(Et.comparator)}function Iy(){return new _n(Et.comparator)}const Gj={asc:"ASCENDING",desc:"DESCENDING"},Kj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jj={and:"AND",or:"OR"};class Yj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function M0(r,e){return r.useProto3Json||Tp(e)?e:{value:e}}function lp(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ew(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Qj(r,e){return lp(r,e.toTimestamp())}function Ra(r){return Lr(!!r,49232),Qt.fromTimestamp((function(t){const n=sc(t);return new nn(n.seconds,n.nanos)})(r))}function jg(r,e){return D0(r,e).canonicalString()}function D0(r,e){const t=(function(o){return new tn(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function tw(r){const e=tn.fromString(r);return Lr(sw(e),10190,{key:e.toString()}),e}function W0(r,e){return jg(r.databaseId,e.path)}function s0(r,e){const t=tw(e);if(t.get(1)!==r.databaseId.projectId)throw new it($e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new it($e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Et(nw(t))}function rw(r,e){return jg(r.databaseId,e)}function Xj(r){const e=tw(r);return e.length===4?tn.emptyPath():nw(e)}function $0(r){return new tn(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function nw(r){return Lr(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Ry(r,e,t){return{name:W0(r,e),fields:t.value.mapValue.fields}}function Zj(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:qt(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(d,g){return d.useProto3Json?(Lr(g===void 0||typeof g=="string",58123),Mi.fromBase64String(g||"")):(Lr(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Mi.fromUint8Array(g||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(d){const g=d.code===void 0?$e.UNKNOWN:Qb(d.code);return new it(g,d.message||"")})(c);t=new Zb(n,o,a,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const o=s0(r,n.document.name),a=Ra(n.document.updateTime),c=n.document.createTime?Ra(n.document.createTime):Qt.min(),u=new Do({mapValue:{fields:n.document.fields}}),f=ao.newFoundDocument(o,a,c,u),d=n.targetIds||[],g=n.removedTargetIds||[];t=new Wf(d,g,f.key,f)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const o=s0(r,n.document),a=n.readTime?Ra(n.readTime):Qt.min(),c=ao.newNoDocument(o,a),u=n.removedTargetIds||[];t=new Wf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const o=s0(r,n.document),a=n.removedTargetIds||[];t=new Wf([],a,o,null)}else{if(!("filter"in e))return qt(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:o=0,unchangedNames:a}=n,c=new Wj(o,a),u=n.targetId;t=new Xb(u,c)}}return t}function e7(r,e){let t;if(e instanceof Sh)t={update:Ry(r,e.key,e.value)};else if(e instanceof Ag)t={delete:W0(r,e.key)};else if(e instanceof pc)t={update:Ry(r,e.key,e.data),updateMask:c7(e.fieldMask)};else{if(!(e instanceof Vj))return qt(16599,{Vt:e.type});t={verify:W0(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(a,c){const u=c.transform;if(u instanceof uh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof dh)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof hh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ap)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw qt(20930,{transform:c.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:Qj(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:qt(27497)})(r,e.precondition)),t}function t7(r,e){return r&&r.length>0?(Lr(e!==void 0,14353),r.map((t=>(function(o,a){let c=o.updateTime?Ra(o.updateTime):Ra(a);return c.isEqual(Qt.min())&&(c=Ra(a)),new Fj(c,o.transformResults||[])})(t,e)))):[]}function r7(r,e){return{documents:[rw(r,e.path)]}}function n7(r,e){const t={structuredQuery:{}},n=e.path;let o;e.collectionGroup!==null?(o=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=rw(r,o);const a=(function(d){if(d.length!==0)return ow(ia.create(d,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(d){if(d.length!==0)return d.map((g=>(function(C){return{field:Lu(C.field),direction:s7(C.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=M0(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:o}}function i7(r){let e=Xj(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let o=null;if(n>0){Lr(n===1,65062);const g=t.from[0];g.allDescendants?o=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=(function(w){const C=iw(w);return C instanceof ia&&Nb(C)?C.getFilters():[C]})(t.where));let c=[];t.orderBy&&(c=(function(w){return w.map((C=>(function(V){return new ch(Bu(V.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(C)))})(t.orderBy));let u=null;t.limit&&(u=(function(w){let C;return C=typeof w=="object"?w.value:w,Tp(C)?null:C})(t.limit));let f=null;t.startAt&&(f=(function(w){const C=!!w.before,b=w.values||[];return new sp(b,C)})(t.startAt));let d=null;return t.endAt&&(d=(function(w){const C=!w.before,b=w.values||[];return new sp(b,C)})(t.endAt)),Sj(e,o,c,a,u,"F",f,d)}function o7(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qt(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Bu(t.unaryFilter.field);return Zn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const o=Bu(t.unaryFilter.field);return Zn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Bu(t.unaryFilter.field);return Zn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Bu(t.unaryFilter.field);return Zn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qt(61313);default:return qt(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Zn.create(Bu(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qt(58110);default:return qt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return ia.create(t.compositeFilter.filters.map((n=>iw(n))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return qt(1026)}})(t.compositeFilter.op))})(r):qt(30097,{filter:r})}function s7(r){return Gj[r]}function a7(r){return Kj[r]}function l7(r){return Jj[r]}function Lu(r){return{fieldPath:r.canonicalString()}}function Bu(r){return Vi.fromServerFormat(r.fieldPath)}function ow(r){return r instanceof Zn?(function(t){if(t.op==="=="){if(xy(t.value))return{unaryFilter:{field:Lu(t.field),op:"IS_NAN"}};if(yy(t.value))return{unaryFilter:{field:Lu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(xy(t.value))return{unaryFilter:{field:Lu(t.field),op:"IS_NOT_NAN"}};if(yy(t.value))return{unaryFilter:{field:Lu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lu(t.field),op:a7(t.op),value:t.value}}})(r):r instanceof ia?(function(t){const n=t.getFilters().map((o=>ow(o)));return n.length===1?n[0]:{compositeFilter:{op:l7(t.op),filters:n}}})(r):qt(54877,{filter:r})}function c7(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function sw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,t,n,o,a=Qt.min(),c=Qt.min(),u=Mi.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=f}withSequenceNumber(e){return new Ql(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ql(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ql(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ql(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e){this.yt=e}}function d7(r){const e=i7({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?V0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(){this.Cn=new f7}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ge.resolve()}getCollectionParents(e,t){return Ge.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ge.resolve()}deleteFieldIndex(e,t){return Ge.resolve()}deleteAllFieldIndexes(e){return Ge.resolve()}createTargetIndexes(e,t){return Ge.resolve()}getDocumentsMatchingTarget(e,t){return Ge.resolve(null)}getIndexType(e,t){return Ge.resolve(0)}getFieldIndexes(e,t){return Ge.resolve([])}getNextCollectionGroupToUpdate(e){return Ge.resolve(null)}getMinOffset(e,t){return Ge.resolve(oc.min())}getMinOffsetFromCollectionGroup(e,t){return Ge.resolve(oc.min())}updateCollectionGroup(e,t,n){return Ge.resolve()}updateIndexEntries(e,t){return Ge.resolve()}}class f7{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),o=this.index[t]||new li(tn.comparator),a=!o.has(n);return this.index[t]=o.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),o=this.index[t];return o&&o.has(n)}getEntries(e){return(this.index[e]||new li(tn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aw=41943040;class Mo{static withCacheSize(e){return new Mo(e,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mo.DEFAULT_COLLECTION_PERCENTILE=10,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mo.DEFAULT=new Mo(aw,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mo.DISABLED=new Mo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ed(0)}static cr(){return new ed(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="LruGarbageCollector",p7=1048576;function Ly([r,e],[t,n]){const o=mr(r,t);return o===0?mr(e,n):o}class m7{constructor(e){this.Ir=e,this.buffer=new li(Ly),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();Ly(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class g7{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ct(Ny,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){cd(t)?ct(Ny,"Ignoring IndexedDB error during garbage collection: ",t):await ld(t)}await this.Vr(3e5)}))}}class y7{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return Ge.resolve(_p.ce);const n=new m7(t);return this.mr.forEachTarget(e,(o=>n.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>n.Ar(o))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ct("LruGarbageCollector","Garbage collection skipped; disabled"),Ge.resolve(Py)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Py):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,o,a,c,u,f,d;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,c=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(n=w,u=Date.now(),this.removeTargets(e,n,t)))).next((w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,n)))).next((w=>(d=Date.now(),Pu()<=pr.DEBUG&&ct("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${o} in `+(u-c)+`ms
	Removed ${a} targets in `+(f-u)+`ms
	Removed ${w} documents in `+(d-f)+`ms
Total Duration: ${d-g}ms`),Ge.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:w}))))}}function x7(r,e){return new y7(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v7{constructor(){this.changes=new tu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ao.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Ge.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(e,t,n,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=o}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(n=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(n!==null&&Xd(n.mutation,o,ls.empty(),nn.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,gr()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=gr()){const o=Oc();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,n).next((a=>{let c=$d();return a.forEach(((u,f)=>{c=c.insert(u,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const n=Oc();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,gr())))}populateOverlays(e,t,n){const o=[];return n.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((c,u)=>{t.set(c,u)}))}))}computeViews(e,t,n,o){let a=ml();const c=Qd(),u=(function(){return Qd()})();return t.forEach(((f,d)=>{const g=n.get(d.key);o.has(d.key)&&(g===void 0||g.mutation instanceof pc)?a=a.insert(d.key,d):g!==void 0?(c.set(d.key,g.mutation.getFieldMask()),Xd(g.mutation,d,g.mutation.getFieldMask(),nn.now())):c.set(d.key,ls.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((d,g)=>c.set(d,g))),t.forEach(((d,g)=>u.set(d,new b7(g,c.get(d)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=Qd();let o=new _n(((c,u)=>c-u)),a=gr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const u of c)u.keys().forEach((f=>{const d=t.get(f);if(d===null)return;let g=n.get(f)||ls.empty();g=u.applyToLocalView(d,g),n.set(f,g);const w=(o.get(u.batchId)||gr()).add(f);o=o.insert(u.batchId,w)}))})).next((()=>{const c=[],u=o.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),d=f.key,g=f.value,w=$b();g.forEach((C=>{if(!a.has(C)){const b=Jb(t.get(C),n.get(C));b!==null&&w.set(C,b),a=a.add(C)}})),c.push(this.documentOverlayCache.saveOverlays(e,d,w))}return Ge.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,o){return(function(c){return Et.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ob(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,o):this.getDocumentsMatchingCollectionQuery(e,t,n,o)}getNextDocuments(e,t,n,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,o).next((a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,o-a.size):Ge.resolve(Oc());let u=oh,f=a;return c.next((d=>Ge.forEach(d,((g,w)=>(u<w.largestBatchId&&(u=w.largestBatchId),a.get(g)?Ge.resolve():this.remoteDocumentCache.getEntry(e,g).next((C=>{f=f.insert(g,C)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,f,d,gr()))).next((g=>({batchId:u,changes:Wb(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Et(t)).next((n=>{let o=$d();return n.isFoundDocument()&&(o=o.insert(n.key,n)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,o){const a=t.collectionGroup;let c=$d();return this.indexManager.getCollectionParents(e,a).next((u=>Ge.forEach(u,(f=>{const d=(function(w,C){return new ud(C,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,n,o).next((g=>{g.forEach(((w,C)=>{c=c.insert(w,C)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,n,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,o)))).next((c=>{a.forEach(((f,d)=>{const g=d.getKey();c.get(g)===null&&(c=c.insert(g,ao.newInvalidDocument(g)))}));let u=$d();return c.forEach(((f,d)=>{const g=a.get(f);g!==void 0&&Xd(g.mutation,d,ls.empty(),nn.now()),kp(t,d)&&(u=u.insert(f,d))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ge.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ra(o.createTime)}})(t)),Ge.resolve()}getNamedQuery(e,t){return Ge.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:d7(o.bundledQuery),readTime:Ra(o.readTime)}})(t)),Ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(){this.overlays=new _n(Et.comparator),this.qr=new Map}getOverlay(e,t){return Ge.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Oc();return Ge.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&n.set(o,a)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((o,a)=>{this.St(e,t,a)})),Ge.resolve()}removeOverlaysForBatchId(e,t,n){const o=this.qr.get(n);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(n)),Ge.resolve()}getOverlaysForCollection(e,t,n){const o=Oc(),a=t.length+1,c=new Et(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const f=u.getNext().value,d=f.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===a&&f.largestBatchId>n&&o.set(f.getKey(),f)}return Ge.resolve(o)}getOverlaysForCollectionGroup(e,t,n,o){let a=new _n(((d,g)=>d-g));const c=this.overlays.getIterator();for(;c.hasNext();){const d=c.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let g=a.get(d.largestBatchId);g===null&&(g=Oc(),a=a.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const u=Oc(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((d,g)=>u.set(d,g))),!(u.size()>=o)););return Ge.resolve(u)}St(e,t,n){const o=this.overlays.get(n.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(n.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new Dj(t,n));let a=this.qr.get(t);a===void 0&&(a=gr(),this.qr.set(t,a)),this.qr.set(t,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(){this.sessionToken=Mi.EMPTY_BYTE_STRING}getSessionToken(e){return Ge.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(){this.Qr=new li(Ti.$r),this.Ur=new li(Ti.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Ti(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new Ti(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new Et(new tn([])),n=new Ti(t,e),o=new Ti(t,e+1),a=[];return this.Ur.forEachInRange([n,o],(c=>{this.Gr(c),a.push(c.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Et(new tn([])),n=new Ti(t,e),o=new Ti(t,e+1);let a=gr();return this.Ur.forEachInRange([n,o],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new Ti(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Ti{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Et.comparator(e.key,t.key)||mr(e.Yr,t.Yr)}static Kr(e,t){return mr(e.Yr,t.Yr)||Et.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new li(Ti.$r)}checkEmpty(e){return Ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Mj(a,t,n,o);this.mutationQueue.push(c);for(const u of o)this.Zr=this.Zr.add(new Ti(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Ge.resolve(c)}lookupMutationBatch(e,t){return Ge.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,o=this.ei(n),a=o<0?0:o;return Ge.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ge.resolve(this.mutationQueue.length===0?vg:this.tr-1)}getAllMutationBatches(e){return Ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ti(t,0),o=new Ti(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,o],(c=>{const u=this.Xr(c.Yr);a.push(u)})),Ge.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new li(mr);return t.forEach((o=>{const a=new Ti(o,0),c=new Ti(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,c],(u=>{n=n.add(u.Yr)}))})),Ge.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,o=n.length+1;let a=n;Et.isDocumentKey(a)||(a=a.child(""));const c=new Ti(new Et(a),0);let u=new li(mr);return this.Zr.forEachWhile((f=>{const d=f.key.path;return!!n.isPrefixOf(d)&&(d.length===o&&(u=u.add(f.Yr)),!0)}),c),Ge.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((n=>{const o=this.Xr(n);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Lr(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Ge.forEach(t.mutations,(o=>{const a=new Ti(o.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new Ti(t,0),o=this.Zr.firstAfterOrEqual(n);return Ge.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ge.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(e){this.ri=e,this.docs=(function(){return new _n(Et.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,o=this.docs.get(n),a=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ge.resolve(n?n.document.mutableCopy():ao.newInvalidDocument(t))}getEntries(e,t){let n=ml();return t.forEach((o=>{const a=this.docs.get(o);n=n.insert(o,a?a.document.mutableCopy():ao.newInvalidDocument(o))})),Ge.resolve(n)}getDocumentsMatchingQuery(e,t,n,o){let a=ml();const c=t.path,u=new Et(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:d,value:{document:g}}=f.getNext();if(!c.isPrefixOf(d.path))break;d.path.length>c.length+1||ej(Zk(g),n)<=0||(o.has(g.key)||kp(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return Ge.resolve(a)}getAllFromCollectionGroup(e,t,n,o){qt(9500)}ii(e,t){return Ge.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new k7(this)}getSize(e){return Ge.resolve(this.size)}}class k7 extends v7{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(n)})),Ge.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(e){this.persistence=e,this.si=new tu((t=>Sg(t)),_g),this.lastRemoteSnapshotVersion=Qt.min(),this.highestTargetId=0,this.oi=0,this._i=new Eg,this.targetCount=0,this.ai=ed.ur()}forEachTarget(e,t){return this.si.forEach(((n,o)=>t(o))),Ge.resolve()}getLastRemoteSnapshotVersion(e){return Ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ge.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ge.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ed(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ge.resolve()}updateTargetData(e,t){return this.Pr(t),Ge.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ge.resolve()}removeTargets(e,t,n){let o=0;const a=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.si.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),o++)})),Ge.waitFor(a).next((()=>o))}getTargetCount(e){return Ge.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ge.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ge.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((c=>{a.push(o.markPotentiallyOrphaned(e,c))})),Ge.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ge.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ge.resolve(n)}containsKey(e,t){return Ge.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t){this.ui={},this.overlays={},this.ci=new _p(0),this.li=!1,this.li=!0,this.hi=new T7,this.referenceDelegate=e(this),this.Pi=new j7(this),this.indexManager=new h7,this.remoteDocumentCache=(function(o){return new C7(o)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new u7(t),this.Ii=new S7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _7,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new A7(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){ct("MemoryPersistence","Starting transaction:",e);const o=new E7(this.ci.next());return this.referenceDelegate.Ei(),n(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return Ge.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class E7 extends rj{constructor(e){super(),this.currentSequenceNumber=e}}class Ig{constructor(e){this.persistence=e,this.Ri=new Eg,this.Vi=null}static mi(e){return new Ig(e)}get fi(){if(this.Vi)return this.Vi;throw qt(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ge.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ge.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ge.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ge.forEach(this.fi,(n=>{const o=Et.fromPath(n);return this.gi(e,o).next((a=>{a||t.removeEntry(o,Qt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Ge.or([()=>Ge.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class cp{constructor(e,t){this.persistence=e,this.pi=new tu((n=>oj(n.path)),((n,o)=>n.isEqual(o))),this.garbageCollector=x7(this,t)}static mi(e,t){return new cp(e,t)}Ei(){}di(e){return Ge.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((o=>n+o))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return Ge.forEach(this.pi,((n,o)=>this.br(e,n,o).next((a=>a?Ge.resolve():t(o)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((u=>{u||(n++,a.removeEntry(c,Qt.min()))})))).next((()=>a.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ge.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ge.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ge.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ge.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vf(e.data.value)),t}br(e,t,n){return Ge.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return Ge.resolve(o!==void 0&&o>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,t,n,o){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=o}static As(e,t){let n=gr(),o=gr();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Rg(e,t.fromCache,n,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return a6()?8:nj(lo())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,o){const a={result:null};return this.ys(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ws(e,t,o,n).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new I7;return this.Ss(e,t,c).next((u=>{if(a.result=u,this.Vs)return this.bs(e,t,c,u.size)}))})).next((()=>a.result))}bs(e,t,n,o){return n.documentReadCount<this.fs?(Pu()<=pr.DEBUG&&ct("QueryEngine","SDK will not create cache indexes for query:",Nu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ge.resolve()):(Pu()<=pr.DEBUG&&ct("QueryEngine","Query:",Nu(t),"scans",n.documentReadCount,"local documents and returns",o,"documents as results."),n.documentReadCount>this.gs*o?(Pu()<=pr.DEBUG&&ct("QueryEngine","The SDK decides to create cache indexes for query:",Nu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ia(t))):Ge.resolve())}ys(e,t){if(Sy(t))return Ge.resolve(null);let n=Ia(t);return this.indexManager.getIndexType(e,n).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=V0(t,null,"F"),n=Ia(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const c=gr(...a);return this.ps.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,n).next((f=>{const d=this.Ds(t,u);return this.Cs(t,d,c,f.readTime)?this.ys(e,V0(t,null,"F")):this.vs(e,d,t,f)}))))})))))}ws(e,t,n,o){return Sy(t)||o.isEqual(Qt.min())?Ge.resolve(null):this.ps.getDocuments(e,n).next((a=>{const c=this.Ds(t,a);return this.Cs(t,c,n,o)?Ge.resolve(null):(Pu()<=pr.DEBUG&&ct("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Nu(t)),this.vs(e,c,t,Xk(o,oh)).next((u=>u)))}))}Ds(e,t){let n=new li(Mb(e));return t.forEach(((o,a)=>{kp(e,a)&&(n=n.add(a))})),n}Cs(e,t,n,o){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,n){return Pu()<=pr.DEBUG&&ct("QueryEngine","Using full collection scan to execute query:",Nu(t)),this.ps.getDocumentsMatchingQuery(e,t,oc.min(),n)}vs(e,t,n,o){return this.ps.getDocumentsMatchingQuery(e,n,o).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="LocalStore",P7=3e8;class N7{constructor(e,t,n,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new _n(mr),this.xs=new tu((a=>Sg(a)),_g),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new w7(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function L7(r,e,t,n){return new N7(r,e,t,n)}async function cw(r,e){const t=tr(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let o;return t.mutationQueue.getAllMutationBatches(n).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((a=>{const c=[],u=[];let f=gr();for(const d of o){c.push(d.batchId);for(const g of d.mutations)f=f.add(g.key)}for(const d of a){u.push(d.batchId);for(const g of d.mutations)f=f.add(g.key)}return t.localDocuments.getDocuments(n,f).next((d=>({Ls:d,removedBatchIds:c,addedBatchIds:u})))}))}))}function B7(r,e){const t=tr(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,f,d,g){const w=d.batch,C=w.keys();let b=Ge.resolve();return C.forEach((V=>{b=b.next((()=>g.getEntry(f,V))).next((R=>{const z=d.docVersions.get(V);Lr(z!==null,48541),R.version.compareTo(z)<0&&(w.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),g.addEntry(R)))}))})),b.next((()=>u.mutationQueue.removeMutationBatch(f,w)))})(t,n,e,a).next((()=>a.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let f=gr();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(f=f.add(u.batch.mutations[d].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(n,o)))}))}function uw(r){const e=tr(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function F7(r,e){const t=tr(r),n=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const u=[];e.targetChanges.forEach(((g,w)=>{const C=o.get(w);if(!C)return;u.push(t.Pi.removeMatchingKeys(a,g.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(a,g.addedDocuments,w))));let b=C.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?b=b.withResumeToken(Mi.EMPTY_BYTE_STRING,Qt.min()).withLastLimboFreeSnapshotVersion(Qt.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,n)),o=o.insert(w,b),(function(R,z,j){return R.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=P7?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(C,b,g)&&u.push(t.Pi.updateTargetData(a,b))}));let f=ml(),d=gr();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))})),u.push(z7(a,c,e.documentUpdates).next((g=>{f=g.ks,d=g.qs}))),!n.isEqual(Qt.min())){const g=t.Pi.getLastRemoteSnapshotVersion(a).next((w=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n)));u.push(g)}return Ge.waitFor(u).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,d))).next((()=>f))})).then((a=>(t.Ms=o,a)))}function z7(r,e,t){let n=gr(),o=gr();return t.forEach((a=>n=n.add(a))),e.getEntries(r,n).next((a=>{let c=ml();return t.forEach(((u,f)=>{const d=a.get(u);f.isFoundDocument()!==d.isFoundDocument()&&(o=o.add(u)),f.isNoDocument()&&f.version.isEqual(Qt.min())?(e.removeEntry(u,f.readTime),c=c.insert(u,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(f),c=c.insert(u,f)):ct(Pg,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",f.version)})),{ks:c,qs:o}}))}function O7(r,e){const t=tr(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=vg),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function V7(r,e){const t=tr(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let o;return t.Pi.getTargetData(n,e).next((a=>a?(o=a,Ge.resolve(o)):t.Pi.allocateTargetId(n).next((c=>(o=new Ql(e,c,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,o).next((()=>o)))))))})).then((n=>{const o=t.Ms.get(n.targetId);return(o===null||n.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function U0(r,e,t){const n=tr(r),o=n.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,(c=>n.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!cd(c))throw c;ct(Pg,`Failed to update sequence numbers for target ${e}: ${c}`)}n.Ms=n.Ms.remove(e),n.xs.delete(o.target)}function By(r,e,t){const n=tr(r);let o=Qt.min(),a=gr();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,d,g){const w=tr(f),C=w.xs.get(g);return C!==void 0?Ge.resolve(w.Ms.get(C)):w.Pi.getTargetData(d,g)})(n,c,Ia(e)).next((u=>{if(u)return o=u.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(c,u.targetId).next((f=>{a=f}))})).next((()=>n.Fs.getDocumentsMatchingQuery(c,e,t?o:Qt.min(),t?a:gr()))).next((u=>(M7(n,Tj(e),u),{documents:u,Qs:a})))))}function M7(r,e,t){let n=r.Os.get(e)||Qt.min();t.forEach(((o,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),r.Os.set(e,n)}class Fy{constructor(){this.activeTargetIds=Ij()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class D7{constructor(){this.Mo=new Fy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Fy,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="ConnectivityMonitor";class Oy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ct(zy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ct(zy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cf=null;function q0(){return Cf===null?Cf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Cf++,"0x"+Cf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="RestConnection",$7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class U7{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${o}`,this.Wo=this.databaseId.database===ip?`project_id=${n}`:`project_id=${n}&database_id=${o}`}Go(e,t,n,o,a){const c=q0(),u=this.zo(e,t.toUriEncodedString());ct(a0,`Sending RPC '${e}' ${c}:`,u,n);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,o,a);const{host:d}=new URL(u),g=id(d);return this.Jo(e,u,f,n,g).then((w=>(ct(a0,`Received RPC '${e}' ${c}: `,w),w)),(w=>{throw Yu(a0,`RPC '${e}' ${c} failed with error: `,w,"url: ",u,"request:",n),w}))}Ho(e,t,n,o,a,c){return this.Go(e,t,n,o,a)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ad})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),n&&n.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const n=$7[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="WebChannelConnection";class H7 extends U7{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,o,a){const c=q0();return new Promise(((u,f)=>{const d=new hb;d.setWithCredentials(!0),d.listenOnce(fb.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Of.NO_ERROR:const w=d.getResponseJson();ct(oo,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),u(w);break;case Of.TIMEOUT:ct(oo,`RPC '${e}' ${c} timed out`),f(new it($e.DEADLINE_EXCEEDED,"Request time out"));break;case Of.HTTP_ERROR:const C=d.getStatus();if(ct(oo,`RPC '${e}' ${c} failed with status:`,C,"response text:",d.getResponseText()),C>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const V=b==null?void 0:b.error;if(V&&V.status&&V.message){const R=(function(j){const U=j.toLowerCase().replace(/_/g,"-");return Object.values($e).indexOf(U)>=0?U:$e.UNKNOWN})(V.status);f(new it(R,V.message))}else f(new it($e.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new it($e.UNAVAILABLE,"Connection failed."));break;default:qt(9055,{l_:e,streamId:c,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ct(oo,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(o);ct(oo,`RPC '${e}' ${c} sending request:`,o),d.send(t,"POST",g,n,15)}))}T_(e,t,n){const o=q0(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=gb(),u=mb(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,n),f.encodeInitMessageHeaders=!0;const g=a.join("");ct(oo,`Creating RPC '${e}' stream ${o}: ${g}`,f);const w=c.createWebChannel(g,f);this.I_(w);let C=!1,b=!1;const V=new q7({Yo:z=>{b?ct(oo,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(C||(ct(oo,`Opening RPC '${e}' stream ${o} transport.`),w.open(),C=!0),ct(oo,`RPC '${e}' stream ${o} sending:`,z),w.send(z))},Zo:()=>w.close()}),R=(z,j,U)=>{z.listen(j,(H=>{try{U(H)}catch(B){setTimeout((()=>{throw B}),0)}}))};return R(w,Wd.EventType.OPEN,(()=>{b||(ct(oo,`RPC '${e}' stream ${o} transport opened.`),V.o_())})),R(w,Wd.EventType.CLOSE,(()=>{b||(b=!0,ct(oo,`RPC '${e}' stream ${o} transport closed`),V.a_(),this.E_(w))})),R(w,Wd.EventType.ERROR,(z=>{b||(b=!0,Yu(oo,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),V.a_(new it($e.UNAVAILABLE,"The operation could not be completed")))})),R(w,Wd.EventType.MESSAGE,(z=>{var j;if(!b){const U=z.data[0];Lr(!!U,16349);const H=U,B=(H==null?void 0:H.error)||((j=H[0])==null?void 0:j.error);if(B){ct(oo,`RPC '${e}' stream ${o} received error:`,B);const re=B.status;let ce=(function(T){const F=Xn[T];if(F!==void 0)return Qb(F)})(re),N=B.message;ce===void 0&&(ce=$e.INTERNAL,N="Unknown error status: "+re+" with message "+B.message),b=!0,V.a_(new it(ce,N)),w.close()}else ct(oo,`RPC '${e}' stream ${o} received:`,U),V.u_(U)}})),R(u,pb.STAT_EVENT,(z=>{z.stat===P0.PROXY?ct(oo,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===P0.NOPROXY&&ct(oo,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function l0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(r){return new Yj(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t,n=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-n);o>0&&ct("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="PersistentStream";class hw{constructor(e,t,n,o,a,c,u,f){this.Mi=e,this.S_=n,this.b_=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===$e.RESOURCE_EXHAUSTED?(pl(t.toString()),pl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===$e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,o])=>{this.D_===t&&this.G_(n,o)}),(n=>{e((()=>{const o=new it($e.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(o)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{n((()=>this.z_(o)))})),this.stream.onMessage((o=>{n((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ct(Vy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ct(Vy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class G7 extends hw{constructor(e,t,n,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,o,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Zj(this.serializer,e),n=(function(a){if(!("targetChange"in a))return Qt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Qt.min():c.readTime?Ra(c.readTime):Qt.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=$0(this.serializer),t.addTarget=(function(a,c){let u;const f=c.target;if(u=z0(f)?{documents:r7(a,f)}:{query:n7(a,f).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=ew(a,c.resumeToken);const d=M0(a,c.expectedCount);d!==null&&(u.expectedCount=d)}else if(c.snapshotVersion.compareTo(Qt.min())>0){u.readTime=lp(a,c.snapshotVersion.toTimestamp());const d=M0(a,c.expectedCount);d!==null&&(u.expectedCount=d)}return u})(this.serializer,e);const n=o7(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=$0(this.serializer),t.removeTarget=e,this.q_(t)}}class K7 extends hw{constructor(e,t,n,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,o,c),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Lr(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Lr(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Lr(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=t7(e.writeResults,e.commitTime),n=Ra(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=$0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>e7(this.serializer,n)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{}class Y7 extends J7{constructor(e,t,n,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new it($e.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Go(e,D0(t,n),o,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new it($e.UNKNOWN,a.toString())}))}Ho(e,t,n,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(e,D0(t,n),o,c,u,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new it($e.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Q7{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pl(t),this.aa=!1):ct("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc="RemoteStore";class X7{constructor(e,t,n,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((c=>{n.enqueueAndForget((async()=>{ru(this)&&(ct(Jc,"Restarting streams for network reachability change."),await(async function(f){const d=tr(f);d.Ea.add(4),await Th(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Pp(d)})(this))}))})),this.Ra=new Q7(n,o)}}async function Pp(r){if(ru(r))for(const e of r.da)await e(!0)}async function Th(r){for(const e of r.da)await e(!1)}function fw(r,e){const t=tr(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Fg(t)?Bg(t):dd(t).O_()&&Lg(t,e))}function Ng(r,e){const t=tr(r),n=dd(t);t.Ia.delete(e),n.O_()&&pw(t,e),t.Ia.size===0&&(n.O_()?n.L_():ru(t)&&t.Ra.set("Unknown"))}function Lg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dd(r).Y_(e)}function pw(r,e){r.Va.Ue(e),dd(r).Z_(e)}function Bg(r){r.Va=new Hj({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),dd(r).start(),r.Ra.ua()}function Fg(r){return ru(r)&&!dd(r).x_()&&r.Ia.size>0}function ru(r){return tr(r).Ea.size===0}function mw(r){r.Va=void 0}async function Z7(r){r.Ra.set("Online")}async function e8(r){r.Ia.forEach(((e,t)=>{Lg(r,e)}))}async function t8(r,e){mw(r),Fg(r)?(r.Ra.ha(e),Bg(r)):r.Ra.set("Unknown")}async function r8(r,e,t){if(r.Ra.set("Online"),e instanceof Zb&&e.state===2&&e.cause)try{await(async function(o,a){const c=a.cause;for(const u of a.targetIds)o.Ia.has(u)&&(await o.remoteSyncer.rejectListen(u,c),o.Ia.delete(u),o.Va.removeTarget(u))})(r,e)}catch(n){ct(Jc,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await up(r,n)}else if(e instanceof Wf?r.Va.Ze(e):e instanceof Xb?r.Va.st(e):r.Va.tt(e),!t.isEqual(Qt.min()))try{const n=await uw(r.localStore);t.compareTo(n)>=0&&await(function(a,c){const u=a.Va.Tt(c);return u.targetChanges.forEach(((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const g=a.Ia.get(d);g&&a.Ia.set(d,g.withResumeToken(f.resumeToken,c))}})),u.targetMismatches.forEach(((f,d)=>{const g=a.Ia.get(f);if(!g)return;a.Ia.set(f,g.withResumeToken(Mi.EMPTY_BYTE_STRING,g.snapshotVersion)),pw(a,f);const w=new Ql(g.target,f,d,g.sequenceNumber);Lg(a,w)})),a.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(n){ct(Jc,"Failed to raise snapshot:",n),await up(r,n)}}async function up(r,e,t){if(!cd(e))throw e;r.Ea.add(1),await Th(r),r.Ra.set("Offline"),t||(t=()=>uw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ct(Jc,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Pp(r)}))}function gw(r,e){return e().catch((t=>up(r,t,e)))}async function Np(r){const e=tr(r),t=cc(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vg;for(;n8(e);)try{const o=await O7(e.localStore,n);if(o===null){e.Ta.length===0&&t.L_();break}n=o.batchId,i8(e,o)}catch(o){await up(e,o)}yw(e)&&xw(e)}function n8(r){return ru(r)&&r.Ta.length<10}function i8(r,e){r.Ta.push(e);const t=cc(r);t.O_()&&t.X_&&t.ea(e.mutations)}function yw(r){return ru(r)&&!cc(r).x_()&&r.Ta.length>0}function xw(r){cc(r).start()}async function o8(r){cc(r).ra()}async function s8(r){const e=cc(r);for(const t of r.Ta)e.ea(t.mutations)}async function a8(r,e,t){const n=r.Ta.shift(),o=Cg.from(n,e,t);await gw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Np(r)}async function l8(r,e){e&&cc(r).X_&&await(async function(n,o){if((function(c){return $j(c)&&c!==$e.ABORTED})(o.code)){const a=n.Ta.shift();cc(n).B_(),await gw(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Np(n)}})(r,e),yw(r)&&xw(r)}async function My(r,e){const t=tr(r);t.asyncQueue.verifyOperationInProgress(),ct(Jc,"RemoteStore received new credentials");const n=ru(t);t.Ea.add(3),await Th(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Pp(t)}async function c8(r,e){const t=tr(r);e?(t.Ea.delete(2),await Pp(t)):e||(t.Ea.add(2),await Th(t),t.Ra.set("Unknown"))}function dd(r){return r.ma||(r.ma=(function(t,n,o){const a=tr(t);return a.sa(),new G7(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(r.datastore,r.asyncQueue,{Xo:Z7.bind(null,r),t_:e8.bind(null,r),r_:t8.bind(null,r),H_:r8.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Fg(r)?Bg(r):r.Ra.set("Unknown")):(await r.ma.stop(),mw(r))}))),r.ma}function cc(r){return r.fa||(r.fa=(function(t,n,o){const a=tr(t);return a.sa(),new K7(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:o8.bind(null,r),r_:l8.bind(null,r),ta:s8.bind(null,r),na:a8.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Np(r)):(await r.fa.stop(),r.Ta.length>0&&(ct(Jc,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,t,n,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=o,this.removalCallback=a,this.deferred=new rc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,o,a){const c=Date.now()+n,u=new zg(e,t,c,o,a);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new it($e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Og(r,e){if(pl("AsyncQueue",`${e}: ${r}`),cd(r))return new it($e.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{static emptySet(e){return new Hu(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Et.comparator(t.key,n.key):(t,n)=>Et.comparator(t.key,n.key),this.keyedMap=$d(),this.sortedSet=new _n(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=n.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Hu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(){this.ga=new _n(Et.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):qt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class td{constructor(e,t,n,o,a,c,u,f,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,o,a){const c=[];return t.forEach((u=>{c.push({type:0,doc:u})})),new td(e,t,Hu.emptySet(t),c,n,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==n[o].type||!t[o].doc.isEqual(n[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class d8{constructor(){this.queries=Wy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const o=tr(t),a=o.queries;o.queries=Wy(),a.forEach(((c,u)=>{for(const f of u.Sa)f.onError(n)}))})(this,new it($e.ABORTED,"Firestore shutting down"))}}function Wy(){return new tu((r=>Vb(r)),Cp)}async function h8(r,e){const t=tr(r);let n=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(n=2):(a=new u8,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const u=Og(c,`Initialization of query '${Nu(e.query)}' failed`);return void e.onError(u)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Vg(t)}async function f8(r,e){const t=tr(r),n=e.query;let o=3;const a=t.queries.get(n);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function p8(r,e){const t=tr(r);let n=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const u of c.Sa)u.Fa(o)&&(n=!0);c.wa=o}}n&&Vg(t)}function m8(r,e,t){const n=tr(r),o=n.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);n.queries.delete(e)}function Vg(r){r.Ca.forEach((e=>{e.next()}))}var H0,$y;($y=H0||(H0={})).Ma="default",$y.Cache="cache";class g8{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const o of e.docChanges)o.type!==3&&n.push(o);e=new td(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=td.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==H0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e){this.key=e}}class bw{constructor(e){this.key=e}}class y8{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=gr(),this.mutatedKeys=gr(),this.eu=Mb(e),this.tu=new Hu(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Dy,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,u=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,d=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((g,w)=>{const C=o.get(g),b=kp(this.query,w)?w:null,V=!!C&&this.mutatedKeys.has(C.key),R=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let z=!1;C&&b?C.data.isEqual(b.data)?V!==R&&(n.track({type:3,doc:b}),z=!0):this.su(C,b)||(n.track({type:2,doc:b}),z=!0,(f&&this.eu(b,f)>0||d&&this.eu(b,d)<0)&&(u=!0)):!C&&b?(n.track({type:0,doc:b}),z=!0):C&&!b&&(n.track({type:1,doc:C}),z=!0,(f||d)&&(u=!0)),z&&(b?(c=c.add(b),a=R?a.add(g):a.delete(g)):(c=c.delete(g),a=a.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),a=a.delete(g.key),n.track({type:1,doc:g})}return{tu:c,iu:n,Cs:u,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,w)=>(function(b,V){const R=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qt(20277,{Rt:z})}};return R(b)-R(V)})(g.type,w.type)||this.eu(g.doc,w.doc))),this.ou(n),o=o??!1;const u=t&&!o?this._u():[],f=this.Xa.size===0&&this.current&&!o?1:0,d=f!==this.Za;return this.Za=f,c.length!==0||d?{snapshot:new td(this.query,e.tu,a,c,e.mutatedKeys,f===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Dy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=gr(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new bw(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new vw(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=gr();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return td.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Mg="SyncEngine";class x8{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class v8{constructor(e){this.key=e,this.hu=!1}}class b8{constructor(e,t,n,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new tu((u=>Vb(u)),Cp),this.Iu=new Map,this.Eu=new Set,this.du=new _n(Et.comparator),this.Au=new Map,this.Ru=new Eg,this.Vu={},this.mu=new Map,this.fu=ed.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function w8(r,e,t=!0){const n=Cw(r);let o;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await ww(n,e,t,!0),o}async function S8(r,e){const t=Cw(r);await ww(t,e,!0,!1)}async function ww(r,e,t,n){const o=await V7(r.localStore,Ia(e)),a=o.targetId,c=r.sharedClientState.addLocalQueryTarget(a,t);let u;return n&&(u=await _8(r,e,a,c==="current",o.resumeToken)),r.isPrimaryClient&&t&&fw(r.remoteStore,o),u}async function _8(r,e,t,n,o){r.pu=(w,C,b)=>(async function(R,z,j,U){let H=z.view.ru(j);H.Cs&&(H=await By(R.localStore,z.query,!1).then((({documents:N})=>z.view.ru(N,H))));const B=U&&U.targetChanges.get(z.targetId),re=U&&U.targetMismatches.get(z.targetId)!=null,ce=z.view.applyChanges(H,R.isPrimaryClient,B,re);return qy(R,z.targetId,ce.au),ce.snapshot})(r,w,C,b);const a=await By(r.localStore,e,!0),c=new y8(e,a.Qs),u=c.ru(a.documents),f=_h.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",o),d=c.applyChanges(u,r.isPrimaryClient,f);qy(r,t,d.au);const g=new x8(e,t,c);return r.Tu.set(e,g),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),d.snapshot}async function T8(r,e,t){const n=tr(r),o=n.Tu.get(e),a=n.Iu.get(o.targetId);if(a.length>1)return n.Iu.set(o.targetId,a.filter((c=>!Cp(c,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||await U0(n.localStore,o.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(o.targetId),t&&Ng(n.remoteStore,o.targetId),G0(n,o.targetId)})).catch(ld)):(G0(n,o.targetId),await U0(n.localStore,o.targetId,!0))}async function A8(r,e){const t=tr(r),n=t.Tu.get(e),o=t.Iu.get(n.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Ng(t.remoteStore,n.targetId))}async function C8(r,e,t){const n=N8(r);try{const o=await(function(c,u){const f=tr(c),d=nn.now(),g=u.reduce(((b,V)=>b.add(V.key)),gr());let w,C;return f.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let V=ml(),R=gr();return f.Ns.getEntries(b,g).next((z=>{V=z,V.forEach(((j,U)=>{U.isValidDocument()||(R=R.add(j))}))})).next((()=>f.localDocuments.getOverlayedDocuments(b,V))).next((z=>{w=z;const j=[];for(const U of u){const H=Oj(U,w.get(U.key).overlayedDocument);H!=null&&j.push(new pc(U.key,H,Ib(H.value.mapValue),ta.exists(!0)))}return f.mutationQueue.addMutationBatch(b,d,j,u)})).next((z=>{C=z;const j=z.applyToLocalDocumentSet(w,R);return f.documentOverlayCache.saveOverlays(b,z.batchId,j)}))})).then((()=>({batchId:C.batchId,changes:Wb(w)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(o.batchId),(function(c,u,f){let d=c.Vu[c.currentUser.toKey()];d||(d=new _n(mr)),d=d.insert(u,f),c.Vu[c.currentUser.toKey()]=d})(n,o.batchId,t),await Ah(n,o.changes),await Np(n.remoteStore)}catch(o){const a=Og(o,"Failed to persist write");t.reject(a)}}async function Sw(r,e){const t=tr(r);try{const n=await F7(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const c=t.Au.get(a);c&&(Lr(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Lr(c.hu,14607):o.removedDocuments.size>0&&(Lr(c.hu,42227),c.hu=!1))})),await Ah(t,n,e)}catch(n){await ld(n)}}function Uy(r,e,t){const n=tr(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const o=[];n.Tu.forEach(((a,c)=>{const u=c.view.va(e);u.snapshot&&o.push(u.snapshot)})),(function(c,u){const f=tr(c);f.onlineState=u;let d=!1;f.queries.forEach(((g,w)=>{for(const C of w.Sa)C.va(u)&&(d=!0)})),d&&Vg(f)})(n.eventManager,e),o.length&&n.Pu.H_(o),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function k8(r,e,t){const n=tr(r);n.sharedClientState.updateQueryState(e,"rejected",t);const o=n.Au.get(e),a=o&&o.key;if(a){let c=new _n(Et.comparator);c=c.insert(a,ao.newNoDocument(a,Qt.min()));const u=gr().add(a),f=new Ip(Qt.min(),new Map,new _n(mr),c,u);await Sw(n,f),n.du=n.du.remove(a),n.Au.delete(e),Dg(n)}else await U0(n.localStore,e,!1).then((()=>G0(n,e,t))).catch(ld)}async function j8(r,e){const t=tr(r),n=e.batch.batchId;try{const o=await B7(t.localStore,e);Tw(t,n,null),_w(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Ah(t,o)}catch(o){await ld(o)}}async function E8(r,e,t){const n=tr(r);try{const o=await(function(c,u){const f=tr(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let g;return f.mutationQueue.lookupMutationBatch(d,u).next((w=>(Lr(w!==null,37113),g=w.keys(),f.mutationQueue.removeMutationBatch(d,w)))).next((()=>f.mutationQueue.performConsistencyCheck(d))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(d,g,u))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g))).next((()=>f.localDocuments.getDocuments(d,g)))}))})(n.localStore,e);Tw(n,e,t),_w(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Ah(n,o)}catch(o){await ld(o)}}function _w(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Tw(r,e,t){const n=tr(r);let o=n.Vu[n.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),n.Vu[n.currentUser.toKey()]=o}}function G0(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||Aw(r,n)}))}function Aw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Ng(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Dg(r))}function qy(r,e,t){for(const n of t)n instanceof vw?(r.Ru.addReference(n.key,e),I8(r,n)):n instanceof bw?(ct(Mg,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||Aw(r,n.key)):qt(19791,{wu:n})}function I8(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(ct(Mg,"New document in limbo: "+t),r.Eu.add(n),Dg(r))}function Dg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Et(tn.fromString(e)),n=r.fu.next();r.Au.set(n,new v8(t)),r.du=r.du.insert(t,n),fw(r.remoteStore,new Ql(Ia(zb(t.path)),n,"TargetPurposeLimboResolution",_p.ce))}}async function Ah(r,e,t){const n=tr(r),o=[],a=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,f)=>{c.push(n.pu(f,e,t).then((d=>{var g;if((d||t)&&n.isPrimaryClient){const w=d?!d.fromCache:(g=t==null?void 0:t.targetChanges.get(f.targetId))==null?void 0:g.current;n.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(d){o.push(d);const w=Rg.As(f.targetId,d);a.push(w)}})))})),await Promise.all(c),n.Pu.H_(o),await(async function(f,d){const g=tr(f);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>Ge.forEach(d,(C=>Ge.forEach(C.Es,(b=>g.persistence.referenceDelegate.addReference(w,C.targetId,b))).next((()=>Ge.forEach(C.ds,(b=>g.persistence.referenceDelegate.removeReference(w,C.targetId,b)))))))))}catch(w){if(!cd(w))throw w;ct(Pg,"Failed to update sequence numbers: "+w)}for(const w of d){const C=w.targetId;if(!w.fromCache){const b=g.Ms.get(C),V=b.snapshotVersion,R=b.withLastLimboFreeSnapshotVersion(V);g.Ms=g.Ms.insert(C,R)}}})(n.localStore,a))}async function R8(r,e){const t=tr(r);if(!t.currentUser.isEqual(e)){ct(Mg,"User change. New user:",e.toKey());const n=await cw(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((u=>{u.forEach((f=>{f.reject(new it($e.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ah(t,n.Ls)}}function P8(r,e){const t=tr(r),n=t.Au.get(e);if(n&&n.hu)return gr().add(n.key);{let o=gr();const a=t.Iu.get(e);if(!a)return o;for(const c of a){const u=t.Tu.get(c);o=o.unionWith(u.view.nu)}return o}}function Cw(r){const e=tr(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Sw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=k8.bind(null,e),e.Pu.H_=p8.bind(null,e.eventManager),e.Pu.yu=m8.bind(null,e.eventManager),e}function N8(r){const e=tr(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=j8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E8.bind(null,e),e}class dp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return L7(this.persistence,new R7,e.initialUser,this.serializer)}Cu(e){return new lw(Ig.mi,this.serializer)}Du(e){return new D7}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dp.provider={build:()=>new dp};class L8 extends dp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Lr(this.persistence.referenceDelegate instanceof cp,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new g7(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Mo.withCacheSize(this.cacheSizeBytes):Mo.DEFAULT;return new lw((n=>cp.mi(n,t)),this.serializer)}}class K0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Uy(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=R8.bind(null,this.syncEngine),await c8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new d8})()}createDatastore(e){const t=Rp(e.databaseInfo.databaseId),n=(function(a){return new H7(a)})(e.databaseInfo);return(function(a,c,u,f){return new Y7(a,c,u,f)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,o,a,c,u){return new X7(n,o,a,c,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>Uy(this.syncEngine,t,0)),(function(){return Oy.v()?new Oy:new W7})())}createSyncEngine(e,t){return(function(o,a,c,u,f,d,g){const w=new b8(o,a,c,u,f,d);return g&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=tr(o);ct(Jc,"RemoteStore shutting down."),a.Ea.add(5),await Th(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}K0.provider={build:()=>new K0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):pl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc="FirestoreClient";class F8{constructor(e,t,n,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=o,this.user=so.UNAUTHENTICATED,this.clientId=xg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async c=>{ct(uc,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>(ct(uc,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Og(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function c0(r,e){r.asyncQueue.verifyOperationInProgress(),ct(uc,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async o=>{n.isEqual(o)||(await cw(e.localStore,o),n=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Hy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await z8(r);ct(uc,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>My(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,o)=>My(e.remoteStore,o))),r._onlineComponents=e}async function z8(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ct(uc,"Using user provided OfflineComponentProvider");try{await c0(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===$e.FAILED_PRECONDITION||o.code===$e.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Yu("Error using user provided cache. Falling back to memory cache: "+t),await c0(r,new dp)}}else ct(uc,"Using default OfflineComponentProvider"),await c0(r,new L8(void 0));return r._offlineComponents}async function kw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ct(uc,"Using user provided OnlineComponentProvider"),await Hy(r,r._uninitializedComponentsProvider._online)):(ct(uc,"Using default OnlineComponentProvider"),await Hy(r,new K0))),r._onlineComponents}function O8(r){return kw(r).then((e=>e.syncEngine))}async function V8(r){const e=await kw(r),t=e.eventManager;return t.onListen=w8.bind(null,e.syncEngine),t.onUnlisten=T8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=S8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=A8.bind(null,e.syncEngine),t}function M8(r,e,t={}){const n=new rc;return r.asyncQueue.enqueueAndForget((async()=>(function(a,c,u,f,d){const g=new B8({next:C=>{g.Nu(),c.enqueueAndForget((()=>f8(a,w))),C.fromCache&&f.source==="server"?d.reject(new it($e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(C)},error:C=>d.reject(C)}),w=new g8(u,g,{includeMetadataChanges:!0,qa:!0});return h8(a,w)})(await V8(r),r.asyncQueue,e,t,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="firestore.googleapis.com",Ky=!0;class Jy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new it($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ew,this.ssl=Ky}else this.host=e.host,this.ssl=e.ssl??Ky;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<p7)throw new it($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jw(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new it($e.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new it($e.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new it($e.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,o){return n.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lp{constructor(e,t,n,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new it($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new it($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Dk;switch(n.type){case"firstParty":return new qk(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new it($e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=Gy.get(t);n&&(ct("ComponentProvider","Removing Datastore"),Gy.delete(t),n.terminate())})(this),Promise.resolve()}}function D8(r,e,t,n={}){var d;r=Kc(r,Lp);const o=id(e),a=r._getSettings(),c={...a,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${t}`;o&&(_v(`https://${u}`),Tv("Firestore",!0)),a.host!==Ew&&a.host!==u&&Yu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:u,ssl:o,emulatorOptions:n};if(!$c(f,c)&&(r._setSettings(f),n.mockUserToken)){let g,w;if(typeof n.mockUserToken=="string")g=n.mockUserToken,w=so.MOCK_USER;else{g=XT(n.mockUserToken,(d=r._app)==null?void 0:d.options.projectId);const C=n.mockUserToken.sub||n.mockUserToken.user_id;if(!C)throw new it($e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new so(C)}r._authCredentials=new Wk(new xb(g,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new nu(this.firestore,e,this._query)}}class ai{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ai(this.firestore,e,this._key)}toJSON(){return{type:ai._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(wh(t,ai._jsonSchema))return new ai(e,n||null,new Et(tn.fromString(t.referencePath)))}}ai._jsonSchemaVersion="firestore/documentReference/1.0",ai._jsonSchema={type:ei("string",ai._jsonSchemaVersion),referencePath:ei("string")};class nc extends nu{constructor(e,t,n){super(e,t,zb(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ai(this.firestore,null,new Et(e))}withConverter(e){return new nc(this.firestore,e,this._path)}}function Ch(r,e,...t){if(r=Ci(r),vb("collection","path",e),r instanceof Lp){const n=tn.fromString(e,...t);return ly(n),new nc(r,null,n)}{if(!(r instanceof ai||r instanceof nc))throw new it($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(tn.fromString(e,...t));return ly(n),new nc(r.firestore,null,n)}}function hd(r,e,...t){if(r=Ci(r),arguments.length===1&&(e=xg.newId()),vb("doc","path",e),r instanceof Lp){const n=tn.fromString(e,...t);return ay(n),new ai(r,null,new Et(n))}{if(!(r instanceof ai||r instanceof nc))throw new it($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(tn.fromString(e,...t));return ay(n),new ai(r.firestore,r instanceof nc?r.converter:null,new Et(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="AsyncQueue";class Qy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dw(this,"async_queue_retry"),this._c=()=>{const n=l0();n&&ct(Yy,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=l0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=l0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new rc;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!cd(e))throw e;ct(Yy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,pl("INTERNAL UNHANDLED ERROR: ",Xy(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=zg.createAndSchedule(this,e,t,n,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&qt(47125,{Pc:Xy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Xy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class kh extends Lp{constructor(e,t,n,o){super(e,t,n,o),this.type="firestore",this._queue=new Qy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qy(e),this._firestoreClient=void 0,await e}}}function W8(r,e){const t=typeof r=="object"?r:jv(),n=typeof r=="string"?r:ip,o=lg(t,"firestore").getImmediate({identifier:n});if(!o._initialized){const a=YT("firestore");a&&D8(o,...a)}return o}function Iw(r){if(r._terminated)throw new it($e.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||$8(r),r._firestoreClient}function $8(r){var n,o,a;const e=r._freezeSettings(),t=(function(u,f,d,g){return new lj(u,f,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,jw(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(r._databaseId,((n=r._app)==null?void 0:n.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new F8(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(u){const f=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(f),_online:f}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Es(Mi.fromBase64String(e))}catch(t){throw new it($e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Es(Mi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Es._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wh(e,Es._jsonSchema))return Es.fromBase64String(e.bytes)}}Es._jsonSchemaVersion="firestore/bytes/1.0",Es._jsonSchema={type:ei("string",Es._jsonSchemaVersion),bytes:ei("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new it($e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new it($e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new it($e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mr(this._lat,e._lat)||mr(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pa._jsonSchemaVersion}}static fromJSON(e){if(wh(e,Pa._jsonSchema))return new Pa(e.latitude,e.longitude)}}Pa._jsonSchemaVersion="firestore/geoPoint/1.0",Pa._jsonSchema={type:ei("string",Pa._jsonSchemaVersion),latitude:ei("number"),longitude:ei("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,o){if(n.length!==o.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Na._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wh(e,Na._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Na(e.vectorValues);throw new it($e.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Na._jsonSchemaVersion="firestore/vectorValue/1.0",Na._jsonSchema={type:ei("string",Na._jsonSchemaVersion),vectorValues:ei("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U8=/^__.*__$/;class q8{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new pc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sh(e,this.data,t,this.fieldTransforms)}}class Rw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new pc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Pw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qt(40011,{Ac:r})}}class Wg{constructor(e,t,n,o,a,c){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Pw(this.Ac)&&U8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class H8{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Rp(e)}Cc(e,t,n,o=!1){return new Wg({Ac:e,methodName:t,Dc:n,path:Vi.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $g(r){const e=r._freezeSettings(),t=Rp(r._databaseId);return new H8(r._databaseId,!!e.ignoreUndefinedProperties,t)}function G8(r,e,t,n,o,a={}){const c=r.Cc(a.merge||a.mergeFields?2:0,e,t,o);qg("Data must be an object, but it was:",c,n);const u=Nw(n,c);let f,d;if(a.merge)f=new ls(c.fieldMask),d=c.fieldTransforms;else if(a.mergeFields){const g=[];for(const w of a.mergeFields){const C=J0(e,w,t);if(!c.contains(C))throw new it($e.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);Bw(g,C)||g.push(C)}f=new ls(g),d=c.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,d=c.fieldTransforms;return new q8(new Do(u),f,d)}class zp extends Fp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zp}}class Ug extends Fp{_toFieldTransform(e){return new Lj(e.path,new uh)}isEqual(e){return e instanceof Ug}}function K8(r,e,t,n){const o=r.Cc(1,e,t);qg("Data must be an object, but it was:",o,n);const a=[],c=Do.empty();fc(n,((f,d)=>{const g=Hg(e,f,t);d=Ci(d);const w=o.yc(g);if(d instanceof zp)a.push(g);else{const C=jh(d,w);C!=null&&(a.push(g),c.set(g,C))}}));const u=new ls(a);return new Rw(c,u,o.fieldTransforms)}function J8(r,e,t,n,o,a){const c=r.Cc(1,e,t),u=[J0(e,n,t)],f=[o];if(a.length%2!=0)throw new it($e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<a.length;C+=2)u.push(J0(e,a[C])),f.push(a[C+1]);const d=[],g=Do.empty();for(let C=u.length-1;C>=0;--C)if(!Bw(d,u[C])){const b=u[C];let V=f[C];V=Ci(V);const R=c.yc(b);if(V instanceof zp)d.push(b);else{const z=jh(V,R);z!=null&&(d.push(b),g.set(b,z))}}const w=new ls(d);return new Rw(g,w,c.fieldTransforms)}function Y8(r,e,t,n=!1){return jh(t,r.Cc(n?4:3,e))}function jh(r,e){if(Lw(r=Ci(r)))return qg("Unsupported field value:",e,r),Nw(r,e);if(r instanceof Fp)return(function(n,o){if(!Pw(o.Ac))throw o.Sc(`${n._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,o){const a=[];let c=0;for(const u of n){let f=jh(u,o.wc(c));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),c++}return{arrayValue:{values:a}}})(r,e)}return(function(n,o){if((n=Ci(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Rj(o.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=nn.fromDate(n);return{timestampValue:lp(o.serializer,a)}}if(n instanceof nn){const a=new nn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:lp(o.serializer,a)}}if(n instanceof Pa)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Es)return{bytesValue:ew(o.serializer,n._byteString)};if(n instanceof ai){const a=o.databaseId,c=n.firestore._databaseId;if(!c.isEqual(a))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:jg(n.firestore._databaseId||o.databaseId,n._key.path)}}if(n instanceof Na)return(function(c,u){return{mapValue:{fields:{[jb]:{stringValue:Eb},[op]:{arrayValue:{values:c.toArray().map((d=>{if(typeof d!="number")throw u.Sc("VectorValues must only contain numeric values.");return Tg(u.serializer,d)}))}}}}}})(n,o);throw o.Sc(`Unsupported field value: ${Sp(n)}`)})(r,e)}function Nw(r,e){const t={};return Sb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fc(r,((n,o)=>{const a=jh(o,e.mc(n));a!=null&&(t[n]=a)})),{mapValue:{fields:t}}}function Lw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof nn||r instanceof Pa||r instanceof Es||r instanceof ai||r instanceof Fp||r instanceof Na)}function qg(r,e,t){if(!Lw(t)||!bb(t)){const n=Sp(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function J0(r,e,t){if((e=Ci(e))instanceof Bp)return e._internalPath;if(typeof e=="string")return Hg(r,e);throw hp("Field path arguments must be of type string or ",r,!1,void 0,t)}const Q8=new RegExp("[~\\*/\\[\\]]");function Hg(r,e,t){if(e.search(Q8)>=0)throw hp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Bp(...e.split("."))._internalPath}catch{throw hp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function hp(r,e,t,n,o){const a=n&&!n.isEmpty(),c=o!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(a||c)&&(f+=" (found",a&&(f+=` in field ${n}`),c&&(f+=` in document ${o}`),f+=")"),new it($e.INVALID_ARGUMENT,u+r+f)}function Bw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t,n,o,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ai(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new X8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Op("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class X8 extends Fw{data(){return super.data()}}function Op(r,e){return typeof e=="string"?Hg(r,e):e instanceof Bp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new it($e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gg{}class zw extends Gg{}function Ow(r,e,...t){let n=[];e instanceof Gg&&n.push(e),n=n.concat(t),(function(a){const c=a.filter((f=>f instanceof Kg)).length,u=a.filter((f=>f instanceof Vp)).length;if(c>1||c>0&&u>0)throw new it($e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const o of n)r=o._apply(r);return r}class Vp extends zw{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Vp(e,t,n)}_apply(e){const t=this._parse(e);return Vw(e._query,t),new nu(e.firestore,e.converter,O0(e._query,t))}_parse(e){const t=$g(e.firestore);return(function(a,c,u,f,d,g,w){let C;if(d.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new it($e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){ex(w,g);const V=[];for(const R of w)V.push(Zy(f,a,R));C={arrayValue:{values:V}}}else C=Zy(f,a,w)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||ex(w,g),C=Y8(u,c,w,g==="in"||g==="not-in");return Zn.create(d,g,C)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function eE(r,e,t){const n=e,o=Op("where",r);return Vp._create(o,n,t)}class Kg extends Gg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Kg(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:ia.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let c=o;const u=a.getFlattenedFilters();for(const f of u)Vw(c,f),c=O0(c,f)})(e._query,t),new nu(e.firestore,e.converter,O0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jg extends zw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Jg(e,t)}_apply(e){const t=(function(o,a,c){if(o.startAt!==null)throw new it($e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new it($e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ch(a,c)})(e._query,this._field,this._direction);return new nu(e.firestore,e.converter,(function(o,a){const c=o.explicitOrderBy.concat([a]);return new ud(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function tE(r,e="asc"){const t=e,n=Op("orderBy",r);return Jg._create(n,t)}function Zy(r,e,t){if(typeof(t=Ci(t))=="string"){if(t==="")throw new it($e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ob(e)&&t.indexOf("/")!==-1)throw new it($e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(tn.fromString(t));if(!Et.isDocumentKey(n))throw new it($e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return gy(r,new Et(n))}if(t instanceof ai)return gy(r,t._key);throw new it($e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sp(t)}.`)}function ex(r,e){if(!Array.isArray(r)||r.length===0)throw new it($e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Vw(r,e){const t=(function(o,a){for(const c of o)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new it($e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new it($e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class rE{convertValue(e,t="none"){switch(lc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ac(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw qt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return fc(e,((o,a)=>{n[o]=this.convertValue(a,t)})),n}convertVectorValue(e){var n,o,a;const t=(a=(o=(n=e.fields)==null?void 0:n[op].arrayValue)==null?void 0:o.values)==null?void 0:a.map((c=>Dn(c.doubleValue)));return new Na(t)}convertGeoPoint(e){return new Pa(Dn(e.latitude),Dn(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ap(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(sh(e));default:return null}}convertTimestamp(e){const t=sc(e);return new nn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=tn.fromString(e);Lr(sw(n),9688,{name:e});const o=new ah(n.get(1),n.get(3)),a=new Et(n.popFirst(5));return o.isEqual(t)||pl(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(r,e,t){let n;return n=r?r.toFirestore(e):e,n}class kf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gu extends Fw{constructor(e,t,n,o,a,c){super(e,t,n,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $f(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Op("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new it($e.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Gu._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Gu._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gu._jsonSchema={type:ei("string",Gu._jsonSchemaVersion),bundleSource:ei("string","DocumentSnapshot"),bundleName:ei("string"),bundle:ei("string")};class $f extends Gu{data(e={}){return super.data(e)}}class Ku{constructor(e,t,n,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new kf(o.hasPendingWrites,o.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new $f(this._firestore,this._userDataWriter,n.key,n,new kf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new it($e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((u=>{const f=new $f(o._firestore,o._userDataWriter,u.doc.key,u.doc,new kf(o._snapshot.mutatedKeys.has(u.doc.key),o._snapshot.fromCache),o.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((u=>a||u.type!==3)).map((u=>{const f=new $f(o._firestore,o._userDataWriter,u.doc.key,u.doc,new kf(o._snapshot.mutatedKeys.has(u.doc.key),o._snapshot.fromCache),o.query.converter);let d=-1,g=-1;return u.type!==0&&(d=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:iE(u.type),doc:f,oldIndex:d,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new it($e.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ku._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iE(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qt(61501,{type:r})}}Ku._jsonSchemaVersion="firestore/querySnapshot/1.0",Ku._jsonSchema={type:ei("string",Ku._jsonSchemaVersion),bundleSource:ei("string","QuerySnapshot"),bundleName:ei("string"),bundle:ei("string")};class oE extends rE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Es(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ai(this.firestore,null,t)}}function Mw(r){r=Kc(r,nu);const e=Kc(r.firestore,kh),t=Iw(e),n=new oE(e);return Z8(r._query),M8(t,r._query).then((o=>new Ku(e,n,r,o)))}function Dw(r,e,t,...n){r=Kc(r,ai);const o=Kc(r.firestore,kh),a=$g(o);let c;return c=typeof(e=Ci(e))=="string"||e instanceof Bp?J8(a,"updateDoc",r._key,e,t,n):K8(a,"updateDoc",r._key,e),Qg(o,[c.toMutation(r._key,ta.exists(!0))])}function Ww(r){return Qg(Kc(r.firestore,kh),[new Ag(r._key,ta.none())])}function Yg(r,e){const t=Kc(r.firestore,kh),n=hd(r),o=nE(r.converter,e);return Qg(t,[G8($g(r.firestore),"addDoc",n._key,o,r.converter!==null,{}).toMutation(n._key,ta.exists(!1))]).then((()=>n))}function Qg(r,e){return(function(n,o){const a=new rc;return n.asyncQueue.enqueueAndForget((async()=>C8(await O8(n),o,a))),a.promise})(Iw(r),e)}function rd(){return new Ug("serverTimestamp")}(function(e,t=!0){(function(o){ad=o})(od),Ju(new Uc("firestore",((n,{instanceIdentifier:o,options:a})=>{const c=n.getProvider("app").getImmediate(),u=new kh(new $k(n.getProvider("auth-internal")),new Hk(c,n.getProvider("app-check-internal")),(function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new it($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ah(d.options.projectId,g)})(c,o),c);return a={useFetchStreams:t,...a},u._setSettings(a),u}),"PUBLIC").setMultipleInstances(!0)),ec(ny,iy,e),ec(ny,iy,"esm2020")})();const sE={apiKey:"AIzaSyCyIga2EWsEZLqApS633i9uRIy5p745EJg",authDomain:"electrician-toolkit-33497.firebaseapp.com",projectId:"electrician-toolkit-33497",storageBucket:"electrician-toolkit-33497.firebasestorage.app",messagingSenderId:"878846360709",appId:"1:878846360709:web:af750d7f4d2a9495b17dec",measurementId:"G-JWZ1TDP25R"},$w=kv(sE),ti=Vk($w),yl=W8($w),iu=async()=>{var r;try{const e=(r=ti.currentUser)==null?void 0:r.uid;if(!e)throw new Error("User not authenticated");const t=Ch(yl,"users",e,"jobs"),n=Ow(t,tE("createdAt","desc"));return(await Mw(n)).docs.map(a=>({id:a.id,...a.data()}))}catch(e){throw console.error("Error fetching jobs:",e),e}},Eh=async(r,e)=>{var t;try{const n=(t=ti.currentUser)==null?void 0:t.uid;if(!n)throw new Error("User not authenticated");const o=hd(yl,"users",n,"jobs",r),a=Ch(o,"calculations"),c={...e,createdAt:rd()};return(await Yg(a,c)).id}catch(n){throw console.error("Error adding calculation:",n),n}},Y0=async r=>{var e;try{console.log(" Starting createJob..."),console.log("auth:",ti),console.log("auth.currentUser:",ti.currentUser);const t=(e=ti.currentUser)==null?void 0:e.uid;if(console.log("userId extracted:",t),!t)throw console.error(" No userId - auth.currentUser is:",ti.currentUser),new Error("User not authenticated");console.log(" User authenticated with ID:",t);const n=Ch(yl,"users",t,"jobs"),o={...r,createdAt:rd(),status:r.status||"active"};console.log(" Attempting to save job:",o);const a=await Yg(n,o);return console.log(" Job created with ID:",a.id),a.id}catch(t){throw console.error(" Error in createJob:",t),t}},Uw=async r=>{var e;try{const t=(e=ti.currentUser)==null?void 0:e.uid;if(!t)throw new Error("User not authenticated");const n=hd(yl,"users",t,"jobs",r);await Ww(n)}catch(t){throw console.error("Error deleting job:",t),t}},aE=async(r,e)=>{var t;try{const n=(t=ti.currentUser)==null?void 0:t.uid;if(!n)throw new Error("User not authenticated");const o=hd(yl,"users",n,"jobs",r);await Dw(o,{...e,updatedAt:rd()})}catch(n){throw console.error("Error updating job:",n),n}},tx=Object.freeze(Object.defineProperty({__proto__:null,addCalculationToJob:Eh,createJob:Y0,deleteJob:Uw,getUserJobs:iu,updateJob:aE},Symbol.toStringTag,{value:"Module"})),lE=pe.forwardRef(({isDarkMode:r=!1,onExportSuccess:e},t)=>{const[n,o]=pe.useState(""),[a,c]=pe.useState(""),[u,f]=pe.useState(""),[d,g]=pe.useState("12"),[w,C]=pe.useState("single"),[b,V]=pe.useState("copper"),[R,z]=pe.useState("1.0"),[j,U]=pe.useState(!1),[H,B]=pe.useState([]),[re,ce]=pe.useState(!1),N={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},A={14:4110,12:6530,10:10380,8:16510,6:26240,4:41740,3:52620,2:66360,1:83690,"1/0":105600,"2/0":133100,"3/0":167800,"4/0":211600,250:25e4,300:3e5,350:35e4,400:4e5,500:5e5,600:6e5,750:75e4,1e3:1e6},T={copper:{dc:10.8,ac:12.9},aluminum:{dc:17.4,ac:21.2}},k=(()=>{if(!n||!a||!u)return{drop:"0.00",percentage:"0.00",excessive:!1};const $=parseFloat(n),oe=parseFloat(a),se=parseFloat(u),ie=A[d],ye=parseFloat(R),xe=T[b].ac;let ee;w==="single"?ee=2*xe*oe*se*ye/ie:ee=1.732*xe*oe*se*ye/ie;const D=ee/$*100,q=D>3;return{drop:ee.toFixed(2),percentage:D.toFixed(2),excessive:q}})(),v=async()=>{U(!0),ce(!0);try{const $=await iu();B($)}catch($){console.error("Error loading jobs:",$),alert("Failed to load jobs. Please try again.")}finally{ce(!1)}},L=async $=>{try{const oe={type:"voltage-drop",data:{voltage:parseFloat(n),current:parseFloat(a),distance:parseFloat(u),wireSize:d,phaseType:w,conductorType:b,powerFactor:parseFloat(R),results:{voltageDrop:k.drop,percentageDrop:k.percentage,excessive:k.excessive}}};await Eh($,oe),U(!1),alert("Calculation attached to job successfully!")}catch(oe){console.error("Error attaching calculation:",oe),alert("Failed to attach calculation. Please try again.")}},M=()=>{if(!n||!a||!u){alert("Please enter all required values before exporting to PDF");return}const $={calculatorName:"Voltage Drop Calculator",inputs:{systemType:w==="single"?"Single Phase":"Three Phase",conductorMaterial:b.charAt(0).toUpperCase()+b.slice(1),systemVoltage:`${n} V`,loadCurrent:`${a} A`,oneWayDistance:`${u} ft`,wireSize:d.includes("/")?`${d} AWG`:`${d} ${parseInt(d)<=4?"AWG":"kcmil"}`,powerFactor:R},results:{voltageDrop:`${k.drop} V`,percentageDrop:`${k.percentage}%`,necCompliant:k.excessive?"NO - Exceeds 3% limit":"YES - Within 3% limit",status:k.excessive?" WARNING: Exceeds NEC 3% Limit":" Within NEC limits"},additionalInfo:{formula:w==="single"?"2  K  I  L  PF  CM":"1.732  K  I  L  PF  CM",kConstant:`${T[b].ac} (${b} AC)`,circularMils:A[d].toLocaleString(),powerFactorUsed:R,systemConfiguration:w==="single"?"Single phase":"Three phase"},necReferences:["NEC Guidelines: Branch circuits - 3% max","Feeders - 3% max","Combined branch circuit and feeder - 5% max","Note: Excessive voltage drop can cause equipment malfunction and reduced efficiency"]};pn($),e&&e()};return pe.useImperativeHandle(t,()=>({exportPDF:M})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:N.cardBg,border:`1px solid ${N.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:N.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${N.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:N.labelText,marginBottom:"0.5rem"},children:"System Type"}),i.jsxs("select",{value:w,onChange:$=>C($.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${N.inputBorder}`,borderRadius:"8px",backgroundColor:N.inputBg,color:N.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:N.labelText,marginBottom:"0.5rem"},children:"Conductor Material"}),i.jsxs("select",{value:b,onChange:$=>V($.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${N.inputBorder}`,borderRadius:"8px",backgroundColor:N.inputBg,color:N.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:N.labelText,marginBottom:"0.5rem"},children:"System Voltage (V)"}),i.jsx("input",{type:"number",value:n,onChange:$=>o($.target.value),placeholder:"120, 240, 480",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${N.inputBorder}`,borderRadius:"8px",backgroundColor:N.inputBg,color:N.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:N.labelText,marginBottom:"0.5rem"},children:"Load Current (Amps)"}),i.jsx("input",{type:"number",value:a,onChange:$=>c($.target.value),placeholder:"15, 20, 30",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${N.inputBorder}`,borderRadius:"8px",backgroundColor:N.inputBg,color:N.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:N.labelText,marginBottom:"0.5rem"},children:"One-Way Distance (feet)"}),i.jsx("input",{type:"number",value:u,onChange:$=>f($.target.value),placeholder:"100, 200, 500",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${N.inputBorder}`,borderRadius:"8px",backgroundColor:N.inputBg,color:N.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:N.labelText,marginBottom:"0.5rem"},children:"Wire Size (AWG/kcmil)"}),i.jsxs("select",{value:d,onChange:$=>g($.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${N.inputBorder}`,borderRadius:"8px",backgroundColor:N.inputBg,color:N.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"14",children:"14 AWG"}),i.jsx("option",{value:"12",children:"12 AWG"}),i.jsx("option",{value:"10",children:"10 AWG"}),i.jsx("option",{value:"8",children:"8 AWG"}),i.jsx("option",{value:"6",children:"6 AWG"}),i.jsx("option",{value:"4",children:"4 AWG"}),i.jsx("option",{value:"3",children:"3 AWG"}),i.jsx("option",{value:"2",children:"2 AWG"}),i.jsx("option",{value:"1",children:"1 AWG"}),i.jsx("option",{value:"1/0",children:"1/0 AWG"}),i.jsx("option",{value:"2/0",children:"2/0 AWG"}),i.jsx("option",{value:"3/0",children:"3/0 AWG"}),i.jsx("option",{value:"4/0",children:"4/0 AWG"}),i.jsx("option",{value:"250",children:"250 kcmil"}),i.jsx("option",{value:"300",children:"300 kcmil"}),i.jsx("option",{value:"350",children:"350 kcmil"}),i.jsx("option",{value:"400",children:"400 kcmil"}),i.jsx("option",{value:"500",children:"500 kcmil"}),i.jsx("option",{value:"600",children:"600 kcmil"}),i.jsx("option",{value:"750",children:"750 kcmil"}),i.jsx("option",{value:"1000",children:"1000 kcmil"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:N.labelText,marginBottom:"0.5rem"},children:"Power Factor (AC loads)"}),i.jsxs("select",{value:R,onChange:$=>z($.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${N.inputBorder}`,borderRadius:"8px",backgroundColor:N.inputBg,color:N.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"1.0",children:"1.0 (Resistive loads)"}),i.jsx("option",{value:"0.9",children:"0.9 (Most motors)"}),i.jsx("option",{value:"0.85",children:"0.85 (Typical mixed load)"}),i.jsx("option",{value:"0.8",children:"0.8 (Poor power factor)"})]})]})]})]}),n&&a&&u&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:N.cardBg,border:`1px solid ${N.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:N.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:N.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:N.labelText,marginBottom:"0.25rem"},children:"Voltage Drop"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:N.cardText},children:k.drop}),i.jsx("div",{style:{fontSize:"0.75rem",color:N.labelText,marginTop:"0.25rem"},children:"Volts"})]}),i.jsxs("div",{style:{background:k.excessive?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:k.excessive?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Percentage Drop"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:k.excessive?"#dc2626":"#1e40af"},children:[k.percentage,"%"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:k.excessive?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:"Max: 3%"})]})]}),i.jsxs("div",{style:{background:N.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${N.cardBorder}`},children:[i.jsx("strong",{style:{color:N.cardText,display:"block",marginBottom:"0.5rem",fontSize:"0.875rem"},children:"Calculation Details:"}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:N.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Formula: ",w==="single"?"2":"1.732","  K  I  L  PF  CM"]}),i.jsxs("div",{children:["K constant (",b,"): ",T[b].ac]}),i.jsxs("div",{children:["Circular mils: ",A[d].toLocaleString()]}),i.jsxs("div",{children:["Power factor: ",R]}),i.jsxs("div",{children:["System: ",w==="single"?"Single":"Three"," phase"]})]})]})]}),k.excessive?i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Qc,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem",fontSize:"0.9375rem"},children:"WARNING: Exceeds NEC 3% Limit"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Consider using larger wire size to reduce voltage drop. Excessive voltage drop can cause equipment malfunction and reduced efficiency."})]})]})}):i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Voltage drop is within NEC limits"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"This circuit meets the NEC recommended 3% maximum voltage drop for branch circuits."})]})]})}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsxs("button",{onClick:M,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:$=>$.currentTarget.style.background="#2563eb",onMouseOut:$=>$.currentTarget.style.background="#3b82f6",children:[i.jsx(pp,{size:18}),"Export to PDF"]}),i.jsxs("button",{onClick:v,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:$=>$.currentTarget.style.background="#059669",onMouseOut:$=>$.currentTarget.style.background="#10b981",children:[i.jsx(Yc,{size:18}),"Attach to Job"]})]})]}),i.jsxs("div",{style:{background:N.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${N.cardBorder}`,fontSize:"0.8125rem",color:N.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:N.cardText},children:"NEC Guidelines:"}),"Branch circuits: 3% max  Feeders: 3% max  Combined: 5% max"]}),j&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:i.jsxs("div",{style:{background:N.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[i.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:N.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),i.jsx("div",{style:{marginBottom:"1rem"},children:re?i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:N.labelText},children:"Loading jobs..."}):H&&H.length>0?H.map($=>i.jsxs("div",{onClick:()=>L($.id),style:{padding:"1rem",background:N.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${N.cardBorder}`,transition:"all 0.2s"},onMouseOver:oe=>oe.currentTarget.style.transform="translateY(-2px)",onMouseOut:oe=>oe.currentTarget.style.transform="translateY(0)",children:[i.jsx("div",{style:{fontWeight:"600",color:N.cardText,marginBottom:"0.25rem"},children:$.name}),i.jsx("div",{style:{fontSize:"0.875rem",color:N.labelText},children:$.location||"No location"})]},$.id)):i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:N.labelText},children:i.jsx("p",{children:"No jobs found. Create a job first."})})}),i.jsx("button",{onClick:()=>U(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:$=>$.currentTarget.style.background="#4b5563",onMouseOut:$=>$.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})}),cE=({isDarkMode:r,colors:e,onExport:t})=>{const[n,o]=pe.useState(""),[a,c]=pe.useState(""),[u,f]=pe.useState(""),[d,g]=pe.useState(""),[w,C]=pe.useState({V:"",I:"",R:"",P:""}),[b,V]=pe.useState(!1),[R,z]=pe.useState([]),[j,U]=pe.useState(!1);pe.useEffect(()=>{H()},[n,a,u,d]);const H=()=>{const A=parseFloat(n)||0,T=parseFloat(a)||0,F=parseFloat(u)||0,k=parseFloat(d)||0,v={V:"",I:"",R:"",P:""};!n&&T&&F?v.V=(T*F).toFixed(1):!n&&k&&T&&T!==0?v.V=(k/T).toFixed(1):!n&&k&&F?v.V=Math.sqrt(k*F).toFixed(1):n&&(v.V=A.toFixed(1)),!a&&A&&F&&F!==0?v.I=(A/F).toFixed(1):!a&&k&&A&&A!==0?v.I=(k/A).toFixed(1):!a&&k&&F&&F!==0?v.I=Math.sqrt(k/F).toFixed(1):a&&(v.I=T.toFixed(1)),!u&&A&&T&&T!==0?v.R=(A/T).toFixed(1):!u&&A&&k&&k!==0?v.R=(A*A/k).toFixed(1):!u&&k&&T&&T!==0?v.R=(k/(T*T)).toFixed(1):u&&(v.R=F.toFixed(1)),!d&&A&&T?v.P=(A*T).toFixed(1):!d&&T&&F?v.P=(T*T*F).toFixed(1):!d&&A&&F&&F!==0?v.P=(A*A/F).toFixed(1):d&&(v.P=k.toFixed(1)),C(v)},B=()=>{o(""),c(""),f(""),g(""),C({V:"",I:"",R:"",P:""})},re=async()=>{V(!0),U(!0);try{const A=await iu();z(A)}catch(A){console.error("Error loading jobs:",A),alert("Failed to load jobs. Please try again.")}finally{U(!1)}},ce=async A=>{try{const T={type:"ohms-law-basic",data:{voltage:parseFloat(n)||parseFloat(w.V)||0,current:parseFloat(a)||parseFloat(w.I)||0,resistance:parseFloat(u)||parseFloat(w.R)||0,power:parseFloat(d)||parseFloat(w.P)||0}};await Eh(A,T),V(!1),alert("Calculation attached to job successfully!")}catch(T){console.error("Error attaching calculation:",T),alert("Failed to attach calculation. Please try again.")}},N=()=>{if(!(n||a||u||d||w.V||w.I||w.R||w.P)){alert("Please enter at least 2 values before exporting");return}const T={},F={};n&&(T.voltage=`${n} V`),a&&(T.current=`${a} A`),u&&(T.resistance=`${u} `),d&&(T.power=`${d} W`),w.V&&(F.voltage=`${w.V} V`),w.I&&(F.current=`${w.I} A`),w.R&&(F.resistance=`${w.R} `),w.P&&(F.power=`${w.P} W`),t({calculatorName:"Ohm's Law Calculator - Basic",inputs:T,results:F,additionalInfo:{note:"Calculations based on fundamental electrical formulas"},necReferences:["Ohm's Law: E = I  R","Power formulas: P = E  I, P = I  R, P = E  R","Current: I = E  R, I = P  E, I = (P  R)","Resistance: R = E  I, R = E  P, R = P  I"]})};return i.jsxs("div",{children:[i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:"Enter any 2 known values to calculate the remaining values"})]})}),i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Volts (E)"}),i.jsx("input",{type:"number",value:n||w.V,onChange:A=>o(A.target.value),placeholder:"Enter voltage",disabled:a&&u||a&&d||u&&d,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:a&&u||a&&d||u&&d?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:a&&u||a&&d||u&&d?"not-allowed":"text"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Amps (I)"}),i.jsx("input",{type:"number",value:a||w.I,onChange:A=>c(A.target.value),placeholder:"Enter current",disabled:n&&u||n&&d||u&&d,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&u||n&&d||u&&d?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&u||n&&d||u&&d?"not-allowed":"text"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Ohms (R)"}),i.jsx("input",{type:"number",value:u||w.R,onChange:A=>f(A.target.value),placeholder:"Enter resistance",disabled:n&&a||n&&d||a&&d,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&a||n&&d||a&&d?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&a||n&&d||a&&d?"not-allowed":"text"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Watts (P)"}),i.jsx("input",{type:"number",value:d||w.P,onChange:A=>g(A.target.value),placeholder:"Enter power",disabled:n&&a||n&&u||a&&u,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&a||n&&u||a&&u?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&a||n&&u||a&&u?"not-allowed":"text"}})]})]}),i.jsx("button",{onClick:B,style:{width:"100%",background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),(w.V||w.I||w.R||w.P)&&i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[w.V&&i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:w.V}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Volts"})]}),w.I&&i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Current"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:w.I}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),w.R&&i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:w.R}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Ohms"})]}),w.P&&i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Power"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:w.P}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Watts"})]})]})]}),(n||a||u||d)&&i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[i.jsxs("button",{onClick:N,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:A=>A.currentTarget.style.background="#2563eb",onMouseOut:A=>A.currentTarget.style.background="#3b82f6",children:[i.jsx(pp,{size:18}),"Export to PDF"]}),i.jsxs("button",{onClick:re,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:A=>A.currentTarget.style.background="#059669",onMouseOut:A=>A.currentTarget.style.background="#10b981",children:[i.jsx(Yc,{size:18}),"Attach to Job"]})]}),b&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:i.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[i.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),i.jsx("div",{style:{marginBottom:"1rem"},children:j?i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):R&&R.length>0?R.map(A=>i.jsxs("div",{onClick:()=>ce(A.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:T=>T.currentTarget.style.transform="translateY(-2px)",onMouseOut:T=>T.currentTarget.style.transform="translateY(0)",children:[i.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:A.name}),i.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:A.location||"No location"})]},A.id)):i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:i.jsx("p",{children:"No jobs found. Create a job first."})})}),i.jsx("button",{onClick:()=>V(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:A=>A.currentTarget.style.background="#4b5563",onMouseOut:A=>A.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},uE=({isDarkMode:r,colors:e,onExport:t})=>{const[n,o]=pe.useState([{id:1,R:"",V:"",I:"",P:""}]),[a,c]=pe.useState({R:"",V:"",I:"",P:""}),[u,f]=pe.useState(!1),[d,g]=pe.useState([]),[w,C]=pe.useState(!1),b=(T,F)=>Object.entries(T).filter(([v,L])=>v!==F&&L&&L!=="").map(([v])=>v).length>=2,V=()=>{const T=Math.max(...n.map(F=>F.id),0)+1;o([...n,{id:T,R:"",V:"",I:"",P:""}])},R=T=>{n.length>1&&o(n.filter(F=>F.id!==T))},z=(T,F,k)=>{o(n.map(v=>v.id===T?{...v,[F]:k}:v))},j=(T,F)=>{const k=[];if(F.I&&F.I!==""){const v=parseFloat(F.I);T.forEach((L,M)=>{if(L.I&&L.I!==""){const $=parseFloat(L.I);Math.abs($-v)>.01&&k.push(`Total current (${v}A) conflicts with Component ${M+1} current (${$}A)`)}})}return k},U=()=>{const T=j(n,a);if(T.length>0){alert(`Conflicts detected:
`+T.join(`
`));return}let F=[...n];if(a.I&&a.I!==""){const M=parseFloat(a.I);F=F.map($=>!$.I||$.I===""?{...$,I:M.toFixed(1)}:$)}let k=!0,v=0;const L=50;for(;k&&v<L;){k=!1,v++;let M=null;for(let $ of F)if($.I&&!isNaN(parseFloat($.I))){M=parseFloat($.I);break}if(M===null)for(let $ of F){const oe=parseFloat($.V),se=parseFloat($.R),ie=parseFloat($.P);if(!isNaN(oe)&&!isNaN(se)&&se!==0){M=oe/se;break}else if(!isNaN(ie)&&!isNaN(oe)&&oe!==0){M=ie/oe;break}else if(!isNaN(ie)&&!isNaN(se)&&se!==0){M=Math.sqrt(ie/se);break}}M!==null&&(F=F.map($=>!$.I||$.I===""?(k=!0,{...$,I:M.toFixed(1)}):$)),F=F.map($=>{const oe={...$},se=parseFloat($.V),ie=parseFloat($.I),ye=parseFloat($.R),xe=parseFloat($.P);($.R===""||isNaN(ye))&&!isNaN(se)&&!isNaN(ie)&&ie!==0?(oe.R=(se/ie).toFixed(1),k=!0):($.R===""||isNaN(ye))&&!isNaN(xe)&&!isNaN(ie)&&ie!==0?(oe.R=(xe/(ie*ie)).toFixed(1),k=!0):($.R===""||isNaN(ye))&&!isNaN(se)&&!isNaN(xe)&&xe!==0&&(oe.R=(se*se/xe).toFixed(1),k=!0);const ee=parseFloat(oe.R),D=parseFloat(oe.I);($.V===""||isNaN(se))&&!isNaN(D)&&!isNaN(ee)?(oe.V=(D*ee).toFixed(1),k=!0):($.V===""||isNaN(se))&&!isNaN(xe)&&!isNaN(D)&&D!==0?(oe.V=(xe/D).toFixed(1),k=!0):($.V===""||isNaN(se))&&!isNaN(xe)&&!isNaN(ee)&&(oe.V=Math.sqrt(xe*ee).toFixed(1),k=!0);const q=parseFloat(oe.V);return($.P===""||isNaN(xe))&&!isNaN(q)&&!isNaN(D)?(oe.P=(q*D).toFixed(1),k=!0):($.P===""||isNaN(xe))&&!isNaN(D)&&!isNaN(ee)?(oe.P=(D*D*ee).toFixed(1),k=!0):($.P===""||isNaN(xe))&&!isNaN(q)&&!isNaN(ee)&&ee!==0&&(oe.P=(q*q/ee).toFixed(1),k=!0),oe})}o(F)},H=()=>{o([{id:1,R:"",V:"",I:"",P:""}]),c({R:"",V:"",I:"",P:""})},B=()=>{const T=n.reduce((M,$)=>{const oe=parseFloat($.R);return M+(isNaN(oe)?0:oe)},0),F=n.reduce((M,$)=>{const oe=parseFloat($.V);return M+(isNaN(oe)?0:oe)},0),k=n.reduce((M,$)=>{const oe=parseFloat($.P);return M+(isNaN(oe)?0:oe)},0),v=n.find(M=>!isNaN(parseFloat(M.I))),L=v?parseFloat(v.I):0;return{totalR:T,totalV:F,totalI:L,totalP:k}},re=async()=>{f(!0),C(!0);try{const T=await iu();g(T)}catch(T){console.error("Error loading jobs:",T),alert("Failed to load jobs. Please try again.")}finally{C(!1)}},ce=async T=>{try{const F=B();await Eh(T,{type:"ohms-law-series",data:{components:n,totals:F}}),f(!1),alert("Calculation attached to job successfully!")}catch(F){console.error("Error attaching calculation:",F),alert("Failed to attach calculation. Please try again.")}},N=()=>{if(!n.some(L=>L.R||L.V||L.I||L.P)){alert("Please enter component values before exporting");return}const F=B(),k={};n.forEach((L,M)=>{const $=[];L.R&&$.push(`R=${L.R}`),L.V&&$.push(`V=${L.V}V`),L.I&&$.push(`I=${L.I}A`),L.P&&$.push(`P=${L.P}W`),$.length>0&&(k[`component${M+1}`]=$.join(", "))});const v={calculatorName:"Ohm's Law Calculator - Series Circuit",inputs:k,results:{totalResistance:`${F.totalR.toFixed(1)} `,totalVoltage:`${F.totalV.toFixed(1)} V`,current:`${F.totalI.toFixed(1)} A (constant)`,totalPower:`${F.totalP.toFixed(1)} W`},additionalInfo:{circuitType:"Series Circuit",principle:"Current is constant across all components",totalResistanceFormula:"R_total = R1 + R2 + R3 + ...",totalVoltageFormula:"V_total = V1 + V2 + V3 + ..."},necReferences:["Series circuits: Current is the same through all components","Total resistance = Sum of all resistances","Total voltage = Sum of voltage drops across components","Total power = Sum of power dissipated in each component"]};t(v)},A=n.some(T=>T.R||T.V||T.I||T.P);return i.jsxs("div",{children:[i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:"Series Circuit: Current is constant across all components"})]})}),i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${e.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Totals (Optional)"}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"0.5rem"},children:["V","I","R","P"].map(T=>{const F={R:"Ohms (R)",V:"Volts (E)",I:"Amps (I)",P:"Watts (P)"};return i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:F[T]}),i.jsx("input",{type:"number",value:a[T],onChange:k=>c({...a,[T]:k.target.value}),placeholder:"Optional",disabled:b(a,T),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:b(a,T)?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:b(a,T)?"not-allowed":"text"}})]},T)})}),i.jsx("p",{style:{fontSize:"0.8125rem",color:e.subtleText,margin:0,fontStyle:"italic"},children:"Enter known total values to help solve the circuit. Current is constant in series."})]}),n.map((T,F)=>i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${e.cardBorder}`},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",marginBottom:"0.75rem",gap:"0.5rem"},children:[i.jsxs("h4",{style:{fontWeight:"600",color:e.labelText,margin:0,fontSize:"0.875rem"},children:["Component ",F+1]}),n.length>1&&i.jsx("button",{onClick:()=>R(T.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Mc,{size:18})})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem"},children:[{field:"V",label:"Volts (E)"},{field:"I",label:"Amps (I)"},{field:"R",label:"Ohms (R)"},{field:"P",label:"Watts (P)"}].map(({field:k,label:v})=>i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"500",color:e.subtleText,marginBottom:"0.25rem"},children:v}),i.jsx("input",{type:"number",value:T[k],onChange:L=>z(T.id,k,L.target.value),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:e.inputBg,color:e.cardText,boxSizing:"border-box"}})]},k))})]},T.id)),i.jsxs("button",{onClick:V,style:{width:"100%",background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsx(La,{size:16}),"Add Component"]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsxs("button",{onClick:U,style:{flex:1,background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(Zd,{size:20}),"Calculate"]}),i.jsx("button",{onClick:H,style:{flex:1,background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Circuit Totals"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:B().totalV.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"E"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Amperage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:B().totalI.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"I"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:B().totalR.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"R"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Wattage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:B().totalP.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"P"})]})]})]}),A&&i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[i.jsxs("button",{onClick:N,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:T=>T.currentTarget.style.background="#2563eb",onMouseOut:T=>T.currentTarget.style.background="#3b82f6",children:[i.jsx(pp,{size:18}),"Export to PDF"]}),i.jsxs("button",{onClick:re,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:T=>T.currentTarget.style.background="#059669",onMouseOut:T=>T.currentTarget.style.background="#10b981",children:[i.jsx(Yc,{size:18}),"Attach to Job"]})]}),u&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:i.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[i.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),i.jsx("div",{style:{marginBottom:"1rem"},children:w?i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):d&&d.length>0?d.map(T=>i.jsxs("div",{onClick:()=>ce(T.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:F=>F.currentTarget.style.transform="translateY(-2px)",onMouseOut:F=>F.currentTarget.style.transform="translateY(0)",children:[i.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:T.name}),i.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:T.location||"No location"})]},T.id)):i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:i.jsx("p",{children:"No jobs found. Create a job first."})})}),i.jsx("button",{onClick:()=>f(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:T=>T.currentTarget.style.background="#4b5563",onMouseOut:T=>T.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},dE=({isDarkMode:r,colors:e,onExport:t})=>{const[n,o]=pe.useState([{id:1,R:"",V:"",I:"",P:""}]),[a,c]=pe.useState({R:"",V:"",I:"",P:""}),[u,f]=pe.useState(!1),[d,g]=pe.useState([]),[w,C]=pe.useState(!1),b=(T,F)=>Object.entries(T).filter(([v,L])=>v!==F&&L&&L!=="").map(([v])=>v).length>=2,V=()=>{const T=Math.max(...n.map(F=>F.id),0)+1;o([...n,{id:T,R:"",V:"",I:"",P:""}])},R=T=>{n.length>1&&o(n.filter(F=>F.id!==T))},z=(T,F,k)=>{o(n.map(v=>v.id===T?{...v,[F]:k}:v))},j=(T,F)=>{const k=[];if(F.V&&F.V!==""){const v=parseFloat(F.V);T.forEach((L,M)=>{if(L.V&&L.V!==""){const $=parseFloat(L.V);Math.abs($-v)>.01&&k.push(`Total voltage (${v}V) conflicts with Component ${M+1} voltage (${$}V)`)}})}return k},U=()=>{const T=j(n,a);if(T.length>0){alert(`Conflicts detected:
`+T.join(`
`));return}let F=[...n];if(a.V&&a.V!==""){const M=parseFloat(a.V);F=F.map($=>!$.V||$.V===""?{...$,V:M.toFixed(1)}:$)}let k=!0,v=0;const L=50;for(;k&&v<L;){k=!1,v++;let M=null;for(let $ of F)if($.V&&!isNaN(parseFloat($.V))){M=parseFloat($.V);break}if(M===null)for(let $ of F){const oe=parseFloat($.I),se=parseFloat($.R),ie=parseFloat($.P);if(!isNaN(oe)&&!isNaN(se)){M=oe*se;break}else if(!isNaN(ie)&&!isNaN(oe)&&oe!==0){M=ie/oe;break}else if(!isNaN(ie)&&!isNaN(se)){M=Math.sqrt(ie*se);break}}M!==null&&(F=F.map($=>!$.V||$.V===""?(k=!0,{...$,V:M.toFixed(1)}):$)),F=F.map($=>{const oe={...$},se=parseFloat($.V),ie=parseFloat($.I),ye=parseFloat($.R),xe=parseFloat($.P);($.R===""||isNaN(ye))&&!isNaN(se)&&!isNaN(ie)&&ie!==0?(oe.R=(se/ie).toFixed(1),k=!0):($.R===""||isNaN(ye))&&!isNaN(xe)&&!isNaN(ie)&&ie!==0?(oe.R=(xe/(ie*ie)).toFixed(1),k=!0):($.R===""||isNaN(ye))&&!isNaN(se)&&!isNaN(xe)&&xe!==0&&(oe.R=(se*se/xe).toFixed(1),k=!0);const ee=parseFloat(oe.R),D=parseFloat(oe.V);($.I===""||isNaN(ie))&&!isNaN(D)&&!isNaN(ee)&&ee!==0?(oe.I=(D/ee).toFixed(1),k=!0):($.I===""||isNaN(ie))&&!isNaN(xe)&&!isNaN(D)&&D!==0?(oe.I=(xe/D).toFixed(1),k=!0):($.I===""||isNaN(ie))&&!isNaN(xe)&&!isNaN(ee)&&ee!==0&&(oe.I=Math.sqrt(xe/ee).toFixed(1),k=!0);const q=parseFloat(oe.I);return($.P===""||isNaN(xe))&&!isNaN(D)&&!isNaN(q)?(oe.P=(D*q).toFixed(1),k=!0):($.P===""||isNaN(xe))&&!isNaN(q)&&!isNaN(ee)?(oe.P=(q*q*ee).toFixed(1),k=!0):($.P===""||isNaN(xe))&&!isNaN(D)&&!isNaN(ee)&&ee!==0&&(oe.P=(D*D/ee).toFixed(1),k=!0),oe})}o(F)},H=()=>{o([{id:1,R:"",V:"",I:"",P:""}]),c({R:"",V:"",I:"",P:""})},B=()=>{const T=n.reduce(($,oe)=>{const se=parseFloat(oe.I);return $+(isNaN(se)?0:se)},0),F=n.reduce(($,oe)=>{const se=parseFloat(oe.P);return $+(isNaN(se)?0:se)},0),k=n.find($=>!isNaN(parseFloat($.V))),v=k?parseFloat(k.V):0,L=n.map($=>parseFloat($.R)).filter($=>!isNaN($)&&$>0);return{totalR:L.length>0?1/L.reduce(($,oe)=>$+1/oe,0):0,totalV:v,totalI:T,totalP:F}},re=async()=>{f(!0),C(!0);try{const T=await iu();g(T)}catch(T){console.error("Error loading jobs:",T),alert("Failed to load jobs. Please try again.")}finally{C(!1)}},ce=async T=>{try{const F=B();await Eh(T,{type:"ohms-law-parallel",data:{components:n,totals:F}}),f(!1),alert("Calculation attached to job successfully!")}catch(F){console.error("Error attaching calculation:",F),alert("Failed to attach calculation. Please try again.")}},N=()=>{if(!n.some(L=>L.R||L.V||L.I||L.P)){alert("Please enter component values before exporting");return}const F=B(),k={};n.forEach((L,M)=>{const $=[];L.R&&$.push(`R=${L.R}`),L.V&&$.push(`V=${L.V}V`),L.I&&$.push(`I=${L.I}A`),L.P&&$.push(`P=${L.P}W`),$.length>0&&(k[`component${M+1}`]=$.join(", "))});const v={calculatorName:"Ohm's Law Calculator - Parallel Circuit",inputs:k,results:{totalResistance:`${F.totalR.toFixed(1)} `,voltage:`${F.totalV.toFixed(1)} V (constant)`,totalCurrent:`${F.totalI.toFixed(1)} A`,totalPower:`${F.totalP.toFixed(1)} W`},additionalInfo:{circuitType:"Parallel Circuit",principle:"Voltage is constant across all components",totalResistanceFormula:"1/R_total = 1/R1 + 1/R2 + 1/R3 + ...",totalCurrentFormula:"I_total = I1 + I2 + I3 + ..."},necReferences:["Parallel circuits: Voltage is the same across all components","Total resistance = 1  (1/R1 + 1/R2 + 1/R3 + ...)","Total current = Sum of currents through each branch","Total power = Sum of power dissipated in each component"]};t(v)},A=n.some(T=>T.R||T.V||T.I||T.P);return i.jsxs("div",{children:[i.jsx("div",{style:{background:"#faf5ff",border:"1px solid #a855f7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#7e22ce",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#7e22ce",lineHeight:"1.5"},children:"Parallel Circuit: Voltage is constant across all components"})]})}),i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${e.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Totals (Optional)"}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"0.5rem"},children:["V","I","R","P"].map(T=>{const F={R:"Ohms (R)",V:"Volts (E)",I:"Amps (I)",P:"Watts (P)"};return i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:F[T]}),i.jsx("input",{type:"number",value:a[T],onChange:k=>c({...a,[T]:k.target.value}),placeholder:"Optional",disabled:b(a,T),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:b(a,T)?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:b(a,T)?"not-allowed":"text"}})]},T)})}),i.jsx("p",{style:{fontSize:"0.8125rem",color:e.subtleText,margin:0,fontStyle:"italic"},children:"Enter known total values to help solve the circuit. Voltage is constant in parallel."})]}),n.map((T,F)=>i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${e.cardBorder}`},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",marginBottom:"0.75rem",gap:"0.5rem"},children:[i.jsxs("h4",{style:{fontWeight:"600",color:e.labelText,margin:0,fontSize:"0.875rem"},children:["Component ",F+1]}),n.length>1&&i.jsx("button",{onClick:()=>R(T.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Mc,{size:18})})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem"},children:[{field:"V",label:"Volts (E)"},{field:"I",label:"Amps (I)"},{field:"R",label:"Ohms (R)"},{field:"P",label:"Watts (P)"}].map(({field:k,label:v})=>i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"500",color:e.subtleText,marginBottom:"0.25rem"},children:v}),i.jsx("input",{type:"number",value:T[k],onChange:L=>z(T.id,k,L.target.value),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:e.inputBg,color:e.cardText,boxSizing:"border-box"}})]},k))})]},T.id)),i.jsxs("button",{onClick:V,style:{width:"100%",background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsx(La,{size:16}),"Add Component"]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsxs("button",{onClick:U,style:{flex:1,background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(Zd,{size:20}),"Calculate"]}),i.jsx("button",{onClick:H,style:{flex:1,background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Circuit Totals"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:B().totalV.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"E"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Amperage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:B().totalI.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"I"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:B().totalR.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"R"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Wattage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:B().totalP.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"P"})]})]})]}),A&&i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[i.jsxs("button",{onClick:N,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:T=>T.currentTarget.style.background="#2563eb",onMouseOut:T=>T.currentTarget.style.background="#3b82f6",children:[i.jsx(pp,{size:18}),"Export to PDF"]}),i.jsxs("button",{onClick:re,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:T=>T.currentTarget.style.background="#059669",onMouseOut:T=>T.currentTarget.style.background="#10b981",children:[i.jsx(Yc,{size:18}),"Attach to Job"]})]}),u&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:i.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[i.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),i.jsx("div",{style:{marginBottom:"1rem"},children:w?i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):d&&d.length>0?d.map(T=>i.jsxs("div",{onClick:()=>ce(T.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:F=>F.currentTarget.style.transform="translateY(-2px)",onMouseOut:F=>F.currentTarget.style.transform="translateY(0)",children:[i.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:T.name}),i.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:T.location||"No location"})]},T.id)):i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:i.jsx("p",{children:"No jobs found. Create a job first."})})}),i.jsx("button",{onClick:()=>f(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:T=>T.currentTarget.style.background="#4b5563",onMouseOut:T=>T.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},hE=pe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=pe.useState("basic"),o={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},a=c=>{pn(c)};return pe.useImperativeHandle(e,()=>({exportPDF:()=>{alert("Please use the Export to PDF button within the calculator")}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:o.cardBg,border:`1px solid ${o.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:()=>n("basic"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="basic"?"#3b82f6":o.sectionBg,color:t==="basic"?"white":o.labelText,border:`1px solid ${t==="basic"?"#3b82f6":o.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Basic"}),i.jsx("button",{onClick:()=>n("series"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="series"?"#3b82f6":o.sectionBg,color:t==="series"?"white":o.labelText,border:`1px solid ${t==="series"?"#3b82f6":o.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Series"}),i.jsx("button",{onClick:()=>n("parallel"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="parallel"?"#3b82f6":o.sectionBg,color:t==="parallel"?"white":o.labelText,border:`1px solid ${t==="parallel"?"#3b82f6":o.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Parallel"})]}),t==="basic"&&i.jsx(cE,{isDarkMode:r,colors:o,onExport:a}),t==="series"&&i.jsx(uE,{isDarkMode:r,colors:o,onExport:a}),t==="parallel"&&i.jsx(dE,{isDarkMode:r,colors:o,onExport:a}),i.jsxs("div",{style:{background:o.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${o.cardBorder}`,fontSize:"0.8125rem",color:o.labelText,marginTop:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:o.cardText},children:"Formulas:"}),i.jsx("div",{children:"E = I  R"}),i.jsx("div",{children:"P = E  I"}),i.jsx("div",{children:"I = E  R"}),i.jsx("div",{children:"P = I  R"}),i.jsx("div",{children:"R = E  I"}),i.jsx("div",{children:"P = E  R"})]})]})}),fE=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=pe.useState("4x1.5-square"),[a,c]=pe.useState([{size:"12",count:""}]),[u,f]=pe.useState({outlets:"",switches:"",clamps:"",groundWires:!1}),d={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},g={"3x2x1.5":{capacity:7.5,name:'3" x 2" x 1-1/2" Device Box'},"3x2x2":{capacity:10,name:'3" x 2" x 2" Device Box'},"3x2x2.25":{capacity:10.5,name:'3" x 2" x 2-1/4" Device Box'},"3x2x2.5":{capacity:12.5,name:'3" x 2" x 2-1/2" Device Box'},"3x2x2.75":{capacity:14,name:'3" x 2" x 2-3/4" Device Box'},"3x2x3.5":{capacity:18,name:'3" x 2" x 3-1/2" Device Box'},"3x2x2-2gang":{capacity:14,name:'2-Gang 3" x 2" x 2" Device Box'},"3x2x2.25-2gang":{capacity:17,name:'2-Gang 3" x 2" x 2-1/4" Device Box'},"3x2x2.5-2gang":{capacity:21,name:'2-Gang 3" x 2" x 2-1/2" Device Box'},"3x2x3.5-2gang":{capacity:29.5,name:'2-Gang 3" x 2" x 3-1/2" Device Box'},"3x2x3.5-3gang":{capacity:43.5,name:'3-Gang 3" x 2" x 3-1/2" Device Box'},"4x1.25-square":{capacity:18,name:'4" x 1-1/4" Square'},"4x1.5-square":{capacity:21,name:'4" x 1-1/2" Square'},"4x2.125-square":{capacity:30.3,name:'4" x 2-1/8" Square'},"4-11/16x1.5-square":{capacity:25.5,name:'4-11/16" x 1-1/2" Square'},"4-11/16x2.125-square":{capacity:42,name:'4-11/16" x 2-1/8" Square'},"4x1.25-round":{capacity:12.5,name:'4" x 1-1/4" Round'},"4x1.5-round":{capacity:15.5,name:'4" x 1-1/2" Round'},"4x2.125-round":{capacity:21.5,name:'4" x 2-1/8" Round'},"4x1.25-octagon":{capacity:15.5,name:'4" x 1-1/4" Octagon'},"4x1.5-octagon":{capacity:18,name:'4" x 1-1/2" Octagon'},"4x2.125-octagon":{capacity:24.5,name:'4" x 2-1/8" Octagon'},"3.5x1.5-masonry":{capacity:14,name:'3-1/2" x 1-1/2" Masonry Box'},"3.5x2.125-masonry":{capacity:21,name:'3-1/2" x 2-1/8" Masonry Box'}},w={14:2,12:2.25,10:2.5,8:3,6:5,4:5,3:5,2:5,1:5},C=()=>{c([...a,{size:"12",count:""}])},b=B=>{a.length>1&&c(a.filter((re,ce)=>ce!==B))},V=(B,re,ce)=>{const N=[...a];N[B][re]=ce,c(N)},z=(()=>{let B=0;const re=a.map(M=>{const $=parseInt(M.count)||0,oe=w[M.size],se=oe*$;return B+=se,{size:M.size,count:$,allowanceEach:oe,subtotal:se}}),ce=a.reduce((M,$)=>{if((parseInt($.count)||0)>0){const se=parseInt($.size.replace("/",""))||0,ie=parseInt(M.replace("/",""))||0;return se<ie?$.size:M}return M},"14"),N=w[ce],A=parseInt(u.outlets)||0,T=parseInt(u.switches)||0,F=(A+T)*2*N;B+=F;const v=(parseInt(u.clamps)||0)>0?N:0;B+=v;const L=u.groundWires?N:0;return B+=L,{conductorDetails:re,deviceFill:F,clampFill:v,groundFill:L,totalFill:B,largestWireSize:ce,deviceWireAllowance:N}})(),j=g[n].capacity,U=j>0?(z.totalFill/j*100).toFixed(1):0,H=z.totalFill>j;return pe.useImperativeHandle(t,()=>({exportPDF:()=>{const B={};a.forEach((F,k)=>{const v=parseInt(F.count)||0;v>0&&(B[`Conductor ${k+1}`]=`${v} ${F.size} AWG`)});const re={};z.conductorDetails.forEach((F,k)=>{F.count>0&&(re[`${F.count} ${F.size} AWG`]=`${F.allowanceEach} cu.in. each = ${F.subtotal.toFixed(2)} cu.in. total`)});const ce=parseInt(u.outlets)||0,N=parseInt(u.switches)||0,A=parseInt(u.clamps)||0,T={calculatorName:"Box Fill Calculator",inputs:{boxType:`${g[n].name} (${j} cu.in.)`,...B,receptaclesOutlets:ce>0?`${ce} (counts as ${ce*2} conductors)`:"0",switches:N>0?`${N} (counts as ${N*2} conductors)`:"0",cableClamps:A>0?`${A} (counts as 1 conductor volume)`:"0",equipmentGroundingConductors:u.groundWires?"Yes (counts as 1 conductor volume)":"No"},results:{boxCapacity:`${j} cu.in.`,calculatedFill:`${z.totalFill.toFixed(2)} cu.in.`,fillPercentage:`${U}%`,status:H?" OVERFILLED - Violates NEC 314.16":" Within NEC limits",deviceFill:z.deviceFill>0?`${z.deviceFill.toFixed(2)} cu.in.`:"N/A",clampFill:z.clampFill>0?`${z.clampFill.toFixed(2)} cu.in.`:"N/A",groundFill:z.groundFill>0?`${z.groundFill.toFixed(2)} cu.in.`:"N/A"},additionalInfo:{...re,largestWireSize:`${z.largestWireSize} AWG (used for device/clamp/ground allowance)`,deviceWireAllowance:`${z.deviceWireAllowance} cu.in. per conductor`},necReferences:["NEC 314.16 - Number of Conductors in Outlet, Device, and Junction Boxes","NEC 314.16(B) - Box Fill Calculations","Conductor volume allowances per NEC Table 314.16(B)","Each device (receptacle/switch) counts as 2 conductor volumes","All equipment grounding conductors combined count as 1 conductor volume","One or more cable clamps count as 1 conductor volume",H?"WARNING: This configuration exceeds the maximum allowable box fill":null].filter(Boolean)};pn(T)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Box Selection"}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Box Type"}),i.jsxs("select",{value:n,onChange:B=>o(B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:[i.jsx("optgroup",{label:"Device Boxes (Single Gang)",children:Object.entries(g).filter(([B])=>B.startsWith("3x2x")&&!B.includes("gang")).map(([B,re])=>i.jsxs("option",{value:B,children:[re.name," - ",re.capacity," cu.in."]},B))}),i.jsx("optgroup",{label:"Device Boxes (Multi-Gang)",children:Object.entries(g).filter(([B])=>B.includes("gang")).map(([B,re])=>i.jsxs("option",{value:B,children:[re.name," - ",re.capacity," cu.in."]},B))}),i.jsx("optgroup",{label:"Square Boxes",children:Object.entries(g).filter(([B])=>B.includes("square")).map(([B,re])=>i.jsxs("option",{value:B,children:[re.name," - ",re.capacity," cu.in."]},B))}),i.jsx("optgroup",{label:"Round/Octagon Boxes",children:Object.entries(g).filter(([B])=>B.includes("round")||B.includes("octagon")).map(([B,re])=>i.jsxs("option",{value:B,children:[re.name," - ",re.capacity," cu.in."]},B))}),i.jsx("optgroup",{label:"Masonry Boxes",children:Object.entries(g).filter(([B])=>B.includes("masonry")).map(([B,re])=>i.jsxs("option",{value:B,children:[re.name," - ",re.capacity," cu.in."]},B))})]})]})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Conductors"}),a.map((B,re)=>i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${d.cardBorder}`},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[i.jsxs("h4",{style:{fontWeight:"600",color:d.labelText,margin:0,fontSize:"0.875rem"},children:["Wire Size ",re+1]}),a.length>1&&i.jsx("button",{onClick:()=>b(re),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:i.jsx(Mc,{size:20})})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[i.jsx("select",{value:B.size,onChange:ce=>V(re,"size",ce.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:Object.keys(w).map(ce=>i.jsxs("option",{value:ce,children:[ce," AWG"]},ce))}),i.jsx("input",{type:"number",value:B.count,onChange:ce=>V(re,"count",ce.target.value),placeholder:"Quantity",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}})]})]},re)),i.jsxs("button",{onClick:C,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(La,{size:16}),"Add Wire Size"]}),i.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.5rem",margin:"0.5rem 0 0 0"},children:"Count all insulated conductors entering, leaving, or passing through the box"})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Devices & Other Items"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Receptacles/Outlets"}),i.jsx("input",{type:"number",value:u.outlets,onChange:B=>f({...u,outlets:B.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}}),i.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"Each device counts as 2 conductors"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Switches"}),i.jsx("input",{type:"number",value:u.switches,onChange:B=>f({...u,switches:B.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}}),i.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"Each device counts as 2 conductors"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Cable Clamps"}),i.jsx("input",{type:"number",value:u.clamps,onChange:B=>f({...u,clamps:B.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}}),i.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"One or more = 1 conductor volume"})]})]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:u.groundWires,onChange:B=>f({...u,groundWires:B.target.checked}),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:d.labelText},children:"Equipment Grounding Conductors Present"})]}),i.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginLeft:"2rem",margin:"0.25rem 0 0 2rem"},children:"All grounds combined count as 1 conductor volume"})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Box Capacity"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:j}),i.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"cu.in."})]}),i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Calculated Fill"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:z.totalFill.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"cu.in."})]}),i.jsxs("div",{style:{background:H?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:H?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Fill Percentage"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:H?"#dc2626":"#1e40af"},children:[U,"%"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:H?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:H?"OVERFILLED":"Within Limits"})]})]}),z.conductorDetails.length>0&&z.conductorDetails.some(B=>B.count>0)&&i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${d.cardBorder}`},children:[i.jsx("strong",{style:{color:d.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Conductor Breakdown:"}),z.conductorDetails.map((B,re)=>B.count>0&&i.jsxs("div",{style:{marginTop:re>0?"0.75rem":0,paddingTop:re>0?"0.75rem":0,borderTop:re>0?`1px solid ${d.cardBorder}`:"none",fontSize:"0.875rem",color:d.labelText},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:[B.count," ",B.size," AWG"]}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:d.subtleText},children:[B.allowanceEach," cu.in. each = ",B.subtotal.toFixed(2)," cu.in. total"]})]},re))]}),!H&&z.totalFill>0?i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Box fill is within NEC limits"}),z.deviceFill>0&&i.jsxs("div",{children:["Devices: ",z.deviceFill.toFixed(2)," cu.in."]}),z.clampFill>0&&i.jsxs("div",{children:["Clamps: ",z.clampFill.toFixed(2)," cu.in."]}),z.groundFill>0&&i.jsxs("div",{children:["Grounds: ",z.groundFill.toFixed(2)," cu.in."]})]})]})}):H?i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Qc,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",fontSize:"0.9375rem"},children:"BOX OVERFILLED - Violates NEC 314.16"}),i.jsx("div",{style:{marginBottom:"0.5rem"},children:"Reduce number of devices or use larger box"}),z.deviceFill>0&&i.jsxs("div",{children:["Devices: ",z.deviceFill.toFixed(2)," cu.in."]}),z.clampFill>0&&i.jsxs("div",{children:["Clamps: ",z.clampFill.toFixed(2)," cu.in."]}),z.groundFill>0&&i.jsxs("div",{children:["Grounds: ",z.groundFill.toFixed(2)," cu.in."]})]})]})}):null]}),i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${d.cardBorder}`,fontSize:"0.8125rem",color:d.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:d.cardText},children:"NEC 314.16 Requirements:"}),"Conductor = table volume  Device = 2 volumes  All grounds = 1 volume  Clamps = 1 volume"]})]})}),pE=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=pe.useState("emt-0.5"),[a,c]=pe.useState("thwn"),[u,f]=pe.useState([{size:"12",count:""}]),d={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},g={"emt-0.5":{name:'1/2" EMT',area:.304},"emt-0.75":{name:'3/4" EMT',area:.533},"emt-1":{name:'1" EMT',area:.864},"emt-1.25":{name:'1-1/4" EMT',area:1.496},"emt-1.5":{name:'1-1/2" EMT',area:2.036},"emt-2":{name:'2" EMT',area:3.356},"emt-2.5":{name:'2-1/2" EMT',area:5.858},"emt-3":{name:'3" EMT',area:8.846},"emt-4":{name:'4" EMT',area:14.753},"pvc-0.5":{name:'1/2" PVC Sch 40',area:.285},"pvc-0.75":{name:'3/4" PVC Sch 40',area:.508},"pvc-1":{name:'1" PVC Sch 40',area:.832},"pvc-1.25":{name:'1-1/4" PVC Sch 40',area:1.429},"pvc-1.5":{name:'1-1/2" PVC Sch 40',area:1.986},"pvc-2":{name:'2" PVC Sch 40',area:3.291},"pvc-2.5":{name:'2-1/2" PVC Sch 40',area:5.793},"pvc-3":{name:'3" PVC Sch 40',area:8.688},"pvc-4":{name:'4" PVC Sch 40',area:14.314},"rigid-0.5":{name:'1/2" Rigid Steel',area:.22},"rigid-0.75":{name:'3/4" Rigid Steel',area:.409},"rigid-1":{name:'1" Rigid Steel',area:.688},"rigid-1.25":{name:'1-1/4" Rigid Steel',area:1.175},"rigid-1.5":{name:'1-1/2" Rigid Steel',area:1.61},"rigid-2":{name:'2" Rigid Steel',area:2.647},"rigid-2.5":{name:'2-1/2" Rigid Steel',area:4.618},"rigid-3":{name:'3" Rigid Steel',area:6.922},"rigid-4":{name:'4" Rigid Steel',area:11.545}},w={thwn:{18:.0058,16:.0075,14:.0097,12:.0133,10:.0211,8:.0366,6:.0507,4:.0824,3:.0973,2:.1158,1:.1562,"1/0":.1855,"2/0":.2223,"3/0":.2679,"4/0":.3237,250:.397,300:.4608,350:.5242,400:.5863,500:.7073},xhhw:{18:.0058,16:.0075,14:.0097,12:.0133,10:.0211,8:.0366,6:.059,4:.0973,3:.1134,2:.1333,1:.1901,"1/0":.2223,"2/0":.2624,"3/0":.3117,"4/0":.3718,250:.4596,300:.5281,350:.5958,400:.6619,500:.7901}},C=["18","16","14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500"],b=()=>{f([...u,{size:"12",count:""}])},V=U=>{u.length>1&&f(u.filter((H,B)=>B!==U))},R=(U,H,B)=>{const re=[...u];re[U][H]=B,f(re)},z=()=>{const U=g[n].area;let H=0,B=0;const re=u.map(A=>{const T=parseInt(A.count)||0,F=w[a][A.size]||0,k=F*T;return H+=k,B+=T,{size:A.size,count:T,areaEach:F,subtotal:k}}),ce=(H/U*100).toFixed(1);let N=40;return B===1?N=53:B===2&&(N=31),{conduitArea:U.toFixed(3),totalWireArea:H.toFixed(3),fillPercentage:parseFloat(ce),maxFill:N,totalWireCount:B,conductorDetails:re,isOverfilled:parseFloat(ce)>N}};pe.useImperativeHandle(t,()=>({exportPDF:()=>{const U=z();if(U.totalWireCount===0){alert("Please enter at least one conductor with a quantity before exporting");return}const H=U.conductorDetails.filter(re=>re.count>0).map(re=>`${re.count} ${re.size} AWG ${a.toUpperCase()}: ${re.areaEach.toFixed(4)} sq.in. each = ${re.subtotal.toFixed(4)} sq.in. total`).join("; "),B={calculatorName:"Conduit Fill Calculator",inputs:{conduitType:g[n].name,wireType:a.toUpperCase()+"-2",totalConductors:U.totalWireCount},results:{conduitArea:`${U.conduitArea} sq.in.`,totalWireArea:`${U.totalWireArea} sq.in.`,fillPercentage:`${U.fillPercentage}%`,maximumAllowedFill:`${U.maxFill}%`,complianceStatus:U.isOverfilled?"OVERFILLED - Violates NEC":"Within NEC Limits"},additionalInfo:{conductorBreakdown:H,fillRule:U.totalWireCount===1?"1 conductor: 53% max fill":U.totalWireCount===2?"2 conductors: 31% max fill":"3+ conductors: 40% max fill",recommendation:U.isOverfilled?"Reduce number of conductors or use larger conduit":"Installation meets NEC requirements"},necReferences:["NEC Chapter 9, Table 1 - Percent of Cross Section of Conduit and Tubing for Conductors","NEC Chapter 9, Table 4 - Dimensions and Percent Area of Conduit and Tubing","NEC Chapter 9, Table 5 - Dimensions of Insulated Conductors and Fixture Wires","1 conductor: 53% max fill","2 conductors: 31% max fill","3+ conductors: 40% max fill","Nipples (24 inches or less): 60% max fill"]};pn(B)}}));const j=z();return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Conduit & Wire Selection"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Conduit Type & Size"}),i.jsxs("select",{value:n,onChange:U=>o(U.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:[i.jsx("optgroup",{label:"EMT",children:Object.entries(g).filter(([U])=>U.startsWith("emt")).map(([U,H])=>i.jsx("option",{value:U,children:H.name},U))}),i.jsx("optgroup",{label:"PVC Schedule 40",children:Object.entries(g).filter(([U])=>U.startsWith("pvc")).map(([U,H])=>i.jsx("option",{value:U,children:H.name},U))}),i.jsx("optgroup",{label:"Rigid Steel",children:Object.entries(g).filter(([U])=>U.startsWith("rigid")).map(([U,H])=>i.jsx("option",{value:U,children:H.name},U))})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Wire Type"}),i.jsxs("select",{value:a,onChange:U=>c(U.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"thwn",children:"THWN-2"}),i.jsx("option",{value:"xhhw",children:"XHHW-2"})]})]})]})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Conductors"}),u.map((U,H)=>i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${d.cardBorder}`},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[i.jsxs("h4",{style:{fontWeight:"600",color:d.labelText,margin:0,fontSize:"0.875rem"},children:["Wire Size ",H+1]}),u.length>1&&i.jsx("button",{onClick:()=>V(H),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:i.jsx(Mc,{size:20})})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[i.jsx("select",{value:U.size,onChange:B=>R(H,"size",B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:C.filter(B=>w[a][B]).map(B=>i.jsxs("option",{value:B,children:[B," AWG"]},B))}),i.jsx("input",{type:"number",value:U.count,onChange:B=>R(H,"count",B.target.value),placeholder:"Quantity",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}})]})]},H)),i.jsxs("button",{onClick:b,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(La,{size:16}),"Add Wire Size"]})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Conduit Area"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:j.conduitArea}),i.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"sq.in."})]}),i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsxs("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:["Wire",i.jsx("br",{})," Area"]}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:j.totalWireArea}),i.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"sq.in."})]}),i.jsxs("div",{style:{background:j.isOverfilled?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.isOverfilled?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Fill Percentage"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.isOverfilled?"#dc2626":"#1e40af"},children:[j.fillPercentage,"%"]}),i.jsxs("div",{style:{fontSize:"0.75rem",color:j.isOverfilled?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:["Max: ",j.maxFill,"%"]})]})]}),j.conductorDetails.length>0&&j.totalWireCount>0&&i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${d.cardBorder}`},children:[i.jsx("strong",{style:{color:d.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Conductor Breakdown:"}),j.conductorDetails.map((U,H)=>U.count>0&&i.jsxs("div",{style:{marginTop:H>0?"0.75rem":0,paddingTop:H>0?"0.75rem":0,borderTop:H>0?`1px solid ${d.cardBorder}`:"none",fontSize:"0.875rem",color:d.labelText},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:[U.count," ",U.size," AWG ",a.toUpperCase()]}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:d.subtleText},children:[U.areaEach.toFixed(4)," sq.in. each = ",U.subtotal.toFixed(4)," sq.in. total"]})]},H))]}),!j.isOverfilled&&j.totalWireCount>0?i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Conduit fill is within NEC limits"}),i.jsxs("div",{children:["Total conductors: ",j.totalWireCount]})]})]})}):j.isOverfilled?i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Qc,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",fontSize:"0.9375rem"},children:"CONDUIT OVERFILLED - Violates NEC Chapter 9"}),i.jsx("div",{children:"Reduce number of conductors or use larger conduit"})]})]})}):null]}),i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${d.cardBorder}`,fontSize:"0.8125rem",color:d.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:d.cardText},children:"NEC Chapter 9, Table 1:"}),'1 conductor: 53%  2 conductors: 31%  3+ conductors: 40%  Nipples (<24"): 60%']})]})}),mE=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=pe.useState("12"),[a,c]=pe.useState("copper"),[u,f]=pe.useState("75C"),[d,g]=pe.useState("30"),[w,C]=pe.useState("3"),[b,V]=pe.useState(!1),R={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},z={copper:{"60C":{22:3,20:5,18:7,16:10,14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:355,700:385,750:400},"75C":{22:3,20:5,18:7,16:18,14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,700:460,750:475},"90C":{22:3,20:5,18:7,16:18,14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535}},aluminum:{"60C":{12:15,10:25,8:30,6:40,4:55,3:65,2:75,1:85,"1/0":100,"2/0":115,"3/0":130,"4/0":150,250:170,300:190,350:210,400:225,500:260,600:285,700:310,750:320},"75C":{12:20,10:30,8:40,6:50,4:65,3:75,2:90,1:100,"1/0":120,"2/0":135,"3/0":155,"4/0":180,250:205,300:230,350:250,400:270,500:310,600:340,700:375,750:385},"90C":{12:25,10:35,8:45,6:60,4:75,3:85,2:100,1:115,"1/0":135,"2/0":150,"3/0":175,"4/0":205,250:230,300:260,350:280,400:305,500:350,600:385,700:420,750:435}}},j={"60C":{10:1.29,15:1.2,20:1.11,25:1.05,30:1,35:.94,40:.88,45:.82,50:.75,55:.67,60:.58,65:.47,70:.33},"75C":{10:1.2,15:1.15,20:1.11,25:1.05,30:1,35:.94,40:.88,45:.82,50:.75,55:.67,60:.58,65:.47,70:.33,75:0},"90C":{10:1.15,15:1.12,20:1.08,25:1.04,30:1,35:.96,40:.91,45:.87,50:.82,55:.76,60:.71,65:.65,70:.58,75:.5,80:.41,85:.29,90:0}},U=(F,k)=>k==="22"?"Thermostat wiring, doorbells, low-voltage controls":k==="20"?"Doorbells, security systems, low-voltage controls":k==="18"?"Thermostats, lighting controls, doorbells, signaling circuits":k==="16"?"Electronics, lighting control systems, doorbells, low-voltage applications":F<=15||F<=20?"Lighting circuits, small appliances":F<=25?"General outlets, lighting circuits":F<=30?"Small appliances, dryers (240V)":F<=40?"Electric ranges, large appliances":F<=50?"Electric ranges, welders, heat pumps":F<=100?"Sub-panels, large motors":F<=200?"Main panels, large commercial loads":"Service entrances, industrial applications",H=(F,k)=>{var L;return((L={copper:{14:15,12:20,10:30},aluminum:{12:15,10:25}}[k])==null?void 0:L[F])||null},B=()=>z[a][u][n]||0,re=()=>{let F=ce;const k=j[u][d]||1;let v=1;const L=parseInt(w);L<=3?v=1:L<=6?v=.8:L<=9?v=.7:L<=20?v=.5:L<=30?v=.45:L<=40?v=.4:v=.35;let M=F*k*v,$=M;return b&&($=M*.8),{base:F,tempFactor:k,conductorFactor:v,derated:Math.round(M*10)/10,continuous:Math.round($*10)/10}},ce=B(),N=H(n,a),A=re(),T=A.tempFactor!==1||A.conductorFactor!==1||b;return pe.useImperativeHandle(t,()=>({exportPDF:()=>{const F=L=>({"60C":"60C (140F)","75C":"75C (167F)","90C":"90C (194F)"})[L]||L,k=L=>({10:"10C (50F)",15:"15C (59F)",20:"20C (68F)",25:"25C (77F)",30:"30C (86F)",35:"35C (95F)",40:"40C (104F)",45:"45C (113F)",50:"50C (122F)"})[L]||`${L}C`,v={calculatorName:"Ampacity Lookup Calculator",inputs:{wireSize:n.includes("/")?`${n} AWG`:`${n} ${parseInt(n)<=16?"AWG":"kcmil"}`,wireMaterial:a.charAt(0).toUpperCase()+a.slice(1),temperatureRating:F(u),ambientTemperature:k(d),currentCarryingConductors:w,continuousLoad:b?"Yes (3+ hours)":"No"},results:{baseAmpacity:`${A.base} A`,deratedAmpacity:T?`${A.derated} A`:"N/A (no derating applied)",finalAmpacity:`${b?A.continuous:T?A.derated:A.base} A`,ocpdLimit:N?`${N} A (NEC 240.4(D))`:"No special limit",commonApplications:U(ce,n)},additionalInfo:{temperatureCorrectionFactor:`${A.tempFactor.toFixed(2)}`,conductorAdjustmentFactor:`${A.conductorFactor.toFixed(2)}`,continuousLoadFactor:b?"0.80":"Not applied",deratingApplied:T?"Yes":"No"},necReferences:["NEC Table 310.16 - Allowable Ampacities of Insulated Conductors","NEC 310.15(B)(2)(a) - Temperature Correction Factors","NEC 310.15(B)(3)(a) - Conductor Bundling Adjustment Factors",N?"NEC 240.4(D) - Small Conductor Overcurrent Protection":null,b?"NEC 210.19(A)(1) - Continuous Load Sizing (125% factor)":null].filter(Boolean)};pn(v)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:R.cardBg,border:`1px solid ${R.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:R.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${R.cardBorder}`,paddingBottom:"0.5rem"},children:"Wire Selection"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:R.labelText,marginBottom:"0.5rem"},children:"Wire Size"}),i.jsxs("select",{value:n,onChange:F=>o(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${R.inputBorder}`,borderRadius:"8px",backgroundColor:R.inputBg,color:R.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"22",children:"22 AWG"}),i.jsx("option",{value:"20",children:"20 AWG"}),i.jsx("option",{value:"18",children:"18 AWG"}),i.jsx("option",{value:"16",children:"16 AWG"}),i.jsx("option",{value:"14",children:"14 AWG"}),i.jsx("option",{value:"12",children:"12 AWG"}),i.jsx("option",{value:"10",children:"10 AWG"}),i.jsx("option",{value:"8",children:"8 AWG"}),i.jsx("option",{value:"6",children:"6 AWG"}),i.jsx("option",{value:"4",children:"4 AWG"}),i.jsx("option",{value:"3",children:"3 AWG"}),i.jsx("option",{value:"2",children:"2 AWG"}),i.jsx("option",{value:"1",children:"1 AWG"}),i.jsx("option",{value:"1/0",children:"1/0 AWG"}),i.jsx("option",{value:"2/0",children:"2/0 AWG"}),i.jsx("option",{value:"3/0",children:"3/0 AWG"}),i.jsx("option",{value:"4/0",children:"4/0 AWG"}),i.jsx("option",{value:"250",children:"250 kcmil"}),i.jsx("option",{value:"300",children:"300 kcmil"}),i.jsx("option",{value:"350",children:"350 kcmil"}),i.jsx("option",{value:"400",children:"400 kcmil"}),i.jsx("option",{value:"500",children:"500 kcmil"}),i.jsx("option",{value:"600",children:"600 kcmil"}),i.jsx("option",{value:"700",children:"700 kcmil"}),i.jsx("option",{value:"750",children:"750 kcmil"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:R.labelText,marginBottom:"0.5rem"},children:"Wire Material"}),i.jsxs("select",{value:a,onChange:F=>c(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${R.inputBorder}`,borderRadius:"8px",backgroundColor:R.inputBg,color:R.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:R.labelText,marginBottom:"0.5rem"},children:"Temperature Rating"}),i.jsxs("select",{value:u,onChange:F=>f(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${R.inputBorder}`,borderRadius:"8px",backgroundColor:R.inputBg,color:R.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"60C",children:"60C (140F)"}),i.jsx("option",{value:"75C",children:"75C (167F)"}),i.jsx("option",{value:"90C",children:"90C (194F)"})]})]})]})]})]}),i.jsxs("div",{style:{background:R.cardBg,border:`1px solid ${R.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:R.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${R.cardBorder}`,paddingBottom:"0.5rem"},children:"Derating Factors (Optional)"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:R.labelText,marginBottom:"0.5rem"},children:"Ambient Temp (C)"}),i.jsxs("select",{value:d,onChange:F=>g(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${R.inputBorder}`,borderRadius:"8px",backgroundColor:R.inputBg,color:R.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"10",children:"10C (50F)"}),i.jsx("option",{value:"15",children:"15C (59F)"}),i.jsx("option",{value:"20",children:"20C (68F)"}),i.jsx("option",{value:"25",children:"25C (77F)"}),i.jsx("option",{value:"30",children:"30C (86F) - Standard"}),i.jsx("option",{value:"35",children:"35C (95F)"}),i.jsx("option",{value:"40",children:"40C (104F)"}),i.jsx("option",{value:"45",children:"45C (113F)"}),i.jsx("option",{value:"50",children:"50C (122F)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:R.labelText,marginBottom:"0.5rem"},children:"Current-Carrying Conductors"}),i.jsx("input",{type:"number",value:w,onChange:F=>C(F.target.value),min:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${R.inputBorder}`,borderRadius:"8px",backgroundColor:R.inputBg,color:R.cardText,boxSizing:"border-box"}})]})]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:b,onChange:F=>V(F.target.checked),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:R.labelText},children:"Continuous Load (3+ hours) - Apply 80% factor"})]}),i.jsxs("div",{style:{background:R.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${R.cardBorder}`},children:[i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:R.cardText,marginTop:0,marginBottom:"0.75rem"},children:"Applied Factors"}),i.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:R.labelText},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Temperature Factor:"}),i.jsxs("span",{style:{fontWeight:"600",color:R.cardText},children:["",A.tempFactor.toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Conductor Adjustment:"}),i.jsxs("span",{style:{fontWeight:"600",color:R.cardText},children:["",A.conductorFactor.toFixed(2)]})]}),b&&i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Continuous Load:"}),i.jsx("span",{style:{fontWeight:"600",color:R.cardText},children:"0.80"})]})]})]})]})]}),i.jsxs("div",{style:{background:R.cardBg,border:`1px solid ${R.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:R.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:T?"repeat(3, 1fr)":"1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:R.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:R.labelText,marginBottom:"0.25rem"},children:"Base Ampacity"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:R.cardText},children:[A.base," A"]})]}),T&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:R.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:R.labelText,marginBottom:"0.25rem"},children:"Derated Ampacity"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:R.cardText},children:[A.derated," A"]})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Final Ampacity"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[b?A.continuous:A.derated," A"]})]})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5",width:"100%"},children:[i.jsxs("div",{style:{marginBottom:"0.5rem"},children:[i.jsx("strong",{children:"Wire:"})," ",n," AWG ",a]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:[i.jsx("strong",{children:"Temperature Rating:"})," ",u," (",u==="60C"?"140F":u==="75C"?"167F":"194F",")"]})]})]})}),N&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Qc,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("strong",{children:"NEC 240.4(D) Limit:"})," ",N,"A max overcurrent protection"]})]})}),i.jsx("div",{style:{background:R.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${R.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:R.labelText,lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",color:R.cardText,marginBottom:"0.5rem"},children:"Common Applications:"}),U(ce,n)]})})]})]})}),gE=({flcData:r,setFlcData:e,colors:t})=>{var u,f;const n={single:{115:{.25:4.4,.33:5.8,.5:7.2,.75:9.8,1:13.8,1.5:20,2:24,3:34,5:56},230:{.25:2.2,.33:2.9,.5:3.6,.75:4.9,1:6.9,1.5:10,2:12,3:17,5:28}},three:{230:{.5:2,.75:2.8,1:3.6,1.5:5.2,2:6.8,3:9.6,5:15.2,7.5:22,10:28,15:42,20:54,25:68,30:80,40:104,50:130,60:154,75:192,100:248,125:312,150:360,200:480},460:{.5:1,.75:1.4,1:1.8,1.5:2.6,2:3.4,3:4.8,5:7.6,7.5:11,10:14,15:21,20:27,25:34,30:40,40:52,50:65,60:77,75:96,100:124,125:156,150:180,200:240},575:{.5:.8,.75:1.1,1:1.4,1.5:2.1,2:2.7,3:3.9,5:6.1,7.5:9,10:11,15:17,20:22,25:27,30:32,40:41,50:52,60:62,75:77,100:99,125:125,150:144,200:192},2300:{250:65,300:77,350:90,400:103,450:116,500:129},4e3:{500:74,600:88,700:103,800:118,900:132,1e3:147}}},a=(()=>{const d=parseFloat(r.horsepower),g=parseInt(r.voltage);if(n[r.phase]&&n[r.phase][g]&&n[r.phase][g][d])return n[r.phase][g][d];const w=parseFloat(r.efficiency),C=parseFloat(r.powerFactor);return r.phase==="single"?d*746/(g*w*C):d*746/(1.732*g*w*C)})(),c=(f=(u=n[r.phase])==null?void 0:u[parseInt(r.voltage)])==null?void 0:f[parseFloat(r.horsepower)];return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Horsepower"}),i.jsxs("select",{value:r.horsepower,onChange:d=>e({...r,horsepower:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"",children:"Select HP"}),i.jsx("option",{value:"0.25",children:"1/4 HP"}),i.jsx("option",{value:"0.33",children:"1/3 HP"}),i.jsx("option",{value:"0.5",children:"1/2 HP"}),i.jsx("option",{value:"0.75",children:"3/4 HP"}),i.jsx("option",{value:"1",children:"1 HP"}),i.jsx("option",{value:"1.5",children:"1.5 HP"}),i.jsx("option",{value:"2",children:"2 HP"}),i.jsx("option",{value:"3",children:"3 HP"}),i.jsx("option",{value:"5",children:"5 HP"}),i.jsx("option",{value:"7.5",children:"7.5 HP"}),i.jsx("option",{value:"10",children:"10 HP"}),i.jsx("option",{value:"15",children:"15 HP"}),i.jsx("option",{value:"20",children:"20 HP"}),i.jsx("option",{value:"25",children:"25 HP"}),i.jsx("option",{value:"30",children:"30 HP"}),i.jsx("option",{value:"40",children:"40 HP"}),i.jsx("option",{value:"50",children:"50 HP"}),i.jsx("option",{value:"75",children:"75 HP"}),i.jsx("option",{value:"100",children:"100 HP"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Voltage"}),i.jsxs("select",{value:r.voltage,onChange:d=>e({...r,voltage:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"115",children:"115V"}),i.jsx("option",{value:"230",children:"230V"}),i.jsx("option",{value:"460",children:"460V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"575",children:"575V"}),i.jsx("option",{value:"2300",children:"2300V"}),i.jsx("option",{value:"4000",children:"4000V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Phase"}),i.jsxs("select",{value:r.phase,onChange:d=>e({...r,phase:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]})]}),r.horsepower&&!c&&i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Efficiency"}),i.jsxs("select",{value:r.efficiency,onChange:d=>e({...r,efficiency:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"0.8",children:"80% (Standard)"}),i.jsx("option",{value:"0.85",children:"85% (High Efficiency)"}),i.jsx("option",{value:"0.9",children:"90% (Premium)"}),i.jsx("option",{value:"0.95",children:"95% (Super Premium)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),i.jsxs("select",{value:r.powerFactor,onChange:d=>e({...r,powerFactor:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"0.7",children:"0.7 (Poor)"}),i.jsx("option",{value:"0.8",children:"0.8 (Typical)"}),i.jsx("option",{value:"0.85",children:"0.85 (Good)"}),i.jsx("option",{value:"0.9",children:"0.9 (Excellent)"})]})]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${t.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.5rem",textAlign:"center"},children:"Full Load Current"}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:t.cardText,textAlign:"center"},children:a?a.toFixed(1):"0.0"}),i.jsx("div",{style:{fontSize:"0.875rem",color:t.labelText,textAlign:"center",marginTop:"0.25rem"},children:"Amperes"})]}),c?i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Value from NEC Table 430.250"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Standard full load current from NEC tables"})]})]})}):r.horsepower?i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Qc,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Calculated Value"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Not in NEC tables - calculated using efficiency and power factor"})]})]})}):null]})},yE=({protectionData:r,setProtectionData:e,colors:t})=>{const n={"inverse-time-breaker":250,"instantaneous-trip-breaker":800,"inverse-time-fuse":175,"time-delay-fuse":175},a=(()=>{if(!r.flc)return{calculated:"0",standard:0};const c=parseFloat(r.flc),u=n[r.protectionType],f=c*u/100,g=[15,20,25,30,35,40,45,50,60,70,80,90,100,110,125,150,175,200,225,250,300,350,400,450,500,600,700,800,1e3,1200,1600,2e3,2500,3e3,4e3,5e3,6e3].find(w=>w>=f)||f;return{calculated:f.toFixed(1),standard:g,percentage:u}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Full Load Current (FLC)"}),i.jsx("input",{type:"number",value:r.flc,onChange:c=>e({...r,flc:c.target.value}),placeholder:"Enter FLC in amps",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Protection Type"}),i.jsxs("select",{value:r.protectionType,onChange:c=>e({...r,protectionType:c.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"inverse-time-breaker",children:"Inverse Time Breaker"}),i.jsx("option",{value:"instantaneous-trip-breaker",children:"Instantaneous Trip Breaker"}),i.jsx("option",{value:"inverse-time-fuse",children:"Inverse Time Fuse"}),i.jsx("option",{value:"time-delay-fuse",children:"Time Delay Fuse"})]})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Calculated Maximum"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:a.calculated}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Standard Size"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:a.standard}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),r.flc&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.8125rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Reference:"}),"Per NEC Table 430.52 (",a.percentage,"% of FLC)"]})]})},xE=({wireSizeData:r,setWireSizeData:e,colors:t})=>{const o=(()=>{if(!r.flc)return null;const a=parseFloat(r.flc)*1.25,c={"60C":{14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:355,700:385,750:400},"75C":{14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,750:475},"90C":{14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535}},u={14:15,12:20,10:30},d=["14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750"].find(g=>{const w=c[r.tempRating][g]>=a,C=!u[g]||u[g]>=a;return w&&C});return{requiredAmps:a.toFixed(1),wireSize:d||"Larger than 750 kcmil required",ampacity:d?c[r.tempRating][d]:"N/A",ocpdLimit:d&&u[d]?u[d]:null}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Full Load Current (FLC)"}),i.jsx("input",{type:"number",value:r.flc,onChange:a=>e({...r,flc:a.target.value}),placeholder:"Enter FLC in amps",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Temperature Rating"}),i.jsxs("select",{value:r.tempRating,onChange:a=>e({...r,tempRating:a.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"60C",children:"60C (140F) - TW, UF"}),i.jsx("option",{value:"75C",children:"75C (167F) - THWN, XHHW"}),i.jsx("option",{value:"90C",children:"90C (194F) - THHN, XHHW-2"})]})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${t.cardBorder}`},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,marginBottom:"0.75rem"},children:[i.jsx("strong",{style:{color:t.cardText},children:"Required Current Capacity:"})," ",o.requiredAmps," Amps (125% of FLC)"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.5rem",textAlign:"center"},children:"Minimum Wire Size"}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:t.cardText,textAlign:"center",marginBottom:"0.5rem"},children:o.wireSize}),o.ampacity!=="N/A"&&i.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,textAlign:"center"},children:["Ampacity: ",o.ampacity," Amps"]})]}),o.ocpdLimit&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Qc,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"NEC 240.4(D) Limitation"}),i.jsxs("div",{style:{fontSize:"0.8125rem"},children:[o.ocpdLimit,"A maximum overcurrent protection for ",o.wireSize," wire"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.8125rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Reference:"}),"Per NEC 430.22 - Branch circuit conductors must carry 125% of motor FLC"]})]})]})},vE=pe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=pe.useState("flc"),[o,a]=pe.useState({horsepower:"",voltage:"480",phase:"three",efficiency:"0.85",powerFactor:"0.8"}),[c,u]=pe.useState({flc:"",protectionType:"inverse-time-breaker"}),[f,d]=pe.useState({flc:"",tempRating:"75C"}),g={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};pe.useImperativeHandle(e,()=>({exportPDF:()=>{var b,V;let C;if(t==="flc"){if(!o.horsepower){alert("Please select motor horsepower before exporting");return}const R={single:{115:{.25:4.4,.33:5.8,.5:7.2,.75:9.8,1:13.8,1.5:20,2:24,3:34,5:56},230:{.25:2.2,.33:2.9,.5:3.6,.75:4.9,1:6.9,1.5:10,2:12,3:17,5:28}},three:{230:{.5:2,.75:2.8,1:3.6,1.5:5.2,2:6.8,3:9.6,5:15.2,7.5:22,10:28,15:42,20:54,25:68,30:80,40:104,50:130,60:154,75:192,100:248,125:312,150:360,200:480},460:{.5:1,.75:1.4,1:1.8,1.5:2.6,2:3.4,3:4.8,5:7.6,7.5:11,10:14,15:21,20:27,25:34,30:40,40:52,50:65,60:77,75:96,100:124,125:156,150:180,200:240},575:{.5:.8,.75:1.1,1:1.4,1.5:2.1,2:2.7,3:3.9,5:6.1,7.5:9,10:11,15:17,20:22,25:27,30:32,40:41,50:52,60:62,75:77,100:99,125:125,150:144,200:192},2300:{250:65,300:77,350:90,400:103,450:116,500:129},4e3:{500:74,600:88,700:103,800:118,900:132,1e3:147}}},z=parseFloat(o.horsepower),j=parseInt(o.voltage);let U,H=!1;if((V=(b=R[o.phase])==null?void 0:b[j])!=null&&V[z])U=R[o.phase][j][z],H=!0;else{const re=parseFloat(o.efficiency),ce=parseFloat(o.powerFactor);o.phase==="single"?U=z*746/(j*re*ce):U=z*746/(1.732*j*re*ce)}const B={motorHorsepower:`${z} HP`,voltage:`${o.voltage}V`,phase:o.phase==="single"?"Single Phase":"Three Phase"};H||(B.motorEfficiency=`${(parseFloat(o.efficiency)*100).toFixed(0)}%`,B.powerFactor=o.powerFactor),C={calculatorName:"Motor Calculations - Full Load Current",inputs:B,results:{fullLoadCurrent:`${U.toFixed(1)} Amperes`,source:H?"NEC Table 430.250":"Calculated"},additionalInfo:H?{note:"Standard full load current from NEC tables"}:{calculation:o.phase==="single"?`FLC = (${z} HP  746)  (${j}V  ${o.efficiency} eff  ${o.powerFactor} pf) = ${U.toFixed(1)}A`:`FLC = (${z} HP  746)  (1.732  ${j}V  ${o.efficiency} eff  ${o.powerFactor} pf) = ${U.toFixed(1)}A`,note:"Calculated value - not in NEC tables"},necReferences:["NEC Table 430.250 - Full-Load Current, Three-Phase Alternating-Current Motors","NEC Table 430.248 - Full-Load Current, Single-Phase Alternating-Current Motors","NEC 430.6 - Ampacity and Motor Rating Determination"]}}else if(t==="protection"){if(!c.flc){alert("Please enter motor FLC before exporting");return}const R={"inverse-time-breaker":"Inverse Time Breaker","instantaneous-trip-breaker":"Instantaneous Trip Breaker","inverse-time-fuse":"Inverse Time Fuse","time-delay-fuse":"Time Delay Fuse"},z={"inverse-time-breaker":250,"instantaneous-trip-breaker":800,"inverse-time-fuse":175,"time-delay-fuse":175},j=parseFloat(c.flc),U=z[c.protectionType],H=j*U/100,re=[15,20,25,30,35,40,45,50,60,70,80,90,100,110,125,150,175,200,225,250,300,350,400,450,500,600,700,800,1e3,1200,1600,2e3,2500,3e3,4e3,5e3,6e3].find(ce=>ce>=H)||H;C={calculatorName:"Motor Calculations - Branch Circuit Protection",inputs:{motorFullLoadCurrent:`${c.flc} Amps`,protectionType:R[c.protectionType]},results:{calculatedMaximum:`${H.toFixed(1)} Amperes`,standardSize:`${re} Amperes`},additionalInfo:{calculation:`Maximum = ${j}A  ${U}% = ${H.toFixed(1)}A`,nextStandardSize:`Next standard OCPD size: ${re}A`},necReferences:[`NEC Table 430.52 - Maximum Rating or Setting of Motor Branch-Circuit Short-Circuit and Ground-Fault Protective Devices (${U}% of FLC)`,"NEC 430.52(C) - Rating or Setting for Individual Motor Circuit","NEC 240.6 - Standard Ampere Ratings"]}}else if(t==="wiresize"){if(!f.flc){alert("Please enter motor FLC before exporting");return}const R={"60C":"60C (140F) - TW, UF","75C":"75C (167F) - THWN, XHHW","90C":"90C (194F) - THHN, XHHW-2"},z=(parseFloat(f.flc)*1.25).toFixed(1),j={"60C":{14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:355,700:385,750:400},"75C":{14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,750:475},"90C":{14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535}},U={14:15,12:20,10:30},B=["14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750"].find(N=>{const A=j[f.tempRating][N]>=parseFloat(z),T=!U[N]||U[N]>=parseFloat(z);return A&&T}),re=B||"Larger than 750 kcmil required",ce=B?j[f.tempRating][B]:"N/A";C={calculatorName:"Motor Calculations - Wire Sizing",inputs:{motorFullLoadCurrent:`${f.flc} Amps`,temperatureRating:R[f.tempRating]},results:{requiredCapacity:`${z} Amps (125% of FLC)`,minimumWireSize:re,wireAmpacity:ce!=="N/A"?`${ce} Amps`:"N/A"},additionalInfo:{calculation:`Required capacity = ${f.flc}A  125% = ${z}A`,...B&&U[B]&&{ocpdLimitation:`NEC 240.4(D): ${U[B]}A maximum OCPD for ${re} wire`}},necReferences:["NEC 430.22 - Single Motor - Conductors supplying a single motor shall have an ampacity not less than 125% of FLC","NEC Table 310.16 - Allowable Ampacities of Insulated Conductors","NEC 240.4(D) - Small Conductors - Unless specifically permitted, overcurrent protection shall not exceed limits"]}}pn(C)}}));const w={flc:i.jsx(gE,{flcData:o,setFlcData:a,colors:g}),protection:i.jsx(yE,{protectionData:c,setProtectionData:u,colors:g}),wiresize:i.jsx(xE,{wireSizeData:f,setWireSizeData:d,colors:g})};return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:g.cardBg,border:`1px solid ${g.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>n("flc"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="flc"?"#3b82f6":"transparent",color:t==="flc"?"white":g.labelText,border:`1px solid ${t==="flc"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Full Load Current"}),i.jsx("button",{onClick:()=>n("protection"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="protection"?"#3b82f6":"transparent",color:t==="protection"?"white":g.labelText,border:`1px solid ${t==="protection"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Circuit Protection"}),i.jsx("button",{onClick:()=>n("wiresize"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="wiresize"?"#3b82f6":"transparent",color:t==="wiresize"?"white":g.labelText,border:`1px solid ${t==="wiresize"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Wire Sizing"})]})}),i.jsx("div",{style:{background:g.cardBg,border:`1px solid ${g.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:w[t]}),i.jsxs("div",{style:{background:g.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${g.cardBorder}`,fontSize:"0.8125rem",color:g.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:g.cardText},children:"NEC References:"}),"430.22 - Conductors (125% FLC)  430.52 - Circuit protection  430.250 - FLC tables  430.32 - Overload protection"]})]})}),bE=({data:r,setData:e,colors:t})=>{const o=(()=>{const a=parseFloat(r.squareFootage)||0,c=parseFloat(r.smallApplianceCircuits)||0,u=parseFloat(r.laundryCircuits)||0,f=parseFloat(r.rangeKW)||0,d=parseFloat(r.dryerKW)||0,g=parseFloat(r.waterHeaterKW)||0,w=parseFloat(r.hvacKW)||0,C=parseFloat(r.otherLoadsKW)||0,b=parseFloat(r.voltage),V=a*3,R=c*1500,z=u*1500,j=V+R+z;let U=0;j<=3e3?U=j:j<=12e4?U=3e3+(j-3e3)*.35:U=43950+(j-12e4)*.25;let H=0;f>0&&(f<=12?H=8e3:H=8e3+(f-12)*400);const B=Math.max(d*1e3,5e3),re=g*1e3,ce=w*1e3,N=C*1e3,A=U+H+B+re+ce+N,T=A/1e3,F=A/b;let k=100;return F>200?k=400:F>150?k=200:F>100&&(k=150),{generalLighting:V,smallApplianceLoad:R,laundryLoad:z,subtotalVA:j,demandLighting:U,rangeDemand:H,dryerDemand:B,waterHeaterDemand:re,hvacDemand:ce,otherDemand:N,totalDemandVA:A,totalDemandKW:T,totalAmperage:F,recommendedService:k}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem",minHeight:"2.5rem"},children:["Square",i.jsx("br",{}),"Footage",i.jsx("br",{}),"   ",i.jsx("br",{})]}),i.jsx("input",{type:"number",value:r.squareFootage,onChange:a=>e(c=>({...c,squareFootage:a.target.value})),placeholder:"Living area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Small Appliance Circuits"}),i.jsx("input",{type:"number",value:r.smallApplianceCircuits,onChange:a=>e(c=>({...c,smallApplianceCircuits:a.target.value})),placeholder:"Min 2",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"@ 1500 VA each"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Laundry Circuits ",i.jsx("br",{}),"   ",i.jsx("br",{})]}),i.jsx("input",{type:"number",value:r.laundryCircuits,onChange:a=>e(c=>({...c,laundryCircuits:a.target.value})),placeholder:"Typically 1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"@ 1500 VA"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Electric Range (kW)"}),i.jsx("input",{type:"number",value:r.rangeKW,onChange:a=>e(c=>({...c,rangeKW:a.target.value})),placeholder:"Nameplate rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Electric Dryer (kW)"}),i.jsx("input",{type:"number",value:r.dryerKW,onChange:a=>e(c=>({...c,dryerKW:a.target.value})),placeholder:"Min 5 kW",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Water Heater (kW)"}),i.jsx("input",{type:"number",value:r.waterHeaterKW,onChange:a=>e(c=>({...c,waterHeaterKW:a.target.value})),placeholder:"Rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"HVAC/Heat (kW)"}),i.jsx("input",{type:"number",value:r.hvacKW,onChange:a=>e(c=>({...c,hvacKW:a.target.value})),placeholder:"Largest load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Other Loads (kW)"}),i.jsx("input",{type:"number",value:r.otherLoadsKW,onChange:a=>e(c=>({...c,otherLoadsKW:a.target.value})),placeholder:"Pool, spa, etc",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),i.jsxs("select",{value:r.voltage,onChange:a=>e(c=>({...c,voltage:a.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"208",children:"208V"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]})]}),r.squareFootage&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Demand"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.totalDemandKW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Amperage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.totalAmperage.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"amps"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Recommended Service"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.recommendedService}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"amp service"})]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,marginBottom:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",color:t.cardText,marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Connected Loads:"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["General Lighting: ",o.generalLighting.toLocaleString()," VA"]}),i.jsxs("div",{children:["Small Appliance: ",o.smallApplianceLoad.toLocaleString()," VA"]}),i.jsxs("div",{children:["Laundry: ",o.laundryLoad.toLocaleString()," VA"]}),i.jsx("div",{style:{borderTop:`1px solid ${t.cardBorder}`,marginTop:"0.5rem",paddingTop:"0.5rem"},children:i.jsxs("strong",{children:["Subtotal: ",o.subtotalVA.toLocaleString()," VA"]})})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5",width:"100%"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Demand Loads (with factors applied):"}),i.jsxs("div",{children:["Lighting: ",o.demandLighting.toFixed(0)," VA"]}),r.rangeKW>0&&i.jsxs("div",{children:["Range: ",o.rangeDemand.toLocaleString()," W"]}),r.dryerKW>0&&i.jsxs("div",{children:["Dryer: ",o.dryerDemand.toLocaleString()," W"]}),r.waterHeaterKW>0&&i.jsxs("div",{children:["Water Heater: ",o.waterHeaterDemand.toLocaleString()," W"]}),r.hvacKW>0&&i.jsxs("div",{children:["HVAC: ",o.hvacDemand.toLocaleString()," W"]}),r.otherLoadsKW>0&&i.jsxs("div",{children:["Other: ",o.otherDemand.toLocaleString()," W"]})]})]})})]})]})},wE=({data:r,setData:e,colors:t})=>{const n={office:3.5,warehouse:.25,retail:3,school:3,restaurant:2,hotel:2,hospital:2,industrial:2},a=(()=>{const c=parseFloat(r.squareFootage)||0,u=parseFloat(r.hvacLoad)||0,f=parseFloat(r.receptacleLoad)||0,d=parseFloat(r.motorLoads)||0,g=parseFloat(r.otherLoads)||0,w=parseFloat(r.demandFactor)/100,C=parseFloat(r.voltage),b=c*n[r.occupancyType],V=b/1e3+u+f+d+g,R=V*w;let z;return r.phase==="single"?z=R*1e3/C:z=R*1e3/(1.732*C),{lightingVA:b,lightingKW:b/1e3,hvac:u,receptacles:f,motors:d,other:g,totalConnectedKW:V,demandLoadKW:R,amperage:z}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Square Footage"}),i.jsx("input",{type:"number",value:r.squareFootage,onChange:c=>e(u=>({...u,squareFootage:c.target.value})),placeholder:"Building area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Occupancy Type"}),i.jsxs("select",{value:r.occupancyType,onChange:c=>e(u=>({...u,occupancyType:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"office",children:"Office (3.5 VA/sq ft)"}),i.jsx("option",{value:"warehouse",children:"Warehouse (0.25 VA/sq ft)"}),i.jsx("option",{value:"retail",children:"Retail (3.0 VA/sq ft)"}),i.jsx("option",{value:"school",children:"School (3.0 VA/sq ft)"}),i.jsx("option",{value:"restaurant",children:"Restaurant (2.0 VA/sq ft)"}),i.jsx("option",{value:"hotel",children:"Hotel (2.0 VA/sq ft)"}),i.jsx("option",{value:"hospital",children:"Hospital (2.0 VA/sq ft)"}),i.jsx("option",{value:"industrial",children:"Industrial (2.0 VA/sq ft)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"HVAC Load (kW)"}),i.jsx("input",{type:"number",value:r.hvacLoad,onChange:c=>e(u=>({...u,hvacLoad:c.target.value})),placeholder:"Total HVAC",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Receptacle Load (kW)"}),i.jsx("input",{type:"number",value:r.receptacleLoad,onChange:c=>e(u=>({...u,receptacleLoad:c.target.value})),placeholder:"Receptacles",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Loads (kW)"}),i.jsx("input",{type:"number",value:r.motorLoads,onChange:c=>e(u=>({...u,motorLoads:c.target.value})),placeholder:"Total motors",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Other Loads (kW)"}),i.jsx("input",{type:"number",value:r.otherLoads,onChange:c=>e(u=>({...u,otherLoads:c.target.value})),placeholder:"Additional",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Demand Factor (%)"}),i.jsx("input",{type:"number",value:r.demandFactor,onChange:c=>e(u=>({...u,demandFactor:c.target.value})),placeholder:"80-100%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Peak load %"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"System Voltage"}),i.jsxs("select",{value:r.voltage,onChange:c=>e(u=>({...u,voltage:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"277",children:"277V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["System",i.jsx("br",{})," Phase"]}),i.jsxs("select",{value:r.phase,onChange:c=>e(u=>({...u,phase:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]})]}),r.squareFootage&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Connected Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:a.totalConnectedKW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Demand Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:a.demandLoadKW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Amperage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:a.amperage.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"amps"})]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,marginBottom:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",color:t.cardText,marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Connected Loads:"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Lighting: ",a.lightingKW.toFixed(2)," kW (",a.lightingVA.toFixed(0)," VA)"]}),r.hvacLoad>0&&i.jsxs("div",{children:["HVAC: ",a.hvac.toFixed(2)," kW"]}),r.receptacleLoad>0&&i.jsxs("div",{children:["Receptacles: ",a.receptacles.toFixed(2)," kW"]}),r.motorLoads>0&&i.jsxs("div",{children:["Motors: ",a.motors.toFixed(2)," kW"]}),r.otherLoads>0&&i.jsxs("div",{children:["Other: ",a.other.toFixed(2)," kW"]})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"System Configuration"}),i.jsxs("div",{children:[r.voltage,"V ",r.phase==="single"?"Single":"Three"," Phase"]}),i.jsxs("div",{children:[r.demandFactor,"% demand factor applied"]})]})]})})]})]})},SE=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=pe.useState("residential"),[a,c]=pe.useState({squareFootage:"",smallApplianceCircuits:"2",laundryCircuits:"1",rangeKW:"",dryerKW:"5",waterHeaterKW:"",hvacKW:"",otherLoadsKW:"",voltage:"240"}),[u,f]=pe.useState({squareFootage:"",occupancyType:"office",hvacLoad:"",receptacleLoad:"",motorLoads:"",otherLoads:"",demandFactor:"100",voltage:"480",phase:"three"}),d={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};return pe.useImperativeHandle(t,()=>({exportPDF:()=>{let g;if(n==="residential"){if(!a.squareFootage){alert("Please enter square footage before exporting");return}const w=parseFloat(a.squareFootage),C=parseFloat(a.smallApplianceCircuits)||0,b=parseFloat(a.laundryCircuits)||0,V=parseFloat(a.rangeKW)||0,R=parseFloat(a.dryerKW)||0,z=parseFloat(a.waterHeaterKW)||0,j=parseFloat(a.hvacKW)||0,U=parseFloat(a.otherLoadsKW)||0,H=parseFloat(a.voltage),B=w*3,re=C*1500,ce=b*1500,N=B+re+ce;let A=0;N<=3e3?A=N:N<=12e4?A=3e3+(N-3e3)*.35:A=3e3+117e3*.35+(N-12e4)*.25;let T=0;V>0&&(T=V<=12?8e3:8e3+(V-12)*400);const F=Math.max(R*1e3,5e3),k=z*1e3,v=j*1e3,L=U*1e3,M=A+T+F+k+v+L,$=(M/1e3).toFixed(2),oe=(M/H).toFixed(1);let se=100;parseFloat(oe)>200?se=400:parseFloat(oe)>150?se=200:parseFloat(oe)>100&&(se=150);const ie={squareFootage:`${a.squareFootage} sq ft`,smallApplianceCircuits:`${C} circuits @ 1500 VA each`,laundryCircuits:`${b} circuit @ 1500 VA`,serviceVoltage:`${a.voltage}V`};V>0&&(ie.electricRange=`${V} kW`),R>0&&(ie.electricDryer=`${R} kW`),z>0&&(ie.waterHeater=`${z} kW`),j>0&&(ie.hvacHeat=`${j} kW`),U>0&&(ie.otherLoads=`${U} kW`),g={calculatorName:"Load Calculations - Residential (NEC 220.82)",inputs:ie,results:{totalDemandLoad:`${$} kW (${M.toLocaleString()} VA)`,totalAmperage:`${oe} Amps`,recommendedService:`${se} Amp Service`},additionalInfo:{generalLighting:`${B.toLocaleString()} VA (${w} sq ft  3 VA/sq ft)`,smallAppliance:`${re.toLocaleString()} VA`,laundry:`${ce.toLocaleString()} VA`,lightingSubtotal:`${N.toLocaleString()} VA`,demandLightingAfterFactors:`${A.toFixed(0)} VA`,...V>0&&{rangeDemand:`${T.toLocaleString()} W`},...R>0&&{dryerDemand:`${F.toLocaleString()} W (min 5000 W)`},...z>0&&{waterHeaterDemand:`${k.toLocaleString()} W`},...j>0&&{hvacDemand:`${v.toLocaleString()} W`},...U>0&&{otherDemand:`${L.toLocaleString()} W`}},necReferences:["NEC 220.82 - Dwelling Unit Optional Calculation","NEC 220.83 - Existing Dwelling Unit","NEC Table 220.55 - Demand Factors for Electric Ranges","General lighting: 3 VA per square foot (NEC 220.12)","Demand factors: First 3000 VA @ 100%, Next 117000 VA @ 35%, Remainder @ 25%"]}}else if(n==="commercial"){if(!u.squareFootage){alert("Please enter square footage before exporting");return}const w={office:3.5,warehouse:.25,retail:3,school:3,restaurant:2,hotel:2,hospital:2,industrial:2},C={office:"Office",warehouse:"Warehouse",retail:"Retail",school:"School",restaurant:"Restaurant",hotel:"Hotel",hospital:"Hospital",industrial:"Industrial"},b=parseFloat(u.squareFootage),V=parseFloat(u.hvacLoad)||0,R=parseFloat(u.receptacleLoad)||0,z=parseFloat(u.motorLoads)||0,j=parseFloat(u.otherLoads)||0,U=parseFloat(u.demandFactor)/100,H=parseFloat(u.voltage),B=b*w[u.occupancyType],re=(B/1e3).toFixed(2),ce=(B/1e3+V+R+z+j).toFixed(2),N=(parseFloat(ce)*U).toFixed(2);let A;u.phase==="single"?A=(parseFloat(N)*1e3/H).toFixed(1):A=(parseFloat(N)*1e3/(1.732*H)).toFixed(1);const T={squareFootage:`${u.squareFootage} sq ft`,occupancyType:`${C[u.occupancyType]} (${w[u.occupancyType]} VA/sq ft)`,demandFactor:`${u.demandFactor}%`,systemConfiguration:`${u.voltage}V ${u.phase==="single"?"Single":"Three"} Phase`};V>0&&(T.hvacLoad=`${V} kW`),R>0&&(T.receptacleLoad=`${R} kW`),z>0&&(T.motorLoads=`${z} kW`),j>0&&(T.otherLoads=`${j} kW`),g={calculatorName:"Load Calculations - Commercial",inputs:T,results:{connectedLoad:`${ce} kW`,demandLoad:`${N} kW`,totalAmperage:`${A} Amps`},additionalInfo:{lighting:`${re} kW (${B.toFixed(0)} VA)`,calculationMethod:u.phase==="single"?`Amperage = (${N} kW  1000)  ${H}V = ${A} A`:`Amperage = (${N} kW  1000)  (1.732  ${H}V) = ${A} A`,demandFactorNote:`${u.demandFactor}% demand factor applied to total connected load`},necReferences:["NEC Article 220 - Branch-Circuit, Feeder, and Service Load Calculations","NEC Table 220.12 - General Lighting Loads by Occupancy","NEC 220.42 - General Lighting","NEC 220.50 - Motors","Always verify with actual connected loads and local codes"]}}pn(g)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"residential",label:"Residential"},{id:"commercial",label:"Commercial"}].map(g=>i.jsx("button",{onClick:()=>o(g.id),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.625rem 1rem",background:n===g.id?"#3b82f6":d.sectionBg,color:n===g.id?"white":d.labelText,border:`1px solid ${n===g.id?"#3b82f6":d.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:g.label},g.id))}),i.jsx("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:n==="residential"?i.jsx(bE,{data:a,setData:c,colors:d}):i.jsx(wE,{data:u,setData:f,colors:d})})]})}),_E=pe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=pe.useState("sizing"),[o,a]=pe.useState(""),[c,u]=pe.useState("480"),[f,d]=pe.useState("208"),[g,w]=pe.useState("three"),[C,b]=pe.useState("continuous"),[V,R]=pe.useState("0.85"),[z,j]=pe.useState(""),[U,H]=pe.useState("480"),[B,re]=pe.useState("208"),[ce,N]=pe.useState("three"),A={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},T=[3,6,9,15,30,45,75,112.5,150,225,300,500,750,1e3,1500,2e3,2500,3e3],F=()=>{const M=parseFloat(o)||0;if(M===0)return null;let $=1;C==="continuous"&&($=1.25);const oe=M*$,se=T.find(ie=>ie>=oe)||oe;return{loadKVA:M,requiredKVA:oe.toFixed(1),recommendedSize:se,utilizationPercent:(M/se*100).toFixed(1)}},k=()=>{const M=parseFloat(z)||0;if(M===0)return null;const $=parseFloat(U),oe=parseFloat(B);let se,ie;return ce==="single"?(se=M*1e3/$,ie=M*1e3/oe):(se=M*1e3/(1.732*$),ie=M*1e3/(1.732*oe)),{kva:M,primaryCurrent:se.toFixed(1),secondaryCurrent:ie.toFixed(1),primaryVoltage:$,secondaryVoltage:oe}},v=F(),L=k();return pe.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="sizing"){if(!o){alert("Please enter load (kVA) before exporting to PDF");return}const M={calculatorName:"Transformer Calculations - Transformer Sizing",inputs:{Load:`${o} kVA`,"Primary Voltage":`${c}V`,"Secondary Voltage":`${f}V`,Phase:g==="single"?"Single Phase":"Three Phase","Load Type":C==="continuous"?"Continuous (125% sizing)":"Non-Continuous (100% sizing)","Power Factor":V},results:{"Recommended Transformer Size":`${v.recommendedSize} kVA`,Configuration:`${c}V to ${f}V`,Phase:g==="single"?"Single Phase":"Three Phase","Connected Load":`${v.loadKVA} kVA`,"Required Capacity":`${v.requiredKVA} kVA`,Utilization:`${v.utilizationPercent}%`},additionalInfo:{"Sizing Factor":C==="continuous"?"125% (continuous loads)":"100% (non-continuous loads)","Calculation Method":"Required Capacity = Connected Load  Sizing Factor","Utilization Note":parseFloat(v.utilizationPercent)>80?"WARNING: Utilization above 80% may result in higher operating temperatures and reduced equipment life":"Utilization is within acceptable range"},necReferences:["NEC 450.3 - Overcurrent Protection for Transformers","NEC 450.9 - Ventilation Requirements","NEC 450.11 - Marking Requirements","NEC 450.21 - Dry-Type Transformers Installed Indoors","Size continuous loads at 125% per NEC requirements","Keep utilization below 80% for optimal efficiency and equipment life","Consider future load growth (typically 20-25% spare capacity)","Account for inrush current for motor loads","Consider ambient temperature and ventilation requirements"]};pn(M)}else if(t==="currents"){if(!z){alert("Please enter transformer rating (kVA) before exporting to PDF");return}const M=ce==="single"?"I = (kVA  1000)  V":"I = (kVA  1000)  (1.732  V)",$={calculatorName:"Transformer Calculations - Current Calculations",inputs:{"Transformer Rating":`${z} kVA`,"Primary Voltage":`${U}V`,"Secondary Voltage":`${B}V`,Phase:ce==="single"?"Single Phase":"Three Phase"},results:{Configuration:`${L.kva} kVA, ${ce==="single"?"Single":"Three"} Phase`,"Voltage Ratio":`${L.primaryVoltage}V / ${L.secondaryVoltage}V`,"Primary Current":`${L.primaryCurrent} A`,"Secondary Current":`${L.secondaryCurrent} A`},additionalInfo:{"Formula Used":M,"Primary Side":`${L.primaryCurrent}A at ${L.primaryVoltage}V`,"Secondary Side":`${L.secondaryCurrent}A at ${L.secondaryVoltage}V`,Application:"Use these currents for selecting primary and secondary protection devices per NEC Article 450"},necReferences:["NEC Article 450 - Transformers and Transformer Vaults","NEC 450.3 - Overcurrent Protection","Single Phase Formula: I = (kVA  1000)  V","Three Phase Formula: I = (kVA  1000)  (1.732  V)","Primary and secondary protection must be sized per calculated currents","Consider temperature correction and adjustment factors for conductors","Account for voltage drop in feeder calculations"]};pn($)}}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>n("sizing"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="sizing"?"#3b82f6":"transparent",color:t==="sizing"?"white":A.labelText,border:`1px solid ${t==="sizing"?"#3b82f6":A.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Transformer Sizing"}),i.jsx("button",{onClick:()=>n("currents"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="currents"?"#3b82f6":"transparent",color:t==="currents"?"white":A.labelText,border:`1px solid ${t==="currents"?"#3b82f6":A.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Current Calculations"})]})}),t==="sizing"?i.jsxs("div",{children:[i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${A.cardBorder}`,paddingBottom:"0.5rem"},children:"Transformer Parameters"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Load (kVA)"}),i.jsx("input",{type:"number",value:o,onChange:M=>a(M.target.value),placeholder:"Connected load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:A.subtleText,marginTop:"0.25rem"},children:"Total connected or demand load"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Primary Voltage"}),i.jsxs("select",{value:c,onChange:M=>u(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"}),i.jsx("option",{value:"2400",children:"2400V"}),i.jsx("option",{value:"4160",children:"4160V"}),i.jsx("option",{value:"12470",children:"12470V"}),i.jsx("option",{value:"13200",children:"13200V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Secondary Voltage"}),i.jsxs("select",{value:f,onChange:M=>d(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"120",children:"120V"}),i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"277",children:"277V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Phase"}),i.jsxs("select",{value:g,onChange:M=>w(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Load Type"}),i.jsxs("select",{value:C,onChange:M=>b(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"continuous",children:"Continuous (125% sizing)"}),i.jsx("option",{value:"noncontinuous",children:"Non-Continuous (100% sizing)"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:A.subtleText,marginTop:"0.25rem"},children:"Continuous loads operate 3+ hours"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),i.jsxs("select",{value:V,onChange:M=>R(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"1.0",children:"1.0 (Unity)"}),i.jsx("option",{value:"0.95",children:"0.95 (Excellent)"}),i.jsx("option",{value:"0.9",children:"0.9 (Good)"}),i.jsx("option",{value:"0.85",children:"0.85 (Typical)"}),i.jsx("option",{value:"0.8",children:"0.8 (Poor)"})]})]})]})]}),v&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem"},children:"Sizing Calculation"}),i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${A.cardBorder}`},children:[i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:A.labelText},children:[i.jsx("strong",{style:{color:A.cardText},children:"Connected Load:"})," ",v.loadKVA," kVA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:A.labelText},children:[i.jsx("strong",{style:{color:A.cardText},children:"Required Capacity:"})," ",v.requiredKVA," kVA"]}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:A.subtleText,fontStyle:"italic"},children:["(",C==="continuous"?"125%":"100%"," sizing factor applied)"]})]})]}),i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem"},children:"Recommended Transformer"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Transformer Size"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[v.recommendedSize," kVA"]})]}),i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${A.cardBorder}`,marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:A.labelText,marginBottom:"0.5rem"},children:[i.jsx("strong",{style:{color:A.cardText},children:"Configuration:"})," ",c,"V to ",f,"V"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:A.labelText},children:[i.jsx("strong",{style:{color:A.cardText},children:"Phase:"})," ",g==="single"?"Single":"Three"," Phase"]})]}),i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginBottom:"0.25rem"},children:"Utilization"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:A.cardText},children:[v.utilizationPercent,"%"]})]})]}),parseFloat(v.utilizationPercent)>80&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Qc,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"High Utilization Warning"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Transformer utilization above 80% may result in higher operating temperatures and reduced equipment life. Consider next size up for better efficiency."})]})]})})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Transformer Sizing Guidelines:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Size for continuous loads at 125% per NEC 450.3"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider future load growth (typically 20-25%)"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Keep utilization below 80% for optimal efficiency"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Account for inrush current for motor loads"}),i.jsx("li",{children:"Consider ambient temperature and ventilation"})]})]})]})})]}):i.jsxs("div",{children:[i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${A.cardBorder}`,paddingBottom:"0.5rem"},children:"Transformer Information"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Transformer Rating (kVA)"}),i.jsx("input",{type:"number",value:z,onChange:M=>j(M.target.value),placeholder:"Transformer kVA",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Primary Voltage"}),i.jsxs("select",{value:U,onChange:M=>H(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"}),i.jsx("option",{value:"2400",children:"2400V"}),i.jsx("option",{value:"4160",children:"4160V"}),i.jsx("option",{value:"12470",children:"12470V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Secondary Voltage"}),i.jsxs("select",{value:B,onChange:M=>re(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"120",children:"120V"}),i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"277",children:"277V"}),i.jsx("option",{value:"480",children:"480V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Phase"}),i.jsxs("select",{value:ce,onChange:M=>N(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]})]})]}),L&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem"},children:"Transformer Configuration"}),i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${A.cardBorder}`},children:[i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:A.labelText},children:[i.jsx("strong",{style:{color:A.cardText},children:"Rating:"})," ",L.kva," kVA, ",ce==="single"?"Single":"Three"," Phase"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:A.labelText},children:[i.jsx("strong",{style:{color:A.cardText},children:"Configuration:"})," ",L.primaryVoltage,"V / ",L.secondaryVoltage,"V"]})]})]}),i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e40af",marginTop:0,marginBottom:"1rem"},children:"Primary Side"}),i.jsx("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${A.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:A.labelText},children:[i.jsx("strong",{style:{color:A.cardText},children:"Voltage:"})," ",L.primaryVoltage,"V"]})}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Primary Current"}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:L.primaryCurrent}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#059669",marginTop:0,marginBottom:"1rem"},children:"Secondary Side"}),i.jsx("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${A.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:A.labelText},children:[i.jsx("strong",{style:{color:A.cardText},children:"Voltage:"})," ",L.secondaryVoltage,"V"]})}),i.jsxs("div",{style:{background:"#d1fae5",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#059669",marginBottom:"0.25rem"},children:"Secondary Current"}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#059669"},children:L.secondaryCurrent}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#059669",marginTop:"0.25rem"},children:"Amperes"})]})]})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Current Formulas:"}),i.jsxs("div",{style:{fontSize:"0.8125rem",marginBottom:"0.25rem"},children:[i.jsx("strong",{children:"Single Phase:"})," I = (kVA  1000)  V"]}),i.jsxs("div",{style:{fontSize:"0.8125rem",marginBottom:"0.5rem"},children:[i.jsx("strong",{children:"Three Phase:"})," I = (kVA  1000)  (1.732  V)"]}),i.jsx("div",{style:{fontSize:"0.75rem",fontStyle:"italic"},children:"Note: Use these currents for selecting primary and secondary protection devices per NEC Article 450."})]})]})})]}),i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${A.cardBorder}`,fontSize:"0.8125rem",color:A.labelText,marginTop:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:A.cardText},children:"NEC Article 450 - Transformers and Transformer Vaults:"}),"450.3: Overcurrent protection  450.9: Ventilation requirements  450.11: Marking  450.21: Dry-type transformers indoors"]})]})}),TE=pe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=pe.useState("residential"),[o,a]=pe.useState(""),[c,u]=pe.useState(""),[f,d]=pe.useState(""),[g,w]=pe.useState(""),[C,b]=pe.useState(""),[V,R]=pe.useState(""),[z,j]=pe.useState("240"),[U,H]=pe.useState(""),[B,re]=pe.useState("80"),[ce,N]=pe.useState("480"),[A,T]=pe.useState("three"),[F,k]=pe.useState("25"),v={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},L=()=>{const se=parseFloat(o)||0,ie=parseFloat(c)||0,ye=parseFloat(f)||0,xe=parseFloat(g)||0,ee=parseFloat(C)||0,D=parseFloat(V)||0,q=parseFloat(z),X=se*3,de=2*1500,me=1500,we=X+de+me;let Ae=0;we<=3e3?Ae=we:Ae=3e3+(we-3e3)*.35;let Ce=0;xe>0&&(xe<=12e3?Ce=8e3:Ce=8e3+(xe-12e3)*.05);const Be=Math.max(ee,5e3),qe=ye,et=ie,Qe=D,Fe=Ae+Ce+Be+qe+et+Qe,he=Fe/q;let Pt=100;return he>200?Pt=400:he>150?Pt=200:he>100&&(Pt=150),{generalLighting:X,smallAppliance:de,laundry:me,subtotal:we,demandLighting:Ae,rangeDemand:Ce,dryerDemand:Be,whDemand:qe,hvacDemand:et,otherDemand:Qe,totalDemand:Fe,totalAmperage:he,recommendedService:Pt,conductorSize:{100:"4 AWG",150:"1/0 AWG",200:"2/0 AWG",400:"400 kcmil"}[Pt]}},M=()=>{const se=parseFloat(U)||0,ie=parseFloat(B)/100,ye=parseFloat(F)/100,xe=parseFloat(ce),ee=se*ie,D=ee*(1+ye);let q;A==="single"?q=D*1e3/xe:q=D*1e3/(1.732*xe);const de=[100,150,200,225,400,600,800,1e3,1200,1600,2e3,2500,3e3,4e3].find(me=>me>=q)||Math.ceil(q/100)*100;return{connectedLoad:se,demandLoad:ee,futureLoad:D,amperage:q,recommendedService:de}},$=L(),oe=M();return pe.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="residential"){if(!o){alert("Please enter square footage before exporting to PDF");return}const se={calculatorName:"Service Entrance Sizing - Residential",inputs:{"Square Footage":`${o} sq ft`,"HVAC/Heat Load":c?`${c} W`:"Not specified","Water Heater":f?`${f} W`:"Not specified","Range/Oven":g?`${g} W`:"Not specified",Dryer:C?`${C} W`:"Not specified","Other Loads":V?`${V} W`:"Not specified","Service Voltage":`${z}V`},results:{"Recommended Service Size":`${$.recommendedService}A`,"Service Conductors":`${$.conductorSize} Copper`,"Total Demand Load":`${$.totalDemand.toFixed(0)} W`,"Calculated Amperage":`${$.totalAmperage.toFixed(1)} A`},additionalInfo:{"General Lighting Load":`${$.generalLighting.toLocaleString()} VA`,"Small Appliance Circuits":`${$.smallAppliance.toLocaleString()} VA`,"Laundry Circuit":`${$.laundry.toLocaleString()} VA`,"Lighting Demand (after factors)":`${$.demandLighting.toFixed(0)} W`,"Range Demand":g?`${$.rangeDemand.toFixed(0)} W`:"N/A","Dryer Demand":C?`${$.dryerDemand.toFixed(0)} W`:"N/A","Water Heater":f?`${$.whDemand.toFixed(0)} W`:"N/A",HVAC:c?`${$.hvacDemand.toFixed(0)} W`:"N/A","Calculation Method":"NEC Article 220.82 - Dwelling Unit Optional Calculation"},necReferences:["NEC 220.82 - Dwelling Unit Optional Calculation","NEC 230.42 - Minimum Size and Rating (service conductors)","NEC 230.79 - Rating of Service Disconnecting Means","NEC 230.90 - Where Required (overload protection)","NEC Table 310.15(B)(16) - Allowable Ampacities","Service conductors shown are approximate for 75C copper. Consult NEC for exact sizing with all derating factors."]};pn(se)}else if(t==="commercial"){if(!U){alert("Please enter total connected load before exporting to PDF");return}const se={calculatorName:"Service Entrance Sizing - Commercial",inputs:{"Total Connected Load":`${U} kW`,"Demand Factor":`${B}%`,"Future Expansion":`${F}%`,"Service Voltage":`${ce}V`,"System Phase":A==="single"?"Single Phase":"Three Phase"},results:{"Recommended Service Size":`${oe.recommendedService}A`,"System Configuration":`${ce}V ${A==="single"?"Single":"Three"} Phase`,"Connected Load":`${oe.connectedLoad.toFixed(1)} kW`,"Demand Load":`${oe.demandLoad.toFixed(1)} kW`,"With Future Expansion":`${oe.futureLoad.toFixed(1)} kW`,"Calculated Amperage":`${oe.amperage.toFixed(1)} A`},additionalInfo:{"Calculation Method":"Commercial demand calculation with future expansion factor","Demand Factor Applied":`${B}% of connected load`,"Future Growth Allowance":`${F}% spare capacity`,"Formula Used":A==="single"?"Amperage = (kW  1000) / Voltage":"Amperage = (kW  1000) / (1.732  Voltage)"},necReferences:["NEC Article 220 Part IV - Optional Feeder and Service Load Calculations","NEC 220.40 - General (demand factors)","NEC 230.42 - Minimum Size and Rating","NEC 230.79 - Rating of Service Disconnecting Means","Consider demand factors per NEC 220.40 and Article 220 Part IV","Include motor loads, HVAC, and large equipment per NEC requirements","Review utility requirements and available fault current","Future expansion typically 20-30% spare capacity"]};pn(se)}}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>n("residential"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="residential"?"#3b82f6":"transparent",color:t==="residential"?"white":v.labelText,border:`1px solid ${t==="residential"?"#3b82f6":v.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Residential"}),i.jsx("button",{onClick:()=>n("commercial"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="commercial"?"#3b82f6":"transparent",color:t==="commercial"?"white":v.labelText,border:`1px solid ${t==="commercial"?"#3b82f6":v.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Commercial"})]})}),t==="residential"?i.jsxs("div",{children:[i.jsxs("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:v.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${v.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Information"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Square Footage"}),i.jsx("input",{type:"number",value:o,onChange:se=>a(se.target.value),placeholder:"Living area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:v.subtleText,marginTop:"0.25rem"},children:"Heated/cooled living space"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"HVAC/Heat Load (Watts)"}),i.jsx("input",{type:"number",value:c,onChange:se=>u(se.target.value),placeholder:"Largest load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Water Heater (Watts)"}),i.jsx("input",{type:"number",value:f,onChange:se=>d(se.target.value),placeholder:"Nameplate rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Range/Oven (Watts)"}),i.jsx("input",{type:"number",value:g,onChange:se=>w(se.target.value),placeholder:"Electric range",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Dryer (Watts)"}),i.jsx("input",{type:"number",value:C,onChange:se=>b(se.target.value),placeholder:"Electric dryer",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:v.subtleText,marginTop:"0.25rem"},children:"Minimum 5000W if electric"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Other Loads (Watts)"}),i.jsx("input",{type:"number",value:V,onChange:se=>R(se.target.value),placeholder:"Pool, spa, etc.",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),i.jsxs("select",{value:z,onChange:se=>j(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"208",children:"208V"})]})]})]})]}),o&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:v.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${v.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Breakdown"}),i.jsxs("div",{style:{background:v.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${v.cardBorder}`},children:[i.jsx("strong",{style:{display:"block",marginBottom:"0.5rem",color:v.cardText,fontSize:"0.875rem"},children:"Connected Loads:"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:v.labelText,marginBottom:"0.25rem"},children:["General Lighting: ",$.generalLighting.toLocaleString()," VA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:v.labelText,marginBottom:"0.25rem"},children:["Small Appliance: ",$.smallAppliance.toLocaleString()," VA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:v.labelText,marginBottom:"0.5rem"},children:["Laundry: ",$.laundry.toLocaleString()," VA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:v.subtleText,paddingTop:"0.5rem",borderTop:`1px solid ${v.cardBorder}`},children:["Subtotal: ",$.subtotal.toLocaleString()," VA"]})]}),i.jsxs("div",{style:{background:v.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${v.cardBorder}`},children:[i.jsx("strong",{style:{display:"block",marginBottom:"0.5rem",color:v.cardText,fontSize:"0.875rem"},children:"Demand Loads (after factors):"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:v.labelText,marginBottom:"0.25rem"},children:["Lighting: ",$.demandLighting.toFixed(0)," W"]}),g&&i.jsxs("div",{style:{fontSize:"0.875rem",color:v.labelText,marginBottom:"0.25rem"},children:["Range: ",$.rangeDemand.toFixed(0)," W"]}),C&&i.jsxs("div",{style:{fontSize:"0.875rem",color:v.labelText,marginBottom:"0.25rem"},children:["Dryer: ",$.dryerDemand.toFixed(0)," W"]}),f&&i.jsxs("div",{style:{fontSize:"0.875rem",color:v.labelText,marginBottom:"0.25rem"},children:["Water Heater: ",$.whDemand.toFixed(0)," W"]}),c&&i.jsxs("div",{style:{fontSize:"0.875rem",color:v.labelText,marginBottom:"0.25rem"},children:["HVAC: ",$.hvacDemand.toFixed(0)," W"]}),V&&i.jsxs("div",{style:{fontSize:"0.875rem",color:v.labelText},children:["Other: ",$.otherDemand.toFixed(0)," W"]})]})]}),i.jsxs("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:v.cardText,marginTop:0,marginBottom:"1rem"},children:"Service Sizing Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:v.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:v.labelText,marginBottom:"0.25rem"},children:"Total Demand Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:v.cardText},children:$.totalDemand.toFixed(0)}),i.jsx("div",{style:{fontSize:"0.75rem",color:v.labelText,marginTop:"0.25rem"},children:"Watts"})]}),i.jsxs("div",{style:{background:v.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:v.labelText,marginBottom:"0.25rem"},children:"Calculated Amperage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:v.cardText},children:$.totalAmperage.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:v.labelText,marginTop:"0.25rem"},children:"Amperes"})]})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Recommended Service Size"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[$.recommendedService,"A"]})]}),i.jsx("div",{style:{background:v.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center",border:`1px solid ${v.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:v.labelText},children:[i.jsx("strong",{style:{color:v.cardText},children:"Service Conductors:"})," ",$.conductorSize," Copper"]})})]})]}),i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Important Notes:"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Service conductors are approximate for 75C copper. Consult NEC Table 310.15(B)(16) for exact sizing with all derating factors."})]})]})})]}):i.jsxs("div",{children:[i.jsxs("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:v.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${v.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Information"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Total Connected Load (kW)"}),i.jsx("input",{type:"number",value:U,onChange:se=>H(se.target.value),placeholder:"Total building load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Demand Factor (%)"}),i.jsx("input",{type:"number",value:B,onChange:se=>re(se.target.value),placeholder:"Typically 70-90%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:v.subtleText,marginTop:"0.25rem"},children:"Peak demand percentage"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Future Expansion (%)"}),i.jsx("input",{type:"number",value:F,onChange:se=>k(se.target.value),placeholder:"Typically 20-30%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:v.subtleText,marginTop:"0.25rem"},children:"Spare capacity for growth"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),i.jsxs("select",{value:ce,onChange:se=>N(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"System Phase"}),i.jsxs("select",{value:A,onChange:se=>T(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]})]})]}),U&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:v.cardText,marginTop:0,marginBottom:"1rem"},children:"Load Calculation"}),i.jsxs("div",{style:{background:v.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${v.cardBorder}`,marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:v.labelText},children:[i.jsx("strong",{style:{color:v.cardText},children:"Connected Load:"})," ",oe.connectedLoad.toFixed(1)," kW"]}),i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:v.labelText},children:[i.jsxs("strong",{style:{color:v.cardText},children:["Demand Load (",B,"%):"]})," ",oe.demandLoad.toFixed(1)," kW"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:v.labelText},children:[i.jsxs("strong",{style:{color:v.cardText},children:["With Future Expansion (",F,"%):"]})," ",oe.futureLoad.toFixed(1)," kW"]})]}),i.jsxs("div",{style:{background:v.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:v.labelText,marginBottom:"0.25rem"},children:"Calculated Amperage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:v.cardText},children:oe.amperage.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:v.labelText,marginTop:"0.25rem"},children:"Amperes"})]})]}),i.jsxs("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:v.cardText,marginTop:0,marginBottom:"1rem"},children:"Recommended Service"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Service Size"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[oe.recommendedService,"A"]})]}),i.jsx("div",{style:{background:v.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center",border:`1px solid ${v.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:v.labelText},children:["@ ",ce,"V ",A==="single"?"Single":"Three"," Phase"]})})]})]}),i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Commercial Service Considerations:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Include demand factors per NEC 220.40 and Article 220 Part IV"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider future expansion (typically 20-30% spare capacity)"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Account for motor loads, HVAC, and large equipment"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Review utility requirements and available fault current"}),i.jsx("li",{children:"Consider separate services for different occupancies"})]})]})]})})]}),i.jsxs("div",{style:{background:v.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${v.cardBorder}`,fontSize:"0.8125rem",color:v.labelText,marginTop:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:v.cardText},children:"NEC Article 230 - Services and Service Equipment:"}),"220.82: Dwelling unit optional calculation  230.42: Minimum conductor size  230.79: Disconnecting means rating  230.90: Overload protection"]})]})}),AE=({gecData:r,setGecData:e,colors:t})=>{const n={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}},a=(()=>{if(!r.serviceSize)return null;const c=r.serviceSize;let u="";const f=["14","12","10","8","6","4","3","2","1"],d=["1/0","2/0","3/0","4/0"],g=parseInt(c);return f.includes(c)?parseInt(c)>=2?u="2 or smaller":c==="1"&&(u="1 or 1/0"):d.includes(c)?c==="1/0"?u="1 or 1/0":c==="2/0"||c==="3/0"?u="2/0 or 3/0":c==="4/0"&&(u="4/0 to 350"):isNaN(g)||(g>=250&&g<=350?u="4/0 to 350":g>=400&&g<=600?u="400 to 600":g>=650&&g<=1100?u="650 to 1100":g>1100&&(u="over 1100")),{serviceSize:c,category:u,gecSize:n[r.conductorMaterial][u]||"N/A"}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Service Conductor Size"}),i.jsxs("select",{value:r.serviceSize,onChange:c=>e(u=>({...u,serviceSize:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"",children:"Select Size"}),i.jsx("option",{value:"8",children:"8 AWG"}),i.jsx("option",{value:"6",children:"6 AWG"}),i.jsx("option",{value:"4",children:"4 AWG"}),i.jsx("option",{value:"2",children:"2 AWG"}),i.jsx("option",{value:"1",children:"1 AWG"}),i.jsx("option",{value:"1/0",children:"1/0 AWG"}),i.jsx("option",{value:"2/0",children:"2/0 AWG"}),i.jsx("option",{value:"3/0",children:"3/0 AWG"}),i.jsx("option",{value:"4/0",children:"4/0 AWG"}),i.jsx("option",{value:"250",children:"250 kcmil"}),i.jsx("option",{value:"350",children:"350 kcmil"}),i.jsx("option",{value:"500",children:"500 kcmil"}),i.jsx("option",{value:"750",children:"750 kcmil"}),i.jsx("option",{value:"1000",children:"1000 kcmil"}),i.jsx("option",{value:"1500",children:"1500 kcmil"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Largest ungrounded service conductor"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"GEC Material"}),i.jsxs("select",{value:r.conductorMaterial,onChange:c=>e(u=>({...u,conductorMaterial:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]}),a&&a.gecSize!=="N/A"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Grounding Electrode Conductor"}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[a.gecSize," AWG"]}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Per NEC Table 250.66"}),i.jsxs("div",{children:["Service conductor: ",a.serviceSize," AWG ",r.conductorMaterial]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Important Notes:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"GEC to rod/pipe/plate need not be larger than 6 AWG copper"}),i.jsx("li",{children:"GEC to concrete-encased electrode need not be larger than 4 AWG copper"}),i.jsx("li",{children:"Must be continuous without splices (except as permitted)"})]})]})]})]})},CE=({egcData:r,setEgcData:e,colors:t})=>{const n={copper:{15:"14",20:"12",30:"10",40:"10",60:"10",100:"8",200:"6",300:"4",400:"3",500:"2",600:"1",800:"1/0",1e3:"2/0",1200:"3/0",1600:"4/0",2e3:"250",2500:"350",3e3:"400",4e3:"500",5e3:"700",6e3:"800"},aluminum:{15:"12",20:"10",30:"8",40:"8",60:"8",100:"6",200:"4",300:"2",400:"1",500:"1/0",600:"2/0",800:"3/0",1e3:"4/0",1200:"250",1600:"350",2e3:"400",2500:"500",3e3:"600",4e3:"750",5e3:"1000",6e3:"1200"}},a=(()=>{const c=parseInt(r.ocpdRating);if(!c)return null;const u=Object.keys(n[r.conductorMaterial]).map(Number).sort((d,g)=>d-g),f=u.find(d=>d>=c)||u[u.length-1];return{ocpdRating:c,applicableRating:f,egcSize:n[r.conductorMaterial][f]}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Overcurrent Device Rating (A)"}),i.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:r.ocpdRating,onChange:c=>{const u=c.target.value.replace(/[^0-9]/g,"");e(f=>({...f,ocpdRating:u}))},placeholder:"Enter rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Circuit breaker or fuse rating"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["EGC Material ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsxs("select",{value:r.conductorMaterial,onChange:c=>e(u=>({...u,conductorMaterial:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Equipment Grounding Conductor"}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[a.egcSize," AWG"]}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Per NEC Table 250.122"}),i.jsxs("div",{children:["OCPD rating: ",a.ocpdRating,"A"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Important Notes:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Increase proportionally if conductors upsized for voltage drop"}),i.jsx("li",{children:"Size per each raceway if conductors run in parallel"}),i.jsx("li",{children:"Based on rating of OCPD ahead of circuit"})]})]})]})]})},kE=({bondingData:r,setBondingData:e,colors:t})=>{const n={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}},a=(()=>{if(!r.serviceSize)return null;const c=r.serviceSize;let u="";const f=["14","12","10","8","6","4","3","2","1"],d=["1/0","2/0","3/0","4/0"],g=parseInt(c);return f.includes(c)?parseInt(c)>=2?u="2 or smaller":c==="1"&&(u="1 or 1/0"):d.includes(c)?c==="1/0"?u="1 or 1/0":c==="2/0"||c==="3/0"?u="2/0 or 3/0":c==="4/0"&&(u="4/0 to 350"):isNaN(g)||(g>=250&&g<=350?u="4/0 to 350":g>=400&&g<=600?u="400 to 600":g>=650&&g<=1100?u="650 to 1100":g>1100&&(u="over 1100")),{serviceSize:c,jumperSize:n[r.conductorMaterial][u]||"N/A",jumperType:r.jumperType}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Bonding Jumper Type"}),i.jsxs("select",{value:r.jumperType,onChange:c=>e(u=>({...u,jumperType:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"main",children:"Main Bonding Jumper (Service)"}),i.jsx("option",{value:"system",children:"System Bonding Jumper (Separately Derived)"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Conductor Size"}),i.jsxs("select",{value:r.serviceSize,onChange:c=>e(u=>({...u,serviceSize:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"",children:"Select Size"}),i.jsx("option",{value:"8",children:"8 AWG"}),i.jsx("option",{value:"6",children:"6 AWG"}),i.jsx("option",{value:"4",children:"4 AWG"}),i.jsx("option",{value:"2",children:"2 AWG"}),i.jsx("option",{value:"1",children:"1 AWG"}),i.jsx("option",{value:"1/0",children:"1/0 AWG"}),i.jsx("option",{value:"2/0",children:"2/0 AWG"}),i.jsx("option",{value:"3/0",children:"3/0 AWG"}),i.jsx("option",{value:"4/0",children:"4/0 AWG"}),i.jsx("option",{value:"250",children:"250 kcmil"}),i.jsx("option",{value:"500",children:"500 kcmil"}),i.jsx("option",{value:"750",children:"750 kcmil"}),i.jsx("option",{value:"1000",children:"1000 kcmil"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Material"}),i.jsxs("select",{value:r.conductorMaterial,onChange:c=>e(u=>({...u,conductorMaterial:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]})]}),a&&a.jumperSize!=="N/A"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:[r.jumperType==="main"?"Main":"System"," Bonding Jumper"]}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[a.jumperSize," AWG"]}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:["Per NEC ",r.jumperType==="main"?"250.28(D)":"250.30(A)(1)"]}),i.jsxs("div",{children:["Conductor size: ",a.serviceSize," AWG ",r.conductorMaterial]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:[r.jumperType==="main"?"Main":"System"," Bonding Jumper Requirements:"]}),i.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:r.jumperType==="main"?i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Connects grounded conductor to equipment grounding conductor"}),i.jsx("li",{children:"Sized per Table 250.66 based on service conductor"}),i.jsx("li",{children:"Can be wire, bus, screw, or similar conductor"})]}):i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Required for separately derived systems"}),i.jsx("li",{children:"Connects grounded to equipment grounding conductor"}),i.jsx("li",{children:"Installed at same location as GEC connection"})]})})]})]})]})},jE=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=pe.useState("gec"),[a,c]=pe.useState({serviceSize:"",conductorMaterial:"copper"}),[u,f]=pe.useState({ocpdRating:"",conductorMaterial:"copper"}),[d,g]=pe.useState({serviceSize:"",conductorMaterial:"copper",jumperType:"main"}),w=pe.useMemo(()=>({cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"}),[r]);return pe.useImperativeHandle(t,()=>({exportPDF:()=>{let C;if(n==="gec"){if(!a.serviceSize){alert("Please select a service conductor size before exporting");return}const b={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}};let V="";const R=a.serviceSize,z=["14","12","10","8","6","4","3","2","1"],j=["1/0","2/0","3/0","4/0"],U=parseInt(R);z.includes(R)?parseInt(R)>=2?V="2 or smaller":R==="1"&&(V="1 or 1/0"):j.includes(R)?R==="1/0"?V="1 or 1/0":R==="2/0"||R==="3/0"?V="2/0 or 3/0":R==="4/0"&&(V="4/0 to 350"):isNaN(U)||(U>=250&&U<=350?V="4/0 to 350":U>=400&&U<=600?V="400 to 600":U>=650&&U<=1100?V="650 to 1100":U>1100&&(V="over 1100"));const H=b[a.conductorMaterial][V];C={calculatorName:"Grounding & Bonding - Grounding Electrode Conductor",inputs:{serviceConductorSize:`${a.serviceSize} AWG`,material:a.conductorMaterial.charAt(0).toUpperCase()+a.conductorMaterial.slice(1)},results:{groundingElectrodeConductor:`${H} AWG ${a.conductorMaterial}`},additionalInfo:{note1:"GEC to rod/pipe/plate need not be larger than 6 AWG copper",note2:"GEC to concrete-encased electrode need not be larger than 4 AWG copper",note3:"Must be continuous without splices (except as permitted)"},necReferences:["NEC Table 250.66 - Grounding Electrode Conductor for Alternating-Current Systems","NEC 250.64 - Grounding Electrode Conductor Installation","NEC 250.52 - Grounding Electrodes"]}}else if(n==="egc"){if(!u.ocpdRating){alert("Please enter an overcurrent device rating before exporting");return}const b={copper:{15:"14",20:"12",30:"10",40:"10",60:"10",100:"8",200:"6",300:"4",400:"3",500:"2",600:"1",800:"1/0",1e3:"2/0",1200:"3/0",1600:"4/0",2e3:"250",2500:"350",3e3:"400",4e3:"500",5e3:"700",6e3:"800"},aluminum:{15:"12",20:"10",30:"8",40:"8",60:"8",100:"6",200:"4",300:"2",400:"1",500:"1/0",600:"2/0",800:"3/0",1e3:"4/0",1200:"250",1600:"350",2e3:"400",2500:"500",3e3:"600",4e3:"750",5e3:"1000",6e3:"1200"}},V=parseInt(u.ocpdRating),R=Object.keys(b[u.conductorMaterial]).map(Number).sort((U,H)=>U-H),z=R.find(U=>U>=V)||R[R.length-1],j=b[u.conductorMaterial][z];C={calculatorName:"Grounding & Bonding - Equipment Grounding Conductor",inputs:{overcurrentDeviceRating:`${V} Amps`,material:u.conductorMaterial.charAt(0).toUpperCase()+u.conductorMaterial.slice(1)},results:{equipmentGroundingConductor:`${j} AWG ${u.conductorMaterial}`,basedOnOCPDRating:`${z} Amps`},additionalInfo:{note1:"Increase proportionally if conductors upsized for voltage drop",note2:"Size per each raceway if conductors run in parallel",note3:"Based on rating of OCPD ahead of circuit"},necReferences:["NEC Table 250.122 - Minimum Size Equipment Grounding Conductors for Grounding Raceway and Equipment","NEC 250.122(B) - Increased in Size","NEC 250.122(F) - Conductors in Parallel"]}}else if(n==="bonding"){if(!d.serviceSize){alert("Please select a conductor size before exporting");return}const b={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}};let V="";const R=d.serviceSize,z=["14","12","10","8","6","4","3","2","1"],j=["1/0","2/0","3/0","4/0"],U=parseInt(R);z.includes(R)?parseInt(R)>=2?V="2 or smaller":R==="1"&&(V="1 or 1/0"):j.includes(R)?R==="1/0"?V="1 or 1/0":R==="2/0"||R==="3/0"?V="2/0 or 3/0":R==="4/0"&&(V="4/0 to 350"):isNaN(U)||(U>=250&&U<=350?V="4/0 to 350":U>=400&&U<=600?V="400 to 600":U>=650&&U<=1100?V="650 to 1100":U>1100&&(V="over 1100"));const H=b[d.conductorMaterial][V],B=d.jumperType==="main"?"Main Bonding Jumper":"System Bonding Jumper";C={calculatorName:`Grounding & Bonding - ${B}`,inputs:{jumperType:B,conductorSize:`${d.serviceSize} AWG`,material:d.conductorMaterial.charAt(0).toUpperCase()+d.conductorMaterial.slice(1)},results:{bondingJumperSize:`${H} AWG ${d.conductorMaterial}`},additionalInfo:d.jumperType==="main"?{purpose:"Connects grounded conductor to equipment grounding conductor",sizing:"Sized per Table 250.66 based on service conductor",forms:"Can be wire, bus, screw, or similar conductor"}:{purpose:"Required for separately derived systems",connection:"Connects grounded to equipment grounding conductor",location:"Installed at same location as GEC connection"},necReferences:d.jumperType==="main"?["NEC 250.28 - Main Bonding Jumper and System Bonding Jumper","NEC 250.28(D) - Size","NEC Table 250.66 - Sizing Reference"]:["NEC 250.30 - Grounding Separately Derived Alternating-Current Systems","NEC 250.30(A)(1) - System Bonding Jumper","NEC Table 250.66 - Sizing Reference"]}}pn(C)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"gec",label:"Grounding Electrode"},{id:"egc",label:"Equipment Grounding"},{id:"bonding",label:"Bonding Jumpers"}].map(C=>i.jsx("button",{onClick:()=>o(C.id),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.625rem 1rem",background:n===C.id?"#3b82f6":w.sectionBg,color:n===C.id?"white":w.labelText,border:`1px solid ${n===C.id?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:C.label},C.id))}),i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[n==="gec"&&i.jsx(AE,{gecData:a,setGecData:c,colors:w}),n==="egc"&&i.jsx(CE,{egcData:u,setEgcData:f,colors:w}),n==="bonding"&&i.jsx(kE,{bondingData:d,setBondingData:g,colors:w})]})]})}),EE=({offsetData:r,setOffsetData:e,colors:t})=>{const n={10:{distance:6,shrink:.01},"22.5":{distance:2.6,shrink:.06},30:{distance:2,shrink:.25},45:{distance:1.4,shrink:.41},60:{distance:1.2,shrink:.58}},a=(()=>{if(!r.obstacleHeight)return null;const c=parseFloat(r.obstacleHeight),u=n[r.bendAngle];return{distanceBetweenBends:(c*u.distance).toFixed(2),shrinkage:(c*u.shrink).toFixed(2),angle:r.bendAngle}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Obstacle Height (inches)"}),i.jsx("input",{type:"number",value:r.obstacleHeight,onChange:c=>e(u=>({...u,obstacleHeight:c.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Height to clear obstacle"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Bend Angle ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsxs("select",{value:r.bendAngle,onChange:c=>e(u=>({...u,bendAngle:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"10",children:"10"}),i.jsx("option",{value:"22.5",children:"22.5"}),i.jsx("option",{value:"30",children:"30"}),i.jsx("option",{value:"45",children:"45"}),i.jsx("option",{value:"60",children:"60"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Most common: 30 or 45"})]})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Distance Between Bends"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[a.distanceBetweenBends,'"']})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Shrinkage"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[a.shrinkage,'"']})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"How to Make the Bend"}),i.jsxs("div",{children:["Mark first bend, measure ",a.distanceBetweenBends,'" from center of first bend, then make second bend at ',a.angle,"."]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Offset Bend Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"30 bends are most common for typical offsets"}),i.jsx("li",{children:"45 bends create shorter, steeper offsets"}),i.jsx("li",{children:"Always account for shrinkage in measurements"})]})]})]})]})},IE=({stubUpData:r,setStubUpData:e,colors:t})=>{const n={"1/2":5,"3/4":6,1:8,"1-1/4":11,"1-1/2":14,2:16,"2-1/2":21,3:26,"3-1/2":30,4:34},a=(()=>{if(!r.stubHeight)return null;const c=parseFloat(r.stubHeight),u=n[r.conduitSize];return{markDistance:(c-u).toFixed(2),deduction:u,stubHeight:c.toFixed(2)}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Desired Stub Height (inches)"}),i.jsx("input",{type:"number",value:r.stubHeight,onChange:c=>e(u=>({...u,stubHeight:c.target.value})),placeholder:"Enter stub height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Back of 90 to floor"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Conduit Size ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsx("select",{value:r.conduitSize,onChange:c=>e(u=>({...u,conduitSize:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.keys(n).map(c=>i.jsxs("option",{value:c,children:[c,'"']},c))})]})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Mark At"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[a.markDistance,'"']})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Deduction"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[a.deduction,'"']})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Conduit Size"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[r.conduitSize,'"']})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"How to Bend"}),i.jsxs("div",{children:["Measure from end of conduit, mark at ",a.markDistance,'", line up mark with arrow on bender, make 90 bend.']})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Stub-Up Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Deduction accounts for the radius of the bend"}),i.jsx("li",{children:"Larger conduit = larger deduction"}),i.jsx("li",{children:"Always check your bender - deductions vary by manufacturer"})]})]})]})]})},RE=({saddleData:r,setSaddleData:e,colors:t})=>{const o=(()=>{if(!r.obstacleHeight)return null;const a=parseFloat(r.obstacleHeight),c=parseFloat(r.obstacleWidth)||a*4,u=a*.3;return{centerBend:45,outerBends:22.5,distanceToOuter:(c/2).toFixed(2),shrinkage:u.toFixed(2),obstacleHeight:a.toFixed(2)}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Obstacle Height (inches)"}),i.jsx("input",{type:"number",value:r.obstacleHeight,onChange:a=>e(c=>({...c,obstacleHeight:a.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Width ",i.jsx("br",{})," (Optional)"]}),i.jsx("input",{type:"number",value:r.obstacleWidth,onChange:a=>e(c=>({...c,obstacleWidth:a.target.value})),placeholder:"Auto: 4x height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Center Bend"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[o.centerBend,""]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Outer Bends"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.outerBends,""]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Distance to Outer"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.distanceToOuter,'"']})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Bending Sequence"}),i.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Mark center of obstacle on conduit"}),i.jsx("li",{children:"Make 45 center bend at mark"}),i.jsxs("li",{children:["Measure ",o.distanceToOuter,'" from center each direction']}),i.jsx("li",{children:"Make 22.5 bends on each side (opposite direction)"})]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"3-Point Saddle Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Center bend goes up, outer bends go down"}),i.jsx("li",{children:"Most common for going over pipes or other conduits"}),i.jsx("li",{children:"Mark all three bend locations before starting"})]})]})]})]})},PE=({fourPointData:r,setFourPointData:e,colors:t})=>{const o=(()=>{if(!r.obstacleHeight||!r.obstacleWidth)return null;const a=parseFloat(r.obstacleHeight),c=parseFloat(r.obstacleWidth),u=c/2,f=c/4,d=a*.15;return{bendAngle:22.5,distanceToOuter:u.toFixed(2),innerSpacing:f.toFixed(2),shrinkage:d.toFixed(2)}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Height ",i.jsx("br",{})," (inches)"]}),i.jsx("input",{type:"number",value:r.obstacleHeight,onChange:a=>e(c=>({...c,obstacleHeight:a.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Width ",i.jsx("br",{})," (inches)"]}),i.jsx("input",{type:"number",value:r.obstacleWidth,onChange:a=>e(c=>({...c,obstacleWidth:a.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"All Bends"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[o.bendAngle,""]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Outer Distance"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.distanceToOuter,'"']})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Inner Spacing"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.innerSpacing,'"']})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Bending Sequence"}),i.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Mark center of obstacle on conduit"}),i.jsxs("li",{children:["Measure ",o.distanceToOuter,'" from center (outer bends)']}),i.jsxs("li",{children:["Measure ",o.innerSpacing,'" from center (inner bends)']}),i.jsx("li",{children:"Make all four 22.5 bends: outer up, inner down"})]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"4-Point Saddle Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Used for larger obstacles where 3-point won't work"}),i.jsx("li",{children:"Outer bends go up, inner bends go down"}),i.jsx("li",{children:"Creates a flatter top for better clearance"})]})]})]})]})},NE=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=pe.useState("offset"),[a,c]=pe.useState({obstacleHeight:"",bendAngle:"30"}),[u,f]=pe.useState({stubHeight:"",conduitSize:"3/4"}),[d,g]=pe.useState({obstacleHeight:"",obstacleWidth:""}),[w,C]=pe.useState({obstacleHeight:"",obstacleWidth:""}),b={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};pe.useImperativeHandle(t,()=>({exportPDF:()=>{let R;if(n==="offset"){if(!a.obstacleHeight){alert("Please enter obstacle height for Offset Bends before exporting");return}const z={10:{distance:6,shrink:.01},"22.5":{distance:2.6,shrink:.06},30:{distance:2,shrink:.25},45:{distance:1.4,shrink:.41},60:{distance:1.2,shrink:.58}},j=parseFloat(a.obstacleHeight),U=z[a.bendAngle],H=(j*U.distance).toFixed(2),B=(j*U.shrink).toFixed(2);R={calculatorName:"Conduit Bending - Offset Bends",inputs:{obstacleHeight:`${a.obstacleHeight} inches`,bendAngle:`${a.bendAngle}`},results:{distanceBetweenBends:`${H} inches`,shrinkage:`${B} inches`},additionalInfo:{instructions:`Mark first bend, measure ${H}" from center of first bend, then make second bend at ${a.bendAngle}`,multiplierUsed:`Distance: ${U.distance}, Shrink: ${U.shrink}`},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","30 bends are most common for typical offsets","45 bends create shorter, steeper offsets"]}}else if(n==="stubup"){if(!u.stubHeight){alert("Please enter stub height for 90 Stub-Up before exporting");return}const z={"1/2":5,"3/4":6,1:8,"1-1/4":11,"1-1/2":14,2:16,"2-1/2":21,3:26,"3-1/2":30,4:34},j=parseFloat(u.stubHeight),U=z[u.conduitSize],H=(j-U).toFixed(2);R={calculatorName:"Conduit Bending - 90 Stub-Up",inputs:{desiredStubHeight:`${u.stubHeight} inches`,conduitSize:`${u.conduitSize}"`},results:{markAt:`${H} inches`,deduction:`${U} inches`},additionalInfo:{instructions:`Measure from end of conduit, mark at ${H}", line up mark with arrow on bender, make 90 bend`,note:"Deduction accounts for the radius of the bend - larger conduit requires larger deduction"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Always check your bender - deductions vary by manufacturer"]}}else if(n==="saddle"){if(!d.obstacleHeight){alert("Please enter obstacle height for 3-Point Saddle before exporting");return}const z=parseFloat(d.obstacleHeight),j=parseFloat(d.obstacleWidth)||z*4,U=(z*.3).toFixed(2),H=(j/2).toFixed(2);R={calculatorName:"Conduit Bending - 3-Point Saddle",inputs:{obstacleHeight:`${d.obstacleHeight} inches`,obstacleWidth:d.obstacleWidth?`${d.obstacleWidth} inches`:`${j} inches (Auto: 4x height)`},results:{centerBend:"45",outerBends:"22.5",distanceToOuter:`${H} inches`,shrinkage:`${U} inches`},additionalInfo:{bendingSequence:`1) Mark center of obstacle on conduit 2) Make 45 center bend at mark 3) Measure ${H}" from center each direction 4) Make 22.5 bends on each side (opposite direction)`,tip:"Center bend goes up, outer bends go down"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Most common for going over pipes or other conduits","Mark all three bend locations before starting"]}}else if(n==="fourpoint"){if(!w.obstacleHeight||!w.obstacleWidth){alert("Please enter both obstacle height and width for 4-Point Saddle before exporting");return}const z=parseFloat(w.obstacleHeight),j=parseFloat(w.obstacleWidth),U=(j/2).toFixed(2),H=(j/4).toFixed(2),B=(z*.15).toFixed(2);R={calculatorName:"Conduit Bending - 4-Point Saddle",inputs:{obstacleHeight:`${w.obstacleHeight} inches`,obstacleWidth:`${w.obstacleWidth} inches`},results:{allBends:"22.5",outerDistance:`${U} inches`,innerSpacing:`${H} inches`,shrinkage:`${B} inches`},additionalInfo:{bendingSequence:`1) Mark center of obstacle on conduit 2) Measure ${U}" from center (outer bends) 3) Measure ${H}" from center (inner bends) 4) Make all four 22.5 bends: outer up, inner down`,tip:"Used for larger obstacles where 3-point saddle will not work"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Creates a flatter top for better clearance over wide obstacles"]}}pn(R)}}));const V={offset:i.jsx(EE,{offsetData:a,setOffsetData:c,colors:b}),stubup:i.jsx(IE,{stubUpData:u,setStubUpData:f,colors:b}),saddle:i.jsx(RE,{saddleData:d,setSaddleData:g,colors:b}),fourpoint:i.jsx(PE,{fourPointData:w,setFourPointData:C,colors:b})};return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"offset",label:"Offset Bends"},{id:"stubup",label:"90 Stub-Up"},{id:"saddle",label:"3-Point Saddle"},{id:"fourpoint",label:"4-Point Saddle"}].map(R=>i.jsx("button",{onClick:()=>o(R.id),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.625rem 1rem",background:n===R.id?"#3b82f6":b.sectionBg,color:n===R.id?"white":b.labelText,border:`1px solid ${n===R.id?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:R.label},R.id))}),i.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:V[n]})]})}),LE=({lumensData:r,setLumensData:e,colors:t})=>{const n={living:10,kitchen:50,bathroom:70,bedroom:10,office:50,workshop:75,garage:50,hallway:5,dining:30,laundry:50},o={living:"Living Room (10 fc)",kitchen:"Kitchen (50 fc)",bathroom:"Bathroom (70 fc)",bedroom:"Bedroom (10 fc)",office:"Office/Study (50 fc)",workshop:"Workshop (75 fc)",garage:"Garage (50 fc)",hallway:"Hallway (5 fc)",dining:"Dining Room (30 fc)",laundry:"Laundry Room (50 fc)"},c=(()=>{if(!r.roomLength||!r.roomWidth)return null;const u=parseFloat(r.roomLength),f=parseFloat(r.roomWidth),d=u*f,g=n[r.roomType],w=g*d;let C=null;if(r.lumensPerFixture){const b=parseFloat(r.lumensPerFixture);C=Math.ceil(w/b)}return{area:d.toFixed(1),footCandles:g,totalLumens:w.toFixed(0),fixturesNeeded:C}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),i.jsx("input",{type:"number",value:r.roomLength,onChange:u=>e(f=>({...f,roomLength:u.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),i.jsx("input",{type:"number",value:r.roomWidth,onChange:u=>e(f=>({...f,roomWidth:u.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Room Type ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsx("select",{value:r.roomType,onChange:u=>e(f=>({...f,roomType:u.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.entries(o).map(([u,f])=>i.jsx("option",{value:u,children:f},u))}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"fc = foot-candles"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Lumens per Fixture (Optional)"}),i.jsx("input",{type:"number",value:r.lumensPerFixture,onChange:u=>e(f=>({...f,lumensPerFixture:u.target.value})),placeholder:"e.g., 800",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"To calculate fixture count"})]})]}),c&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:c.fixturesNeeded?"repeat(3, 1fr)":"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Room Area"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:c.area}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"sq ft"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Lumens Needed"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:c.totalLumens}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"lumens"})]}),c.fixturesNeeded&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Fixtures Needed"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:c.fixturesNeeded}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"fixtures"})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Lighting Requirements"}),i.jsxs("div",{children:["Recommended level: ",c.footCandles," foot-candles"]}),c.fixturesNeeded&&i.jsxs("div",{children:["Using ",r.lumensPerFixture," lumens per fixture"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Lighting Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"LED bulbs typically produce 60-100 lumens per watt"}),i.jsx("li",{children:"Layer lighting: combine ambient, task, and accent lighting"}),i.jsx("li",{children:"Dark wall colors absorb light; increase lumens by 10-20%"})]})]})]})]})},BE=({spacingData:r,setSpacingData:e,colors:t})=>{const n={recessed:1.5,pendant:1,track:2,surface:1.5},a=(()=>{if(!r.roomLength||!r.roomWidth)return null;const c=parseFloat(r.roomLength),u=parseFloat(r.roomWidth),f=parseFloat(r.ceilingHeight),d=n[r.fixtureType],g=f*d,w=r.fixtureType==="recessed"?6:g*.8,C=Math.max(2,Math.round(c/w)),b=Math.max(2,Math.round(u/w)),V=C*b,R=c/C,z=u/b,j=R/2,U=z/2;return{maxSpacing:g.toFixed(1),fixturesLength:C,fixturesWidth:b,totalFixtures:V,actualSpacingLength:R.toFixed(1),actualSpacingWidth:z.toFixed(1),wallOffsetLength:j.toFixed(1),wallOffsetWidth:U.toFixed(1)}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),i.jsx("input",{type:"number",value:r.roomLength,onChange:c=>e(u=>({...u,roomLength:c.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),i.jsx("input",{type:"number",value:r.roomWidth,onChange:c=>e(u=>({...u,roomWidth:c.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Ceiling Height (feet)"}),i.jsx("input",{type:"number",value:r.ceilingHeight,onChange:c=>e(u=>({...u,ceilingHeight:c.target.value})),placeholder:"8",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Fixture Type"}),i.jsxs("select",{value:r.fixtureType,onChange:c=>e(u=>({...u,fixtureType:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"recessed",children:"Recessed Can (1.5:1 ratio)"}),i.jsx("option",{value:"pendant",children:"Pendant (1:1 ratio)"}),i.jsx("option",{value:"track",children:"Track Light (2:1 ratio)"}),i.jsx("option",{value:"surface",children:"Surface Mount (1.5:1 ratio)"})]})]})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Max Spacing"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:a.maxSpacing}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"feet"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Fixtures"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:a.totalFixtures}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"fixtures"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Layout"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[a.fixturesLength,"",a.fixturesWidth]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"grid"})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Spacing Results"}),i.jsxs("div",{children:["Length spacing: ",a.actualSpacingLength," ft"]}),i.jsxs("div",{children:["Width spacing: ",a.actualSpacingWidth," ft"]}),i.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.8125rem"},children:["Start ",a.wallOffsetLength," ft from walls (length) and ",a.wallOffsetWidth," ft from walls (width)"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Spacing Guidelines:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Industry standard: 4-6 feet spacing for recessed cans"}),i.jsx("li",{children:"Spacing ratio = max distance between fixtures  ceiling height"}),i.jsx("li",{children:"Space fixtures evenly with proper wall offsets for uniform coverage"})]})]})]})]})},FE=({wattsData:r,setWattsData:e,colors:t})=>{const n={office:1,retail:1.5,warehouse:.5,school:1.2,hospital:1,hotel:1,restaurant:1.3,residential:1},o={office:"Office Building (1.0 W/sq ft)",retail:"Retail Store (1.5 W/sq ft)",warehouse:"Warehouse (0.5 W/sq ft)",school:"School (1.2 W/sq ft)",hospital:"Hospital (1.0 W/sq ft)",hotel:"Hotel (1.0 W/sq ft)",restaurant:"Restaurant (1.3 W/sq ft)",residential:"Residential (1.0 W/sq ft)"},c=(()=>{if(!r.area)return null;const u=parseFloat(r.area),f=n[r.buildingType],d=u*f,g=d,w=g/120,C=Math.ceil(w/16);return{wattsPerSqFt:f,totalWatts:d.toFixed(0),totalVA:g.toFixed(0),amperage:w.toFixed(1),circuits:C}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Area (square feet)"}),i.jsx("input",{type:"number",value:r.area,onChange:u=>e(f=>({...f,area:u.target.value})),placeholder:"Enter area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Building Type"}),i.jsx("select",{value:r.buildingType,onChange:u=>e(f=>({...f,buildingType:u.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.entries(o).map(([u,f])=>i.jsx("option",{value:u,children:f},u))}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Per NEC Table 220.12"})]})]}),c&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Unit Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:c.wattsPerSqFt}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"W/sq ft"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:c.totalWatts}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"watts"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:c.circuits}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"needed"})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Lighting Load Calculation"}),i.jsxs("div",{children:["Total VA: ",c.totalVA," VA"]}),i.jsxs("div",{children:["Current @ 120V: ",c.amperage," A"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Requirements:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"NEC 220.12 specifies unit lighting loads by occupancy"}),i.jsx("li",{children:"Calculate using building area, not just lit area"}),i.jsx("li",{children:"Continuous loads require 125% conductor/OCPD sizing"})]})]})]})]})},zE=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=pe.useState("lumens"),[a,c]=pe.useState({roomLength:"",roomWidth:"",roomType:"living",lumensPerFixture:""}),[u,f]=pe.useState({roomLength:"",roomWidth:"",ceilingHeight:"8",fixtureType:"recessed"}),[d,g]=pe.useState({area:"",buildingType:"office"}),w={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};pe.useImperativeHandle(t,()=>({exportPDF:()=>{let b;if(n==="lumens"){if(!a.roomLength||!a.roomWidth){alert("Please enter room dimensions before exporting");return}const V={living:"Living Room",kitchen:"Kitchen",bathroom:"Bathroom",bedroom:"Bedroom",office:"Office/Study",workshop:"Workshop",garage:"Garage",hallway:"Hallway",dining:"Dining Room",laundry:"Laundry Room"},R={living:10,kitchen:50,bathroom:70,bedroom:10,office:50,workshop:75,garage:50,hallway:5,dining:30,laundry:50},z=parseFloat(a.roomLength),j=parseFloat(a.roomWidth),U=(z*j).toFixed(1),H=R[a.roomType],B=(H*U).toFixed(0),re={roomLength:`${a.roomLength} feet`,roomWidth:`${a.roomWidth} feet`,roomType:`${V[a.roomType]} (${H} fc)`},ce={roomArea:`${U} sq ft`,totalLumensNeeded:`${B} lumens`};if(a.lumensPerFixture){const N=parseFloat(a.lumensPerFixture),A=Math.ceil(parseFloat(B)/N);re.lumensPerFixture=`${a.lumensPerFixture} lumens`,ce.fixturesNeeded=`${A} fixtures`}b={calculatorName:"Lighting Calculations - Room Lumens",inputs:re,results:ce,additionalInfo:{calculation:`Area (${U} sq ft)  Recommended Level (${H} foot-candles) = ${B} lumens`,tip1:"LED bulbs typically produce 60-100 lumens per watt",tip2:"Layer lighting: combine ambient, task, and accent lighting",tip3:"Dark wall colors absorb light; increase lumens by 10-20%"},necReferences:["IES (Illuminating Engineering Society) recommended light levels","Foot-candles measure illuminance on a surface","1 foot-candle = 1 lumen per square foot"]}}else if(n==="spacing"){if(!u.roomLength||!u.roomWidth){alert("Please enter room dimensions before exporting");return}const V={recessed:"Recessed Can (1.5:1 ratio)",pendant:"Pendant (1:1 ratio)",track:"Track Light (2:1 ratio)",surface:"Surface Mount (1.5:1 ratio)"},R={recessed:1.5,pendant:1,track:2,surface:1.5},z=parseFloat(u.roomLength),j=parseFloat(u.roomWidth),U=parseFloat(u.ceilingHeight),H=R[u.fixtureType],B=(U*H).toFixed(1),re=u.fixtureType==="recessed"?6:parseFloat(B)*.8,ce=Math.max(2,Math.round(z/re)),N=Math.max(2,Math.round(j/re)),A=ce*N,T=(z/ce).toFixed(1),F=(j/N).toFixed(1),k=(parseFloat(T)/2).toFixed(1),v=(parseFloat(F)/2).toFixed(1);b={calculatorName:"Lighting Calculations - Fixture Spacing",inputs:{roomLength:`${u.roomLength} feet`,roomWidth:`${u.roomWidth} feet`,ceilingHeight:`${u.ceilingHeight} feet`,fixtureType:V[u.fixtureType]},results:{maximumSpacing:`${B} feet`,totalFixtures:`${A} fixtures`,layoutGrid:`${ce}  ${N}`,lengthSpacing:`${T} feet`,widthSpacing:`${F} feet`},additionalInfo:{wallOffsets:`Start ${k} ft from walls (length) and ${v} ft from walls (width)`,spacingFormula:`Maximum spacing = Ceiling height (${U} ft)  Spacing ratio (${H}) = ${B} ft`,tip1:"Industry standard: 4-6 feet spacing for recessed cans",tip2:"Space fixtures evenly with proper wall offsets for uniform coverage"},necReferences:["Spacing ratio guidelines from IES Lighting Handbook","Recessed fixtures: 1.5:1 ratio (spacing to mounting height)","Pendant fixtures: 1:1 ratio for focused task lighting","Track lights: 2:1 ratio for accent lighting"]}}else if(n==="watts"){if(!d.area){alert("Please enter area before exporting");return}const V={office:"Office Building",retail:"Retail Store",warehouse:"Warehouse",school:"School",hospital:"Hospital",hotel:"Hotel",restaurant:"Restaurant",residential:"Residential"},R={office:1,retail:1.5,warehouse:.5,school:1.2,hospital:1,hotel:1,restaurant:1.3,residential:1},z=parseFloat(d.area),j=R[d.buildingType],U=(z*j).toFixed(0),H=U,B=(parseFloat(H)/120).toFixed(1),re=Math.ceil(parseFloat(B)/16);b={calculatorName:"Lighting Calculations - Watts per Square Foot",inputs:{area:`${d.area} square feet`,buildingType:`${V[d.buildingType]} (${j} W/sq ft)`},results:{unitLoad:`${j} W/sq ft`,totalLoad:`${U} watts`,totalVA:`${H} VA`,currentAt120V:`${B} Amps`,requiredCircuits:`${re}  20A circuits`},additionalInfo:{calculation:`Area (${z} sq ft)  Unit Load (${j} W/sq ft) = ${U} watts`,circuitCalculation:`Total current (${B} A)  16A (80% of 20A) = ${re} circuits needed`,note:"Continuous loads require 125% conductor/OCPD sizing"},necReferences:["NEC Table 220.12 - General Lighting Loads by Occupancy","NEC 210.19(A)(1) - Branch Circuit Ampacity","NEC 210.20(A) - Continuous and Noncontinuous Loads","Calculate using building area, not just lit area"]}}pn(b)}}));const C={lumens:i.jsx(LE,{lumensData:a,setLumensData:c,colors:w}),spacing:i.jsx(BE,{spacingData:u,setSpacingData:f,colors:w}),watts:i.jsx(FE,{wattsData:d,setWattsData:g,colors:w})};return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"lumens",label:"Room Lumens"},{id:"spacing",label:"Fixture Spacing"},{id:"watts",label:"Watts/Sq Ft"}].map(b=>i.jsx("button",{onClick:()=>o(b.id),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.625rem 1rem",background:n===b.id?"#3b82f6":w.sectionBg,color:n===b.id?"white":w.labelText,border:`1px solid ${n===b.id?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:b.label},b.id))}),i.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:C[n]})]})}),OE=({generalData:r,setGeneralData:e,colors:t})=>{const o=(()=>{if(!r.roomLength||!r.roomWidth)return null;const a=parseFloat(r.roomLength),c=parseFloat(r.roomWidth),u=(a+c)*2,f=Math.max(2,Math.ceil(u/12));let d=0;if(r.hasCounters){const b=parseFloat(r.counterLength)||0;d=Math.max(2,Math.ceil(b/2))}const g=f+d,w=Math.ceil(g/8),C=Math.ceil(g/10);return{perimeter:u.toFixed(1),wallReceptacles:f,counterReceptacles:d,totalReceptacles:g,circuits15A:w,circuits20A:C}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),i.jsx("input",{type:"number",value:r.roomLength,onChange:a=>e(c=>({...c,roomLength:a.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),i.jsx("input",{type:"number",value:r.roomWidth,onChange:a=>e(c=>({...c,roomWidth:a.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsx("div",{style:{gridColumn:"1 / -1"},children:i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.hasCounters,onChange:a=>e(c=>({...c,hasCounters:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Room has countertops/islands"]})}),r.hasCounters&&i.jsxs("div",{style:{gridColumn:"1 / -1"},children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Counter Length (feet)"}),i.jsx("input",{type:"number",value:r.counterLength,onChange:a=>e(c=>({...c,counterLength:a.target.value})),placeholder:"Enter counter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"For kitchens/break rooms"})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:o.counterReceptacles>0?"repeat(3, 1fr)":"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Wall Receptacles"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.wallReceptacles})]}),o.counterReceptacles>0&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Counter Receptacles"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.counterReceptacles})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Needed"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.totalReceptacles})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"15A Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.circuits15A})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.circuits20A})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"NEC Requirements Met"}),i.jsxs("div",{children:["Room perimeter: ",o.perimeter," ft"]}),i.jsx("div",{children:"Spacing: One receptacle every 12 feet of wall space"}),o.counterReceptacles>0&&i.jsx("div",{children:"Counter spacing: One receptacle every 2 feet"})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC 210.52 Requirements:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Wall: Receptacle within 6 ft of doorway, then every 12 ft"}),i.jsx("li",{children:"No point along wall more than 6 ft from receptacle"}),i.jsx("li",{children:"Counters: One receptacle every 24 inches of counter space"}),i.jsx("li",{children:"Kitchen requires min. 2 small appliance circuits (20A)"})]})]})]})]})},VE=({kitchenData:r,setKitchenData:e,colors:t})=>{const o=(()=>{if(!r.counterLength)return null;const a=parseFloat(r.counterLength),c=parseFloat(r.islandLength)||0,u=Math.max(2,Math.ceil(a/2)),f=c>=2?Math.max(1,Math.ceil(c/4)):0,d=2,g=u+f;let w=0;return r.dishwasher&&w++,r.disposer&&w++,r.microwave&&w++,r.range&&w++,{counterReceptacles:u,islandReceptacles:f,totalReceptacles:u+f,smallApplianceCircuits:d,dedicatedCircuits:w,gfciRequired:g}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Counter Length (feet)"}),i.jsx("input",{type:"number",value:r.counterLength,onChange:a=>e(c=>({...c,counterLength:a.target.value})),placeholder:"Enter counter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Island Length (feet) - Optional"}),i.jsx("input",{type:"number",value:r.islandLength,onChange:a=>e(c=>({...c,islandLength:a.target.value})),placeholder:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:'Required if island  24" long  12" wide'})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.75rem",color:t.cardText,fontSize:"0.875rem"},children:"Dedicated Appliance Circuits:"}),i.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.dishwasher,onChange:a=>e(c=>({...c,dishwasher:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Dishwasher (dedicated 15A/20A)"]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.disposer,onChange:a=>e(c=>({...c,disposer:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Garbage Disposer (dedicated 15A/20A)"]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.microwave,onChange:a=>e(c=>({...c,microwave:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Microwave (dedicated 20A)"]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.range,onChange:a=>e(c=>({...c,range:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Range/Cooktop (240V, 40-50A)"]})]})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Counter Receptacles"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.counterReceptacles})]}),o.islandReceptacles>0&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Island Receptacles"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.islandReceptacles})]}),o.islandReceptacles===0&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"GFCI Required"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.gfciRequired})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Small Appliance Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.smallApplianceCircuits}),i.jsx("div",{style:{fontSize:"0.65rem",color:t.subtleText,marginTop:"0.25rem"},children:"20A each"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Dedicated Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.dedicatedCircuits}),i.jsx("div",{style:{fontSize:"0.65rem",color:t.subtleText,marginTop:"0.25rem"},children:"for appliances"})]})]}),i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(fp,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"GFCI Protection Required"}),i.jsxs("div",{children:["All ",o.gfciRequired," countertop receptacles require GFCI protection per NEC 210.8(A)"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Kitchen Requirements:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Min. 2 small appliance circuits (20A) for countertop receptacles"}),i.jsx("li",{children:"Counter receptacles: One every 24 inches, all GFCI protected"}),i.jsx("li",{children:'Island receptacles required if island  24" long  12" wide'}),i.jsx("li",{children:"Dishwasher, disposer typically need dedicated 15A or 20A circuits"})]})]})]})]})},ME=({bathroomData:r,setBathroomData:e,colors:t})=>{const o=(()=>{const a=parseInt(r.numBasins)||1,c=r.hasTub;let u=Math.max(1,a);c&&(u=Math.max(u,2));const f=r.sharedCircuit?1:a>=2?2:1;return{receptacles:u,dedicatedCircuits:f,gfciRequired:u,numBasins:a}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Number of Sinks/Basins"}),i.jsxs("select",{value:r.numBasins,onChange:a=>e(c=>({...c,numBasins:a.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"1",children:"1 Basin"}),i.jsx("option",{value:"2",children:"2 Basins (Double Vanity)"}),i.jsx("option",{value:"3",children:"3+ Basins"})]})]}),i.jsx("div",{children:i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.hasTub,onChange:a=>e(c=>({...c,hasTub:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Has Bathtub/Shower Area"]})}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.sharedCircuit,onChange:a=>e(c=>({...c,sharedCircuit:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Share circuit with other bathrooms"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",marginLeft:"1.625rem"},children:"One 20A circuit can serve multiple bathrooms if only serving receptacles"})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Receptacles Needed"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.receptacles})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.dedicatedCircuits})]})]}),i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(fp,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"GFCI Protection Required"}),i.jsxs("div",{children:["All ",o.gfciRequired," bathroom receptacles require GFCI protection per NEC 210.8(A)"]})]})]})}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Installation Guidelines"}),i.jsx("div",{children:" At least one receptacle within 3 feet of each basin"}),i.jsx("div",{children:" Receptacles must be readily accessible (not behind toilet)"}),i.jsx("div",{children:" Install at least 12 inches above countertop"})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Bathroom Requirements:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"NEC 210.52(D): Min. 1 receptacle within 3 ft of basin"}),i.jsx("li",{children:"NEC 210.11(C)(3): Min. 1 dedicated 20A circuit for bathroom receptacles"}),i.jsx("li",{children:"NEC 210.8(A): All bathroom receptacles require GFCI protection"}),i.jsx("li",{children:"One 20A circuit can serve receptacles in multiple bathrooms"})]})]})]})]})},DE=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=pe.useState("general"),[a,c]=pe.useState({roomLength:"",roomWidth:"",hasCounters:!1,counterLength:""}),[u,f]=pe.useState({counterLength:"",islandLength:"",dishwasher:!1,disposer:!1,microwave:!1,range:!1}),[d,g]=pe.useState({numBasins:"1",hasTub:!1,sharedCircuit:!1}),w={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};pe.useImperativeHandle(t,()=>({exportPDF:()=>{let b;if(n==="general"){if(!a.roomLength||!a.roomWidth){alert("Please enter room dimensions before exporting");return}const V=parseFloat(a.roomLength),R=parseFloat(a.roomWidth),z=((V+R)*2).toFixed(1),j=Math.max(2,Math.ceil(z/12));let U=0;if(a.hasCounters&&a.counterLength){const A=parseFloat(a.counterLength);U=Math.max(2,Math.ceil(A/2))}const H=j+U,B=Math.ceil(H/8),re=Math.ceil(H/10),ce={roomLength:`${a.roomLength} feet`,roomWidth:`${a.roomWidth} feet`,roomPerimeter:`${z} feet`};a.hasCounters&&a.counterLength&&(ce.counterLength=`${a.counterLength} feet`);const N={wallReceptacles:`${j} receptacles`,totalReceptacles:`${H} receptacles`,circuits15A:`${B} circuits (15A)`,circuits20A:`${re} circuits (20A)`};U>0&&(N.counterReceptacles=`${U} receptacles`),b={calculatorName:"Receptacle Calculator - General Room",inputs:ce,results:N,additionalInfo:{spacing:"One receptacle every 12 feet of wall space",rule:"No point along wall more than 6 feet from receptacle",counterRule:U>0?"Counter receptacles: one every 24 inches":null},necReferences:["NEC 210.52(A) - General Provisions","Receptacle within 6 ft of doorway, then every 12 ft","No point along wall more than 6 ft from receptacle","Conservative: 8 receptacles per 15A circuit, 10 per 20A circuit"]}}else if(n==="kitchen"){if(!u.counterLength){alert("Please enter counter length before exporting");return}const V=parseFloat(u.counterLength),R=parseFloat(u.islandLength)||0,z=Math.max(2,Math.ceil(V/2)),j=R>=2?Math.max(1,Math.ceil(R/4)):0,U=z+j,H=2,B=U;let re=0;const ce=[];u.dishwasher&&(re++,ce.push("Dishwasher (15A/20A)")),u.disposer&&(re++,ce.push("Garbage Disposer (15A/20A)")),u.microwave&&(re++,ce.push("Microwave (20A)")),u.range&&(re++,ce.push("Range/Cooktop (240V, 40-50A)"));const N={counterLength:`${u.counterLength} feet`};R>0&&(N.islandLength=`${u.islandLength} feet`),ce.length>0&&(N.dedicatedAppliances=ce.join(", "));const A={counterReceptacles:`${z} receptacles`,totalReceptacles:`${U} receptacles`,smallApplianceCircuits:`${H} circuits (20A each)`,gfciRequired:`${B} GFCI-protected receptacles`};j>0&&(A.islandReceptacles=`${j} receptacles`),re>0&&(A.dedicatedCircuits=`${re} dedicated circuits`),b={calculatorName:"Receptacle Calculator - Kitchen",inputs:N,results:A,additionalInfo:{counterSpacing:"One receptacle every 24 inches of counter space",islandRequirement:'Island receptacles required if island  24" long  12" wide',gfciNote:"All countertop receptacles require GFCI protection"},necReferences:["NEC 210.52(C) - Countertops","NEC 210.11(C)(1) - Min. 2 small appliance circuits (20A)","NEC 210.8(A) - GFCI protection required for all countertop receptacles",'Island receptacles required if  24" long  12" wide']}}else if(n==="bathroom"){const V=parseInt(d.numBasins)||1,R=d.hasTub;let z=Math.max(1,V);R&&(z=Math.max(z,2));const j=d.sharedCircuit?1:V>=2?2:1,U=z,B={numberOfBasins:V===1?"1 Basin":V===2?"2 Basins (Double Vanity)":"3+ Basins",hasTubShower:R?"Yes":"No",sharedCircuit:d.sharedCircuit?"Yes (shared with other bathrooms)":"No (dedicated)"},re={receptaclesNeeded:`${z} receptacles`,dedicatedCircuits:`${j} circuits (20A)`,gfciRequired:`${U} GFCI-protected receptacles`};b={calculatorName:"Receptacle Calculator - Bathroom",inputs:B,results:re,additionalInfo:{spacing:"At least one receptacle within 3 feet of each basin",installation:"Install at least 12 inches above countertop",accessibility:"Receptacles must be readily accessible (not behind toilet)",gfciNote:"All bathroom receptacles require GFCI protection"},necReferences:["NEC 210.52(D) - Min. 1 receptacle within 3 ft of basin","NEC 210.11(C)(3) - Min. 1 dedicated 20A circuit for bathroom receptacles","NEC 210.8(A) - All bathroom receptacles require GFCI protection","One 20A circuit can serve receptacles in multiple bathrooms"]}}pn(b)}}));const C={general:i.jsx(OE,{generalData:a,setGeneralData:c,colors:w}),kitchen:i.jsx(VE,{kitchenData:u,setKitchenData:f,colors:w}),bathroom:i.jsx(ME,{bathroomData:d,setBathroomData:g,colors:w})};return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"general",label:"General Room"},{id:"kitchen",label:"Kitchen"},{id:"bathroom",label:"Bathroom"}].map(b=>i.jsx("button",{onClick:()=>o(b.id),style:{flex:"1 1 auto",minWidth:"100px",padding:"0.625rem 1rem",background:n===b.id?"#3b82f6":w.sectionBg,color:n===b.id?"white":w.labelText,border:`1px solid ${n===b.id?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:b.label},b.id))}),i.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:C[n]})]})});function WE({onNavigate:r,currentView:e,isDarkMode:t=!1}){const n={bg:t?"#1a1a1a":"#ffffff",border:t?"#2a2a2a":"#e5e7eb",activeText:"#3b82f6",inactiveText:t?"#999999":"#6b7280"},o=c=>({background:"transparent",border:"0",borderWidth:"0",outline:"none",boxShadow:"none",color:c?n.activeText:n.inactiveText,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",gap:"0.25rem",fontSize:"0.625rem",fontWeight:"500",flex:"1 1 0",padding:"0.5rem 0.25rem",paddingTop:"0.75rem",margin:0,transition:"color 0.2s",WebkitTapHighlightColor:"transparent",WebkitAppearance:"none",MozAppearance:"none",appearance:"none",minWidth:"0"}),a={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",textAlign:"center",lineHeight:"1",marginTop:"0.125rem"};return i.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,width:"100%",background:n.bg,borderTop:`1px solid ${n.border}`,display:"flex",justifyContent:"space-between",alignItems:"stretch",padding:"0.25rem 0.5rem",paddingBottom:"calc(0.25rem + env(safe-area-inset-bottom))",margin:0,zIndex:1e4,minHeight:"80px",boxSizing:"border-box"},children:[i.jsxs("button",{onClick:()=>r("home"),style:o(e==="home"),children:[i.jsx(dx,{size:22,strokeWidth:e==="home"?2.5:2}),i.jsx("span",{style:a,children:"Home"})]}),i.jsxs("button",{onClick:()=>r("calculators"),style:o(e==="calculators"),children:[i.jsx(Zd,{size:22,strokeWidth:e==="calculators"?2.5:2}),i.jsx("span",{style:a,children:"Calculators"})]}),i.jsxs("button",{onClick:()=>r("jobs"),style:o(e==="jobs"),children:[i.jsx(Yc,{size:22,strokeWidth:e==="jobs"?2.5:2}),i.jsx("span",{style:a,children:"Jobs"})]}),i.jsxs("button",{onClick:()=>r("estimates"),style:o(e==="estimates"),children:[i.jsx(fh,{size:22,strokeWidth:e==="estimates"?2.5:2}),i.jsx("span",{style:a,children:"Estimates"})]}),i.jsxs("button",{onClick:()=>r("invoices"),style:o(e==="invoices"),children:[i.jsx(eg,{size:22,strokeWidth:e==="invoices"?2.5:2}),i.jsx("span",{style:a,children:"Invoices"})]})]})}const $E=pe.forwardRef(({isDarkMode:r,onBack:e},t)=>{const[n,o]=pe.useState(""),[a,c]=pe.useState("460"),[u,f]=pe.useState("3"),[d,g]=pe.useState("normal"),[w,C]=pe.useState("0"),[b,V]=pe.useState("40"),[R,z]=pe.useState("variable"),j={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},H=((M,$,oe)=>{if(!M||!$)return 0;const se=parseFloat(M),ie=parseFloat($);return oe==="3"?se*746/(ie*1.732*.85*.9):se*746/(ie*.85*.9)})(n,a,u),B=M=>{const $=parseFloat(M);return $<=3300?1:$<=5e3?.95:$<=6600?.9:$<=8200?.85:.8},re=M=>{const $=parseFloat(M);return $<=40?1:$<=45?.97:$<=50?.94:.91},ce=M=>{switch(M){case"heavy":return 1.25;case"normal":return 1.15;case"light":return 1.1;default:return 1.15}},N=B(w),A=re(b),T=ce(d),F=H*T/(N*A),v=[{amps:2,hp460V:1,hp230V:.5},{amps:3,hp460V:1.5,hp230V:1},{amps:5,hp460V:2,hp230V:1.5},{amps:7,hp460V:3,hp230V:2},{amps:10,hp460V:5,hp230V:3},{amps:14,hp460V:7.5,hp230V:5},{amps:18,hp460V:10,hp230V:7.5},{amps:24,hp460V:15,hp230V:10},{amps:31,hp460V:20,hp230V:15},{amps:40,hp460V:25,hp230V:20},{amps:52,hp460V:30,hp230V:25},{amps:62,hp460V:40,hp230V:30},{amps:77,hp460V:50,hp230V:40},{amps:96,hp460V:60,hp230V:50},{amps:124,hp460V:75,hp230V:60},{amps:156,hp460V:100,hp230V:75},{amps:180,hp460V:125,hp230V:100},{amps:240,hp460V:150,hp230V:125},{amps:302,hp460V:200,hp230V:150}].find(M=>M.amps>=F),L=N<1||A<1||d==="heavy";return pe.useImperativeHandle(t,()=>({exportPDF:()=>{if(!n){alert("Please enter motor horsepower before exporting to PDF");return}const M=R==="variable"?"Variable Torque (Fans, Pumps)":R==="constant"?"Constant Torque (Conveyors)":"High Starting Torque",$=d==="light"?"Light Duty (Intermittent)":d==="normal"?"Normal Duty":"Heavy Duty (Continuous)",oe={calculatorName:"VFD Sizing Calculator",inputs:{"Motor Horsepower":`${n} HP`,Voltage:`${a}V`,Phases:u==="1"?"Single Phase":"Three Phase","Load Type":M,"Duty Cycle":$,Altitude:`${w} feet`,"Ambient Temperature":`${b}C`},results:{"Motor Full Load Amperes (FLA)":`${H.toFixed(1)} A`,"Required VFD Current":`${F.toFixed(1)} A`,"Recommended VFD Rating":v?`${v.amps} A`:"N/A","VFD Motor HP (460V)":v?`${v.hp460V} HP`:"N/A","VFD Motor HP (230V)":v?`${v.hp230V} HP`:"N/A","Safety Margin":v?`${((v.amps/F-1)*100).toFixed(0)}%`:"N/A"},additionalInfo:{"Altitude Derating Factor":`${(N*100).toFixed(0)}%`,"Temperature Derating Factor":`${(A*100).toFixed(0)}%`,"Duty Cycle Factor":`${(T*100).toFixed(0)}%`,"Calculation Method":u==="3"?"Three Phase: (HP  746)  (V  1.732  0.85  0.9)":"Single Phase: (HP  746)  (V  0.85  0.9)","Required VFD Current Formula":"Motor FLA  Duty Cycle Factor  (Altitude Factor  Temperature Factor)"},necReferences:["NEC Article 430 - Motors, Motor Circuits, and Controllers","NEC 430.122 - Rating of Motor Control Circuit Overcurrent Protective Device","Always follow VFD manufacturer specifications","Use shielded cables for motor connections to reduce EMI","Install line and load reactors when recommended by manufacturer","Ensure proper grounding and bonding per NEC Article 250","Consider bypass contactor for critical applications","Verify VFD voltage matches motor nameplate voltage","Consider harmonic filtering for sensitive equipment","Ensure adequate cooling and ventilation for VFD enclosure",N<1?`WARNING: High altitude derating applied (${(N*100).toFixed(0)}%)`:"",A<1?`WARNING: High temperature derating applied (${(A*100).toFixed(0)}%)`:"",d==="heavy"?"WARNING: Heavy duty cycle requires oversizing for continuous operation":""].filter(se=>se!=="")};pn(oe)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"Motor Information"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Motor Horsepower (HP)"}),i.jsx("input",{type:"number",value:n,onChange:M=>o(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},placeholder:"Enter HP",step:"0.5"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Voltage (V)"}),i.jsxs("select",{value:a,onChange:M=>c(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"230",children:"230V"}),i.jsx("option",{value:"460",children:"460V"}),i.jsx("option",{value:"575",children:"575V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Phases"}),i.jsxs("select",{value:u,onChange:M=>f(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"1",children:"Single Phase"}),i.jsx("option",{value:"3",children:"Three Phase"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Load Type"}),i.jsxs("select",{value:R,onChange:M=>z(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"variable",children:"Variable Torque (Fans, Pumps)"}),i.jsx("option",{value:"constant",children:"Constant Torque (Conveyors)"}),i.jsx("option",{value:"highTorque",children:"High Starting Torque"})]})]})]})]}),i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"Environmental Conditions"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Duty Cycle"}),i.jsxs("select",{value:d,onChange:M=>g(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"light",children:"Light Duty (Intermittent)"}),i.jsx("option",{value:"normal",children:"Normal Duty"}),i.jsx("option",{value:"heavy",children:"Heavy Duty (Continuous)"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Altitude (feet)"}),i.jsx("input",{type:"number",value:w,onChange:M=>C(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},placeholder:"0",step:"100"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Ambient Temp (C)"}),i.jsx("input",{type:"number",value:b,onChange:M=>V(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},placeholder:"40"})]})]}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${j.cardBorder}`},children:[i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"0.75rem"},children:"Derating Factors"}),i.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:j.labelText},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Altitude Factor:"}),i.jsxs("span",{style:{fontWeight:"600",color:j.cardText},children:[(N*100).toFixed(0),"%"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Temperature Factor:"}),i.jsxs("span",{style:{fontWeight:"600",color:j.cardText},children:[(A*100).toFixed(0),"%"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Duty Cycle Factor:"}),i.jsxs("span",{style:{fontWeight:"600",color:j.cardText},children:[(T*100).toFixed(0),"%"]})]})]})]})]})]}),n&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Motor FLA"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:H.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Required VFD Current"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:F.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Recommended VFD"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:v?v.amps:"N/A"}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),v&&i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${j.cardBorder}`},children:[i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"0.75rem"},children:"VFD Specifications"}),i.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:j.labelText},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Current Rating:"}),i.jsxs("span",{style:{fontWeight:"600",color:j.cardText},children:[v.amps," Amperes"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Motor HP (460V):"}),i.jsxs("span",{style:{fontWeight:"600",color:j.cardText},children:[v.hp460V," HP"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Motor HP (230V):"}),i.jsxs("span",{style:{fontWeight:"600",color:j.cardText},children:[v.hp230V," HP"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"0.5rem",borderTop:`1px solid ${j.cardBorder}`,marginTop:"0.25rem"},children:[i.jsx("span",{children:"Safety Margin:"}),i.jsxs("span",{style:{fontWeight:"600",color:"#059669"},children:[((v.amps/F-1)*100).toFixed(0),"%"]})]})]})]})]}),v&&!L&&i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"VFD Selection Complete"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Selected VFD meets all requirements with adequate safety margin for reliable operation."})]})]})}),L&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(fp,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{lineHeight:"1.5"},children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"600",color:"#78350f",marginBottom:"0.5rem"},children:"Important Considerations"}),i.jsxs("ul",{style:{fontSize:"0.8125rem",color:"#92400e",margin:0,paddingLeft:"1.25rem"},children:[N<1&&i.jsxs("li",{style:{marginBottom:"0.25rem"},children:["High altitude installation requires derating (",(N*100).toFixed(0),"% of rated capacity)"]}),A<1&&i.jsxs("li",{style:{marginBottom:"0.25rem"},children:["High ambient temperature requires derating (",(A*100).toFixed(0),"% of rated capacity)"]}),d==="heavy"&&i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Heavy duty cycle applications require oversizing for continuous operation"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Verify VFD voltage matches motor nameplate voltage"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider harmonic filtering for sensitive equipment"}),i.jsx("li",{children:"Ensure adequate cooling and ventilation"})]})]})]})})]}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${j.cardBorder}`,fontSize:"0.8125rem",color:j.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:j.cardText},children:"VFD Installation Notes:"}),"Always follow manufacturer specifications  Use shielded cables for motor connections  Install line and load reactors when recommended  Ensure proper grounding and bonding  Consider bypass contactor for critical applications"]})]})}),UE=pe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=pe.useState("inductive"),[o,a]=pe.useState("60"),[c,u]=pe.useState(""),[f,d]=pe.useState("mH"),[g,w]=pe.useState("60"),[C,b]=pe.useState(""),[V,R]=pe.useState("F"),[z,j]=pe.useState(""),[U,H]=pe.useState(""),[B,re]=pe.useState("inductive"),[ce,N]=pe.useState(""),[A,T]=pe.useState("mH"),[F,k]=pe.useState(""),[v,L]=pe.useState("F"),M={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},$=()=>{if(!o||!c)return null;const q=parseFloat(o);let X=parseFloat(c);return f==="mH"?X=X/1e3:f==="H"&&(X=X/1e6),{reactance:(2*Math.PI*q*X).toFixed(2),frequency:q,inductance:c,unit:f}},oe=()=>{if(!g||!C)return null;const q=parseFloat(g);let X=parseFloat(C);return V==="F"?X=X/1e6:V==="nF"?X=X/1e9:V==="pF"&&(X=X/1e12),{reactance:(1/(2*Math.PI*q*X)).toFixed(2),frequency:q,capacitance:C,unit:V}},se=()=>{if(!z||!U)return null;const q=parseFloat(z),X=parseFloat(U),de=Math.sqrt(q*q+X*X),me=Math.atan2(X,q)*(180/Math.PI);return{impedance:de.toFixed(2),angle:me.toFixed(2),resistance:q,reactance:X,type:B}},ie=()=>{if(!ce||!F)return null;let q=parseFloat(ce),X=parseFloat(F);return A==="mH"?q=q/1e3:A==="H"&&(q=q/1e6),v==="F"?X=X/1e6:v==="nF"?X=X/1e9:v==="pF"&&(X=X/1e12),{frequency:(1/(2*Math.PI*Math.sqrt(q*X))).toFixed(2),inductance:ce,inductanceUnit:A,capacitance:F,capacitanceUnit:v}},ye=$(),xe=oe(),ee=se(),D=ie();return pe.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="inductive"){if(!o||!c){alert("Please enter all required values before exporting to PDF");return}const q={calculatorName:"Reactance & Impedance - Inductive Reactance (XL)",inputs:{Frequency:`${o} Hz`,Inductance:`${c} ${f}`},results:{"Inductive Reactance (XL)":`${ye.reactance} `},additionalInfo:{Formula:"XL = 2fL",Description:"Inductive reactance increases with frequency and opposes changes in current flow"},necReferences:["Inductive reactance is directly proportional to frequency","In AC circuits, inductors oppose current changes","XL increases linearly with both frequency and inductance"]};pn(q)}else if(t==="capacitive"){if(!g||!C){alert("Please enter all required values before exporting to PDF");return}const q={calculatorName:"Reactance & Impedance - Capacitive Reactance (XC)",inputs:{Frequency:`${g} Hz`,Capacitance:`${C} ${V}`},results:{"Capacitive Reactance (XC)":`${xe.reactance} `},additionalInfo:{Formula:"XC = 1 / (2fC)",Description:"Capacitive reactance decreases with frequency and opposes changes in voltage"},necReferences:["Capacitive reactance is inversely proportional to frequency","In AC circuits, capacitors oppose voltage changes","XC decreases as frequency or capacitance increases"]};pn(q)}else if(t==="impedance"){if(!z||!U){alert("Please enter all required values before exporting to PDF");return}const q={calculatorName:"Reactance & Impedance - Impedance Calculator",inputs:{"Reactance Type":B.charAt(0).toUpperCase()+B.slice(1),"Resistance (R)":`${z} `,"Reactance (X)":`${U} `},results:{"Impedance (Z)":`${ee.impedance} `,"Phase Angle ()":`${ee.angle}`,"Phase Relationship":B==="inductive"?"Leading":"Lagging"},additionalInfo:{"Impedance Formula":"Z = (R + X)","Phase Angle Formula":" = arctan(X / R)",Description:"Impedance is the total opposition to current flow in an AC circuit, combining resistance and reactance"},necReferences:["Impedance combines resistive and reactive components","Phase angle indicates the relationship between voltage and current","In inductive circuits, current lags voltage; in capacitive circuits, current leads voltage"]};pn(q)}else if(t==="resonance"){if(!ce||!F){alert("Please enter all required values before exporting to PDF");return}const q={calculatorName:"Reactance & Impedance - Resonant Frequency",inputs:{Inductance:`${ce} ${A}`,Capacitance:`${F} ${v}`},results:{"Resonant Frequency (fr)":`${D.frequency} Hz`},additionalInfo:{Formula:"fr = 1 / (2LC)","At Resonance":"Inductive and capacitive reactances are equal and opposite (XL = XC)","Series Circuit":"Minimum impedance at resonance","Parallel Circuit":"Maximum impedance at resonance"},necReferences:["Resonance occurs when XL = XC","At resonant frequency, circuit is purely resistive","Series resonant circuits have minimum impedance","Parallel resonant circuits have maximum impedance"]};pn(q)}}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsxs("button",{onClick:()=>n("inductive"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="inductive"?"#3b82f6":"transparent",color:t==="inductive"?"white":M.labelText,border:`1px solid ${t==="inductive"?"#3b82f6":M.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:["Inductive (X",i.jsx("sub",{children:"L"}),")"]}),i.jsxs("button",{onClick:()=>n("capacitive"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="capacitive"?"#3b82f6":"transparent",color:t==="capacitive"?"white":M.labelText,border:`1px solid ${t==="capacitive"?"#3b82f6":M.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:["Capacitive (X",i.jsx("sub",{children:"C"}),")"]}),i.jsx("button",{onClick:()=>n("impedance"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="impedance"?"#3b82f6":"transparent",color:t==="impedance"?"white":M.labelText,border:`1px solid ${t==="impedance"?"#3b82f6":M.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Impedance (Z)"}),i.jsx("button",{onClick:()=>n("resonance"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="resonance"?"#3b82f6":"transparent",color:t==="resonance"?"white":M.labelText,border:`1px solid ${t==="resonance"?"#3b82f6":M.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Resonance"})]})}),t==="inductive"&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:M.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${M.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),i.jsx("input",{type:"number",value:o,onChange:q=>a(q.target.value),placeholder:"60",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:M.subtleText,marginTop:"0.25rem"},children:"Common: 50 Hz or 60 Hz"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Inductance"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"number",value:c,onChange:q=>u(q.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"}}),i.jsxs("select",{value:f,onChange:q=>d(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"H",children:"H"}),i.jsx("option",{value:"mH",children:"mH"}),i.jsx("option",{value:"H",children:"H"})]})]})]})]})]}),ye&&i.jsx("div",{children:i.jsxs("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:M.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Inductive Reactance (X",i.jsx("sub",{children:"L"}),")"]}),i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:ye.reactance}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms ()"})]}),i.jsxs("div",{style:{background:M.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${M.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:M.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:M.cardText},children:"Circuit Values:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:M.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Frequency: ",ye.frequency," Hz"]}),i.jsxs("div",{children:["Inductance: ",ye.inductance," ",ye.unit]}),i.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:M.subtleText},children:["Formula: X",i.jsx("sub",{children:"L"})," = 2fL"]})]})]})]})})]}),t==="capacitive"&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:M.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${M.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),i.jsx("input",{type:"number",value:g,onChange:q=>w(q.target.value),placeholder:"60",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:M.subtleText,marginTop:"0.25rem"},children:"Common: 50 Hz or 60 Hz"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Capacitance"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"number",value:C,onChange:q=>b(q.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"}}),i.jsxs("select",{value:V,onChange:q=>R(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"nF",children:"nF"}),i.jsx("option",{value:"pF",children:"pF"})]})]})]})]})]}),xe&&i.jsx("div",{children:i.jsxs("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:M.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Capacitive Reactance (X",i.jsx("sub",{children:"C"}),")"]}),i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:xe.reactance}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms ()"})]}),i.jsxs("div",{style:{background:M.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${M.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:M.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:M.cardText},children:"Circuit Values:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:M.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Frequency: ",xe.frequency," Hz"]}),i.jsxs("div",{children:["Capacitance: ",xe.capacitance," ",xe.unit]}),i.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:M.subtleText},children:["Formula: X",i.jsx("sub",{children:"C"})," = 1 / (2fC)"]})]})]})]})})]}),t==="impedance"&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:M.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${M.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Reactance Type"}),i.jsxs("select",{value:B,onChange:q=>re(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"},children:[i.jsxs("option",{value:"inductive",children:["Inductive (X",i.jsx("sub",{children:"L"}),")"]}),i.jsxs("option",{value:"capacitive",children:["Capacitive (X",i.jsx("sub",{children:"C"}),")"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Resistance (R) in Ohms"}),i.jsx("input",{type:"number",value:z,onChange:q=>j(q.target.value),placeholder:"Enter resistance",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Reactance (X) in Ohms"}),i.jsx("input",{type:"number",value:U,onChange:q=>H(q.target.value),placeholder:"Enter reactance",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"}})]})]})]}),ee&&i.jsx("div",{children:i.jsxs("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:M.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Impedance (Z)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:ee.impedance}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms ()"})]}),i.jsxs("div",{style:{background:M.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:M.labelText,marginBottom:"0.25rem"},children:"Phase Angle ()"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:M.cardText},children:[ee.angle,""]}),i.jsx("div",{style:{fontSize:"0.75rem",color:M.labelText,marginTop:"0.25rem"},children:B==="inductive"?"Leading":"Lagging"})]})]}),i.jsxs("div",{style:{background:M.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${M.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:M.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:M.cardText},children:"Circuit Values:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:M.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Resistance (R): ",ee.resistance," "]}),i.jsxs("div",{children:["Reactance (X): ",ee.reactance,"  (",ee.type,")"]}),i.jsx("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:M.subtleText},children:"Formula: Z = (R + X)"}),i.jsx("div",{style:{fontStyle:"italic",color:M.subtleText},children:"Phase Angle:  = arctan(X / R)"})]})]})]})})]}),t==="resonance"&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:M.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${M.cardBorder}`,paddingBottom:"0.5rem"},children:"LC Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Inductance"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"number",value:ce,onChange:q=>N(q.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"}}),i.jsxs("select",{value:A,onChange:q=>T(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"H",children:"H"}),i.jsx("option",{value:"mH",children:"mH"}),i.jsx("option",{value:"H",children:"H"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Capacitance"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"number",value:F,onChange:q=>k(q.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"}}),i.jsxs("select",{value:v,onChange:q=>L(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"nF",children:"nF"}),i.jsx("option",{value:"pF",children:"pF"})]})]})]})]})]}),D&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:M.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Resonant Frequency (f",i.jsx("sub",{children:"r"}),")"]}),i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:D.frequency}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Hertz (Hz)"})]}),i.jsxs("div",{style:{background:M.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${M.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:M.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:M.cardText},children:"Circuit Values:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:M.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Inductance: ",D.inductance," ",D.inductanceUnit]}),i.jsxs("div",{children:["Capacitance: ",D.capacitance," ",D.capacitanceUnit]}),i.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:M.subtleText},children:["Formula: f",i.jsx("sub",{children:"r"})," = 1 / (2LC)"]})]})]})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"About Resonant Frequency:"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"At resonance, inductive and capacitive reactances are equal and opposite, resulting in minimum impedance in series circuits and maximum impedance in parallel circuits."})]})]})})]})]}),i.jsxs("div",{style:{background:M.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${M.cardBorder}`,fontSize:"0.8125rem",color:M.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:M.cardText},children:"Key Concepts:"}),"X",i.jsx("sub",{children:"L"})," increases with frequency  X",i.jsx("sub",{children:"C"})," decreases with frequency  At resonance X",i.jsx("sub",{children:"L"})," = X",i.jsx("sub",{children:"C"}),"  Impedance combines resistance and reactance"]})]})}),qE=pe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=pe.useState("correction"),[o,a]=pe.useState(""),[c,u]=pe.useState("480"),[f,d]=pe.useState(""),[g,w]=pe.useState("0.95"),[C,b]=pe.useState("60"),[V,R]=pe.useState(""),[z,j]=pe.useState(""),[U,H]=pe.useState("0.95"),[B,re]=pe.useState(""),[ce,N]=pe.useState(""),[A,T]=pe.useState("8760"),[F,k]=pe.useState(""),v={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},L=()=>{if(!o||!f)return null;const se=parseFloat(o),ie=parseFloat(f),ye=parseFloat(g),xe=parseFloat(c),ee=parseFloat(C),D=Math.acos(ie),q=Math.acos(ye),X=se*Math.tan(D),de=se*Math.tan(q),we=X-de,Ae=we*1e9/(2*Math.PI*ee*xe*xe),Ce=se/ie,Be=se/ye,qe=Ce*1e3/(Math.sqrt(3)*xe),et=Be*1e3/(Math.sqrt(3)*xe),Qe=(qe-et)/qe*100;return{kVAR:we.toFixed(2),capacitance:Ae.toFixed(2),existingApparentPower:Ce.toFixed(2),correctedApparentPower:Be.toFixed(2),powerReduction:((Ce-Be)/Ce*100).toFixed(1),existingCurrent:qe.toFixed(2),correctedCurrent:et.toFixed(2),currentReduction:Qe.toFixed(1),existingPF:(ie*100).toFixed(1),targetPF:(ye*100).toFixed(1)}},M=()=>{if(!V||!z||!B)return null;const se=parseFloat(V),ie=parseFloat(z),ye=parseFloat(U),xe=parseFloat(B),ee=parseFloat(ce)||0,D=parseFloat(A),q=parseFloat(F)||0,X=se/ie,de=se/ye,me=X-de,we=me*xe,Ce=(ye-ie)*100*.01,Be=se*D*(Ce/100)*ee,qe=q*12,et=we*12,Qe=et+Be+qe,Fe=Math.acos(ie),he=Math.acos(ye),Pt=se*(Math.tan(Fe)-Math.tan(he)),Ct=Pt*75,vt=Qe>0?Ct/Qe*12:0;return{kVAReduction:me.toFixed(2),monthlyDemandSavings:we.toFixed(2),annualDemandSavings:et.toFixed(2),annualEnergySavings:Be.toFixed(2),annualPenaltySavings:qe.toFixed(2),totalAnnualSavings:Qe.toFixed(2),kVARRequired:Pt.toFixed(2),estimatedCost:Ct.toFixed(2),paybackMonths:vt.toFixed(1),paybackYears:(vt/12).toFixed(1),fiveYearSavings:(Qe*5-Ct).toFixed(2)}},$=L(),oe=M();return pe.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="correction"){if(!o||!f){alert("Please enter all required values before exporting to PDF");return}const se={calculatorName:"Power Factor Correction - Capacitor Sizing",inputs:{"Real Power":`${o} kW`,"System Voltage":`${c}V`,"Existing Power Factor":f,"Target Power Factor":g,Frequency:`${C} Hz`},results:{"Required Capacitor Size":`${$.kVAR} kVAR`,"Capacitance per Phase":`${$.capacitance} F`,"Power Factor Before":`${$.existingPF}%`,"Power Factor After":`${$.targetPF}%`,"Apparent Power Before":`${$.existingApparentPower} kVA`,"Apparent Power After":`${$.correctedApparentPower} kVA`,"Apparent Power Reduction":`${$.powerReduction}%`,"Line Current Before":`${$.existingCurrent} A`,"Line Current After":`${$.correctedCurrent} A`,"Current Reduction":`${$.currentReduction}%`},additionalInfo:{Benefits:"Power factor correction reduces utility demand charges, lowers line losses and voltage drop, increases system capacity, reduces equipment heating, and improves voltage regulation."},necReferences:["NEC Article 460 - Capacitors","NEC 460.8 - Conductors supplying capacitors shall have an ampacity of not less than 135% of the rated current of the capacitor","NEC 460.9 - Rating or Setting of Motor Overload Device"]};pn(se)}else if(t==="savings"){if(!V||!z||!B){alert("Please enter all required values before exporting to PDF");return}const se={calculatorName:"Power Factor Correction - Cost Savings Analysis",inputs:{"Real Power":`${V} kW`,"Operating Hours per Year":A,"Existing Power Factor":z,"Target Power Factor":U,"Demand Charge":`$${B}/kVA/month`,"Energy Rate":ce?`$${ce}/kWh`:"Not specified","Monthly PF Penalty":F?`$${F}/month`:"None"},results:{"Total Annual Savings":`$${oe.totalAnnualSavings}/year`,"Monthly Demand Savings":`$${oe.monthlyDemandSavings}/month`,"Annual Demand Savings":`$${oe.annualDemandSavings}/year`,"Annual Energy Savings":`$${oe.annualEnergySavings}/year`,"Annual Penalty Savings":`$${oe.annualPenaltySavings}/year`,"kVA Reduction":`${oe.kVAReduction} kVA`,"Required Capacitor Size":`${oe.kVARRequired} kVAR`,"Estimated Equipment Cost":`$${oe.estimatedCost}`,"Payback Period":`${oe.paybackMonths} months (${oe.paybackYears} years)`,"5-Year Net Savings":`$${oe.fiveYearSavings}`},additionalInfo:{"Cost Basis":"Estimated at $75 per kVAR installed","Savings Note":"Actual costs and savings may vary based on equipment selection, installation costs, utility rate structures, and load profiles"},necReferences:["NEC Article 460 - Capacitors","NEC 460.8 - Conductors supplying capacitors shall have an ampacity of not less than 135% of the rated current of the capacitor","IEEE Std 18-2012 - Standard for Shunt Power Capacitors"]};pn(se)}}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>n("correction"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="correction"?"#3b82f6":"transparent",color:t==="correction"?"white":v.labelText,border:`1px solid ${t==="correction"?"#3b82f6":v.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Capacitor Sizing"}),i.jsx("button",{onClick:()=>n("savings"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="savings"?"#3b82f6":"transparent",color:t==="savings"?"white":v.labelText,border:`1px solid ${t==="savings"?"#3b82f6":v.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Cost Savings"})]})}),t==="correction"?i.jsxs("div",{children:[i.jsxs("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:v.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${v.cardBorder}`,paddingBottom:"0.5rem"},children:"System Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Real Power (kW)"}),i.jsx("input",{type:"number",value:o,onChange:se=>a(se.target.value),placeholder:"Enter load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"System Voltage (V)"}),i.jsxs("select",{value:c,onChange:se=>u(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Existing Power Factor"}),i.jsx("input",{type:"number",value:f,onChange:se=>d(se.target.value),placeholder:"0.70 - 0.99",step:"0.01",min:"0.5",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:v.subtleText,marginTop:"0.25rem"},children:"Current (uncorrected)"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:["Target Power  ",i.jsx("br",{}),"Factor ",i.jsx("br",{})]}),i.jsxs("select",{value:g,onChange:se=>w(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"0.90",children:"0.90 (90%)"}),i.jsx("option",{value:"0.95",children:"0.95 (95%) - Recommended"}),i.jsx("option",{value:"0.98",children:"0.98 (98%)"}),i.jsx("option",{value:"0.99",children:"0.99 (99%)"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),i.jsxs("select",{value:C,onChange:se=>b(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"50",children:"50 Hz"}),i.jsx("option",{value:"60",children:"60 Hz"})]})]})]})]}),$&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:v.cardText,marginTop:0,marginBottom:"1rem"},children:"Required Capacitor Bank"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Capacitor Size"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:$.kVAR}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"kVAR"})]}),i.jsxs("div",{style:{background:v.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:v.labelText,marginBottom:"0.25rem"},children:"Capacitance"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:v.cardText},children:$.capacitance}),i.jsx("div",{style:{fontSize:"0.75rem",color:v.labelText,marginTop:"0.25rem"},children:"F per phase"})]})]}),i.jsxs("div",{style:{background:v.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${v.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:v.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:v.cardText},children:"Power Factor Improvement:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:v.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["From: ",$.existingPF,"%  To: ",$.targetPF,"%"]}),i.jsxs("div",{children:["Real Power: ",o," kW (constant)"]}),i.jsxs("div",{children:["System Voltage: ",c,"V, ",C," Hz"]})]})]})]}),i.jsxs("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:v.cardText,marginTop:0,marginBottom:"1rem"},children:"System Improvements"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{background:v.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${v.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:v.cardText,marginBottom:"0.5rem"},children:"Apparent Power Reduction"}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:v.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Before: ",$.existingApparentPower," kVA"]}),i.jsxs("div",{children:["After: ",$.correctedApparentPower," kVA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669",marginTop:"0.25rem"},children:["Reduction: ",$.powerReduction,"%"]})]})]}),i.jsxs("div",{style:{background:v.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${v.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:v.cardText,marginBottom:"0.5rem"},children:"Line Current Reduction"}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:v.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Before: ",$.existingCurrent," A"]}),i.jsxs("div",{children:["After: ",$.correctedCurrent," A"]}),i.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669",marginTop:"0.25rem"},children:["Reduction: ",$.currentReduction,"%"]})]})]})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(H3,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Benefits of Power Factor Correction:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Reduced utility demand charges"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Lower line losses and voltage drop"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Increased system capacity"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Reduced equipment heating"}),i.jsx("li",{children:"Improved voltage regulation"})]})]})]})})]})]}):i.jsxs("div",{children:[i.jsxs("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:v.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${v.cardBorder}`,paddingBottom:"0.5rem"},children:"Load & Power Factor"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:["Real Power ",i.jsx("br",{})," (kW)"]}),i.jsx("input",{type:"number",value:V,onChange:se=>R(se.target.value),placeholder:"Enter load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Operating Hours/Year"}),i.jsx("input",{type:"number",value:A,onChange:se=>T(se.target.value),placeholder:"8760",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:v.subtleText,marginTop:"0.25rem"},children:"8760 = 24/7 operation"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Existing Power Factor"}),i.jsx("input",{type:"number",value:z,onChange:se=>j(se.target.value),placeholder:"0.70 - 0.99",step:"0.01",min:"0.5",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:["Target Power ",i.jsx("br",{})," Factor"]}),i.jsxs("select",{value:U,onChange:se=>H(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"0.90",children:"0.90 (90%)"}),i.jsx("option",{value:"0.95",children:"0.95 (95%)"}),i.jsx("option",{value:"0.98",children:"0.98 (98%)"})]})]})]})]})]}),i.jsxs("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:v.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${v.cardBorder}`,paddingBottom:"0.5rem"},children:"Utility Rates"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Demand Charge ($/kVA/month)"}),i.jsx("input",{type:"number",value:B,onChange:se=>re(se.target.value),placeholder:"10 - 25",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:v.subtleText,marginTop:"0.25rem"},children:"Check your utility bill"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Energy Rate ($/kWh) - Optional"}),i.jsx("input",{type:"number",value:ce,onChange:se=>N(se.target.value),placeholder:"0.08 - 0.15",step:"0.001",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:v.subtleText,marginTop:"0.25rem"},children:"For energy loss savings"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:v.labelText,marginBottom:"0.5rem"},children:"Monthly PF Penalty ($/month) - Optional"}),i.jsx("input",{type:"number",value:F,onChange:se=>k(se.target.value),placeholder:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${v.inputBorder}`,borderRadius:"8px",backgroundColor:v.inputBg,color:v.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:v.subtleText,marginTop:"0.25rem"},children:"If utility charges PF penalty"})]})]})]}),oe&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:v.cardText,marginTop:0,marginBottom:"1rem"},children:"Annual Cost Savings"}),i.jsxs("div",{style:{background:"#d1fae5",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"#059669",marginBottom:"0.5rem",fontWeight:"600"},children:"Total Annual Savings"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#059669"},children:["$",oe.totalAnnualSavings]}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#059669",marginTop:"0.25rem"},children:"per year"})]}),i.jsxs("div",{style:{background:v.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${v.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:v.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:v.cardText},children:"Savings Breakdown:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:v.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Demand Charge Savings: $",oe.annualDemandSavings,"/year"]}),parseFloat(oe.annualEnergySavings)>0&&i.jsxs("div",{children:["Energy Loss Savings: $",oe.annualEnergySavings,"/year"]}),parseFloat(oe.annualPenaltySavings)>0&&i.jsxs("div",{children:["Penalty Elimination: $",oe.annualPenaltySavings,"/year"]}),i.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:`1px solid ${v.cardBorder}`},children:["kVA Reduction: ",oe.kVAReduction," kVA"]})]})]})]}),i.jsxs("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:v.cardText,marginTop:0,marginBottom:"1rem"},children:"Return on Investment"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:v.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:v.labelText,marginBottom:"0.25rem"},children:"Estimated Cost"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:v.cardText},children:["$",oe.estimatedCost]}),i.jsxs("div",{style:{fontSize:"0.75rem",color:v.labelText,marginTop:"0.25rem"},children:[oe.kVARRequired," kVAR @ $75/kVAR"]})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Payback Period"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:oe.paybackMonths}),i.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:["months (",oe.paybackYears," years)"]})]})]}),i.jsx("div",{style:{background:v.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${v.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:v.labelText,display:"grid",gap:"0.25rem"},children:[i.jsx("div",{children:i.jsx("strong",{style:{color:v.cardText},children:"5-Year Net Savings:"})}),i.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#059669",marginTop:"0.25rem"},children:["$",oe.fiveYearSavings]}),i.jsx("div",{style:{fontSize:"0.8125rem",color:v.subtleText,marginTop:"0.25rem"},children:"Total savings minus initial investment"})]})})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Note:"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Actual costs and savings may vary based on equipment selection, installation costs, utility rate structures, and load profiles. Consult with a qualified electrical engineer for detailed analysis."})]})]})})]})]}),i.jsxs("div",{style:{background:v.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${v.cardBorder}`,fontSize:"0.8125rem",color:v.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:v.cardText},children:"Power Factor Basics:"}),"PF = Real Power (kW)  Apparent Power (kVA)  Low PF causes higher current and utility charges  Target 0.95+ for optimal efficiency  Capacitors supply reactive power locally"]})]})}),HE=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=pe.useState("from-kw-pf"),[a,c]=pe.useState(""),[u,f]=pe.useState(""),[d,g]=pe.useState(""),[w,C]=pe.useState(""),[b,V]=pe.useState("lagging"),R={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},j=(()=>{let H=0,B=0,re=0,ce=0,N=0;switch(n){case"from-kw-pf":if(!a||!w)return null;H=parseFloat(a),ce=parseFloat(w),re=H/ce,N=Math.acos(ce)*(180/Math.PI),B=re*Math.sin(Math.acos(ce)),b==="leading"&&(B=-B);break;case"from-kw-kvar":if(!a||!u)return null;H=parseFloat(a),B=parseFloat(u),b==="leading"&&(B=-Math.abs(B)),re=Math.sqrt(Math.pow(H,2)+Math.pow(B,2)),ce=H/re,N=Math.atan(Math.abs(B)/H)*(180/Math.PI);break;case"from-kva-pf":if(!d||!w)return null;re=parseFloat(d),ce=parseFloat(w),H=re*ce,N=Math.acos(ce)*(180/Math.PI),B=re*Math.sin(Math.acos(ce)),b==="leading"&&(B=-B);break;case"from-kva-kw":if(!d||!a||(re=parseFloat(d),H=parseFloat(a),H>re))return null;ce=H/re,N=Math.acos(ce)*(180/Math.PI),B=Math.sqrt(Math.pow(re,2)-Math.pow(H,2)),b==="leading"&&(B=-B);break;default:return null}return{kW:H,kVAR:B,kVA:re,powerFactor:ce,angle:N,isLeading:b==="leading"}})(),U=H=>{const B=Math.abs(H);return B>=.95?{quality:"Excellent",color:"#10b981",bg:"#d1fae5",border:"#6ee7b7"}:B>=.9?{quality:"Good",color:"#3b82f6",bg:"#dbeafe",border:"#93c5fd"}:B>=.85?{quality:"Fair",color:"#f59e0b",bg:"#fef3c7",border:"#fcd34d"}:{quality:"Poor",color:"#ef4444",bg:"#fee2e2",border:"#fca5a5"}};return pe.useImperativeHandle(t,()=>({exportPDF:()=>{if(!j){alert("Please enter values before exporting to PDF");return}const H=U(j.powerFactor),re={calculatorName:"Power Triangle Calculator",inputs:{calculationMode:{"from-kw-pf":"Real Power (kW) and Power Factor","from-kw-kvar":"Real Power (kW) and Reactive Power (kVAR)","from-kva-pf":"Apparent Power (kVA) and Power Factor","from-kva-kw":"Apparent Power (kVA) and Real Power (kW)"}[n],...a&&{realPower:`${a} kW`},...u&&{reactivePower:`${u} kVAR`},...d&&{apparentPower:`${d} kVA`},...w&&{powerFactor:w},reactiveType:b==="leading"?"Leading (Capacitive)":"Lagging (Inductive)"},results:{realPower:`${j.kW.toFixed(2)} kW`,reactivePower:`${Math.abs(j.kVAR).toFixed(2)} kVAR (${j.isLeading?"Leading":"Lagging"})`,apparentPower:`${j.kVA.toFixed(2)} kVA`,powerFactor:`${j.powerFactor.toFixed(4)} ${j.isLeading?"(Leading)":"(Lagging)"}`,phaseAngle:`${j.angle.toFixed(2)}`,powerFactorQuality:H.quality},additionalInfo:{powerTriangleRelationship:"kVA = kW + kVAR",powerFactorFormula:"PF = kW  kVA = cos()",reactivePowerFormula:"kVAR = kVA  sin()",phaseAngleFormula:" = arccos(PF)",leadingVsLagging:j.isLeading?"Leading PF: Current leads voltage (capacitive loads)":"Lagging PF: Current lags voltage (inductive loads - most common)"},necReferences:["Power Factor: Ratio of real power to apparent power","Leading PF (capacitive): Synchronous motors, over-excited generators, capacitor banks","Lagging PF (inductive): Most common - motors, transformers, inductive loads","Poor power factor results in: Higher current draw, increased losses, utility penalties","Power factor correction: Add capacitors for lagging PF, add inductors for leading PF","Many utilities charge penalties for power factor below 0.90-0.95"]};pn(re)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:R.cardBg,border:`1px solid ${R.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:R.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${R.cardBorder}`,paddingBottom:"0.5rem"},children:"Calculation Mode"}),i.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:[{value:"from-kw-pf",label:"From kW and Power Factor"},{value:"from-kw-kvar",label:"From kW and kVAR"},{value:"from-kva-pf",label:"From kVA and Power Factor"},{value:"from-kva-kw",label:"From kVA and kW"}].map(H=>i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:n===H.value?R.sectionBg:"transparent",border:`1px solid ${n===H.value?"#3b82f6":R.cardBorder}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseOver:B=>{n!==H.value&&(B.currentTarget.style.background=R.sectionBg)},onMouseOut:B=>{n!==H.value&&(B.currentTarget.style.background="transparent")},children:[i.jsx("input",{type:"radio",name:"calculationMode",value:H.value,checked:n===H.value,onChange:B=>o(B.target.value),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:R.cardText},children:H.label})]},H.value))})]}),i.jsxs("div",{style:{background:R.cardBg,border:`1px solid ${R.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:R.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${R.cardBorder}`,paddingBottom:"0.5rem"},children:"Input Values"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[(n==="from-kw-pf"||n==="from-kw-kvar"||n==="from-kva-kw")&&i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:R.labelText,marginBottom:"0.5rem"},children:["Real Power ",i.jsx("br",{}),"(kW)"]}),i.jsx("input",{type:"number",value:a,onChange:H=>c(H.target.value),placeholder:"Enter kW",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${R.inputBorder}`,borderRadius:"8px",backgroundColor:R.inputBg,color:R.cardText,boxSizing:"border-box"}})]}),n==="from-kw-kvar"&&i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:R.labelText,marginBottom:"0.5rem"},children:"Reactive Power (kVAR)"}),i.jsx("input",{type:"number",value:u,onChange:H=>f(H.target.value),placeholder:"Enter kVAR",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${R.inputBorder}`,borderRadius:"8px",backgroundColor:R.inputBg,color:R.cardText,boxSizing:"border-box"}})]}),(n==="from-kva-pf"||n==="from-kva-kw")&&i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:R.labelText,marginBottom:"0.5rem"},children:["Apparent Power ",i.jsx("br",{})," (kVA)"]}),i.jsx("input",{type:"number",value:d,onChange:H=>g(H.target.value),placeholder:"Enter kVA",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${R.inputBorder}`,borderRadius:"8px",backgroundColor:R.inputBg,color:R.cardText,boxSizing:"border-box"}})]}),(n==="from-kw-pf"||n==="from-kva-pf")&&i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:R.labelText,marginBottom:"0.5rem"},children:["Power Factor ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsx("input",{type:"number",value:w,onChange:H=>C(H.target.value),placeholder:"0.00 to 1.00",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${R.inputBorder}`,borderRadius:"8px",backgroundColor:R.inputBg,color:R.cardText,boxSizing:"border-box"}})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:R.labelText,marginBottom:"0.5rem"},children:"Reactive Power Type"}),i.jsxs("select",{value:b,onChange:H=>V(H.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${R.inputBorder}`,borderRadius:"8px",backgroundColor:R.inputBg,color:R.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"lagging",children:"Lagging (Inductive - Most Common)"}),i.jsx("option",{value:"leading",children:"Leading (Capacitive)"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:R.subtleText,marginTop:"0.25rem"},children:"Inductive: Motors, transformers | Capacitive: Capacitor banks, lightly loaded cables"})]})]}),j&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:R.cardBg,border:`1px solid ${R.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:R.cardText,marginTop:0,marginBottom:"1rem"},children:"Power Triangle Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:R.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:R.labelText,marginBottom:"0.25rem"},children:"Real Power (kW)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:R.cardText},children:j.kW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:R.labelText,marginTop:"0.25rem"},children:"Working Power"})]}),i.jsxs("div",{style:{background:R.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:R.labelText,marginBottom:"0.25rem"},children:"Reactive Power (kVAR)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:R.cardText},children:Math.abs(j.kVAR).toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:R.labelText,marginTop:"0.25rem"},children:j.isLeading?"Leading":"Lagging"})]}),i.jsxs("div",{style:{background:R.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:R.labelText,marginBottom:"0.25rem"},children:"Apparent Power (kVA)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:R.cardText},children:j.kVA.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:R.labelText,marginTop:"0.25rem"},children:"Total Power"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{style:{background:U(j.powerFactor).bg,border:`1px solid ${U(j.powerFactor).border}`,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:U(j.powerFactor).color,marginBottom:"0.25rem"},children:"Power Factor"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:U(j.powerFactor).color},children:j.powerFactor.toFixed(4)}),i.jsx("div",{style:{fontSize:"0.75rem",color:U(j.powerFactor).color,marginTop:"0.25rem"},children:U(j.powerFactor).quality})]}),i.jsxs("div",{style:{background:R.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:R.labelText,marginBottom:"0.25rem"},children:"Phase Angle ()"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:R.cardText},children:[j.angle.toFixed(2),""]}),i.jsx("div",{style:{fontSize:"0.75rem",color:R.labelText,marginTop:"0.25rem"},children:"V-I Phase Shift"})]})]})]}),i.jsx("div",{style:{background:R.sectionBg,border:`1px solid ${R.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#3b82f6",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:R.labelText,lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",color:R.cardText,marginBottom:"0.5rem"},children:"Power Triangle Relationships:"}),i.jsxs("div",{style:{display:"grid",gap:"0.25rem"},children:[i.jsx("div",{children:" kVA = kW + kVAR (Pythagorean theorem)"}),i.jsx("div",{children:" Power Factor = kW  kVA = cos()"}),i.jsx("div",{children:" kVAR = kVA  sin()"}),i.jsxs("div",{children:[" ",j.isLeading?"Leading PF: Current leads voltage (capacitive loads)":"Lagging PF: Current lags voltage (inductive loads - most common)"]})]})]})]})}),j.powerFactor<.9&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"12px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Low Power Factor Alert"}),i.jsxs("div",{children:["Power factor below 0.90 may result in utility penalties and increased energy costs. Consider power factor correction using ",j.isLeading?"inductors (reactors)":"capacitor banks","to improve efficiency and reduce demand charges."]})]})]})})]})]})}),GE=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=pe.useState("find-power"),[a,c]=pe.useState("480"),[u,f]=pe.useState(""),[d,g]=pe.useState("0.85"),[w,C]=pe.useState(""),[b,V]=pe.useState("line-to-line"),[R,z]=pe.useState(""),j={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},H=(()=>{const B=parseFloat(a),re=parseFloat(u),ce=parseFloat(d),N=parseFloat(w),A=R?parseFloat(R)/100:1;if(n==="find-power"){if(!a||!u||!d)return null;const T=Math.sqrt(3)*B*re*ce/1e3,F=Math.sqrt(3)*B*re/1e3,k=Math.sqrt(Math.pow(F,2)-Math.pow(T,2));return{kW:T,kVA:F,kVAR:k,current:re,voltage:B,powerFactor:ce,amps:re}}else if(n==="find-current"){if(!a||!w||!d)return null;const T=N*1e3/(Math.sqrt(3)*B*ce),F=Math.sqrt(3)*B*T/1e3,k=Math.sqrt(Math.pow(F,2)-Math.pow(N,2));return{kW:N,kVA:F,kVAR:k,current:T,voltage:B,powerFactor:ce,amps:T}}else if(n==="motor-power"){if(!w||!R)return null;const T=N/A,F=N*1.341;let k=0;return a&&d&&(k=T*1e3/(Math.sqrt(3)*B*ce)),{inputKW:T,outputKW:N,outputHP:F,efficiency:A*100,amps:k,voltage:B,powerFactor:ce}}return null})();return pe.useImperativeHandle(t,()=>({exportPDF:()=>{if(!H){alert("Please enter all required values before exporting to PDF");return}const B={"find-power":"Calculate Power from Voltage & Current","find-current":"Calculate Current from Power & Voltage","motor-power":"Motor Power & Efficiency Calculation"};let re;n==="motor-power"?re={calculatorName:"Three-Phase Power Calculator - Motor",inputs:{calculationMode:B[n],outputPower:`${w} kW`,efficiency:`${R}%`,...a&&{voltage:`${a}V (${b==="line-to-line"?"Line-to-Line":"Line-to-Neutral"})`},...d&&{powerFactor:d}},results:{outputPower:`${H.outputKW.toFixed(2)} kW`,outputPowerHP:`${H.outputHP.toFixed(2)} HP`,inputPower:`${H.inputKW.toFixed(2)} kW`,efficiency:`${H.efficiency.toFixed(1)}%`,...H.amps>0&&{estimatedCurrent:`${H.amps.toFixed(2)} A`}},additionalInfo:{formula:"Input Power = Output Power  Efficiency",hpConversion:"1 kW = 1.341 HP",note:R?`At ${R}% efficiency, motor draws ${H.inputKW.toFixed(2)} kW to produce ${H.outputKW.toFixed(2)} kW output`:""}}:re={calculatorName:"Three-Phase Power Calculator",inputs:{calculationMode:B[n],voltage:`${a}V (${b==="line-to-line"?"Line-to-Line":"Line-to-Neutral"})`,...u&&{current:`${u} A`},...w&&{power:`${w} kW`},powerFactor:d},results:{realPower:`${H.kW.toFixed(2)} kW`,apparentPower:`${H.kVA.toFixed(2)} kVA`,reactivePower:`${H.kVAR.toFixed(2)} kVAR`,current:`${H.amps.toFixed(2)} A`,voltage:`${H.voltage}V`,powerFactor:H.powerFactor},additionalInfo:{powerFormula:"P = 3  V  I  PF (kW)",apparentPowerFormula:"S = 3  V  I (kVA)",currentFormula:"I = P / (3  V  PF)",sqrt3:"3 = 1.732",configuration:b==="line-to-line"?"Line-to-Line (most common)":"Line-to-Neutral",note:"Three-phase systems are more efficient for power transmission and are standard in industrial applications"},necReferences:["Three-phase power: P = 3  VL-L  I  PF","Line-to-Line voltage: Standard between any two phases","Line-to-Neutral voltage: VL-N = VL-L  3","Common voltages: 208V, 240V, 480V, 600V (North America)","Three-phase systems provide constant power delivery","More efficient than single-phase for large loads and motors"]},pn(re)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"Calculation Mode"}),i.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:[{value:"find-power",label:"Find Power (from Voltage & Current)"},{value:"find-current",label:"Find Current (from Power & Voltage)"},{value:"motor-power",label:"Motor Power & Efficiency"}].map(B=>i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:n===B.value?j.sectionBg:"transparent",border:`1px solid ${n===B.value?"#3b82f6":j.cardBorder}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseOver:re=>{n!==B.value&&(re.currentTarget.style.background=j.sectionBg)},onMouseOut:re=>{n!==B.value&&(re.currentTarget.style.background="transparent")},children:[i.jsx("input",{type:"radio",name:"calculationMode",value:B.value,checked:n===B.value,onChange:re=>o(re.target.value),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:j.cardText},children:B.label})]},B.value))})]}),i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"Input Values"}),n==="motor-power"?i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Output Power (kW)"}),i.jsx("input",{type:"number",value:w,onChange:B=>C(B.target.value),placeholder:"Motor output power",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Motor Efficiency (%)"}),i.jsx("input",{type:"number",value:R,onChange:B=>z(B.target.value),placeholder:"85-95% typical",step:"0.1",min:"0",max:"100",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.subtleText,marginTop:"0.25rem"},children:"Optional: For current calculation, enter voltage and PF below"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Voltage (V) - Optional"}),i.jsxs("select",{value:a,onChange:B=>c(B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"",children:"Select"}),i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"380",children:"380V"}),i.jsx("option",{value:"400",children:"400V"}),i.jsx("option",{value:"415",children:"415V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Power Factor - Optional"}),i.jsx("input",{type:"number",value:d,onChange:B=>g(B.target.value),placeholder:"0.80-0.95",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]})]})]}):i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Voltage Configuration"}),i.jsxs("select",{value:b,onChange:B=>V(B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"line-to-line",children:"Line-to-Line (Most Common)"}),i.jsx("option",{value:"line-to-neutral",children:"Line-to-Neutral"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.subtleText,marginTop:"0.25rem"},children:"Line-to-Line: Voltage between any two phases"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Voltage (V)"}),i.jsxs("select",{value:a,onChange:B=>c(B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"380",children:"380V"}),i.jsx("option",{value:"400",children:"400V"}),i.jsx("option",{value:"415",children:"415V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),i.jsx("input",{type:"number",value:d,onChange:B=>g(B.target.value),placeholder:"0.80-0.95",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]})]}),n==="find-power"&&i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Current (Amps)"}),i.jsx("input",{type:"number",value:u,onChange:B=>f(B.target.value),placeholder:"Line current",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]}),n==="find-current"&&i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Power (kW)"}),i.jsx("input",{type:"number",value:w,onChange:B=>C(B.target.value),placeholder:"Real power",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]})]})]}),H&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),n==="motor-power"?i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Output Power"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:H.outputKW.toFixed(2)}),i.jsxs("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.25rem"},children:["kW (",H.outputHP.toFixed(2)," HP)"]})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Input Power Required"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:H.inputKW.toFixed(2)}),i.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:["kW @ ",H.efficiency.toFixed(1),"% efficiency"]})]})]}),H.amps>0&&i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Estimated Current Draw"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:H.amps.toFixed(2)}),i.jsxs("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.25rem"},children:["Amps @ ",a,"V, PF ",d]})]})]}):i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Real Power (kW)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:H.kW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.25rem"},children:"Working Power"})]}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Apparent Power (kVA)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:H.kVA.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.25rem"},children:"Total Power"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Current (A)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:H.amps.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Line Current"})]})]})]}),i.jsx("div",{style:{background:j.sectionBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#3b82f6",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:j.labelText,lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",color:j.cardText,marginBottom:"0.5rem"},children:n==="motor-power"?"Motor Efficiency:":"Three-Phase Formulas:"}),i.jsx("div",{style:{display:"grid",gap:"0.25rem"},children:n==="motor-power"?i.jsxs(i.Fragment,{children:[i.jsx("div",{children:" Input Power = Output Power  Efficiency"}),i.jsx("div",{children:" 1 kW = 1.341 HP"}),i.jsx("div",{children:" Typical motor efficiency: 85-95%"}),i.jsx("div",{children:" Higher efficiency motors use less power"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{children:" P (kW) = 3  V  I  PF  1000"}),i.jsx("div",{children:" S (kVA) = 3  V  I  1000"}),i.jsx("div",{children:" I (A) = P  1000  (3  V  PF)"}),i.jsx("div",{children:" 3 = 1.732 (constant for 3-phase)"}),i.jsxs("div",{children:[" ",b==="line-to-line"?"Using Line-to-Line voltage":"Using Line-to-Neutral voltage"]})]})})]})]})}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"12px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Three-Phase Advantages:"}),i.jsxs("div",{style:{display:"grid",gap:"0.25rem"},children:[i.jsx("div",{children:" Delivers constant, smooth power (no pulsation)"}),i.jsx("div",{children:" More efficient for high-power applications"}),i.jsx("div",{children:" Smaller conductor sizes for same power"}),i.jsx("div",{children:" Standard for industrial and commercial buildings"}),i.jsx("div",{children:" Required for large motors and heavy equipment"})]})]})]})})]})]})}),KE=({isDarkMode:r})=>{const[e,t]=pe.useState(new Date),[n,o]=pe.useState(new Date),[a,c]=pe.useState([]),[u,f]=pe.useState(!0),d={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb",selectedDay:"#3b82f6",todayBg:r?"#1a1a1a":"#f3f4f6"},g={scheduled:"#3b82f6","in-progress":"#f59e0b",completed:"#10b981"};pe.useEffect(()=>{const v=vp(ti,async L=>{if(L)try{const M=await iu();c(M)}catch(M){console.error("Error loading jobs:",M)}finally{f(!1)}else c([]),f(!1)});return()=>v()},[]);const w=a.map(v=>({...v,dateObj:v.date?new Date(v.date+"T00:00:00"):null})),C=v=>new Date(v.getFullYear(),v.getMonth()+1,0).getDate(),b=v=>new Date(v.getFullYear(),v.getMonth(),1).getDay(),V=(v,L)=>!v||!L?!1:v.getDate()===L.getDate()&&v.getMonth()===L.getMonth()&&v.getFullYear()===L.getFullYear(),R=v=>V(v,new Date),z=v=>w.filter(L=>L.dateObj&&V(L.dateObj,v)),j=v=>w.some(L=>L.dateObj&&V(L.dateObj,v)),U=()=>{t(new Date(e.getFullYear(),e.getMonth()-1))},H=()=>{t(new Date(e.getFullYear(),e.getMonth()+1))},B=["January","February","March","April","May","June","July","August","September","October","November","December"],re=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ce=C(e),N=b(e),A=[];for(let v=0;v<N;v++)A.push(null);for(let v=1;v<=ce;v++)A.push(new Date(e.getFullYear(),e.getMonth(),v));const T=z(n),F=new Date,k=w.filter(v=>v.dateObj&&v.dateObj>=F&&v.status==="scheduled").sort((v,L)=>v.dateObj-L.dateObj).slice(0,5);return u?i.jsx("div",{style:{minHeight:"100vh",background:d.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("div",{style:{color:d.text},children:"Loading..."})}):i.jsx("div",{style:{minHeight:"100vh",background:d.bg,paddingBottom:"5rem",maxWidth:"100vw",overflowX:"hidden"},children:i.jsxs("div",{style:{padding:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5rem",marginBottom:"1rem",maxWidth:"100%",overflow:"hidden"},children:[i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#3b82f6",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:k.length}),i.jsx("div",{style:{fontSize:"0.75rem",color:d.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Upcoming"})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#f59e0b",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:a.filter(v=>v.status==="in-progress").length}),i.jsx("div",{style:{fontSize:"0.75rem",color:d.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"In Progress"})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10b981",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:a.filter(v=>v.status==="completed").length}),i.jsx("div",{style:{fontSize:"0.75rem",color:d.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Completed"})]})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem",boxShadow:"none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[i.jsxs("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:"600",color:d.text},children:[B[e.getMonth()]," ",e.getFullYear()]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:U,style:{background:d.bg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",color:d.text},children:i.jsx(r3,{size:20})}),i.jsx("button",{onClick:H,style:{background:d.bg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",color:d.text},children:i.jsx(i3,{size:20})})]})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.25rem",marginBottom:"0.5rem"},children:re.map(v=>i.jsx("div",{style:{textAlign:"center",fontSize:"0.75rem",fontWeight:"600",color:d.subtext,padding:"0.5rem 0"},children:v},v))}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.125rem"},children:A.map((v,L)=>{if(!v)return i.jsx("div",{},`empty-${L}`);const M=V(v,n),$=R(v),oe=j(v);return i.jsxs("button",{onClick:()=>o(v),style:{aspectRatio:"1",border:"none",borderRadius:"0.375rem",background:M?d.selectedDay:$?d.todayBg:"transparent",color:M?"white":d.text,cursor:"pointer",fontSize:"0.75rem",fontWeight:M||$?"600":"400",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",padding:"0.25rem",minWidth:0,width:"100%"},onMouseEnter:se=>{M||(se.currentTarget.style.background=d.todayBg)},onMouseLeave:se=>{!M&&!$?se.currentTarget.style.background="transparent":!M&&$&&(se.currentTarget.style.background=d.todayBg)},children:[v.getDate(),oe&&i.jsx("div",{style:{position:"absolute",bottom:"0.125rem",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"0.0625rem"},children:z(v).slice(0,3).map((se,ie)=>i.jsx("div",{style:{width:"3px",height:"3px",borderRadius:"50%",background:M?"white":g[se.status]}},ie))})]},L)})})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem",boxShadow:"none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[i.jsx("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:"600",color:d.text},children:V(n,new Date)?"Today":n.toLocaleDateString("en-US",{month:"long",day:"numeric"})}),i.jsxs("span",{style:{fontSize:"0.75rem",color:d.subtext,background:d.bg,padding:"0.25rem 0.75rem",borderRadius:"1rem"},children:[T.length," ",T.length===1?"job":"jobs"]})]}),T.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem",color:d.subtext},children:[i.jsx(u0,{size:48,style:{margin:"0 auto 0.5rem",opacity:.3}}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:"No jobs scheduled for this day"})]}):i.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:T.map(v=>i.jsxs("div",{style:{background:d.bg,border:`1px solid ${d.border}`,borderLeft:`4px solid ${g[v.status]}`,borderRadius:"0.5rem",padding:"1rem"},children:[i.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:i.jsxs("div",{children:[i.jsx("h4",{style:{margin:"0 0 0.25rem 0",fontSize:"1rem",fontWeight:"600",color:d.text},children:v.title||v.name}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:d.subtext},children:v.client})]})}),i.jsxs("div",{style:{display:"grid",gap:"0.25rem",fontSize:"0.875rem",color:d.subtext},children:[v.time&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(X0,{size:14}),i.jsxs("span",{children:[v.time,v.duration&&` (${v.duration})`]})]}),v.location&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(fx,{size:14}),i.jsx("span",{children:v.location})]}),v.estimatedCost&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Z0,{size:14}),i.jsxs("span",{children:["$",Number(v.estimatedCost).toLocaleString()]})]})]})]},v.id))})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",boxShadow:"none"},children:[i.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1.125rem",fontWeight:"600",color:d.text},children:"Upcoming Jobs"}),k.length===0?i.jsx("div",{style:{textAlign:"center",padding:"2rem 1rem",color:d.subtext},children:i.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:"No upcoming jobs scheduled"})}):i.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:k.map(v=>i.jsxs("div",{style:{background:d.bg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("h4",{style:{margin:"0 0 0.25rem 0",fontSize:"0.9375rem",fontWeight:"600",color:d.text},children:v.title||v.name}),i.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.8125rem",color:d.subtext},children:v.client}),i.jsxs("div",{style:{fontSize:"0.75rem",color:d.subtext,display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(u0,{size:12}),v.dateObj.toLocaleDateString("en-US",{month:"short",day:"numeric"}),v.time&&` at ${v.time}`]})]}),i.jsx("div",{style:{width:"4px",height:"40px",borderRadius:"2px",background:g[v.status]}})]},v.id))})]})]})})},JE=({isDarkMode:r})=>{const[e,t]=pe.useState(null),[n,o]=pe.useState(!0),[a,c]=pe.useState(!0),[u,f]=pe.useState(""),[d,g]=pe.useState(""),[w,C]=pe.useState(""),b={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"};pe.useEffect(()=>{const j=vp(ti,U=>{t(U),o(!1)});return()=>j()},[]);const V=async j=>{j.preventDefault(),C("");try{const U=await TC(ti,u,d);try{await fetch("/.netlify/functions/send-welcome-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u})})}catch(H){console.error("Welcome email failed:",H)}alert("Welcome! Please check your email to verify your account."),f(""),g("")}catch(U){C(U.message)}},R=async j=>{j.preventDefault(),C("");try{await AC(ti,u,d),f(""),g("")}catch(U){C(U.message)}},z=async()=>{try{await jC(ti)}catch(j){C(j.message)}};return n?i.jsx("div",{style:{background:b.bg,minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("div",{style:{color:b.text},children:"Loading..."})}):e?i.jsx("div",{style:{background:b.bg,paddingBottom:"5rem"},children:i.jsxs("div",{style:{padding:"1rem"},children:[i.jsxs("div",{style:{background:b.cardBg,borderRadius:"0.75rem",border:`1px solid ${b.border}`,padding:"2rem 1rem",marginBottom:"1rem",textAlign:"center",boxShadow:"none"},children:[i.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:i.jsx(Uf,{size:40,color:"white"})}),i.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:b.text,fontSize:"1.25rem",fontWeight:"600"},children:e.email}),i.jsx("p",{style:{margin:0,color:b.subtext,fontSize:"0.875rem"},children:"Electrician Account"})]}),i.jsxs("div",{style:{background:b.cardBg,borderRadius:"0.75rem",border:`1px solid ${b.border}`,overflow:"hidden",marginBottom:"1rem",boxShadow:"none"},children:[i.jsx("h3",{style:{margin:0,padding:"1rem",color:b.text,fontSize:"1rem",fontWeight:"600",borderBottom:`1px solid ${b.border}`},children:"Account Settings"}),i.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",borderBottom:`1px solid ${b.border}`,display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:b.text},children:[i.jsx(u5,{size:20,color:b.subtext}),i.jsxs("div",{style:{flex:1,textAlign:"left"},children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Email"}),i.jsx("div",{style:{fontSize:"0.8125rem",color:b.subtext},children:e.email})]})]}),i.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",borderBottom:`1px solid ${b.border}`,display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:b.text},children:[i.jsx(GS,{size:20,color:b.subtext}),i.jsxs("div",{style:{flex:1,textAlign:"left"},children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Notifications"}),i.jsx("div",{style:{fontSize:"0.8125rem",color:b.subtext},children:"Manage preferences"})]})]}),i.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:b.text},children:[i.jsx(z3,{size:20,color:b.subtext}),i.jsxs("div",{style:{flex:1,textAlign:"left"},children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Privacy & Security"}),i.jsx("div",{style:{fontSize:"0.8125rem",color:b.subtext},children:"Account protection"})]})]})]}),i.jsxs("button",{onClick:z,style:{width:"100%",padding:"1rem",background:"#ef4444",color:"white",border:"none",borderRadius:"0.75rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:"none"},children:[i.jsx(_3,{size:20}),"Log Out"]})]})}):i.jsx("div",{style:{background:b.bg,minHeight:"100vh",paddingBottom:"5rem"},children:i.jsx("div",{style:{padding:"1rem"},children:i.jsxs("div",{style:{background:b.cardBg,borderRadius:"0.75rem",border:`1px solid ${b.border}`,padding:"2rem 1rem",marginTop:"2rem",boxShadow:"none"},children:[i.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:i.jsx(Uf,{size:40,color:"white"})}),i.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:b.text,fontSize:"1.5rem",fontWeight:"700",textAlign:"center"},children:a?"Welcome Back":"Create Account"}),i.jsx("p",{style:{margin:"0 0 2rem 0",color:b.subtext,fontSize:"0.875rem",textAlign:"center"},children:a?"Sign in to your account":"Sign up to get started"}),w&&i.jsx("div",{style:{padding:"0.75rem",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"0.5rem",color:"#dc2626",fontSize:"0.875rem",marginBottom:"1rem"},children:w}),i.jsxs("form",{onSubmit:a?R:V,children:[i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:b.text,fontSize:"0.875rem",fontWeight:"500"},children:"Email"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(u5,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:b.subtext}}),i.jsx("input",{type:"email",value:u,onChange:j=>f(j.target.value),placeholder:"your@email.com",required:!0,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:`1px solid ${b.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:b.inputBg,color:b.text,boxSizing:"border-box"}})]})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:b.text,fontSize:"0.875rem",fontWeight:"500"},children:"Password"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(w3,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:b.subtext}}),i.jsx("input",{type:"password",value:d,onChange:j=>g(j.target.value),placeholder:"",required:!0,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:`1px solid ${b.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:b.inputBg,color:b.text,boxSizing:"border-box"}})]})]}),i.jsx("button",{type:"submit",style:{width:"100%",padding:"0.875rem",background:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",marginBottom:"1rem"},children:a?"Sign In":"Sign Up"}),i.jsxs("div",{style:{textAlign:"center",color:b.subtext,fontSize:"0.875rem"},children:[a?"Don't have an account? ":"Already have an account? ",i.jsx("button",{type:"button",onClick:()=>{c(!a),C("")},style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",textDecoration:"underline"},children:a?"Sign Up":"Sign In"})]})]})]})})})},YE=({job:r,statusConfig:e,statusDropdownOpen:t,setStatusDropdownOpen:n,onUpdateStatus:o,onViewJob:a,onViewEstimate:c,onViewInvoice:u,isDarkMode:f,colors:d})=>{const g=pe.useRef(null),w=e[r.status].icon,C=r.title||r.name;return i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"0.75rem",transition:"all 0.2s"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("h3",{style:{margin:"0 0 0.25rem 0",color:d.text,fontSize:"1rem",fontWeight:"600"},children:C}),i.jsx("p",{style:{margin:0,color:d.subtext,fontSize:"0.875rem"},children:r.client})]}),i.jsxs("div",{style:{position:"relative"},ref:t===r.id?g:null,children:[i.jsxs("button",{onClick:b=>{b.stopPropagation(),n(t===r.id?null:r.id)},style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",padding:"4px 8px",borderRadius:"4px",background:`${e[r.status].color}20`,color:e[r.status].color,fontSize:"11px",fontWeight:"600",whiteSpace:"nowrap",border:"none",cursor:"pointer",transition:"all 0.2s",lineHeight:"1",minHeight:"unset",minWidth:"unset",height:"fit-content",width:"fit-content",boxSizing:"border-box"},children:[i.jsx(w,{size:12}),i.jsx("span",{children:e[r.status].label})]}),t===r.id&&i.jsx("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.5rem",background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:100,minWidth:"140px",overflow:"hidden"},children:Object.entries(e).map(([b,V])=>{const R=V.icon;return i.jsxs("button",{onClick:z=>{z.stopPropagation(),o(r.id,b)},style:{width:"100%",padding:"0.625rem 0.75rem",background:r.status===b?`${V.color}20`:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:V.color,fontSize:"0.875rem",fontWeight:r.status===b?"600":"500",transition:"background 0.2s"},onMouseEnter:z=>{r.status!==b&&(z.target.style.background=f?"#2a2a2a":"#f3f4f6")},onMouseLeave:z=>{r.status!==b&&(z.target.style.background="transparent")},children:[i.jsx(R,{size:16}),i.jsx("span",{children:V.label})]},b)})})]})]}),r.location&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:d.subtext,fontSize:"0.875rem"},children:[i.jsx(fx,{size:16}),i.jsx("span",{children:r.location})]}),r.date&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:d.subtext,fontSize:"0.875rem"},children:[i.jsx(u0,{size:16}),i.jsxs("span",{children:[new Date(r.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),r.time&&` at ${r.time}`,r.duration&&` (${r.duration})`]})]}),r.estimatedCost&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:d.subtext,fontSize:"0.875rem"},children:[i.jsx(Z0,{size:16}),i.jsxs("span",{children:["$",Number(r.estimatedCost).toLocaleString()]})]}),r.notes&&i.jsx("p",{style:{margin:"0.75rem 0 0 0",padding:"0.75rem",background:d.bg,borderRadius:"0.5rem",color:d.text,fontSize:"0.875rem",lineHeight:"1.5"},children:r.notes}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5rem",marginTop:"0.75rem",width:"100%"},children:[i.jsxs("button",{onClick:()=>a(r),title:"View Job Details",style:{padding:"0.5rem 0.25rem",background:"#2563eb",border:"none",borderRadius:"0.5rem",color:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.625rem",fontWeight:"600",minWidth:0},children:[i.jsx(h3,{size:16}),i.jsx("span",{children:"Job"})]}),i.jsxs("button",{onClick:()=>c(r),title:r.estimateId?"View Estimate":"No estimate linked",style:{padding:"0.5rem 0.25rem",background:r.estimateId?"#10b981":d.border,border:"none",borderRadius:"0.5rem",color:"white",cursor:r.estimateId?"pointer":"not-allowed",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.625rem",fontWeight:"600",opacity:r.estimateId?1:.5,minWidth:0},disabled:!r.estimateId,children:[i.jsx(fh,{size:16}),i.jsx("span",{children:"Estimate"})]}),i.jsxs("button",{onClick:()=>u(r),title:r.invoiceId?"View Invoice":"No invoice linked",style:{padding:"0.5rem 0.25rem",background:r.invoiceId?"#f59e0b":d.border,border:"none",borderRadius:"0.5rem",color:"white",cursor:r.invoiceId?"pointer":"not-allowed",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.625rem",fontWeight:"600",opacity:r.invoiceId?1:.5,minWidth:0},disabled:!r.invoiceId,children:[i.jsx(eg,{size:16}),i.jsx("span",{children:"Invoice"})]})]})]})},QE=({linkedEstimate:r,estimates:e,showMenu:t,setShowMenu:n,onSelectEstimate:o,onCreateNewEstimate:a,onViewEstimate:c,onRemoveEstimate:u,menuRef:f,isDarkMode:d,colors:g})=>r?i.jsxs("div",{style:{marginBottom:"0.75rem"},children:[i.jsxs("button",{type:"button",onClick:()=>c(r.id),style:{width:"100%",padding:"0.75rem",background:g.bg,border:`1px solid ${g.border}`,borderRadius:"0.5rem",cursor:"pointer",textAlign:"left",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:g.text,marginBottom:"0.25rem"},children:r.name}),i.jsxs("div",{style:{fontSize:"0.75rem",color:g.subtext},children:["$",Number(r.total||0).toLocaleString()]})]}),i.jsx("div",{style:{padding:"0.25rem 0.5rem",background:"#2563eb",color:"white",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"View"})]}),i.jsx("button",{type:"button",onClick:u,style:{width:"100%",padding:"0.5rem",marginTop:"0.5rem",background:"transparent",border:`1px solid ${g.border}`,borderRadius:"0.5rem",color:g.subtext,cursor:"pointer",fontSize:"0.75rem"},children:"Remove Estimate"})]}):i.jsxs("div",{style:{position:"relative",marginBottom:"0.75rem"},ref:t?f:null,children:[i.jsxs("button",{type:"button",onClick:()=>n(!t),style:{width:"100%",padding:"0.75rem",background:g.inputBg,border:`1px solid ${g.border}`,borderRadius:"0.5rem",color:"#2563eb",cursor:"pointer",fontSize:"0.9375rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(La,{size:18}),"Add Estimate"]}),t&&i.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"0.5rem",background:g.cardBg,border:`1px solid ${g.border}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:100,maxHeight:"200px",overflowY:"auto"},children:[i.jsxs("button",{type:"button",onClick:a,style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${g.border}`,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontSize:"0.875rem",fontWeight:"600",textAlign:"left"},onMouseEnter:w=>w.target.style.background=d?"#2a2a2a":"#f3f4f6",onMouseLeave:w=>w.target.style.background="transparent",children:[i.jsx(La,{size:16}),"Create New Estimate"]}),e.length===0?i.jsx("div",{style:{padding:"1rem",textAlign:"center",color:g.subtext,fontSize:"0.875rem"},children:"No estimates available"}):e.map(w=>i.jsxs("button",{type:"button",onClick:()=>o(w),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${g.border}`,cursor:"pointer",textAlign:"left",color:g.text,fontSize:"0.875rem"},onMouseEnter:C=>C.target.style.background=d?"#2a2a2a":"#f3f4f6",onMouseLeave:C=>C.target.style.background="transparent",children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:w.name||"Untitled Estimate"}),i.jsxs("div",{style:{color:g.subtext,fontSize:"0.75rem"},children:["$",Number(w.total||0).toLocaleString()]})]},w.id))]})]}),qw=({formData:r,setFormData:e,linkedEstimate:t,estimates:n,showEstimateMenu:o,setShowEstimateMenu:a,onSelectEstimate:c,onCreateNewEstimate:u,onViewEstimate:f,onRemoveEstimate:d,estimateMenuRef:g,isDarkMode:w,colors:C})=>i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"text",placeholder:"Job Title *",value:r.title,onChange:b=>e(V=>({...V,title:b.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box"}}),i.jsx("input",{type:"text",placeholder:"Client Name *",value:r.client,onChange:b=>e(V=>({...V,client:b.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box"}}),i.jsx("input",{type:"text",placeholder:"Location",value:r.location,onChange:b=>e(V=>({...V,location:b.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box"}}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[i.jsx("input",{type:"date",value:r.date,onChange:b=>e(V=>({...V,date:b.target.value})),style:{padding:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box"}}),i.jsx("input",{type:"time",value:r.time,onChange:b=>e(V=>({...V,time:b.target.value})),style:{padding:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box"}})]}),i.jsx(QE,{linkedEstimate:t,estimates:n,showMenu:o,setShowMenu:a,onSelectEstimate:c,onCreateNewEstimate:u,onViewEstimate:f,onRemoveEstimate:d,menuRef:g,isDarkMode:w,colors:C}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[i.jsx("input",{type:"number",placeholder:"Cost ($)",value:r.estimatedCost,onChange:b=>e(V=>({...V,estimatedCost:b.target.value})),style:{padding:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box"}}),i.jsx("input",{type:"text",placeholder:"Duration",value:r.duration,onChange:b=>e(V=>({...V,duration:b.target.value})),style:{padding:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box"}})]}),i.jsxs("select",{value:r.status,onChange:b=>e(V=>({...V,status:b.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box"},children:[i.jsx("option",{value:"scheduled",children:"Scheduled"}),i.jsx("option",{value:"in-progress",children:"In Progress"}),i.jsx("option",{value:"completed",children:"Completed"})]}),i.jsx("textarea",{placeholder:"Notes",value:r.notes,onChange:b=>e(V=>({...V,notes:b.target.value})),rows:"3",style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box",resize:"vertical"}})]}),XE=({viewingJob:r,formData:e,setFormData:t,linkedEstimate:n,estimates:o,showEstimateMenu:a,setShowEstimateMenu:c,onSelectEstimate:u,onCreateNewEstimate:f,onViewEstimate:d,onRemoveEstimate:g,estimateMenuRef:w,onClose:C,onSave:b,onDelete:V,isDarkMode:R,colors:z})=>r?i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:C,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:1e3,animation:"fadeIn 0.2s"}}),i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:z.cardBg,borderRadius:"1rem",padding:"1.5rem",paddingBottom:"calc(100px + env(safe-area-inset-bottom))",width:"90%",maxWidth:"500px",maxHeight:"80vh",overflowY:"auto",zIndex:1001,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.3)",WebkitOverflowScrolling:"touch"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[i.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:"600",color:z.text},children:"Job Details"}),i.jsx("button",{onClick:C,style:{background:"transparent",border:"none",cursor:"pointer",padding:"0.5rem",color:z.subtext,display:"flex",alignItems:"center"},children:i.jsx(Ax,{size:24})})]}),i.jsxs("div",{children:[i.jsx(qw,{formData:e,setFormData:t,linkedEstimate:n,estimates:o,showEstimateMenu:a,setShowEstimateMenu:c,onSelectEstimate:u,onCreateNewEstimate:f,onViewEstimate:d,onRemoveEstimate:g,estimateMenuRef:w,isDarkMode:R,colors:z}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:b,disabled:!e.title||!e.client,style:{flex:1,padding:"0.75rem",background:!e.title||!e.client?z.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:!e.title||!e.client?"not-allowed":"pointer",opacity:!e.title||!e.client?.5:1},children:"Save Changes"}),i.jsx("button",{onClick:()=>V(r.id,r.title||r.name),style:{padding:"0.75rem",background:"transparent",color:"#ef4444",border:"1px solid #ef4444",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.25rem"},children:i.jsx(Mc,{size:16})})]})]})]})]}):null,ZE=({isDarkMode:r,onNavigateToEstimates:e})=>{const[t,n]=pe.useState([]),[o,a]=pe.useState(!0),[c,u]=pe.useState(!1),[f,d]=pe.useState(null),[g,w]=pe.useState(null),[C,b]=pe.useState(null),[V,R]=pe.useState(!1),[z,j]=pe.useState([]),U=pe.useRef(null),[H,B]=pe.useState(null),[re,ce]=pe.useState(""),[N,A]=pe.useState({title:"",client:"",location:"",status:"scheduled",date:"",time:"",estimatedCost:"",duration:"",notes:""}),T={bg:r?"#000000":"#f9fafb",cardBg:r?"#1a1a1a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#999999":"#6b7280",border:r?"#2a2a2a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"},F={scheduled:{color:"#3b82f6",icon:X0,label:"Scheduled"},"in-progress":{color:"#f59e0b",icon:fp,label:"In Progress"},completed:{color:"#10b981",icon:In,label:"Completed"}};pe.useEffect(()=>{const q=vp(ti,X=>{X?k():a(!1)});return()=>q()},[]),pe.useEffect(()=>{const q=async()=>{try{const{getUserEstimates:X}=await Ou(async()=>{const{getUserEstimates:me}=await Promise.resolve().then(()=>eI);return{getUserEstimates:me}},void 0),de=await X();j(de)}catch(X){console.error("Error loading estimates:",X)}};ti.currentUser&&q()},[]),pe.useEffect(()=>{const q=X=>{U.current&&!U.current.contains(X.target)&&R(!1)};return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[]);const k=async()=>{a(!0);try{const q=await iu();n(q)}catch(q){console.error("Error loading jobs:",q),alert("Failed to load jobs. Please try again.")}finally{a(!1)}},v=()=>{A({title:"",client:"",location:"",status:"scheduled",date:"",time:"",estimatedCost:"",duration:"",notes:""}),u(!1),w(null),d(null),B(null)},L=async()=>{if(N.title&&N.client)try{const q={name:N.title,title:N.title,client:N.client,location:N.location,status:N.status,date:N.date,time:N.time,estimatedCost:N.estimatedCost,duration:N.duration,notes:N.notes,estimateId:(H==null?void 0:H.id)||null};await Y0(q),v(),k()}catch(q){console.error("Error adding job:",q),alert("Failed to add job. Please try again.")}},M=async()=>{if(N.title&&N.client&&g)try{const{updateJob:q}=await Ou(async()=>{const{updateJob:de}=await Promise.resolve().then(()=>tx);return{updateJob:de}},void 0),X={name:N.title,title:N.title,client:N.client,location:N.location,status:N.status,date:N.date,time:N.time,estimatedCost:N.estimatedCost,duration:N.duration,notes:N.notes,estimateId:(H==null?void 0:H.id)||null};await q(g.id,X),v(),k()}catch(q){console.error("Error updating job:",q),alert("Failed to update job. Please try again.")}},$=async(q,X)=>{try{const{updateJob:de}=await Ou(async()=>{const{updateJob:we}=await Promise.resolve().then(()=>tx);return{updateJob:we}},void 0),me=t.find(we=>we.id===q);await de(q,{...me,status:X}),b(null),k()}catch(de){console.error("Error updating status:",de),alert("Failed to update status. Please try again.")}},oe=q=>{if(d(q),w(q),A({title:q.title||q.name,client:q.client,location:q.location||"",status:q.status,date:q.date||"",time:q.time||"",estimatedCost:q.estimatedCost||"",duration:q.duration||"",notes:q.notes||""}),q.estimateId){const X=z.find(de=>de.id===q.estimateId);X&&B(X)}else B(null)},se=async(q,X)=>{if(window.confirm(`Are you sure you want to delete "${X}"?`))try{await Uw(q),f&&f.id===q&&v(),k()}catch(de){console.error("Error deleting job:",de),alert("Failed to delete job. Please try again.")}},ie=q=>{q&&(A(X=>({...X,estimatedCost:q.total.toString(),estimateId:q.id})),B(q)),R(!1)},ye=async()=>{if(R(!1),c&&N.title&&N.client)try{const q={name:N.title,title:N.title,client:N.client,location:N.location,status:N.status,date:N.date,time:N.time,estimatedCost:N.estimatedCost,duration:N.duration,notes:N.notes},de={jobId:await Y0(q),jobName:N.title,jobClient:N.client};e&&e(de),v(),k()}catch(q){console.error("Error creating job:",q),alert("Failed to create job. Please try again.")}else if(f){const q={jobId:f.id,jobName:f.title||f.name,jobClient:f.client};e&&e(q)}else alert("Please fill in the job title and client name first.")},xe=q=>{e&&e({viewEstimateId:q})},ee=()=>{B(null),A(q=>({...q,estimatedCost:"",estimateId:null}))},D=t.filter(q=>{if(!re)return!0;const X=re.toLowerCase(),de=(q.title||q.name||"").toLowerCase(),me=(q.client||"").toLowerCase(),we=(q.location||"").toLowerCase(),Ae=(q.notes||"").toLowerCase();return de.includes(X)||me.includes(X)||we.includes(X)||Ae.includes(X)});return o?i.jsx("div",{style:{minHeight:"100vh",background:T.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("div",{style:{color:T.subtext},children:"Loading jobs..."})}):i.jsx("div",{className:"jobs-container",children:i.jsxs("div",{style:{minHeight:"100vh",background:T.bg,paddingBottom:"5rem"},children:[i.jsx(XE,{viewingJob:f,formData:N,setFormData:A,linkedEstimate:H,estimates:z,showEstimateMenu:V,setShowEstimateMenu:R,onSelectEstimate:ie,onCreateNewEstimate:ye,onViewEstimate:xe,onRemoveEstimate:ee,estimateMenuRef:U,onClose:v,onSave:M,onDelete:se,isDarkMode:r,colors:T}),i.jsxs("div",{style:{padding:"1rem"},children:[i.jsxs("div",{style:{marginBottom:"1rem",position:"relative"},children:[i.jsx("input",{type:"text",placeholder:"Search jobs...",value:re,onChange:q=>ce(q.target.value),style:{width:"100%",padding:"0.75rem",paddingLeft:"2.5rem",paddingRight:re?"2.5rem":"0.75rem",border:`1px solid ${T.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:T.inputBg,color:T.text,boxSizing:"border-box"}}),i.jsx(xx,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:T.subtext,pointerEvents:"none"}}),re&&i.jsx("button",{onClick:()=>ce(""),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:T.subtext,padding:"0.25rem",display:"flex",alignItems:"center"},children:i.jsx(Ax,{size:18})})]}),i.jsxs("div",{style:{background:T.cardBg,borderRadius:"0.75rem",border:`1px solid ${T.border}`,boxShadow:"none",marginBottom:"1rem",overflow:"hidden"},children:[i.jsxs("button",{onClick:()=>u(!c),style:{width:"100%",padding:"1rem",background:"transparent",border:"none",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",color:T.text},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:[i.jsx(La,{size:20}),"Add New Job"]}),i.jsx(d0,{size:20,style:{transform:c?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),c&&i.jsx("div",{style:{padding:"0 1rem 1rem 1rem",borderTop:`1px solid ${T.border}`},children:i.jsxs("div",{style:{paddingTop:"1rem"},children:[i.jsx(qw,{formData:N,setFormData:A,linkedEstimate:H,estimates:z,showEstimateMenu:V,setShowEstimateMenu:R,onSelectEstimate:ie,onCreateNewEstimate:ye,onViewEstimate:xe,onRemoveEstimate:ee,estimateMenuRef:U,isDarkMode:r,colors:T}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:L,disabled:!N.title||!N.client,style:{flex:1,padding:"0.75rem",background:!N.title||!N.client?T.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:!N.title||!N.client?"not-allowed":"pointer",opacity:!N.title||!N.client?.5:1},children:"Add Job"}),i.jsx("button",{onClick:v,style:{flex:1,padding:"0.75rem",background:"transparent",color:T.text,border:`1px solid ${T.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0 0.25rem"},children:[i.jsx("h3",{style:{margin:0,color:T.text,fontSize:"1.125rem",fontWeight:"600"},children:"Job List"}),i.jsxs("span",{style:{fontSize:"0.875rem",color:T.subtext,background:T.cardBg,padding:"0.25rem 0.75rem",borderRadius:"1rem",border:`1px solid ${T.border}`},children:[D.length," ",D.length===1?"job":"jobs",re&&` (${t.length} total)`]})]}),D.length===0?i.jsxs("div",{style:{background:T.cardBg,border:`1px solid ${T.border}`,borderRadius:"0.75rem",textAlign:"center",padding:"3rem 1rem",color:T.subtext},children:[i.jsx(Yc,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),i.jsx("p",{style:{margin:0,fontSize:"0.9375rem"},children:"No jobs yet. Add your first job above!"})]}):[...D].sort((q,X)=>!q.date&&!X.date?0:q.date?X.date?new Date(X.date)-new Date(q.date):-1:1).map(q=>i.jsx(YE,{job:q,statusConfig:F,statusDropdownOpen:C,setStatusDropdownOpen:b,onUpdateStatus:$,onViewJob:oe,onViewEstimate:X=>{X.estimateId&&e&&e({viewEstimateId:X.estimateId})},onViewInvoice:X=>{X.invoiceId&&console.log("View invoice:",X.invoiceId)},isDarkMode:r,colors:T},q.id))]})]})})},Hw=async()=>{try{const r=ti.currentUser;if(!r)throw new Error("No user logged in");const e=Ch(yl,"estimates"),t=Ow(e,eE("userId","==",r.uid)),n=await Mw(t),o=[];return n.forEach(a=>{var c;o.push({id:a.id,...a.data(),createdAt:((c=a.data().createdAt)==null?void 0:c.toDate())||new Date})}),o}catch(r){throw console.error("Error getting estimates:",r),r}},Gw=async r=>{try{const e=ti.currentUser;if(!e)throw new Error("No user logged in");const t=Ch(yl,"estimates");return(await Yg(t,{...r,userId:e.uid,createdAt:rd(),updatedAt:rd()})).id}catch(e){throw console.error("Error creating estimate:",e),e}},Kw=async(r,e)=>{try{if(!ti.currentUser)throw new Error("No user logged in");const n=hd(yl,"estimates",r);await Dw(n,{...e,updatedAt:rd()})}catch(t){throw console.error("Error updating estimate:",t),t}},Jw=async r=>{try{if(!ti.currentUser)throw new Error("No user logged in");const t=hd(yl,"estimates",r);await Ww(t)}catch(e){throw console.error("Error deleting estimate:",e),e}},eI=Object.freeze(Object.defineProperty({__proto__:null,createEstimate:Gw,deleteEstimate:Jw,getUserEstimates:Hw,updateEstimate:Kw},Symbol.toStringTag,{value:"Module"})),tI=({isDarkMode:r,jobs:e=[],onApplyToJob:t,pendingEstimateData:n,onClearPendingData:o,navigationData:a})=>{const[c,u]=pe.useState([]),[f,d]=pe.useState(!0),[g,w]=pe.useState(!1),[C,b]=pe.useState(null),[V,R]=pe.useState(null),[z,j]=pe.useState({name:"",laborHours:"",laborRate:"",materials:[],jobId:null}),[U,H]=pe.useState({name:"",cost:""}),B={bg:r?"#000000":"#f9fafb",cardBg:r?"#1a1a1a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#999999":"#6b7280",border:r?"#2a2a2a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"};pe.useEffect(()=>{const $=vp(ti,oe=>{oe?re():d(!1)});return()=>$()},[]),pe.useEffect(()=>{n&&(j({name:n.jobName||"",laborHours:"",laborRate:"",materials:[],jobId:n.jobId||null}),w(!0),o&&o())},[n,o]),pe.useEffect(()=>{if(a!=null&&a.viewEstimateId){const $=c.find(oe=>oe.id===a.viewEstimateId);$&&v($)}},[a,c]);const re=async()=>{d(!0);try{const $=await Hw();u($)}catch($){console.error("Error loading estimates:",$),alert("Failed to load estimates. Please try again.")}finally{d(!1)}},ce=($,oe,se)=>{const ie=(parseFloat($)||0)*(parseFloat(oe)||0),ye=se.reduce((xe,ee)=>xe+(parseFloat(ee.cost)||0),0);return ie+ye},N=ce(z.laborHours,z.laborRate,z.materials),A=()=>{U.name&&U.cost&&(j($=>({...$,materials:[...$.materials,{...U}]})),H({name:"",cost:""}))},T=$=>{j(oe=>({...oe,materials:oe.materials.filter((se,ie)=>ie!==$)}))},F=async()=>{if(z.name)try{const $=ce(z.laborHours,z.laborRate,z.materials),oe={name:z.name,laborHours:parseFloat(z.laborHours)||0,laborRate:parseFloat(z.laborRate)||0,materials:z.materials,total:$,jobId:z.jobId||null};C?await Kw(C.id,oe):await Gw(oe),k(),re()}catch($){console.error("Error saving estimate:",$),alert("Failed to save estimate. Please try again.")}},k=()=>{j({name:"",laborHours:"",laborRate:"",materials:[],jobId:null}),H({name:"",cost:""}),w(!1),b(null)},v=$=>{b($),j({name:$.name,laborHours:$.laborHours.toString(),laborRate:$.laborRate.toString(),materials:[...$.materials],jobId:$.jobId||null}),w(!0),window.scrollTo({top:0,behavior:"smooth"})},L=async($,oe)=>{if(window.confirm(`Delete "${oe}"?`))try{await Jw($),re()}catch(se){console.error("Error deleting estimate:",se),alert("Failed to delete estimate. Please try again.")}},M=($,oe)=>{t&&t($,oe),R(null)};return f?i.jsx("div",{style:{minHeight:"100vh",background:B.bg,display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:"5rem"},children:i.jsx("div",{style:{color:B.subtext},children:"Loading estimates..."})}):i.jsx("div",{style:{background:B.bg,minHeight:"100vh",paddingBottom:"5rem"},children:i.jsxs("div",{style:{padding:"1rem"},children:[i.jsxs("div",{style:{background:B.cardBg,borderRadius:"0.75rem",border:`1px solid ${B.border}`,boxShadow:"none",marginBottom:"1rem",overflow:"hidden"},children:[i.jsxs("button",{onClick:()=>w(!g),style:{width:"100%",padding:"1rem",background:"transparent",border:"none",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",color:B.text},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:[i.jsx(La,{size:20}),C?"Edit Estimate":"New Estimate"]}),i.jsx(d0,{size:20,style:{transform:g?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),g&&i.jsx("div",{style:{padding:"0 1rem 1rem 1rem",borderTop:`1px solid ${B.border}`},children:i.jsxs("div",{style:{paddingTop:"1rem"},children:[i.jsx("input",{type:"text",placeholder:"Estimate Name *",value:z.name,onChange:$=>j(oe=>({...oe,name:$.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${B.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:B.inputBg,color:B.text,boxSizing:"border-box"}}),i.jsx("h4",{style:{margin:"0 0 0.5rem 0",fontSize:"0.875rem",fontWeight:"600",color:B.text},children:"Labor"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[i.jsx("input",{type:"number",placeholder:"Hours",value:z.laborHours,onChange:$=>j(oe=>({...oe,laborHours:$.target.value})),style:{padding:"0.75rem",border:`1px solid ${B.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:B.inputBg,color:B.text,boxSizing:"border-box"}}),i.jsx("input",{type:"number",placeholder:"Rate ($/hr)",value:z.laborRate,onChange:$=>j(oe=>({...oe,laborRate:$.target.value})),style:{padding:"0.75rem",border:`1px solid ${B.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:B.inputBg,color:B.text,boxSizing:"border-box"}})]}),i.jsx("h4",{style:{margin:"1rem 0 0.5rem 0",fontSize:"0.875rem",fontWeight:"600",color:B.text},children:"Materials"}),z.materials.map(($,oe)=>i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem",padding:"0.75rem",background:B.bg,borderRadius:"0.5rem"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:B.text},children:$.name}),i.jsxs("div",{style:{fontSize:"0.75rem",color:B.subtext},children:["$",parseFloat($.cost).toFixed(2)]})]}),i.jsx("button",{onClick:()=>T(oe),style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",padding:"0.25rem"},children:i.jsx(Mc,{size:16})})]},oe)),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[i.jsx("input",{type:"text",placeholder:"Material name",value:U.name,onChange:$=>H(oe=>({...oe,name:$.target.value})),style:{flex:1,padding:"0.75rem",border:`1px solid ${B.border}`,borderRadius:"0.5rem",fontSize:"0.875rem",background:B.inputBg,color:B.text,boxSizing:"border-box"}}),i.jsx("input",{type:"number",placeholder:"Cost",value:U.cost,onChange:$=>H(oe=>({...oe,cost:$.target.value})),style:{width:"100px",padding:"0.75rem",border:`1px solid ${B.border}`,borderRadius:"0.5rem",fontSize:"0.875rem",background:B.inputBg,color:B.text,boxSizing:"border-box"}}),i.jsx("button",{onClick:A,style:{padding:"0.75rem",background:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center"},children:i.jsx(La,{size:16})})]}),i.jsx("div",{style:{padding:"0.75rem",background:B.bg,borderRadius:"0.5rem",marginBottom:"0.75rem"},children:i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.125rem",fontWeight:"600",color:B.text},children:[i.jsx("span",{children:"Total:"}),i.jsxs("span",{children:["$",N.toFixed(2)]})]})}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsxs("button",{onClick:F,disabled:!z.name,style:{flex:1,padding:"0.75rem",background:z.name?"#2563eb":B.border,color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:z.name?"pointer":"not-allowed",opacity:z.name?1:.5},children:[C?"Update":"Save"," Estimate"]}),i.jsx("button",{onClick:k,style:{flex:1,padding:"0.75rem",background:"transparent",color:B.text,border:`1px solid ${B.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0 0.25rem"},children:[i.jsx("h3",{style:{margin:0,color:B.text,fontSize:"1.125rem",fontWeight:"600"},children:"Saved Estimates"}),i.jsx("span",{style:{fontSize:"0.875rem",color:B.subtext,background:B.cardBg,padding:"0.25rem 0.75rem",borderRadius:"1rem",border:`1px solid ${B.border}`},children:c.length})]}),c.length===0?i.jsxs("div",{style:{background:B.cardBg,border:`1px solid ${B.border}`,borderRadius:"0.75rem",textAlign:"center",padding:"3rem 1rem",color:B.subtext},children:[i.jsx(fh,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),i.jsx("p",{style:{margin:0,fontSize:"0.9375rem"},children:"No estimates yet. Create one above!"})]}):c.map($=>{var oe;return i.jsxs("div",{style:{background:B.cardBg,border:`1px solid ${B.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"0.75rem",boxShadow:"none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[i.jsxs("div",{children:[i.jsx("h3",{style:{margin:"0 0 0.25rem 0",color:B.text,fontSize:"1rem",fontWeight:"600"},children:$.name}),i.jsx("p",{style:{margin:0,color:B.subtext,fontSize:"0.75rem"},children:((oe=$.createdAt)==null?void 0:oe.toLocaleDateString())||"N/A"})]}),i.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10b981"},children:["$",$.total.toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:B.subtext,fontSize:"0.875rem"},children:[i.jsx(X0,{size:16}),i.jsxs("span",{children:[$.laborHours,"h  $",$.laborRate,"/hr = $",($.laborHours*$.laborRate).toFixed(2)]})]}),$.materials.length>0&&i.jsx("div",{style:{padding:"0.75rem",background:B.bg,borderRadius:"0.5rem",marginBottom:"0.75rem"},children:$.materials.map((se,ie)=>i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem",color:B.subtext,marginBottom:ie<$.materials.length-1?"0.25rem":0},children:[i.jsx("span",{children:se.name}),i.jsxs("span",{children:["$",parseFloat(se.cost).toFixed(2)]})]},ie))}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsxs("div",{style:{position:"relative",flex:1},children:[i.jsxs("button",{onClick:()=>R(V===$.id?null:$.id),style:{width:"100%",padding:"0.5rem",background:"#2563eb",border:"none",borderRadius:"0.5rem",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.875rem",fontWeight:"500"},children:[i.jsx(Z0,{size:16}),"Add to Job",i.jsx(d0,{size:14})]}),V===$.id&&i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:()=>R(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998}}),i.jsxs("div",{style:{position:"absolute",bottom:"100%",left:0,right:0,marginBottom:"0.5rem",background:B.cardBg,border:`1px solid ${B.border}`,borderRadius:"0.5rem",boxShadow:r?"0 4px 12px rgba(0,0,0,0.6)":"0 4px 12px rgba(0,0,0,0.15)",maxHeight:"200px",overflowY:"auto",zIndex:9999},children:[i.jsx("button",{onClick:()=>M($,"new"),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${B.border}`,color:"#2563eb",cursor:"pointer",textAlign:"left",fontSize:"0.875rem",fontWeight:"500"},children:"+ Create New Job"}),e.map(se=>i.jsx("button",{onClick:()=>M($,se.id),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${B.border}`,color:B.text,cursor:"pointer",textAlign:"left",fontSize:"0.875rem"},children:se.title||se.name},se.id))]})]})]}),i.jsx("button",{onClick:()=>v($),style:{padding:"0.5rem",background:"transparent",border:`1px solid ${B.border}`,borderRadius:"0.5rem",color:B.text,cursor:"pointer",display:"flex",alignItems:"center"},children:i.jsx(M3,{size:16})}),i.jsx("button",{onClick:()=>L($.id,$.name),style:{padding:"0.5rem",background:"transparent",border:"1px solid #ef4444",borderRadius:"0.5rem",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center"},children:i.jsx(Mc,{size:16})})]})]},$.id)})]})})};function rI({isDarkMode:r=!1}){const[e,t]=pe.useState([{id:1,invoiceNumber:"INV-001",client:"ABC Construction",date:"2025-10-01",amount:2500,status:"Paid"},{id:2,invoiceNumber:"INV-002",client:"Smith Residence",date:"2025-10-10",amount:1200,status:"Pending"},{id:3,invoiceNumber:"INV-003",client:"Downtown Office Building",date:"2025-10-12",amount:4800,status:"Overdue"}]),n={bg:r?"#000000":"#f9fafb",cardBg:r?"#111111":"#ffffff",border:r?"#1a1a1a":"#e5e7eb",text:r?"#ffffff":"#111827",textSecondary:r?"#9ca3af":"#6b7280",buttonBg:"#3b82f6",buttonText:"#ffffff",paidBg:r?"#064e3b":"#d1fae5",paidText:r?"#6ee7b7":"#065f46",pendingBg:r?"#78350f":"#fef3c7",pendingText:r?"#fcd34d":"#92400e",overdueBg:r?"#7f1d1d":"#fee2e2",overdueText:r?"#fca5a5":"#991b1b"},o=a=>{switch(a){case"Paid":return{background:n.paidBg,color:n.paidText};case"Pending":return{background:n.pendingBg,color:n.pendingText};case"Overdue":return{background:n.overdueBg,color:n.overdueText};default:return{}}};return i.jsx("div",{style:{minHeight:"100vh",background:n.bg,paddingTop:"1rem"},children:i.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[i.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Total"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.text},children:e.length})]}),i.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Paid"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.paidText},children:e.filter(a=>a.status==="Paid").length})]}),i.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Pending"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.pendingText},children:e.filter(a=>a.status==="Pending").length})]})]}),i.jsxs("button",{style:{width:"100%",background:n.buttonBg,color:n.buttonText,border:"none",borderRadius:"0.5rem",padding:"0.875rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[i.jsx(La,{size:20}),i.jsx("span",{children:"Create New Invoice"})]}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.length===0?i.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"3rem 1rem",textAlign:"center"},children:[i.jsx(fh,{size:48,color:n.textSecondary,style:{margin:"0 auto 1rem"}}),i.jsx("p",{style:{color:n.textSecondary,fontSize:"0.875rem",margin:0},children:"No invoices yet. Create your first invoice!"})]}):e.map(a=>i.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:c=>{c.currentTarget.style.transform="translateY(-2px)",c.currentTarget.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"},onMouseLeave:c=>{c.currentTarget.style.transform="translateY(0)",c.currentTarget.style.boxShadow="none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:n.text,marginBottom:"0.25rem"},children:a.invoiceNumber}),i.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary},children:a.client})]}),i.jsx("div",{style:{...o(a.status),padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.75rem",fontWeight:"600"},children:a.status})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"0.75rem",borderTop:`1px solid ${n.border}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary},children:new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),i.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"600",color:n.text},children:["$",a.amount.toFixed(2)]})]})]},a.id))})]})})}function nI({headerInfo:r,isDarkMode:e,headerVisible:t,showMenu:n,setShowMenu:o,onNavigate:a,setIsDarkMode:c}){const u=r.icon,f={headerBorder:e?"#2a2a2a":"#e5e7eb",menuBg:e?"#1a1a1a":"white",cardBorder:e?"#2a2a2a":"#e5e7eb",cardText:e?"#ffffff":"#111827"};return i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,height:"env(safe-area-inset-top)",background:e?"#1a1a1a":"#2563eb",zIndex:101}}),i.jsxs("div",{style:{background:e?"#1a1a1a":"#2563eb",padding:"0.5rem 1rem",borderBottom:`1px solid ${f.headerBorder}`,position:"fixed",top:"env(safe-area-inset-top)",left:0,right:0,zIndex:100,display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:"48px",transform:t?"translateY(0)":"translateY(calc(-100% - env(safe-area-inset-top)))",transition:"transform 0.3s ease-in-out",paddingLeft:"max(1rem, env(safe-area-inset-left))",paddingRight:"max(1rem, env(safe-area-inset-right))"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(u,{size:20,color:"white",strokeWidth:2}),i.jsx("h1",{style:{fontSize:"1rem",fontWeight:"600",color:"white",margin:0,letterSpacing:"-0.01em"},children:r.title})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:()=>o(!n),style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"40px",minHeight:"40px",lineHeight:1},children:i.jsx(k3,{size:24,color:"white",style:{display:"block",flexShrink:0}})}),n&&i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:()=>o(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:998}}),i.jsx("div",{style:{position:"absolute",top:"2.5rem",right:0,zIndex:999,background:f.menuBg,border:`1px solid ${f.cardBorder}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",minWidth:"200px",overflow:"hidden"},children:i.jsxs("div",{style:{padding:"0.5rem 0"},children:[i.jsxs("button",{onClick:()=>{a("profile"),o(!1)},style:{width:"100%",padding:"0.75rem 1rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:f.cardText,fontSize:"0.875rem",fontWeight:"500"},onMouseEnter:d=>d.target.style.background=e?"#374151":"#f3f4f6",onMouseLeave:d=>d.target.style.background="transparent",children:[i.jsx(Uf,{size:16}),i.jsx("span",{children:"Profile"})]}),i.jsx("div",{style:{height:"1px",background:f.cardBorder,margin:"0.5rem 0"}}),i.jsxs("button",{onClick:()=>{c(!e),o(!1)},style:{width:"100%",padding:"0.75rem 1rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",color:f.cardText,fontSize:"0.875rem",fontWeight:"500"},onMouseEnter:d=>d.target.style.background=e?"#374151":"#f3f4f6",onMouseLeave:d=>d.target.style.background="transparent",children:[i.jsx("span",{children:e?"Light Mode":"Dark Mode"}),i.jsx("span",{children:e?"":""})]})]})})]})]})]})]})}function iI(){const[r,e]=pe.useState(()=>localStorage.getItem("activeView")||null),[t,n]=pe.useState(()=>localStorage.getItem("isDarkMode")==="true"),[o,a]=pe.useState(!1),[c,u]=pe.useState(!1),[f,d]=pe.useState(null),[g,w]=pe.useState(null),[C,b]=pe.useState(!0),[V,R]=pe.useState(0);pe.useEffect(()=>{const N=A=>{A.state&&A.state.view!==void 0&&e(A.state.view)};return window.addEventListener("popstate",N),window.history.state||window.history.replaceState({view:r},""),()=>{window.removeEventListener("popstate",N)}},[]),pe.useEffect(()=>{window.history.state&&window.history.state.view!==r&&window.history.pushState({view:r},"")},[r]),pe.useEffect(()=>{r===null?localStorage.setItem("activeView",""):localStorage.setItem("activeView",r)},[r]),pe.useEffect(()=>{localStorage.setItem("isDarkMode",t)},[t]),pe.useEffect(()=>{const N=()=>{const T=document.querySelector('meta[name="theme-color"]');T&&T.setAttribute("content",t?"#1a1a1a":"#2563eb")};N();const A=()=>{document.visibilityState==="visible"&&N()};return document.addEventListener("visibilitychange",A),()=>{document.removeEventListener("visibilitychange",A)}},[t]),pe.useEffect(()=>{window.scrollTo(0,0)},[r]);const z=pe.useRef(null);pe.useEffect(()=>{const N=()=>{const A=window.scrollY;A<10?b(!0):A>V&&A>80?b(!1):A<V&&b(!0),R(A)};return window.addEventListener("scroll",N,{passive:!0}),()=>window.removeEventListener("scroll",N)},[V]),pe.useEffect(()=>{r!=="estimates"&&w(null)},[r]);const j=(N,A=null)=>{N==="home"?e(null):N==="calculators"?e("calculators"):N==="profile"?e("profile"):N==="jobs"?e("jobs"):N==="estimates"?(e("estimates"),A&&(A.viewEstimateId?w(A):d(A))):N==="invoices"&&e("invoices")},U=()=>{window.history.back()},H=(N,A)=>{A==="new"?(d(N),e("jobs")):(d({...N,jobId:A}),e("jobs"))},B=()=>{const N=()=>{u(!0),setTimeout(()=>u(!1),3e3)};switch(r){case"voltage-drop":return i.jsx(lE,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"ohms-law":return i.jsx(hE,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"box-fill":return i.jsx(fE,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"conduit-fill":return i.jsx(pE,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"ampacity":return i.jsx(mE,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"motor-calculations":return i.jsx(vE,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"load-calculations":return i.jsx(SE,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"transformer-sizing":return i.jsx(_E,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"service-entrance":return i.jsx(TE,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"grounding-bonding":return i.jsx(jE,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"conduit-bending":return i.jsx(NE,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"lighting":return i.jsx(zE,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"receptacles":return i.jsx(DE,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"vfd-sizing":return i.jsx($E,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"reactance-impedance":return i.jsx(UE,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"power-factor":return i.jsx(qE,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"power-triangle":return i.jsx(HE,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"three-phase-power":return i.jsx(GE,{ref:z,isDarkMode:t,onBack:U,onExportSuccess:N});case"calculators":return i.jsx(Q3,{isDarkMode:t,onSelectCalculator:e});case"profile":return i.jsx(JE,{isDarkMode:t});case"jobs":return i.jsx(ZE,{isDarkMode:t,onNavigateToEstimates:A=>j("estimates",A)});case"estimates":return i.jsx(tI,{isDarkMode:t,onApplyToJob:H,pendingEstimateData:f,onClearPendingData:()=>d(null),navigationData:g});case"invoices":return i.jsx(rI,{isDarkMode:t});default:return i.jsx(KE,{isDarkMode:t})}},ce=r?r==="calculators"?{title:"Calculator Menu",icon:Zd}:r==="profile"?{title:"Profile",icon:Uf}:r==="jobs"?{title:"Job Log",icon:Yc}:r==="estimates"?{title:"Estimates",icon:fh}:r==="invoices"?{title:"Invoices",icon:eg}:{"voltage-drop":{title:"Voltage Drop",icon:_x},"ohms-law":{title:"Ohm's Law",icon:bx},"reactance-impedance":{title:"Reactance & Impedance",icon:px},"power-factor":{title:"Power Factor Correction",icon:Sx},"box-fill":{title:"Box Fill",icon:mx},"conduit-fill":{title:"Conduit Fill",icon:ax},ampacity:{title:"Ampacity",icon:ox},"motor-calculations":{title:"Motors",icon:vx},"load-calculations":{title:"Load Calculations",icon:sx},"transformer-sizing":{title:"Transformers",icon:yx},"service-entrance":{title:"Service Entrance Sizing",icon:ix},"grounding-bonding":{title:"Grounding & Bonding",icon:ux},"conduit-bending":{title:"Conduit Bending",icon:lx},lighting:{title:"Lighting",icon:hx},receptacles:{title:"Receptacles",icon:gx},"vfd-sizing":{title:"VFD Sizing",icon:cx},"power-triangle":{title:"Power Triangle",icon:Tx},"three-phase-power":{title:"Three-Phase Power",icon:wx}}[r]||{title:"Electrician's Toolkit",icon:Zd}:{title:"Home",icon:dx};return i.jsxs("div",{className:"App",style:{background:t?"#000000":"#ffffff",overscrollBehavior:"none"},children:[i.jsx(nI,{headerInfo:ce,isDarkMode:t,headerVisible:C,showMenu:o,setShowMenu:a,onNavigate:j,setIsDarkMode:n}),i.jsx("div",{style:{paddingBottom:"calc(65px + env(safe-area-inset-bottom))",paddingTop:"calc(48px + env(safe-area-inset-top))",paddingLeft:r==="calculators"?"0":"env(safe-area-inset-left)",paddingRight:r==="calculators"?"0":"env(safe-area-inset-right)",position:"relative",minHeight:"100vh",boxSizing:"border-box"},children:r?i.jsx("div",{style:{minHeight:"calc(100vh - 3.5rem)",padding:r==="calculators"||r==="jobs"||r==="profile"||r==="estimates"||r==="invoices"?"0":"1rem",paddingBottom:"5rem"},children:B()}):B()}),c&&i.jsxs("div",{style:{position:"fixed",bottom:"6rem",left:"50%",transform:"translateX(-50%)",background:"#10b981",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",animation:"slideUp 0.3s ease-out",maxWidth:"90%",textAlign:"center"},children:[i.jsx("span",{style:{fontSize:"1.25rem"},children:""}),i.jsx("span",{children:"PDF saved to Downloads"})]}),i.jsx(WE,{onNavigate:j,currentView:r==="jobs"?"jobs":r==="estimates"?"estimates":r==="invoices"?"invoices":r==="profile"?"profile":r==="calculators"||r?"calculators":"home",isDarkMode:t})]})}const oI=MS.createRoot(document.getElementById("root"));oI.render(i.jsx(NS.StrictMode,{children:i.jsx(iI,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{if(window.location.hostname==="localhost"){console.log("Skipping service worker on localhost");return}navigator.serviceWorker.register("/electrician-toolkit/service-worker.js").then(r=>{console.log("ServiceWorker registration successful:",r.scope)}).catch(r=>{console.log("ServiceWorker registration failed:",r)})});export{qr as _,aI as c,rx as g};
